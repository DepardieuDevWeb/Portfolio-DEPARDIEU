var Zte=Object.defineProperty;var JJ=C=>{throw TypeError(C)};var qte=(C,f,y)=>f in C?Zte(C,f,{enumerable:!0,configurable:!0,writable:!0,value:y}):C[f]=y;var on=(C,f,y)=>qte(C,typeof f!="symbol"?f+"":f,y),vX=(C,f,y)=>f.has(C)||JJ("Cannot "+y);var ro=(C,f,y)=>(vX(C,f,"read from private field"),y?y.call(C):f.get(C)),Ts=(C,f,y)=>f.has(C)?JJ("Cannot add the same private member more than once"):f instanceof WeakSet?f.add(C):f.set(C,y),mr=(C,f,y,E)=>(vX(C,f,"write to private field"),E?E.call(C,y):f.set(C,y),y),po=(C,f,y)=>(vX(C,f,"access private method"),y);function YQ(C,f){return function(){return C.apply(f,arguments)}}const{toString:jte}=Object.prototype,{getPrototypeOf:jX}=Object,vH=(C=>f=>{const y=jte.call(f);return C[y]||(C[y]=y.slice(8,-1).toLowerCase())})(Object.create(null)),qh=C=>(C=C.toLowerCase(),f=>vH(f)===C),yH=C=>f=>typeof f===C,{isArray:U_}=Array,QP=yH("undefined");function Gte(C){return C!==null&&!QP(C)&&C.constructor!==null&&!QP(C.constructor)&&_m(C.constructor.isBuffer)&&C.constructor.isBuffer(C)}const JQ=qh("ArrayBuffer");function Kte(C){let f;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?f=ArrayBuffer.isView(C):f=C&&C.buffer&&JQ(C.buffer),f}const Xte=yH("string"),_m=yH("function"),QQ=yH("number"),CH=C=>C!==null&&typeof C=="object",Yte=C=>C===!0||C===!1,q7=C=>{if(vH(C)!=="object")return!1;const f=jX(C);return(f===null||f===Object.prototype||Object.getPrototypeOf(f)===null)&&!(Symbol.toStringTag in C)&&!(Symbol.iterator in C)},Jte=qh("Date"),Qte=qh("File"),ene=qh("Blob"),tne=qh("FileList"),nne=C=>CH(C)&&_m(C.pipe),one=C=>{let f;return C&&(typeof FormData=="function"&&C instanceof FormData||_m(C.append)&&((f=vH(C))==="formdata"||f==="object"&&_m(C.toString)&&C.toString()==="[object FormData]"))},sne=qh("URLSearchParams"),[rne,ane,ine,cne]=["ReadableStream","Request","Response","Headers"].map(qh),lne=C=>C.trim?C.trim():C.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function hN(C,f,{allOwnKeys:y=!1}={}){if(C===null||typeof C>"u")return;let E,N;if(typeof C!="object"&&(C=[C]),U_(C))for(E=0,N=C.length;E<N;E++)f.call(null,C[E],E,C);else{const U=y?Object.getOwnPropertyNames(C):Object.keys(C),Q=U.length;let te;for(E=0;E<Q;E++)te=U[E],f.call(null,C[te],te,C)}}function eee(C,f){f=f.toLowerCase();const y=Object.keys(C);let E=y.length,N;for(;E-- >0;)if(N=y[E],f===N.toLowerCase())return N;return null}const gx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,tee=C=>!QP(C)&&C!==gx;function MX(){const{caseless:C}=tee(this)&&this||{},f={},y=(E,N)=>{const U=C&&eee(f,N)||N;q7(f[U])&&q7(E)?f[U]=MX(f[U],E):q7(E)?f[U]=MX({},E):U_(E)?f[U]=E.slice():f[U]=E};for(let E=0,N=arguments.length;E<N;E++)arguments[E]&&hN(arguments[E],y);return f}const une=(C,f,y,{allOwnKeys:E}={})=>(hN(f,(N,U)=>{y&&_m(N)?C[U]=YQ(N,y):C[U]=N},{allOwnKeys:E}),C),dne=C=>(C.charCodeAt(0)===65279&&(C=C.slice(1)),C),mne=(C,f,y,E)=>{C.prototype=Object.create(f.prototype,E),C.prototype.constructor=C,Object.defineProperty(C,"super",{value:f.prototype}),y&&Object.assign(C.prototype,y)},fne=(C,f,y,E)=>{let N,U,Q;const te={};if(f=f||{},C==null)return f;do{for(N=Object.getOwnPropertyNames(C),U=N.length;U-- >0;)Q=N[U],(!E||E(Q,C,f))&&!te[Q]&&(f[Q]=C[Q],te[Q]=!0);C=y!==!1&&jX(C)}while(C&&(!y||y(C,f))&&C!==Object.prototype);return f},hne=(C,f,y)=>{C=String(C),(y===void 0||y>C.length)&&(y=C.length),y-=f.length;const E=C.indexOf(f,y);return E!==-1&&E===y},gne=C=>{if(!C)return null;if(U_(C))return C;let f=C.length;if(!QQ(f))return null;const y=new Array(f);for(;f-- >0;)y[f]=C[f];return y},pne=(C=>f=>C&&f instanceof C)(typeof Uint8Array<"u"&&jX(Uint8Array)),bne=(C,f)=>{const E=(C&&C[Symbol.iterator]).call(C);let N;for(;(N=E.next())&&!N.done;){const U=N.value;f.call(C,U[0],U[1])}},vne=(C,f)=>{let y;const E=[];for(;(y=C.exec(f))!==null;)E.push(y);return E},yne=qh("HTMLFormElement"),Cne=C=>C.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(y,E,N){return E.toUpperCase()+N}),QJ=(({hasOwnProperty:C})=>(f,y)=>C.call(f,y))(Object.prototype),Sne=qh("RegExp"),nee=(C,f)=>{const y=Object.getOwnPropertyDescriptors(C),E={};hN(y,(N,U)=>{let Q;(Q=f(N,U,C))!==!1&&(E[U]=Q||N)}),Object.defineProperties(C,E)},wne=C=>{nee(C,(f,y)=>{if(_m(C)&&["arguments","caller","callee"].indexOf(y)!==-1)return!1;const E=C[y];if(_m(E)){if(f.enumerable=!1,"writable"in f){f.writable=!1;return}f.set||(f.set=()=>{throw Error("Can not rewrite read-only method '"+y+"'")})}})},xne=(C,f)=>{const y={},E=N=>{N.forEach(U=>{y[U]=!0})};return U_(C)?E(C):E(String(C).split(f)),y},Ene=()=>{},Tne=(C,f)=>C!=null&&Number.isFinite(C=+C)?C:f;function kne(C){return!!(C&&_m(C.append)&&C[Symbol.toStringTag]==="FormData"&&C[Symbol.iterator])}const _ne=C=>{const f=new Array(10),y=(E,N)=>{if(CH(E)){if(f.indexOf(E)>=0)return;if(!("toJSON"in E)){f[N]=E;const U=U_(E)?[]:{};return hN(E,(Q,te)=>{const Ce=y(Q,N+1);!QP(Ce)&&(U[te]=Ce)}),f[N]=void 0,U}}return E};return y(C,0)},Ane=qh("AsyncFunction"),One=C=>C&&(CH(C)||_m(C))&&_m(C.then)&&_m(C.catch),oee=((C,f)=>C?setImmediate:f?((y,E)=>(gx.addEventListener("message",({source:N,data:U})=>{N===gx&&U===y&&E.length&&E.shift()()},!1),N=>{E.push(N),gx.postMessage(y,"*")}))(`axios@${Math.random()}`,[]):y=>setTimeout(y))(typeof setImmediate=="function",_m(gx.postMessage)),Rne=typeof queueMicrotask<"u"?queueMicrotask.bind(gx):typeof process<"u"&&process.nextTick||oee,ht={isArray:U_,isArrayBuffer:JQ,isBuffer:Gte,isFormData:one,isArrayBufferView:Kte,isString:Xte,isNumber:QQ,isBoolean:Yte,isObject:CH,isPlainObject:q7,isReadableStream:rne,isRequest:ane,isResponse:ine,isHeaders:cne,isUndefined:QP,isDate:Jte,isFile:Qte,isBlob:ene,isRegExp:Sne,isFunction:_m,isStream:nne,isURLSearchParams:sne,isTypedArray:pne,isFileList:tne,forEach:hN,merge:MX,extend:une,trim:lne,stripBOM:dne,inherits:mne,toFlatObject:fne,kindOf:vH,kindOfTest:qh,endsWith:hne,toArray:gne,forEachEntry:bne,matchAll:vne,isHTMLForm:yne,hasOwnProperty:QJ,hasOwnProp:QJ,reduceDescriptors:nee,freezeMethods:wne,toObjectSet:xne,toCamelCase:Cne,noop:Ene,toFiniteNumber:Tne,findKey:eee,global:gx,isContextDefined:tee,isSpecCompliantForm:kne,toJSONObject:_ne,isAsyncFn:Ane,isThenable:One,setImmediate:oee,asap:Rne};function Ro(C,f,y,E,N){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=C,this.name="AxiosError",f&&(this.code=f),y&&(this.config=y),E&&(this.request=E),N&&(this.response=N,this.status=N.status?N.status:null)}ht.inherits(Ro,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ht.toJSONObject(this.config),code:this.code,status:this.status}}});const see=Ro.prototype,ree={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(C=>{ree[C]={value:C}});Object.defineProperties(Ro,ree);Object.defineProperty(see,"isAxiosError",{value:!0});Ro.from=(C,f,y,E,N,U)=>{const Q=Object.create(see);return ht.toFlatObject(C,Q,function(Ce){return Ce!==Error.prototype},te=>te!=="isAxiosError"),Ro.call(Q,C.message,f,y,E,N),Q.cause=C,Q.name=C.name,U&&Object.assign(Q,U),Q};const Dne=null;function PX(C){return ht.isPlainObject(C)||ht.isArray(C)}function aee(C){return ht.endsWith(C,"[]")?C.slice(0,-2):C}function eQ(C,f,y){return C?C.concat(f).map(function(N,U){return N=aee(N),!y&&U?"["+N+"]":N}).join(y?".":""):f}function Mne(C){return ht.isArray(C)&&!C.some(PX)}const Pne=ht.toFlatObject(ht,{},null,function(f){return/^is[A-Z]/.test(f)});function SH(C,f,y){if(!ht.isObject(C))throw new TypeError("target must be an object");f=f||new FormData,y=ht.toFlatObject(y,{metaTokens:!0,dots:!1,indexes:!1},!1,function(st,Ne){return!ht.isUndefined(Ne[st])});const E=y.metaTokens,N=y.visitor||Ie,U=y.dots,Q=y.indexes,Ce=(y.Blob||typeof Blob<"u"&&Blob)&&ht.isSpecCompliantForm(f);if(!ht.isFunction(N))throw new TypeError("visitor must be a function");function _e(ot){if(ot===null)return"";if(ht.isDate(ot))return ot.toISOString();if(!Ce&&ht.isBlob(ot))throw new Ro("Blob is not supported. Use a Buffer instead.");return ht.isArrayBuffer(ot)||ht.isTypedArray(ot)?Ce&&typeof Blob=="function"?new Blob([ot]):Buffer.from(ot):ot}function Ie(ot,st,Ne){let Vt=ot;if(ot&&!Ne&&typeof ot=="object"){if(ht.endsWith(st,"{}"))st=E?st:st.slice(0,-2),ot=JSON.stringify(ot);else if(ht.isArray(ot)&&Mne(ot)||(ht.isFileList(ot)||ht.endsWith(st,"[]"))&&(Vt=ht.toArray(ot)))return st=aee(st),Vt.forEach(function(Y,we){!(ht.isUndefined(Y)||Y===null)&&f.append(Q===!0?eQ([st],we,U):Q===null?st:st+"[]",_e(Y))}),!1}return PX(ot)?!0:(f.append(eQ(Ne,st,U),_e(ot)),!1)}const nt=[],pt=Object.assign(Pne,{defaultVisitor:Ie,convertValue:_e,isVisitable:PX});function Ht(ot,st){if(!ht.isUndefined(ot)){if(nt.indexOf(ot)!==-1)throw Error("Circular reference detected in "+st.join("."));nt.push(ot),ht.forEach(ot,function(Vt,Oe){(!(ht.isUndefined(Vt)||Vt===null)&&N.call(f,Vt,ht.isString(Oe)?Oe.trim():Oe,st,pt))===!0&&Ht(Vt,st?st.concat(Oe):[Oe])}),nt.pop()}}if(!ht.isObject(C))throw new TypeError("data must be an object");return Ht(C),f}function tQ(C){const f={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(C).replace(/[!'()~]|%20|%00/g,function(E){return f[E]})}function GX(C,f){this._pairs=[],C&&SH(C,this,f)}const iee=GX.prototype;iee.append=function(f,y){this._pairs.push([f,y])};iee.toString=function(f){const y=f?function(E){return f.call(this,E,tQ)}:tQ;return this._pairs.map(function(N){return y(N[0])+"="+y(N[1])},"").join("&")};function Nne(C){return encodeURIComponent(C).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function cee(C,f,y){if(!f)return C;const E=y&&y.encode||Nne;ht.isFunction(y)&&(y={serialize:y});const N=y&&y.serialize;let U;if(N?U=N(f,y):U=ht.isURLSearchParams(f)?f.toString():new GX(f,y).toString(E),U){const Q=C.indexOf("#");Q!==-1&&(C=C.slice(0,Q)),C+=(C.indexOf("?")===-1?"?":"&")+U}return C}class nQ{constructor(){this.handlers=[]}use(f,y,E){return this.handlers.push({fulfilled:f,rejected:y,synchronous:E?E.synchronous:!1,runWhen:E?E.runWhen:null}),this.handlers.length-1}eject(f){this.handlers[f]&&(this.handlers[f]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(f){ht.forEach(this.handlers,function(E){E!==null&&f(E)})}}const lee={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Bne=typeof URLSearchParams<"u"?URLSearchParams:GX,Lne=typeof FormData<"u"?FormData:null,Ine=typeof Blob<"u"?Blob:null,Fne={isBrowser:!0,classes:{URLSearchParams:Bne,FormData:Lne,Blob:Ine},protocols:["http","https","file","blob","url","data"]},KX=typeof window<"u"&&typeof document<"u",NX=typeof navigator=="object"&&navigator||void 0,$ne=KX&&(!NX||["ReactNative","NativeScript","NS"].indexOf(NX.product)<0),Hne=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Vne=KX&&window.location.href||"http://localhost",zne=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:KX,hasStandardBrowserEnv:$ne,hasStandardBrowserWebWorkerEnv:Hne,navigator:NX,origin:Vne},Symbol.toStringTag,{value:"Module"})),$l={...zne,...Fne};function Une(C,f){return SH(C,new $l.classes.URLSearchParams,Object.assign({visitor:function(y,E,N,U){return $l.isNode&&ht.isBuffer(y)?(this.append(E,y.toString("base64")),!1):U.defaultVisitor.apply(this,arguments)}},f))}function Wne(C){return ht.matchAll(/\w+|\[(\w*)]/g,C).map(f=>f[0]==="[]"?"":f[1]||f[0])}function Zne(C){const f={},y=Object.keys(C);let E;const N=y.length;let U;for(E=0;E<N;E++)U=y[E],f[U]=C[U];return f}function uee(C){function f(y,E,N,U){let Q=y[U++];if(Q==="__proto__")return!0;const te=Number.isFinite(+Q),Ce=U>=y.length;return Q=!Q&&ht.isArray(N)?N.length:Q,Ce?(ht.hasOwnProp(N,Q)?N[Q]=[N[Q],E]:N[Q]=E,!te):((!N[Q]||!ht.isObject(N[Q]))&&(N[Q]=[]),f(y,E,N[Q],U)&&ht.isArray(N[Q])&&(N[Q]=Zne(N[Q])),!te)}if(ht.isFormData(C)&&ht.isFunction(C.entries)){const y={};return ht.forEachEntry(C,(E,N)=>{f(Wne(E),N,y,0)}),y}return null}function qne(C,f,y){if(ht.isString(C))try{return(f||JSON.parse)(C),ht.trim(C)}catch(E){if(E.name!=="SyntaxError")throw E}return(y||JSON.stringify)(C)}const gN={transitional:lee,adapter:["xhr","http","fetch"],transformRequest:[function(f,y){const E=y.getContentType()||"",N=E.indexOf("application/json")>-1,U=ht.isObject(f);if(U&&ht.isHTMLForm(f)&&(f=new FormData(f)),ht.isFormData(f))return N?JSON.stringify(uee(f)):f;if(ht.isArrayBuffer(f)||ht.isBuffer(f)||ht.isStream(f)||ht.isFile(f)||ht.isBlob(f)||ht.isReadableStream(f))return f;if(ht.isArrayBufferView(f))return f.buffer;if(ht.isURLSearchParams(f))return y.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),f.toString();let te;if(U){if(E.indexOf("application/x-www-form-urlencoded")>-1)return Une(f,this.formSerializer).toString();if((te=ht.isFileList(f))||E.indexOf("multipart/form-data")>-1){const Ce=this.env&&this.env.FormData;return SH(te?{"files[]":f}:f,Ce&&new Ce,this.formSerializer)}}return U||N?(y.setContentType("application/json",!1),qne(f)):f}],transformResponse:[function(f){const y=this.transitional||gN.transitional,E=y&&y.forcedJSONParsing,N=this.responseType==="json";if(ht.isResponse(f)||ht.isReadableStream(f))return f;if(f&&ht.isString(f)&&(E&&!this.responseType||N)){const Q=!(y&&y.silentJSONParsing)&&N;try{return JSON.parse(f)}catch(te){if(Q)throw te.name==="SyntaxError"?Ro.from(te,Ro.ERR_BAD_RESPONSE,this,null,this.response):te}}return f}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$l.classes.FormData,Blob:$l.classes.Blob},validateStatus:function(f){return f>=200&&f<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ht.forEach(["delete","get","head","post","put","patch"],C=>{gN.headers[C]={}});const jne=ht.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Gne=C=>{const f={};let y,E,N;return C&&C.split(`
`).forEach(function(Q){N=Q.indexOf(":"),y=Q.substring(0,N).trim().toLowerCase(),E=Q.substring(N+1).trim(),!(!y||f[y]&&jne[y])&&(y==="set-cookie"?f[y]?f[y].push(E):f[y]=[E]:f[y]=f[y]?f[y]+", "+E:E)}),f},oQ=Symbol("internals");function zP(C){return C&&String(C).trim().toLowerCase()}function j7(C){return C===!1||C==null?C:ht.isArray(C)?C.map(j7):String(C)}function Kne(C){const f=Object.create(null),y=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let E;for(;E=y.exec(C);)f[E[1]]=E[2];return f}const Xne=C=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(C.trim());function yX(C,f,y,E,N){if(ht.isFunction(E))return E.call(this,f,y);if(N&&(f=y),!!ht.isString(f)){if(ht.isString(E))return f.indexOf(E)!==-1;if(ht.isRegExp(E))return E.test(f)}}function Yne(C){return C.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(f,y,E)=>y.toUpperCase()+E)}function Jne(C,f){const y=ht.toCamelCase(" "+f);["get","set","has"].forEach(E=>{Object.defineProperty(C,E+y,{value:function(N,U,Q){return this[E].call(this,f,N,U,Q)},configurable:!0})})}let Rd=class{constructor(f){f&&this.set(f)}set(f,y,E){const N=this;function U(te,Ce,_e){const Ie=zP(Ce);if(!Ie)throw new Error("header name must be a non-empty string");const nt=ht.findKey(N,Ie);(!nt||N[nt]===void 0||_e===!0||_e===void 0&&N[nt]!==!1)&&(N[nt||Ce]=j7(te))}const Q=(te,Ce)=>ht.forEach(te,(_e,Ie)=>U(_e,Ie,Ce));if(ht.isPlainObject(f)||f instanceof this.constructor)Q(f,y);else if(ht.isString(f)&&(f=f.trim())&&!Xne(f))Q(Gne(f),y);else if(ht.isHeaders(f))for(const[te,Ce]of f.entries())U(Ce,te,E);else f!=null&&U(y,f,E);return this}get(f,y){if(f=zP(f),f){const E=ht.findKey(this,f);if(E){const N=this[E];if(!y)return N;if(y===!0)return Kne(N);if(ht.isFunction(y))return y.call(this,N,E);if(ht.isRegExp(y))return y.exec(N);throw new TypeError("parser must be boolean|regexp|function")}}}has(f,y){if(f=zP(f),f){const E=ht.findKey(this,f);return!!(E&&this[E]!==void 0&&(!y||yX(this,this[E],E,y)))}return!1}delete(f,y){const E=this;let N=!1;function U(Q){if(Q=zP(Q),Q){const te=ht.findKey(E,Q);te&&(!y||yX(E,E[te],te,y))&&(delete E[te],N=!0)}}return ht.isArray(f)?f.forEach(U):U(f),N}clear(f){const y=Object.keys(this);let E=y.length,N=!1;for(;E--;){const U=y[E];(!f||yX(this,this[U],U,f,!0))&&(delete this[U],N=!0)}return N}normalize(f){const y=this,E={};return ht.forEach(this,(N,U)=>{const Q=ht.findKey(E,U);if(Q){y[Q]=j7(N),delete y[U];return}const te=f?Yne(U):String(U).trim();te!==U&&delete y[U],y[te]=j7(N),E[te]=!0}),this}concat(...f){return this.constructor.concat(this,...f)}toJSON(f){const y=Object.create(null);return ht.forEach(this,(E,N)=>{E!=null&&E!==!1&&(y[N]=f&&ht.isArray(E)?E.join(", "):E)}),y}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([f,y])=>f+": "+y).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(f){return f instanceof this?f:new this(f)}static concat(f,...y){const E=new this(f);return y.forEach(N=>E.set(N)),E}static accessor(f){const E=(this[oQ]=this[oQ]={accessors:{}}).accessors,N=this.prototype;function U(Q){const te=zP(Q);E[te]||(Jne(N,Q),E[te]=!0)}return ht.isArray(f)?f.forEach(U):U(f),this}};Rd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ht.reduceDescriptors(Rd.prototype,({value:C},f)=>{let y=f[0].toUpperCase()+f.slice(1);return{get:()=>C,set(E){this[y]=E}}});ht.freezeMethods(Rd);function CX(C,f){const y=this||gN,E=f||y,N=Rd.from(E.headers);let U=E.data;return ht.forEach(C,function(te){U=te.call(y,U,N.normalize(),f?f.status:void 0)}),N.normalize(),U}function dee(C){return!!(C&&C.__CANCEL__)}function W_(C,f,y){Ro.call(this,C??"canceled",Ro.ERR_CANCELED,f,y),this.name="CanceledError"}ht.inherits(W_,Ro,{__CANCEL__:!0});function mee(C,f,y){const E=y.config.validateStatus;!y.status||!E||E(y.status)?C(y):f(new Ro("Request failed with status code "+y.status,[Ro.ERR_BAD_REQUEST,Ro.ERR_BAD_RESPONSE][Math.floor(y.status/100)-4],y.config,y.request,y))}function Qne(C){const f=/^([-+\w]{1,25})(:?\/\/|:)/.exec(C);return f&&f[1]||""}function eoe(C,f){C=C||10;const y=new Array(C),E=new Array(C);let N=0,U=0,Q;return f=f!==void 0?f:1e3,function(Ce){const _e=Date.now(),Ie=E[U];Q||(Q=_e),y[N]=Ce,E[N]=_e;let nt=U,pt=0;for(;nt!==N;)pt+=y[nt++],nt=nt%C;if(N=(N+1)%C,N===U&&(U=(U+1)%C),_e-Q<f)return;const Ht=Ie&&_e-Ie;return Ht?Math.round(pt*1e3/Ht):void 0}}function toe(C,f){let y=0,E=1e3/f,N,U;const Q=(_e,Ie=Date.now())=>{y=Ie,N=null,U&&(clearTimeout(U),U=null),C.apply(null,_e)};return[(..._e)=>{const Ie=Date.now(),nt=Ie-y;nt>=E?Q(_e,Ie):(N=_e,U||(U=setTimeout(()=>{U=null,Q(N)},E-nt)))},()=>N&&Q(N)]}const sH=(C,f,y=3)=>{let E=0;const N=eoe(50,250);return toe(U=>{const Q=U.loaded,te=U.lengthComputable?U.total:void 0,Ce=Q-E,_e=N(Ce),Ie=Q<=te;E=Q;const nt={loaded:Q,total:te,progress:te?Q/te:void 0,bytes:Ce,rate:_e||void 0,estimated:_e&&te&&Ie?(te-Q)/_e:void 0,event:U,lengthComputable:te!=null,[f?"download":"upload"]:!0};C(nt)},y)},sQ=(C,f)=>{const y=C!=null;return[E=>f[0]({lengthComputable:y,total:C,loaded:E}),f[1]]},rQ=C=>(...f)=>ht.asap(()=>C(...f)),noe=$l.hasStandardBrowserEnv?((C,f)=>y=>(y=new URL(y,$l.origin),C.protocol===y.protocol&&C.host===y.host&&(f||C.port===y.port)))(new URL($l.origin),$l.navigator&&/(msie|trident)/i.test($l.navigator.userAgent)):()=>!0,ooe=$l.hasStandardBrowserEnv?{write(C,f,y,E,N,U){const Q=[C+"="+encodeURIComponent(f)];ht.isNumber(y)&&Q.push("expires="+new Date(y).toGMTString()),ht.isString(E)&&Q.push("path="+E),ht.isString(N)&&Q.push("domain="+N),U===!0&&Q.push("secure"),document.cookie=Q.join("; ")},read(C){const f=document.cookie.match(new RegExp("(^|;\\s*)("+C+")=([^;]*)"));return f?decodeURIComponent(f[3]):null},remove(C){this.write(C,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function soe(C){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(C)}function roe(C,f){return f?C.replace(/\/?\/$/,"")+"/"+f.replace(/^\/+/,""):C}function fee(C,f,y){let E=!soe(f);return C&&E||y==!1?roe(C,f):f}const aQ=C=>C instanceof Rd?{...C}:C;function Sx(C,f){f=f||{};const y={};function E(_e,Ie,nt,pt){return ht.isPlainObject(_e)&&ht.isPlainObject(Ie)?ht.merge.call({caseless:pt},_e,Ie):ht.isPlainObject(Ie)?ht.merge({},Ie):ht.isArray(Ie)?Ie.slice():Ie}function N(_e,Ie,nt,pt){if(ht.isUndefined(Ie)){if(!ht.isUndefined(_e))return E(void 0,_e,nt,pt)}else return E(_e,Ie,nt,pt)}function U(_e,Ie){if(!ht.isUndefined(Ie))return E(void 0,Ie)}function Q(_e,Ie){if(ht.isUndefined(Ie)){if(!ht.isUndefined(_e))return E(void 0,_e)}else return E(void 0,Ie)}function te(_e,Ie,nt){if(nt in f)return E(_e,Ie);if(nt in C)return E(void 0,_e)}const Ce={url:U,method:U,data:U,baseURL:Q,transformRequest:Q,transformResponse:Q,paramsSerializer:Q,timeout:Q,timeoutMessage:Q,withCredentials:Q,withXSRFToken:Q,adapter:Q,responseType:Q,xsrfCookieName:Q,xsrfHeaderName:Q,onUploadProgress:Q,onDownloadProgress:Q,decompress:Q,maxContentLength:Q,maxBodyLength:Q,beforeRedirect:Q,transport:Q,httpAgent:Q,httpsAgent:Q,cancelToken:Q,socketPath:Q,responseEncoding:Q,validateStatus:te,headers:(_e,Ie,nt)=>N(aQ(_e),aQ(Ie),nt,!0)};return ht.forEach(Object.keys(Object.assign({},C,f)),function(Ie){const nt=Ce[Ie]||N,pt=nt(C[Ie],f[Ie],Ie);ht.isUndefined(pt)&&nt!==te||(y[Ie]=pt)}),y}const hee=C=>{const f=Sx({},C);let{data:y,withXSRFToken:E,xsrfHeaderName:N,xsrfCookieName:U,headers:Q,auth:te}=f;f.headers=Q=Rd.from(Q),f.url=cee(fee(f.baseURL,f.url,f.allowAbsoluteUrls),C.params,C.paramsSerializer),te&&Q.set("Authorization","Basic "+btoa((te.username||"")+":"+(te.password?unescape(encodeURIComponent(te.password)):"")));let Ce;if(ht.isFormData(y)){if($l.hasStandardBrowserEnv||$l.hasStandardBrowserWebWorkerEnv)Q.setContentType(void 0);else if((Ce=Q.getContentType())!==!1){const[_e,...Ie]=Ce?Ce.split(";").map(nt=>nt.trim()).filter(Boolean):[];Q.setContentType([_e||"multipart/form-data",...Ie].join("; "))}}if($l.hasStandardBrowserEnv&&(E&&ht.isFunction(E)&&(E=E(f)),E||E!==!1&&noe(f.url))){const _e=N&&U&&ooe.read(U);_e&&Q.set(N,_e)}return f},aoe=typeof XMLHttpRequest<"u",ioe=aoe&&function(C){return new Promise(function(y,E){const N=hee(C);let U=N.data;const Q=Rd.from(N.headers).normalize();let{responseType:te,onUploadProgress:Ce,onDownloadProgress:_e}=N,Ie,nt,pt,Ht,ot;function st(){Ht&&Ht(),ot&&ot(),N.cancelToken&&N.cancelToken.unsubscribe(Ie),N.signal&&N.signal.removeEventListener("abort",Ie)}let Ne=new XMLHttpRequest;Ne.open(N.method.toUpperCase(),N.url,!0),Ne.timeout=N.timeout;function Vt(){if(!Ne)return;const Y=Rd.from("getAllResponseHeaders"in Ne&&Ne.getAllResponseHeaders()),gt={data:!te||te==="text"||te==="json"?Ne.responseText:Ne.response,status:Ne.status,statusText:Ne.statusText,headers:Y,config:C,request:Ne};mee(function(ne){y(ne),st()},function(ne){E(ne),st()},gt),Ne=null}"onloadend"in Ne?Ne.onloadend=Vt:Ne.onreadystatechange=function(){!Ne||Ne.readyState!==4||Ne.status===0&&!(Ne.responseURL&&Ne.responseURL.indexOf("file:")===0)||setTimeout(Vt)},Ne.onabort=function(){Ne&&(E(new Ro("Request aborted",Ro.ECONNABORTED,C,Ne)),Ne=null)},Ne.onerror=function(){E(new Ro("Network Error",Ro.ERR_NETWORK,C,Ne)),Ne=null},Ne.ontimeout=function(){let we=N.timeout?"timeout of "+N.timeout+"ms exceeded":"timeout exceeded";const gt=N.transitional||lee;N.timeoutErrorMessage&&(we=N.timeoutErrorMessage),E(new Ro(we,gt.clarifyTimeoutError?Ro.ETIMEDOUT:Ro.ECONNABORTED,C,Ne)),Ne=null},U===void 0&&Q.setContentType(null),"setRequestHeader"in Ne&&ht.forEach(Q.toJSON(),function(we,gt){Ne.setRequestHeader(gt,we)}),ht.isUndefined(N.withCredentials)||(Ne.withCredentials=!!N.withCredentials),te&&te!=="json"&&(Ne.responseType=N.responseType),_e&&([pt,ot]=sH(_e,!0),Ne.addEventListener("progress",pt)),Ce&&Ne.upload&&([nt,Ht]=sH(Ce),Ne.upload.addEventListener("progress",nt),Ne.upload.addEventListener("loadend",Ht)),(N.cancelToken||N.signal)&&(Ie=Y=>{Ne&&(E(!Y||Y.type?new W_(null,C,Ne):Y),Ne.abort(),Ne=null)},N.cancelToken&&N.cancelToken.subscribe(Ie),N.signal&&(N.signal.aborted?Ie():N.signal.addEventListener("abort",Ie)));const Oe=Qne(N.url);if(Oe&&$l.protocols.indexOf(Oe)===-1){E(new Ro("Unsupported protocol "+Oe+":",Ro.ERR_BAD_REQUEST,C));return}Ne.send(U||null)})},coe=(C,f)=>{const{length:y}=C=C?C.filter(Boolean):[];if(f||y){let E=new AbortController,N;const U=function(_e){if(!N){N=!0,te();const Ie=_e instanceof Error?_e:this.reason;E.abort(Ie instanceof Ro?Ie:new W_(Ie instanceof Error?Ie.message:Ie))}};let Q=f&&setTimeout(()=>{Q=null,U(new Ro(`timeout ${f} of ms exceeded`,Ro.ETIMEDOUT))},f);const te=()=>{C&&(Q&&clearTimeout(Q),Q=null,C.forEach(_e=>{_e.unsubscribe?_e.unsubscribe(U):_e.removeEventListener("abort",U)}),C=null)};C.forEach(_e=>_e.addEventListener("abort",U));const{signal:Ce}=E;return Ce.unsubscribe=()=>ht.asap(te),Ce}},loe=function*(C,f){let y=C.byteLength;if(y<f){yield C;return}let E=0,N;for(;E<y;)N=E+f,yield C.slice(E,N),E=N},uoe=async function*(C,f){for await(const y of doe(C))yield*loe(y,f)},doe=async function*(C){if(C[Symbol.asyncIterator]){yield*C;return}const f=C.getReader();try{for(;;){const{done:y,value:E}=await f.read();if(y)break;yield E}}finally{await f.cancel()}},iQ=(C,f,y,E)=>{const N=uoe(C,f);let U=0,Q,te=Ce=>{Q||(Q=!0,E&&E(Ce))};return new ReadableStream({async pull(Ce){try{const{done:_e,value:Ie}=await N.next();if(_e){te(),Ce.close();return}let nt=Ie.byteLength;if(y){let pt=U+=nt;y(pt)}Ce.enqueue(new Uint8Array(Ie))}catch(_e){throw te(_e),_e}},cancel(Ce){return te(Ce),N.return()}},{highWaterMark:2})},wH=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",gee=wH&&typeof ReadableStream=="function",moe=wH&&(typeof TextEncoder=="function"?(C=>f=>C.encode(f))(new TextEncoder):async C=>new Uint8Array(await new Response(C).arrayBuffer())),pee=(C,...f)=>{try{return!!C(...f)}catch{return!1}},foe=gee&&pee(()=>{let C=!1;const f=new Request($l.origin,{body:new ReadableStream,method:"POST",get duplex(){return C=!0,"half"}}).headers.has("Content-Type");return C&&!f}),cQ=64*1024,BX=gee&&pee(()=>ht.isReadableStream(new Response("").body)),rH={stream:BX&&(C=>C.body)};wH&&(C=>{["text","arrayBuffer","blob","formData","stream"].forEach(f=>{!rH[f]&&(rH[f]=ht.isFunction(C[f])?y=>y[f]():(y,E)=>{throw new Ro(`Response type '${f}' is not supported`,Ro.ERR_NOT_SUPPORT,E)})})})(new Response);const hoe=async C=>{if(C==null)return 0;if(ht.isBlob(C))return C.size;if(ht.isSpecCompliantForm(C))return(await new Request($l.origin,{method:"POST",body:C}).arrayBuffer()).byteLength;if(ht.isArrayBufferView(C)||ht.isArrayBuffer(C))return C.byteLength;if(ht.isURLSearchParams(C)&&(C=C+""),ht.isString(C))return(await moe(C)).byteLength},goe=async(C,f)=>{const y=ht.toFiniteNumber(C.getContentLength());return y??hoe(f)},poe=wH&&(async C=>{let{url:f,method:y,data:E,signal:N,cancelToken:U,timeout:Q,onDownloadProgress:te,onUploadProgress:Ce,responseType:_e,headers:Ie,withCredentials:nt="same-origin",fetchOptions:pt}=hee(C);_e=_e?(_e+"").toLowerCase():"text";let Ht=coe([N,U&&U.toAbortSignal()],Q),ot;const st=Ht&&Ht.unsubscribe&&(()=>{Ht.unsubscribe()});let Ne;try{if(Ce&&foe&&y!=="get"&&y!=="head"&&(Ne=await goe(Ie,E))!==0){let gt=new Request(f,{method:"POST",body:E,duplex:"half"}),lt;if(ht.isFormData(E)&&(lt=gt.headers.get("content-type"))&&Ie.setContentType(lt),gt.body){const[ne,at]=sQ(Ne,sH(rQ(Ce)));E=iQ(gt.body,cQ,ne,at)}}ht.isString(nt)||(nt=nt?"include":"omit");const Vt="credentials"in Request.prototype;ot=new Request(f,{...pt,signal:Ht,method:y.toUpperCase(),headers:Ie.normalize().toJSON(),body:E,duplex:"half",credentials:Vt?nt:void 0});let Oe=await fetch(ot);const Y=BX&&(_e==="stream"||_e==="response");if(BX&&(te||Y&&st)){const gt={};["status","statusText","headers"].forEach(rn=>{gt[rn]=Oe[rn]});const lt=ht.toFiniteNumber(Oe.headers.get("content-length")),[ne,at]=te&&sQ(lt,sH(rQ(te),!0))||[];Oe=new Response(iQ(Oe.body,cQ,ne,()=>{at&&at(),st&&st()}),gt)}_e=_e||"text";let we=await rH[ht.findKey(rH,_e)||"text"](Oe,C);return!Y&&st&&st(),await new Promise((gt,lt)=>{mee(gt,lt,{data:we,headers:Rd.from(Oe.headers),status:Oe.status,statusText:Oe.statusText,config:C,request:ot})})}catch(Vt){throw st&&st(),Vt&&Vt.name==="TypeError"&&/fetch/i.test(Vt.message)?Object.assign(new Ro("Network Error",Ro.ERR_NETWORK,C,ot),{cause:Vt.cause||Vt}):Ro.from(Vt,Vt&&Vt.code,C,ot)}}),LX={http:Dne,xhr:ioe,fetch:poe};ht.forEach(LX,(C,f)=>{if(C){try{Object.defineProperty(C,"name",{value:f})}catch{}Object.defineProperty(C,"adapterName",{value:f})}});const lQ=C=>`- ${C}`,boe=C=>ht.isFunction(C)||C===null||C===!1,bee={getAdapter:C=>{C=ht.isArray(C)?C:[C];const{length:f}=C;let y,E;const N={};for(let U=0;U<f;U++){y=C[U];let Q;if(E=y,!boe(y)&&(E=LX[(Q=String(y)).toLowerCase()],E===void 0))throw new Ro(`Unknown adapter '${Q}'`);if(E)break;N[Q||"#"+U]=E}if(!E){const U=Object.entries(N).map(([te,Ce])=>`adapter ${te} `+(Ce===!1?"is not supported by the environment":"is not available in the build"));let Q=f?U.length>1?`since :
`+U.map(lQ).join(`
`):" "+lQ(U[0]):"as no adapter specified";throw new Ro("There is no suitable adapter to dispatch the request "+Q,"ERR_NOT_SUPPORT")}return E},adapters:LX};function SX(C){if(C.cancelToken&&C.cancelToken.throwIfRequested(),C.signal&&C.signal.aborted)throw new W_(null,C)}function uQ(C){return SX(C),C.headers=Rd.from(C.headers),C.data=CX.call(C,C.transformRequest),["post","put","patch"].indexOf(C.method)!==-1&&C.headers.setContentType("application/x-www-form-urlencoded",!1),bee.getAdapter(C.adapter||gN.adapter)(C).then(function(E){return SX(C),E.data=CX.call(C,C.transformResponse,E),E.headers=Rd.from(E.headers),E},function(E){return dee(E)||(SX(C),E&&E.response&&(E.response.data=CX.call(C,C.transformResponse,E.response),E.response.headers=Rd.from(E.response.headers))),Promise.reject(E)})}const vee="1.8.3",xH={};["object","boolean","number","function","string","symbol"].forEach((C,f)=>{xH[C]=function(E){return typeof E===C||"a"+(f<1?"n ":" ")+C}});const dQ={};xH.transitional=function(f,y,E){function N(U,Q){return"[Axios v"+vee+"] Transitional option '"+U+"'"+Q+(E?". "+E:"")}return(U,Q,te)=>{if(f===!1)throw new Ro(N(Q," has been removed"+(y?" in "+y:"")),Ro.ERR_DEPRECATED);return y&&!dQ[Q]&&(dQ[Q]=!0,console.warn(N(Q," has been deprecated since v"+y+" and will be removed in the near future"))),f?f(U,Q,te):!0}};xH.spelling=function(f){return(y,E)=>(console.warn(`${E} is likely a misspelling of ${f}`),!0)};function voe(C,f,y){if(typeof C!="object")throw new Ro("options must be an object",Ro.ERR_BAD_OPTION_VALUE);const E=Object.keys(C);let N=E.length;for(;N-- >0;){const U=E[N],Q=f[U];if(Q){const te=C[U],Ce=te===void 0||Q(te,U,C);if(Ce!==!0)throw new Ro("option "+U+" must be "+Ce,Ro.ERR_BAD_OPTION_VALUE);continue}if(y!==!0)throw new Ro("Unknown option "+U,Ro.ERR_BAD_OPTION)}}const G7={assertOptions:voe,validators:xH},Rp=G7.validators;let vx=class{constructor(f){this.defaults=f,this.interceptors={request:new nQ,response:new nQ}}async request(f,y){try{return await this._request(f,y)}catch(E){if(E instanceof Error){let N={};Error.captureStackTrace?Error.captureStackTrace(N):N=new Error;const U=N.stack?N.stack.replace(/^.+\n/,""):"";try{E.stack?U&&!String(E.stack).endsWith(U.replace(/^.+\n.+\n/,""))&&(E.stack+=`
`+U):E.stack=U}catch{}}throw E}}_request(f,y){typeof f=="string"?(y=y||{},y.url=f):y=f||{},y=Sx(this.defaults,y);const{transitional:E,paramsSerializer:N,headers:U}=y;E!==void 0&&G7.assertOptions(E,{silentJSONParsing:Rp.transitional(Rp.boolean),forcedJSONParsing:Rp.transitional(Rp.boolean),clarifyTimeoutError:Rp.transitional(Rp.boolean)},!1),N!=null&&(ht.isFunction(N)?y.paramsSerializer={serialize:N}:G7.assertOptions(N,{encode:Rp.function,serialize:Rp.function},!0)),y.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?y.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:y.allowAbsoluteUrls=!0),G7.assertOptions(y,{baseUrl:Rp.spelling("baseURL"),withXsrfToken:Rp.spelling("withXSRFToken")},!0),y.method=(y.method||this.defaults.method||"get").toLowerCase();let Q=U&&ht.merge(U.common,U[y.method]);U&&ht.forEach(["delete","get","head","post","put","patch","common"],ot=>{delete U[ot]}),y.headers=Rd.concat(Q,U);const te=[];let Ce=!0;this.interceptors.request.forEach(function(st){typeof st.runWhen=="function"&&st.runWhen(y)===!1||(Ce=Ce&&st.synchronous,te.unshift(st.fulfilled,st.rejected))});const _e=[];this.interceptors.response.forEach(function(st){_e.push(st.fulfilled,st.rejected)});let Ie,nt=0,pt;if(!Ce){const ot=[uQ.bind(this),void 0];for(ot.unshift.apply(ot,te),ot.push.apply(ot,_e),pt=ot.length,Ie=Promise.resolve(y);nt<pt;)Ie=Ie.then(ot[nt++],ot[nt++]);return Ie}pt=te.length;let Ht=y;for(nt=0;nt<pt;){const ot=te[nt++],st=te[nt++];try{Ht=ot(Ht)}catch(Ne){st.call(this,Ne);break}}try{Ie=uQ.call(this,Ht)}catch(ot){return Promise.reject(ot)}for(nt=0,pt=_e.length;nt<pt;)Ie=Ie.then(_e[nt++],_e[nt++]);return Ie}getUri(f){f=Sx(this.defaults,f);const y=fee(f.baseURL,f.url,f.allowAbsoluteUrls);return cee(y,f.params,f.paramsSerializer)}};ht.forEach(["delete","get","head","options"],function(f){vx.prototype[f]=function(y,E){return this.request(Sx(E||{},{method:f,url:y,data:(E||{}).data}))}});ht.forEach(["post","put","patch"],function(f){function y(E){return function(U,Q,te){return this.request(Sx(te||{},{method:f,headers:E?{"Content-Type":"multipart/form-data"}:{},url:U,data:Q}))}}vx.prototype[f]=y(),vx.prototype[f+"Form"]=y(!0)});let yoe=class yee{constructor(f){if(typeof f!="function")throw new TypeError("executor must be a function.");let y;this.promise=new Promise(function(U){y=U});const E=this;this.promise.then(N=>{if(!E._listeners)return;let U=E._listeners.length;for(;U-- >0;)E._listeners[U](N);E._listeners=null}),this.promise.then=N=>{let U;const Q=new Promise(te=>{E.subscribe(te),U=te}).then(N);return Q.cancel=function(){E.unsubscribe(U)},Q},f(function(U,Q,te){E.reason||(E.reason=new W_(U,Q,te),y(E.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(f){if(this.reason){f(this.reason);return}this._listeners?this._listeners.push(f):this._listeners=[f]}unsubscribe(f){if(!this._listeners)return;const y=this._listeners.indexOf(f);y!==-1&&this._listeners.splice(y,1)}toAbortSignal(){const f=new AbortController,y=E=>{f.abort(E)};return this.subscribe(y),f.signal.unsubscribe=()=>this.unsubscribe(y),f.signal}static source(){let f;return{token:new yee(function(N){f=N}),cancel:f}}};function Coe(C){return function(y){return C.apply(null,y)}}function Soe(C){return ht.isObject(C)&&C.isAxiosError===!0}const IX={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(IX).forEach(([C,f])=>{IX[f]=C});function Cee(C){const f=new vx(C),y=YQ(vx.prototype.request,f);return ht.extend(y,vx.prototype,f,{allOwnKeys:!0}),ht.extend(y,f,null,{allOwnKeys:!0}),y.create=function(N){return Cee(Sx(C,N))},y}const Ci=Cee(gN);Ci.Axios=vx;Ci.CanceledError=W_;Ci.CancelToken=yoe;Ci.isCancel=dee;Ci.VERSION=vee;Ci.toFormData=SH;Ci.AxiosError=Ro;Ci.Cancel=Ci.CanceledError;Ci.all=function(f){return Promise.all(f)};Ci.spread=Coe;Ci.isAxiosError=Soe;Ci.mergeConfig=Sx;Ci.AxiosHeaders=Rd;Ci.formToJSON=C=>uee(ht.isHTMLForm(C)?new FormData(C):C);Ci.getAdapter=bee.getAdapter;Ci.HttpStatusCode=IX;Ci.default=Ci;const{Axios:mae,AxiosError:fae,CanceledError:hae,isCancel:gae,CancelToken:pae,VERSION:bae,all:vae,Cancel:yae,isAxiosError:Cae,spread:Sae,toFormData:wae,AxiosHeaders:xae,HttpStatusCode:Eae,formToJSON:Tae,getAdapter:kae,mergeConfig:_ae}=Ci;window.axios=Ci;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";/*!
Turbo 8.0.13
Copyright © 2025 37signals LLC
 */(function(C){if(typeof C.requestSubmit=="function")return;C.requestSubmit=function(E){E?(f(E,this),E.click()):(E=document.createElement("input"),E.type="submit",E.hidden=!0,this.appendChild(E),E.click(),this.removeChild(E))};function f(E,N){E instanceof HTMLElement||y(TypeError,"parameter 1 is not of type 'HTMLElement'"),E.type=="submit"||y(TypeError,"The specified element is not a submit button"),E.form==N||y(DOMException,"The specified element is not owned by this form element","NotFoundError")}function y(E,N,U){throw new E("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+N+".",U)}})(HTMLFormElement.prototype);const See=new WeakMap;function woe(C){const f=C instanceof Element?C:C instanceof Node?C.parentElement:null,y=f?f.closest("input, button"):null;return(y==null?void 0:y.type)=="submit"?y:null}function xoe(C){const f=woe(C.target);f&&f.form&&See.set(f.form,f)}(function(){if("submitter"in Event.prototype)return;let C=window.Event.prototype;if("SubmitEvent"in window){const f=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in f))C=f;else return}addEventListener("click",xoe,!0),Object.defineProperty(C,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return See.get(this.target)}})})();const A_={eager:"eager",lazy:"lazy"},gH=class gH extends HTMLElement{constructor(){super();on(this,"loaded",Promise.resolve());this.delegate=new gH.delegateConstructor(this)}static get observedAttributes(){return["disabled","loading","src"]}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(y){y=="loading"?this.delegate.loadingStyleChanged():y=="src"?this.delegate.sourceURLChanged():y=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(y){y?this.setAttribute("src",y):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(y){y?this.setAttribute("refresh",y):this.removeAttribute("refresh")}get shouldReloadWithMorph(){return this.src&&this.refresh==="morph"}get loading(){return Eoe(this.getAttribute("loading")||"")}set loading(y){y?this.setAttribute("loading",y):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(y){y?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(y){y?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var y,E;return(E=(y=this.ownerDocument)==null?void 0:y.documentElement)==null?void 0:E.hasAttribute("data-turbo-preview")}};on(gH,"delegateConstructor");let Zh=gH;function Eoe(C){switch(C.toLowerCase()){case"lazy":return A_.lazy;default:return A_.eager}}const Toe={enabled:!0,progressBarDelay:500,unvisitableExtensions:new Set([".7z",".aac",".apk",".avi",".bmp",".bz2",".css",".csv",".deb",".dmg",".doc",".docx",".exe",".gif",".gz",".heic",".heif",".ico",".iso",".jpeg",".jpg",".js",".json",".m4a",".mkv",".mov",".mp3",".mp4",".mpeg",".mpg",".msi",".ogg",".ogv",".pdf",".pkg",".png",".ppt",".pptx",".rar",".rtf",".svg",".tar",".tif",".tiff",".txt",".wav",".webm",".webp",".wma",".wmv",".xls",".xlsx",".xml",".zip"])};function eN(C){if(C.getAttribute("data-turbo-eval")=="false")return C;{const f=document.createElement("script"),y=_ee();return y&&(f.nonce=y),f.textContent=C.textContent,f.async=!1,koe(f,C),f}}function koe(C,f){for(const{name:y,value:E}of f.attributes)C.setAttribute(y,E)}function _oe(C){const f=document.createElement("template");return f.innerHTML=C,f.content}function $a(C,{target:f,cancelable:y,detail:E}={}){const N=new CustomEvent(C,{cancelable:y,bubbles:!0,composed:!0,detail:E});return f&&f.isConnected?f.dispatchEvent(N):document.documentElement.dispatchEvent(N),N}function mQ(C){C.preventDefault(),C.stopImmediatePropagation()}function jP(){return document.visibilityState==="hidden"?xee():wee()}function wee(){return new Promise(C=>requestAnimationFrame(()=>C()))}function xee(){return new Promise(C=>setTimeout(()=>C(),0))}function Aoe(){return Promise.resolve()}function Eee(C=""){return new DOMParser().parseFromString(C,"text/html")}function Tee(C,...f){const y=Ooe(C,f).replace(/^\n/,"").split(`
`),E=y[0].match(/^\s+/),N=E?E[0].length:0;return y.map(U=>U.slice(N)).join(`
`)}function Ooe(C,f){return C.reduce((y,E,N)=>{const U=f[N]==null?"":f[N];return y+E+U},"")}function Zy(){return Array.from({length:36}).map((C,f)=>f==8||f==13||f==18||f==23?"-":f==14?"4":f==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function aH(C,...f){for(const y of f.map(E=>E==null?void 0:E.getAttribute(C)))if(typeof y=="string")return y;return null}function Roe(C,...f){return f.some(y=>y&&y.hasAttribute(C))}function iH(...C){for(const f of C)f.localName=="turbo-frame"&&f.setAttribute("busy",""),f.setAttribute("aria-busy","true")}function cH(...C){for(const f of C)f.localName=="turbo-frame"&&f.removeAttribute("busy"),f.removeAttribute("aria-busy")}function Doe(C,f=2e3){return new Promise(y=>{const E=()=>{C.removeEventListener("error",E),C.removeEventListener("load",E),y()};C.addEventListener("load",E,{once:!0}),C.addEventListener("error",E,{once:!0}),setTimeout(y,f)})}function kee(C){switch(C){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function Moe(C){return C=="advance"||C=="replace"||C=="restore"}function yx(...C){const f=aH("data-turbo-action",...C);return Moe(f)?f:null}function XX(C){return document.querySelector(`meta[name="${C}"]`)}function lH(C){const f=XX(C);return f&&f.content}function _ee(){const C=XX("csp-nonce");if(C){const{nonce:f,content:y}=C;return f==""?y:f}}function Poe(C,f){let y=XX(C);return y||(y=document.createElement("meta"),y.setAttribute("name",C),document.head.appendChild(y)),y.setAttribute("content",f),y}function D_(C,f){var y;if(C instanceof Element)return C.closest(f)||D_(C.assignedSlot||((y=C.getRootNode())==null?void 0:y.host),f)}function YX(C){return!!C&&C.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof C.focus=="function"}function Aee(C){return Array.from(C.querySelectorAll("[autofocus]")).find(YX)}async function Noe(C,f){const y=f();C(),await wee();const E=f();return[y,E]}function Oee(C){if(C==="_blank")return!1;if(C){for(const f of document.getElementsByName(C))if(f instanceof HTMLIFrameElement)return!1;return!0}else return!0}function Ree(C){return D_(C,"a[href]:not([target^=_]):not([download])")}function Dee(C){return Nc(C.getAttribute("href")||"")}function Boe(C,f){let y=null;return(...E)=>{const N=()=>C.apply(this,E);clearTimeout(y),y=setTimeout(N,f)}}const Loe={"aria-disabled":{beforeSubmit:C=>{C.setAttribute("aria-disabled","true"),C.addEventListener("click",mQ)},afterSubmit:C=>{C.removeAttribute("aria-disabled"),C.removeEventListener("click",mQ)}},disabled:{beforeSubmit:C=>C.disabled=!0,afterSubmit:C=>C.disabled=!1}};var tN;class Ioe{constructor(f){Ts(this,tN,null);Object.assign(this,f)}get submitter(){return ro(this,tN)}set submitter(f){mr(this,tN,Loe[f]||f)}}tN=new WeakMap;const Foe=new Ioe({mode:"on",submitter:"disabled"}),Pc={drive:Toe,forms:Foe};function Nc(C){return new URL(C.toString(),document.baseURI)}function Cx(C){let f;if(C.hash)return C.hash.slice(1);if(f=C.href.match(/#(.*)$/))return f[1]}function JX(C,f){const y=(f==null?void 0:f.getAttribute("formaction"))||C.getAttribute("action")||C.action;return Nc(y)}function $oe(C){return(Uoe(C).match(/\.[^.]*$/)||[])[0]||""}function Hoe(C,f){const y=Woe(f);return C.href===Nc(y).href||C.href.startsWith(y)}function $y(C,f){return Hoe(C,f)&&!Pc.drive.unvisitableExtensions.has($oe(C))}function FX(C){const f=Cx(C);return f!=null?C.href.slice(0,-(f.length+1)):C.href}function H7(C){return FX(C)}function Voe(C,f){return Nc(C).href==Nc(f).href}function zoe(C){return C.pathname.split("/").slice(1)}function Uoe(C){return zoe(C).slice(-1)[0]}function Woe(C){return Zoe(C.origin+C.pathname)}function Zoe(C){return C.endsWith("/")?C:C+"/"}class QX{constructor(f){this.response=f}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return Nc(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(f){return this.response.headers.get(f)}}class qoe extends Set{constructor(f){super(),this.maxSize=f}add(f){if(this.size>=this.maxSize){const E=this.values().next().value;this.delete(E)}super.add(f)}}const Mee=new qoe(20),joe=window.fetch;function Pee(C,f={}){const y=new Headers(f.headers||{}),E=Zy();return Mee.add(E),y.append("X-Turbo-Request-Id",E),joe(C,{...f,headers:y})}function eY(C){switch(C.toLowerCase()){case"get":return Tf.get;case"post":return Tf.post;case"put":return Tf.put;case"patch":return Tf.patch;case"delete":return Tf.delete}}const Tf={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function Goe(C){switch(C.toLowerCase()){case hx.multipart:return hx.multipart;case hx.plain:return hx.plain;default:return hx.urlEncoded}}const hx={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"};var nN,H_,Nee,Bee;class pN{constructor(f,y,E,N=new URLSearchParams,U=null,Q=hx.urlEncoded){Ts(this,H_);on(this,"abortController",new AbortController);Ts(this,nN,f=>{});var _e;const[te,Ce]=fQ(Nc(E),y,N,Q);this.delegate=f,this.url=te,this.target=U,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:y.toUpperCase(),headers:{...this.defaultHeaders},body:Ce,signal:this.abortSignal,referrer:(_e=this.delegate.referrer)==null?void 0:_e.href},this.enctype=Q}get method(){return this.fetchOptions.method}set method(f){const y=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,E=eY(f)||Tf.get;this.url.search="";const[N,U]=fQ(this.url,E,y,this.enctype);this.url=N,this.fetchOptions.body=U,this.fetchOptions.method=E.toUpperCase()}get headers(){return this.fetchOptions.headers}set headers(f){this.fetchOptions.headers=f}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(f){this.fetchOptions.body=f}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){const{fetchOptions:f}=this;this.delegate.prepareRequest(this);const y=await po(this,H_,Nee).call(this,f);try{this.delegate.requestStarted(this),y.detail.fetchRequest?this.response=y.detail.fetchRequest.response:this.response=Pee(this.url.href,f);const E=await this.response;return await this.receive(E)}catch(E){if(E.name!=="AbortError")throw po(this,H_,Bee).call(this,E)&&this.delegate.requestErrored(this,E),E}finally{this.delegate.requestFinished(this)}}async receive(f){const y=new QX(f);return $a("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:y},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,y):y.succeeded?this.delegate.requestSucceededWithResponse(this,y):this.delegate.requestFailedWithResponse(this,y),y}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return tY(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(f){this.headers.Accept=[f,this.headers.Accept].join(", ")}}nN=new WeakMap,H_=new WeakSet,Nee=async function(f){const y=new Promise(N=>mr(this,nN,N)),E=$a("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:f,url:this.url,resume:ro(this,nN)},target:this.target});return this.url=E.detail.url,E.defaultPrevented&&await y,E},Bee=function(f){return!$a("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:f}}).defaultPrevented};function tY(C){return eY(C)==Tf.get}function fQ(C,f,y,E){const N=Array.from(y).length>0?new URLSearchParams(Lee(y)):C.searchParams;return tY(f)?[Koe(C,N),null]:E==hx.urlEncoded?[C,N]:[C,y]}function Lee(C){const f=[];for(const[y,E]of C)E instanceof File||f.push([y,E]);return f}function Koe(C,f){const y=new URLSearchParams(Lee(f));return C.search=y.toString(),C}class Xoe{constructor(f,y){on(this,"started",!1);on(this,"intersect",f=>{const y=f.slice(-1)[0];y!=null&&y.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)});this.delegate=f,this.element=y,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}class wx{static wrap(f){return typeof f=="string"?new this(_oe(f)):f}constructor(f){this.fragment=Yoe(f)}}on(wx,"contentType","text/vnd.turbo-stream.html");function Yoe(C){for(const f of C.querySelectorAll("turbo-stream")){const y=document.importNode(f,!0);for(const E of y.templateElement.content.querySelectorAll("script"))E.replaceWith(eN(E));f.replaceWith(y)}return C}const Joe=100;var px,Vb;class Qoe{constructor(){Ts(this,px,null);Ts(this,Vb,null)}get(f){if(ro(this,Vb)&&ro(this,Vb).url===f&&ro(this,Vb).expire>Date.now())return ro(this,Vb).request}setLater(f,y,E){this.clear(),mr(this,px,setTimeout(()=>{y.perform(),this.set(f,y,E),mr(this,px,null)},Joe))}set(f,y,E){mr(this,Vb,{url:f,request:y,expire:new Date(new Date().getTime()+E)})}clear(){ro(this,px)&&clearTimeout(ro(this,px)),mr(this,Vb,null)}}px=new WeakMap,Vb=new WeakMap;const ese=10*1e3,O_=new Qoe,w_={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"};class EH{constructor(f,y,E,N=!1){on(this,"state",w_.initialized);const U=ase(y,E),Q=rse(sse(y,E),U),te=tse(y,E),Ce=ise(y,E);this.delegate=f,this.formElement=y,this.submitter=E,this.fetchRequest=new pN(this,U,Q,te,y,Ce),this.mustRedirect=N}static confirmMethod(f){return Promise.resolve(confirm(f))}get method(){return this.fetchRequest.method}set method(f){this.fetchRequest.method=f}get action(){return this.fetchRequest.url.toString()}set action(f){this.fetchRequest.url=Nc(f)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){const{initialized:f,requesting:y}=w_,E=aH("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof E=="string"&&!await(typeof Pc.forms.confirm=="function"?Pc.forms.confirm:EH.confirmMethod)(E,this.formElement,this.submitter))&&this.state==f)return this.state=y,this.fetchRequest.perform()}stop(){const{stopping:f,stopped:y}=w_;if(this.state!=f&&this.state!=y)return this.state=f,this.fetchRequest.cancel(),!0}prepareRequest(f){if(!f.isSafe){const y=nse(lH("csrf-param"))||lH("csrf-token");y&&(f.headers["X-CSRF-Token"]=y)}this.requestAcceptsTurboStreamResponse(f)&&f.acceptResponseType(wx.contentType)}requestStarted(f){this.state=w_.waiting,this.submitter&&Pc.forms.submitter.beforeSubmit(this.submitter),this.setSubmitsWith(),iH(this.formElement),$a("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(f,y){O_.clear(),this.result={success:y.succeeded,fetchResponse:y}}requestSucceededWithResponse(f,y){if(y.clientError||y.serverError){this.delegate.formSubmissionFailedWithResponse(this,y);return}if(O_.clear(),this.requestMustRedirect(f)&&ose(y)){const E=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,E)}else this.state=w_.receiving,this.result={success:!0,fetchResponse:y},this.delegate.formSubmissionSucceededWithResponse(this,y)}requestFailedWithResponse(f,y){this.result={success:!1,fetchResponse:y},this.delegate.formSubmissionFailedWithResponse(this,y)}requestErrored(f,y){this.result={success:!1,error:y},this.delegate.formSubmissionErrored(this,y)}requestFinished(f){this.state=w_.stopped,this.submitter&&Pc.forms.submitter.afterSubmit(this.submitter),this.resetSubmitterText(),cH(this.formElement),$a("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){const f=this.submitter;this.originalSubmitText=f.value,f.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){const f=this.submitter;f.value=this.originalSubmitText}}}requestMustRedirect(f){return!f.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(f){return!f.isSafe||Roe("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var f;return(f=this.submitter)==null?void 0:f.getAttribute("data-turbo-submits-with")}}function tse(C,f){const y=new FormData(C),E=f==null?void 0:f.getAttribute("name"),N=f==null?void 0:f.getAttribute("value");return E&&y.append(E,N||""),y}function nse(C){if(C!=null){const y=(document.cookie?document.cookie.split("; "):[]).find(E=>E.startsWith(C));if(y){const E=y.split("=").slice(1).join("=");return E?decodeURIComponent(E):void 0}}}function ose(C){return C.statusCode==200&&!C.redirected}function sse(C,f){const y=typeof C.action=="string"?C.action:null;return f!=null&&f.hasAttribute("formaction")?f.getAttribute("formaction")||"":C.getAttribute("action")||y||""}function rse(C,f){const y=Nc(C);return tY(f)&&(y.search=""),y}function ase(C,f){const y=(f==null?void 0:f.getAttribute("formmethod"))||C.getAttribute("method")||"";return eY(y.toLowerCase())||Tf.get}function ise(C,f){return Goe((f==null?void 0:f.getAttribute("formenctype"))||C.enctype)}class TH{constructor(f){this.element=f}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(f){return this.getElementForAnchor(f)!=null}getElementForAnchor(f){return f?this.element.querySelector(`[id='${f}'], a[name='${f}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return Aee(this.element)}get permanentElements(){return Fee(this.element)}getPermanentElementById(f){return Iee(this.element,f)}getPermanentElementMapForSnapshot(f){const y={};for(const E of this.permanentElements){const{id:N}=E,U=f.getPermanentElementById(N);U&&(y[N]=[E,U])}return y}}function Iee(C,f){return C.querySelector(`#${f}[data-turbo-permanent]`)}function Fee(C){return C.querySelectorAll("[id][data-turbo-permanent]")}class nY{constructor(f,y){on(this,"started",!1);on(this,"submitCaptured",()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)});on(this,"submitBubbled",f=>{if(!f.defaultPrevented){const y=f.target instanceof HTMLFormElement?f.target:void 0,E=f.submitter||void 0;y&&cse(y,E)&&lse(y,E)&&this.delegate.willSubmitForm(y,E)&&(f.preventDefault(),f.stopImmediatePropagation(),this.delegate.formSubmitted(y,E))}});this.delegate=f,this.eventTarget=y}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}function cse(C,f){return((f==null?void 0:f.getAttribute("formmethod"))||C.getAttribute("method"))!="dialog"}function lse(C,f){const y=(f==null?void 0:f.getAttribute("formtarget"))||C.getAttribute("target");return Oee(y)}var oN,sN;class $ee{constructor(f,y){Ts(this,oN,f=>{});Ts(this,sN,f=>{});this.delegate=f,this.element=y}scrollToAnchor(f){const y=this.snapshot.getElementForAnchor(f);y?(this.scrollToElement(y),this.focusElement(y)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(f){this.scrollToAnchor(Cx(f))}scrollToElement(f){f.scrollIntoView()}focusElement(f){f instanceof HTMLElement&&(f.hasAttribute("tabindex")?f.focus():(f.setAttribute("tabindex","-1"),f.focus(),f.removeAttribute("tabindex")))}scrollToPosition({x:f,y}){this.scrollRoot.scrollTo(f,y)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(f){const{isPreview:y,shouldRender:E,willRender:N,newSnapshot:U}=f,Q=N;if(E)try{this.renderPromise=new Promise(Ie=>mr(this,oN,Ie)),this.renderer=f,await this.prepareToRenderSnapshot(f);const te=new Promise(Ie=>mr(this,sN,Ie)),Ce={resume:ro(this,sN),render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(U,Ce)||await te,await this.renderSnapshot(f),this.delegate.viewRenderedSnapshot(U,y,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(f)}finally{delete this.renderer,ro(this,oN).call(this,void 0),delete this.renderPromise}else Q&&this.invalidate(f.reloadReason)}invalidate(f){this.delegate.viewInvalidated(f)}async prepareToRenderSnapshot(f){this.markAsPreview(f.isPreview),await f.prepareToRender()}markAsPreview(f){f?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(f){this.element.setAttribute("data-turbo-visit-direction",f)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(f){await f.render()}finishRenderingSnapshot(f){f.finishRendering()}}oN=new WeakMap,sN=new WeakMap;class use extends $ee{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new TH(this.element)}}class Hee{constructor(f,y){on(this,"clickBubbled",f=>{this.clickEventIsSignificant(f)?this.clickEvent=f:delete this.clickEvent});on(this,"linkClicked",f=>{this.clickEvent&&this.clickEventIsSignificant(f)&&this.delegate.shouldInterceptLinkClick(f.target,f.detail.url,f.detail.originalEvent)&&(this.clickEvent.preventDefault(),f.preventDefault(),this.delegate.linkClickIntercepted(f.target,f.detail.url,f.detail.originalEvent)),delete this.clickEvent});on(this,"willVisit",f=>{delete this.clickEvent});this.delegate=f,this.element=y}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickEventIsSignificant(f){var N;const y=f.composed?(N=f.target)==null?void 0:N.parentElement:f.target,E=Ree(y)||y;return E instanceof Element&&E.closest("turbo-frame, html")==this.element}}class Vee{constructor(f,y){on(this,"started",!1);on(this,"clickCaptured",()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)});on(this,"clickBubbled",f=>{if(f instanceof MouseEvent&&this.clickEventIsSignificant(f)){const y=f.composedPath&&f.composedPath()[0]||f.target,E=Ree(y);if(E&&Oee(E.target)){const N=Dee(E);this.delegate.willFollowLinkToLocation(E,N,f)&&(f.preventDefault(),this.delegate.followedLinkToLocation(E,N))}}});this.delegate=f,this.eventTarget=y}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(f){return!(f.target&&f.target.isContentEditable||f.defaultPrevented||f.which>1||f.altKey||f.ctrlKey||f.metaKey||f.shiftKey)}}class zee{constructor(f,y){this.delegate=f,this.linkInterceptor=new Vee(this,y)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(f,y){return!1}prefetchAndCacheRequestToLocation(f,y){}willFollowLinkToLocation(f,y,E){return this.delegate.willSubmitFormLinkToLocation(f,y,E)&&(f.hasAttribute("data-turbo-method")||f.hasAttribute("data-turbo-stream"))}followedLinkToLocation(f,y){const E=document.createElement("form"),N="hidden";for(const[nt,pt]of y.searchParams)E.append(Object.assign(document.createElement("input"),{type:N,name:nt,value:pt}));const U=Object.assign(y,{search:""});E.setAttribute("data-turbo","true"),E.setAttribute("action",U.href),E.setAttribute("hidden","");const Q=f.getAttribute("data-turbo-method");Q&&E.setAttribute("method",Q);const te=f.getAttribute("data-turbo-frame");te&&E.setAttribute("data-turbo-frame",te);const Ce=yx(f);Ce&&E.setAttribute("data-turbo-action",Ce);const _e=f.getAttribute("data-turbo-confirm");_e&&E.setAttribute("data-turbo-confirm",_e),f.hasAttribute("data-turbo-stream")&&E.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(f,y,E),document.body.appendChild(E),E.addEventListener("turbo:submit-end",()=>E.remove(),{once:!0}),requestAnimationFrame(()=>E.requestSubmit())}}class Uee{static async preservingPermanentElements(f,y,E){const N=new this(f,y);N.enter(),await E(),N.leave()}constructor(f,y){this.delegate=f,this.permanentElementMap=y}enter(){for(const f in this.permanentElementMap){const[y,E]=this.permanentElementMap[f];this.delegate.enteringBardo(y,E),this.replaceNewPermanentElementWithPlaceholder(E)}}leave(){for(const f in this.permanentElementMap){const[y]=this.permanentElementMap[f];this.replaceCurrentPermanentElementWithClone(y),this.replacePlaceholderWithPermanentElement(y),this.delegate.leavingBardo(y)}}replaceNewPermanentElementWithPlaceholder(f){const y=dse(f);f.replaceWith(y)}replaceCurrentPermanentElementWithClone(f){const y=f.cloneNode(!0);f.replaceWith(y)}replacePlaceholderWithPermanentElement(f){const y=this.getPlaceholderById(f.id);y==null||y.replaceWith(f)}getPlaceholderById(f){return this.placeholders.find(y=>y.content==f)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}function dse(C){const f=document.createElement("meta");return f.setAttribute("name","turbo-permanent-placeholder"),f.setAttribute("content",C.id),f}var zb;class oY{constructor(f,y,E,N=!0){Ts(this,zb,null);this.currentSnapshot=f,this.newSnapshot=y,this.isPreview=E,this.willRender=N,this.renderElement=this.constructor.renderElement,this.promise=new Promise((U,Q)=>this.resolvingFunctions={resolve:U,reject:Q})}static renderElement(f,y){}get shouldRender(){return!0}get shouldAutofocus(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(f){await Uee.preservingPermanentElements(this,this.permanentElementMap,f)}focusFirstAutofocusableElement(){if(this.shouldAutofocus){const f=this.connectedSnapshot.firstAutofocusableElement;f&&f.focus()}}enteringBardo(f){ro(this,zb)||f.contains(this.currentSnapshot.activeElement)&&mr(this,zb,this.currentSnapshot.activeElement)}leavingBardo(f){f.contains(ro(this,zb))&&ro(this,zb)instanceof HTMLElement&&(ro(this,zb).focus(),mr(this,zb,null))}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}}zb=new WeakMap;class sY extends oY{static renderElement(f,y){var Q;const E=document.createRange();E.selectNodeContents(f),E.deleteContents();const N=y,U=(Q=N.ownerDocument)==null?void 0:Q.createRange();U&&(U.selectNodeContents(N),f.appendChild(U.extractContents()))}constructor(f,y,E,N,U,Q=!0){super(y,E,N,U,Q),this.delegate=f}get shouldRender(){return!0}async render(){await jP(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await jP(),this.focusFirstAutofocusableElement(),await jP(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){const f=this.currentElement.firstElementChild,y=mse(this.currentElement.getAttribute("data-autoscroll-block"),"end"),E=fse(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(f)return f.scrollIntoView({block:y,behavior:E}),!0}return!1}activateScriptElements(){for(const f of this.newScriptElements){const y=eN(f);f.replaceWith(y)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}function mse(C,f){return C=="end"||C=="start"||C=="center"||C=="nearest"?C:f}function fse(C,f){return C=="auto"||C=="smooth"?C:f}var hse=function(){const C=()=>{},f={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:C,afterNodeAdded:C,beforeNodeMorphed:C,afterNodeMorphed:C,beforeNodeRemoved:C,afterNodeRemoved:C,beforeAttributeUpdated:C},head:{style:"merge",shouldPreserve:pt=>pt.getAttribute("im-preserve")==="true",shouldReAppend:pt=>pt.getAttribute("im-re-append")==="true",shouldRemove:C,afterHeadMorphed:C},restoreFocus:!0};function y(pt,Ht,ot={}){pt=Ie(pt);const st=nt(Ht),Ne=_e(pt,st,ot),Vt=N(Ne,()=>te(Ne,pt,st,Oe=>Oe.morphStyle==="innerHTML"?(U(Oe,pt,st),Array.from(pt.childNodes)):E(Oe,pt,st)));return Ne.pantry.remove(),Vt}function E(pt,Ht,ot){const st=nt(Ht);let Ne=Array.from(st.childNodes);const Vt=Ne.indexOf(Ht),Oe=Ne.length-(Vt+1);return U(pt,st,ot,Ht,Ht.nextSibling),Ne=Array.from(st.childNodes),Ne.slice(Vt,Ne.length-Oe)}function N(pt,Ht){var Y;if(!pt.config.restoreFocus)return Ht();let ot=document.activeElement;if(!(ot instanceof HTMLInputElement||ot instanceof HTMLTextAreaElement))return Ht();const{id:st,selectionStart:Ne,selectionEnd:Vt}=ot,Oe=Ht();return st&&st!==((Y=document.activeElement)==null?void 0:Y.id)&&(ot=pt.target.querySelector(`#${st}`),ot==null||ot.focus()),ot&&!ot.selectionEnd&&Vt&&ot.setSelectionRange(Ne,Vt),Oe}const U=function(){function pt(we,gt,lt,ne=null,at=null){gt instanceof HTMLTemplateElement&&lt instanceof HTMLTemplateElement&&(gt=gt.content,lt=lt.content),ne||(ne=gt.firstChild);for(const rn of lt.childNodes){if(ne&&ne!=at){const Ee=ot(we,rn,ne,at);if(Ee){Ee!==ne&&Ne(we,ne,Ee),Q(Ee,rn,we),ne=Ee.nextSibling;continue}}if(rn instanceof Element&&we.persistentIds.has(rn.id)){const Ee=Vt(gt,rn.id,ne,we);Q(Ee,rn,we),ne=Ee.nextSibling;continue}const ln=Ht(gt,rn,ne,we);ln&&(ne=ln.nextSibling)}for(;ne&&ne!=at;){const rn=ne;ne=ne.nextSibling,st(we,rn)}}function Ht(we,gt,lt,ne){if(ne.callbacks.beforeNodeAdded(gt)===!1)return null;if(ne.idMap.has(gt)){const at=document.createElement(gt.tagName);return we.insertBefore(at,lt),Q(at,gt,ne),ne.callbacks.afterNodeAdded(at),at}else{const at=document.importNode(gt,!0);return we.insertBefore(at,lt),ne.callbacks.afterNodeAdded(at),at}}const ot=function(){function we(ne,at,rn,ln){let Ee=null,le=at.nextSibling,xo=0,On=rn;for(;On&&On!=ln;){if(lt(On,at)){if(gt(ne,On,at))return On;Ee===null&&(ne.idMap.has(On)||(Ee=On))}if(Ee===null&&le&&lt(On,le)&&(xo++,le=le.nextSibling,xo>=2&&(Ee=void 0)),On.contains(document.activeElement))break;On=On.nextSibling}return Ee||null}function gt(ne,at,rn){let ln=ne.idMap.get(at),Ee=ne.idMap.get(rn);if(!Ee||!ln)return!1;for(const le of ln)if(Ee.has(le))return!0;return!1}function lt(ne,at){const rn=ne,ln=at;return rn.nodeType===ln.nodeType&&rn.tagName===ln.tagName&&(!rn.id||rn.id===ln.id)}return we}();function st(we,gt){var lt;if(we.idMap.has(gt))Y(we.pantry,gt,null);else{if(we.callbacks.beforeNodeRemoved(gt)===!1)return;(lt=gt.parentNode)==null||lt.removeChild(gt),we.callbacks.afterNodeRemoved(gt)}}function Ne(we,gt,lt){let ne=gt;for(;ne&&ne!==lt;){let at=ne;ne=ne.nextSibling,st(we,at)}return ne}function Vt(we,gt,lt,ne){const at=ne.target.querySelector(`#${gt}`)||ne.pantry.querySelector(`#${gt}`);return Oe(at,ne),Y(we,at,lt),at}function Oe(we,gt){const lt=we.id;for(;we=we.parentNode;){let ne=gt.idMap.get(we);ne&&(ne.delete(lt),ne.size||gt.idMap.delete(we))}}function Y(we,gt,lt){if(we.moveBefore)try{we.moveBefore(gt,lt)}catch{we.insertBefore(gt,lt)}else we.insertBefore(gt,lt)}return pt}(),Q=function(){function pt(Oe,Y,we){return we.ignoreActive&&Oe===document.activeElement?null:(we.callbacks.beforeNodeMorphed(Oe,Y)===!1||(Oe instanceof HTMLHeadElement&&we.head.ignore||(Oe instanceof HTMLHeadElement&&we.head.style!=="morph"?Ce(Oe,Y,we):(Ht(Oe,Y,we),Vt(Oe,we)||U(we,Oe,Y))),we.callbacks.afterNodeMorphed(Oe,Y)),Oe)}function Ht(Oe,Y,we){let gt=Y.nodeType;if(gt===1){const lt=Oe,ne=Y,at=lt.attributes,rn=ne.attributes;for(const ln of rn)Ne(ln.name,lt,"update",we)||lt.getAttribute(ln.name)!==ln.value&&lt.setAttribute(ln.name,ln.value);for(let ln=at.length-1;0<=ln;ln--){const Ee=at[ln];if(Ee&&!ne.hasAttribute(Ee.name)){if(Ne(Ee.name,lt,"remove",we))continue;lt.removeAttribute(Ee.name)}}Vt(lt,we)||ot(lt,ne,we)}(gt===8||gt===3)&&Oe.nodeValue!==Y.nodeValue&&(Oe.nodeValue=Y.nodeValue)}function ot(Oe,Y,we){if(Oe instanceof HTMLInputElement&&Y instanceof HTMLInputElement&&Y.type!=="file"){let gt=Y.value,lt=Oe.value;st(Oe,Y,"checked",we),st(Oe,Y,"disabled",we),Y.hasAttribute("value")?lt!==gt&&(Ne("value",Oe,"update",we)||(Oe.setAttribute("value",gt),Oe.value=gt)):Ne("value",Oe,"remove",we)||(Oe.value="",Oe.removeAttribute("value"))}else if(Oe instanceof HTMLOptionElement&&Y instanceof HTMLOptionElement)st(Oe,Y,"selected",we);else if(Oe instanceof HTMLTextAreaElement&&Y instanceof HTMLTextAreaElement){let gt=Y.value,lt=Oe.value;if(Ne("value",Oe,"update",we))return;gt!==lt&&(Oe.value=gt),Oe.firstChild&&Oe.firstChild.nodeValue!==gt&&(Oe.firstChild.nodeValue=gt)}}function st(Oe,Y,we,gt){const lt=Y[we],ne=Oe[we];if(lt!==ne){const at=Ne(we,Oe,"update",gt);at||(Oe[we]=Y[we]),lt?at||Oe.setAttribute(we,""):Ne(we,Oe,"remove",gt)||Oe.removeAttribute(we)}}function Ne(Oe,Y,we,gt){return Oe==="value"&&gt.ignoreActiveValue&&Y===document.activeElement?!0:gt.callbacks.beforeAttributeUpdated(Oe,Y,we)===!1}function Vt(Oe,Y){return!!Y.ignoreActiveValue&&Oe===document.activeElement&&Oe!==document.body}return pt}();function te(pt,Ht,ot,st){if(pt.head.block){const Ne=Ht.querySelector("head"),Vt=ot.querySelector("head");if(Ne&&Vt){const Oe=Ce(Ne,Vt,pt);return Promise.all(Oe).then(()=>{const Y=Object.assign(pt,{head:{block:!1,ignore:!0}});return st(Y)})}}return st(pt)}function Ce(pt,Ht,ot){let st=[],Ne=[],Vt=[],Oe=[],Y=new Map;for(const gt of Ht.children)Y.set(gt.outerHTML,gt);for(const gt of pt.children){let lt=Y.has(gt.outerHTML),ne=ot.head.shouldReAppend(gt),at=ot.head.shouldPreserve(gt);lt||at?ne?Ne.push(gt):(Y.delete(gt.outerHTML),Vt.push(gt)):ot.head.style==="append"?ne&&(Ne.push(gt),Oe.push(gt)):ot.head.shouldRemove(gt)!==!1&&Ne.push(gt)}Oe.push(...Y.values());let we=[];for(const gt of Oe){let lt=document.createRange().createContextualFragment(gt.outerHTML).firstChild;if(ot.callbacks.beforeNodeAdded(lt)!==!1){if("href"in lt&&lt.href||"src"in lt&&lt.src){let ne,at=new Promise(function(rn){ne=rn});lt.addEventListener("load",function(){ne()}),we.push(at)}pt.appendChild(lt),ot.callbacks.afterNodeAdded(lt),st.push(lt)}}for(const gt of Ne)ot.callbacks.beforeNodeRemoved(gt)!==!1&&(pt.removeChild(gt),ot.callbacks.afterNodeRemoved(gt));return ot.head.afterHeadMorphed(pt,{added:st,kept:Vt,removed:Ne}),we}const _e=function(){function pt(Y,we,gt){const{persistentIds:lt,idMap:ne}=Vt(Y,we),at=Ht(gt),rn=at.morphStyle||"outerHTML";if(!["innerHTML","outerHTML"].includes(rn))throw`Do not understand how to morph style ${rn}`;return{target:Y,newContent:we,config:at,morphStyle:rn,ignoreActive:at.ignoreActive,ignoreActiveValue:at.ignoreActiveValue,restoreFocus:at.restoreFocus,idMap:ne,persistentIds:lt,pantry:ot(),callbacks:at.callbacks,head:at.head}}function Ht(Y){let we=Object.assign({},f);return Object.assign(we,Y),we.callbacks=Object.assign({},f.callbacks,Y.callbacks),we.head=Object.assign({},f.head,Y.head),we}function ot(){const Y=document.createElement("div");return Y.hidden=!0,document.body.insertAdjacentElement("afterend",Y),Y}function st(Y){let we=Array.from(Y.querySelectorAll("[id]"));return Y.id&&we.push(Y),we}function Ne(Y,we,gt,lt){for(const ne of lt)if(we.has(ne.id)){let at=ne;for(;at;){let rn=Y.get(at);if(rn==null&&(rn=new Set,Y.set(at,rn)),rn.add(ne.id),at===gt)break;at=at.parentElement}}}function Vt(Y,we){const gt=st(Y),lt=st(we),ne=Oe(gt,lt);let at=new Map;Ne(at,ne,Y,gt);const rn=we.__idiomorphRoot||we;return Ne(at,ne,rn,lt),{persistentIds:ne,idMap:at}}function Oe(Y,we){let gt=new Set,lt=new Map;for(const{id:at,tagName:rn}of Y)lt.has(at)?gt.add(at):lt.set(at,rn);let ne=new Set;for(const{id:at,tagName:rn}of we)ne.has(at)?gt.add(at):lt.get(at)===rn&&ne.add(at);for(const at of gt)ne.delete(at);return ne}return pt}(),{normalizeElement:Ie,normalizeParent:nt}=function(){const pt=new WeakSet;function Ht(Vt){return Vt instanceof Document?Vt.documentElement:Vt}function ot(Vt){if(Vt==null)return document.createElement("div");if(typeof Vt=="string")return ot(Ne(Vt));if(pt.has(Vt))return Vt;if(Vt instanceof Node){if(Vt.parentNode)return st(Vt);{const Oe=document.createElement("div");return Oe.append(Vt),Oe}}else{const Oe=document.createElement("div");for(const Y of[...Vt])Oe.append(Y);return Oe}}function st(Vt){return{childNodes:[Vt],querySelectorAll:Oe=>{const Y=Vt.querySelectorAll(Oe);return Vt.matches(Oe)?[Vt,...Y]:Y},insertBefore:(Oe,Y)=>Vt.parentNode.insertBefore(Oe,Y),moveBefore:(Oe,Y)=>Vt.parentNode.moveBefore(Oe,Y),get __idiomorphRoot(){return Vt}}}function Ne(Vt){let Oe=new DOMParser,Y=Vt.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(Y.match(/<\/html>/)||Y.match(/<\/head>/)||Y.match(/<\/body>/)){let we=Oe.parseFromString(Vt,"text/html");if(Y.match(/<\/html>/))return pt.add(we),we;{let gt=we.firstChild;return gt&&pt.add(gt),gt}}else{let gt=Oe.parseFromString("<body><template>"+Vt+"</template></body>","text/html").body.querySelector("template").content;return pt.add(gt),gt}}return{normalizeElement:Ht,normalizeParent:ot}}();return{morph:y,defaults:f}}();function rY(C,f,{callbacks:y,...E}={}){hse.morph(C,f,{...E,callbacks:new gse(y)})}function Wee(C,f){rY(C,f.childNodes,{morphStyle:"innerHTML"})}var rN;class gse{constructor({beforeNodeMorphed:f}={}){Ts(this,rN);on(this,"beforeNodeAdded",f=>!(f.id&&f.hasAttribute("data-turbo-permanent")&&document.getElementById(f.id)));on(this,"beforeNodeMorphed",(f,y)=>{if(f instanceof Element)return!f.hasAttribute("data-turbo-permanent")&&ro(this,rN).call(this,f,y)?!$a("turbo:before-morph-element",{cancelable:!0,target:f,detail:{currentElement:f,newElement:y}}).defaultPrevented:!1});on(this,"beforeAttributeUpdated",(f,y,E)=>!$a("turbo:before-morph-attribute",{cancelable:!0,target:y,detail:{attributeName:f,mutationType:E}}).defaultPrevented);on(this,"beforeNodeRemoved",f=>this.beforeNodeMorphed(f));on(this,"afterNodeMorphed",(f,y)=>{f instanceof Element&&$a("turbo:morph-element",{target:f,detail:{currentElement:f,newElement:y}})});mr(this,rN,f||(()=>!0))}}rN=new WeakMap;class pse extends sY{static renderElement(f,y){$a("turbo:before-frame-morph",{target:f,detail:{currentElement:f,newElement:y}}),Wee(f,y)}async preservingPermanentElements(f){return await f()}}const Hb=class Hb{constructor(){on(this,"hiding",!1);on(this,"value",0);on(this,"visible",!1);on(this,"trickle",()=>{this.setValue(this.value+Math.random()/100)});this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}static get defaultCSS(){return Tee`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${Hb.animationDuration}ms ease-out,
          opacity ${Hb.animationDuration/2}ms ${Hb.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(f){this.value=f,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(f){this.progressElement.style.opacity="0",setTimeout(f,Hb.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,Hb.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){const f=document.createElement("style");f.type="text/css",f.textContent=Hb.defaultCSS;const y=_ee();return y&&(f.nonce=y),f}createProgressElement(){const f=document.createElement("div");return f.className="turbo-progress-bar",f}};on(Hb,"animationDuration",300);let $X=Hb;class bse extends TH{constructor(){super(...arguments);on(this,"detailsByOuterHTML",this.children.filter(y=>!Sse(y)).map(y=>Ese(y)).reduce((y,E)=>{const{outerHTML:N}=E,U=N in y?y[N]:{type:vse(E),tracked:yse(E),elements:[]};return{...y,[N]:{...U,elements:[...U.elements,E]}}},{}))}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(y=>this.detailsByOuterHTML[y].tracked).join("")}getScriptElementsNotInSnapshot(y){return this.getElementsMatchingTypeNotInSnapshot("script",y)}getStylesheetElementsNotInSnapshot(y){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",y)}getElementsMatchingTypeNotInSnapshot(y,E){return Object.keys(this.detailsByOuterHTML).filter(N=>!(N in E.detailsByOuterHTML)).map(N=>this.detailsByOuterHTML[N]).filter(({type:N})=>N==y).map(({elements:[N]})=>N)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((y,E)=>{const{type:N,tracked:U,elements:Q}=this.detailsByOuterHTML[E];return N==null&&!U?[...y,...Q]:Q.length>1?[...y,...Q.slice(1)]:y},[])}getMetaValue(y){const E=this.findMetaElementByName(y);return E?E.getAttribute("content"):null}findMetaElementByName(y){return Object.keys(this.detailsByOuterHTML).reduce((E,N)=>{const{elements:[U]}=this.detailsByOuterHTML[N];return xse(U,y)?U:E},void 0|void 0)}}function vse(C){if(Cse(C))return"script";if(wse(C))return"stylesheet"}function yse(C){return C.getAttribute("data-turbo-track")=="reload"}function Cse(C){return C.localName=="script"}function Sse(C){return C.localName=="noscript"}function wse(C){const f=C.localName;return f=="style"||f=="link"&&C.getAttribute("rel")=="stylesheet"}function xse(C,f){return C.localName=="meta"&&C.getAttribute("name")==f}function Ese(C){return C.hasAttribute("nonce")&&C.setAttribute("nonce",""),C}class Wh extends TH{static fromHTMLString(f=""){return this.fromDocument(Eee(f))}static fromElement(f){return this.fromDocument(f.ownerDocument)}static fromDocument({documentElement:f,body:y,head:E}){return new this(f,y,new bse(E))}constructor(f,y,E){super(y),this.documentElement=f,this.headSnapshot=E}clone(){const f=this.element.cloneNode(!0),y=this.element.querySelectorAll("select"),E=f.querySelectorAll("select");for(const[N,U]of y.entries()){const Q=E[N];for(const te of Q.selectedOptions)te.selected=!1;for(const te of U.selectedOptions)Q.options[te.index].selected=!0}for(const N of f.querySelectorAll('input[type="password"]'))N.value="";return new Wh(this.documentElement,f,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){const f=this.getSetting("root")??"/";return Nc(f)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return this.headSnapshot.getMetaValue("view-transition")==="same-origin"}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(f){return this.headSnapshot.getMetaValue(`turbo-${f}`)}}var aN,Vy;class Tse{constructor(){Ts(this,aN,!1);Ts(this,Vy,Promise.resolve())}renderChange(f,y){return f&&this.viewTransitionsAvailable&&!ro(this,aN)?(mr(this,aN,!0),mr(this,Vy,ro(this,Vy).then(async()=>{await document.startViewTransition(y).finished}))):mr(this,Vy,ro(this,Vy).then(y)),ro(this,Vy)}get viewTransitionsAvailable(){return document.startViewTransition}}aN=new WeakMap,Vy=new WeakMap;const kse={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},V7={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},$b={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},M_={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},_se={advance:"forward",restore:"back",replace:"none"};class Ase{constructor(f,y,E,N={}){on(this,"identifier",Zy());on(this,"timingMetrics",{});on(this,"followedRedirect",!1);on(this,"historyChanged",!1);on(this,"scrolled",!1);on(this,"shouldCacheSnapshot",!0);on(this,"acceptsStreamResponse",!1);on(this,"snapshotCached",!1);on(this,"state",$b.initialized);on(this,"viewTransitioner",new Tse);this.delegate=f,this.location=y,this.restorationIdentifier=E||Zy();const{action:U,historyChanged:Q,referrer:te,snapshot:Ce,snapshotHTML:_e,response:Ie,visitCachedSnapshot:nt,willRender:pt,updateHistory:Ht,shouldCacheSnapshot:ot,acceptsStreamResponse:st,direction:Ne}={...kse,...N};this.action=U,this.historyChanged=Q,this.referrer=te,this.snapshot=Ce,this.snapshotHTML=_e,this.response=Ie,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=nt,this.willRender=pt,this.updateHistory=Ht,this.scrolled=!pt,this.shouldCacheSnapshot=ot,this.acceptsStreamResponse=st,this.direction=Ne||_se[U]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==$b.initialized&&(this.recordTimingMetric(V7.visitStart),this.state=$b.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==$b.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=$b.canceled)}complete(){this.state==$b.started&&(this.recordTimingMetric(V7.visitEnd),this.adapter.visitCompleted(this),this.state=$b.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==$b.started&&(this.state=$b.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){var f;if(!this.historyChanged&&this.updateHistory){const y=this.location.href===((f=this.referrer)==null?void 0:f.href)?"replace":this.action,E=kee(y);this.history.update(E,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new pN(this,Tf.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(V7.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(f=this.response){if(this.response=f,f){const{statusCode:y}=f;hQ(y)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,y)}}finishRequest(){this.recordTimingMetric(V7.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:f,responseHTML:y}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,hQ(f)&&y!=null){const E=Wh.fromHTMLString(y);await this.renderPageSnapshot(E,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(Wh.fromHTMLString(y),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){const f=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(f&&(!Cx(this.location)||f.hasAnchor(Cx(this.location)))&&(this.action=="restore"||f.isPreviewable))return f}getPreloadedSnapshot(){if(this.snapshotHTML)return Wh.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){const f=this.getCachedSnapshot();if(f){const y=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(f,y),this.adapter.visitRendered(this),y||this.complete())})}}followRedirect(){var f;this.redirectedToLocation&&!this.followedRedirect&&((f=this.response)!=null&&f.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(f){this.acceptsStreamResponse&&f.acceptResponseType(wx.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(f,y){}async requestSucceededWithResponse(f,y){const E=await y.responseHTML,{redirected:N,statusCode:U}=y;E==null?this.recordResponse({statusCode:M_.contentTypeMismatch,redirected:N}):(this.redirectedToLocation=y.redirected?y.location:void 0,this.recordResponse({statusCode:U,responseHTML:E,redirected:N}))}async requestFailedWithResponse(f,y){const E=await y.responseHTML,{redirected:N,statusCode:U}=y;E==null?this.recordResponse({statusCode:M_.contentTypeMismatch,redirected:N}):this.recordResponse({statusCode:U,responseHTML:E,redirected:N})}requestErrored(f,y){this.recordResponse({statusCode:M_.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){const{scrollPosition:f}=this.restorationData;if(f)return this.view.scrollToPosition(f),!0}scrollToAnchor(){const f=Cx(this.location);if(f!=null)return this.view.scrollToAnchor(f),!0}recordTimingMetric(f){this.timingMetrics[f]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(f=>f&&this.visitCachedSnapshot(f)),this.snapshotCached=!0)}async render(f){this.cancelRender(),await new Promise(y=>{this.frame=document.visibilityState==="hidden"?setTimeout(()=>y(),0):requestAnimationFrame(()=>y())}),await f(),delete this.frame}async renderPageSnapshot(f,y){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(f),async()=>{await this.view.renderPage(f,y,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function hQ(C){return C>=200&&C<300}class Ose{constructor(f){on(this,"progressBar",new $X);on(this,"showProgressBar",()=>{this.progressBar.show()});this.session=f}visitProposedToLocation(f,y){$y(f,this.navigator.rootLocation)?this.navigator.startVisit(f,(y==null?void 0:y.restorationIdentifier)||Zy(),y):window.location.href=f.toString()}visitStarted(f){this.location=f.location,f.loadCachedSnapshot(),f.issueRequest(),f.goToSamePageAnchor()}visitRequestStarted(f){this.progressBar.setValue(0),f.hasCachedSnapshot()||f.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(f){f.loadResponse()}visitRequestFailedWithStatusCode(f,y){switch(y){case M_.networkFailure:case M_.timeoutFailure:case M_.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:y}});default:return f.loadResponse()}}visitRequestFinished(f){}visitCompleted(f){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(f){this.reload(f)}visitFailed(f){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(f){}linkPrefetchingIsEnabledForLocation(f){return!0}formSubmissionStarted(f){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(f){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(f){var y;$a("turbo:reload",{detail:f}),window.location.href=((y=this.location)==null?void 0:y.toString())||window.location.href}get navigator(){return this.session.navigator}}class Rse{constructor(){on(this,"selector","[data-turbo-temporary]");on(this,"deprecatedSelector","[data-turbo-cache=false]");on(this,"started",!1);on(this,"removeTemporaryElements",f=>{for(const y of this.temporaryElements)y.remove()})}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){const f=document.querySelectorAll(this.deprecatedSelector);return f.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...f]}}var kf,Zee,K7,X7;class Dse{constructor(f,y){Ts(this,kf);this.session=f,this.element=y,this.linkInterceptor=new Hee(this,y),this.formSubmitObserver=new nY(this,y)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(f,y,E){return po(this,kf,K7).call(this,f)}linkClickIntercepted(f,y,E){const N=po(this,kf,X7).call(this,f);N&&N.delegate.linkClickIntercepted(f,y,E)}willSubmitForm(f,y){return f.closest("turbo-frame")==null&&po(this,kf,Zee).call(this,f,y)&&po(this,kf,K7).call(this,f,y)}formSubmitted(f,y){const E=po(this,kf,X7).call(this,f,y);E&&E.delegate.formSubmitted(f,y)}}kf=new WeakSet,Zee=function(f,y){const E=JX(f,y),N=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),U=Nc((N==null?void 0:N.content)??"/");return po(this,kf,K7).call(this,f,y)&&$y(E,U)},K7=function(f,y){if(f instanceof HTMLFormElement?this.session.submissionIsNavigatable(f,y):this.session.elementIsNavigatable(f)){const N=po(this,kf,X7).call(this,f,y);return N?N!=f.closest("turbo-frame"):!1}else return!1},X7=function(f,y){const E=(y==null?void 0:y.getAttribute("data-turbo-frame"))||f.getAttribute("data-turbo-frame");if(E&&E!="_top"){const N=this.element.querySelector(`#${E}:not([disabled])`);if(N instanceof Zh)return N}};class Mse{constructor(f){on(this,"location");on(this,"restorationIdentifier",Zy());on(this,"restorationData",{});on(this,"started",!1);on(this,"pageLoaded",!1);on(this,"currentIndex",0);on(this,"onPopState",f=>{if(this.shouldHandlePopState()){const{turbo:y}=f.state||{};if(y){this.location=new URL(window.location.href);const{restorationIdentifier:E,restorationIndex:N}=y;this.restorationIdentifier=E;const U=N>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,E,U),this.currentIndex=N}}});on(this,"onPageLoad",async f=>{await Aoe(),this.pageLoaded=!0});this.delegate=f}start(){var f,y;this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=((y=(f=history.state)==null?void 0:f.turbo)==null?void 0:y.restorationIndex)||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(f,y){this.update(history.pushState,f,y)}replace(f,y){this.update(history.replaceState,f,y)}update(f,y,E=Zy()){f===history.pushState&&++this.currentIndex;const N={turbo:{restorationIdentifier:E,restorationIndex:this.currentIndex}};f.call(history,N,"",y.href),this.location=y,this.restorationIdentifier=E}getRestorationDataForIdentifier(f){return this.restorationData[f]||{}}updateRestorationData(f){const{restorationIdentifier:y}=this,E=this.restorationData[y];this.restorationData[y]={...E,...f}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}}var N_,iN,cN,lN,pH,uN,V_,qee,jee;class Pse{constructor(f,y){Ts(this,V_);on(this,"started",!1);Ts(this,N_,null);Ts(this,iN,()=>{this.eventTarget.addEventListener("mouseenter",ro(this,cN),{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",ro(this,lN),{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",ro(this,uN),!0),this.started=!0});Ts(this,cN,f=>{if(lH("turbo-prefetch")==="false")return;const y=f.target;if(y.matches&&y.matches("a[href]:not([target^=_]):not([download])")&&po(this,V_,jee).call(this,y)){const N=y,U=Dee(N);if(this.delegate.canPrefetchRequestToLocation(N,U)){mr(this,N_,N);const Q=new pN(this,Tf.get,U,new URLSearchParams,y);O_.setLater(U.toString(),Q,ro(this,V_,qee))}}});Ts(this,lN,f=>{f.target===ro(this,N_)&&ro(this,pH).call(this)});Ts(this,pH,()=>{O_.clear(),mr(this,N_,null)});Ts(this,uN,f=>{if(f.target.tagName!=="FORM"&&f.detail.fetchOptions.method==="GET"){const y=O_.get(f.detail.url.toString());y&&(f.detail.fetchRequest=y),O_.clear()}});this.delegate=f,this.eventTarget=y}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",ro(this,iN),{once:!0}):ro(this,iN).call(this))}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",ro(this,cN),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",ro(this,lN),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",ro(this,uN),!0),this.started=!1)}prepareRequest(f){const y=f.target;f.headers["X-Sec-Purpose"]="prefetch";const E=y.closest("turbo-frame"),N=y.getAttribute("data-turbo-frame")||(E==null?void 0:E.getAttribute("target"))||(E==null?void 0:E.id);N&&N!=="_top"&&(f.headers["Turbo-Frame"]=N)}requestSucceededWithResponse(){}requestStarted(f){}requestErrored(f){}requestFinished(f){}requestPreventedHandlingResponse(f,y){}requestFailedWithResponse(f,y){}}N_=new WeakMap,iN=new WeakMap,cN=new WeakMap,lN=new WeakMap,pH=new WeakMap,uN=new WeakMap,V_=new WeakSet,qee=function(){return Number(lH("turbo-prefetch-cache-time"))||ese},jee=function(f){return!(!f.getAttribute("href")||Nse(f)||Bse(f)||Lse(f)||Ise(f)||$se(f))};const Nse=C=>C.origin!==document.location.origin||!["http:","https:"].includes(C.protocol)||C.hasAttribute("target"),Bse=C=>C.pathname+C.search===document.location.pathname+document.location.search||C.href.startsWith("#"),Lse=C=>{if(C.getAttribute("data-turbo-prefetch")==="false"||C.getAttribute("data-turbo")==="false")return!0;const f=D_(C,"[data-turbo-prefetch]");return!!(f&&f.getAttribute("data-turbo-prefetch")==="false")},Ise=C=>{const f=C.getAttribute("data-turbo-method");return!!(f&&f.toLowerCase()!=="get"||Fse(C)||C.hasAttribute("data-turbo-confirm")||C.hasAttribute("data-turbo-stream"))},Fse=C=>C.hasAttribute("data-remote")||C.hasAttribute("data-behavior")||C.hasAttribute("data-confirm")||C.hasAttribute("data-method"),$se=C=>$a("turbo:before-prefetch",{target:C,cancelable:!0}).defaultPrevented;var z_,Gee,Kee;class Hse{constructor(f){Ts(this,z_);this.delegate=f}proposeVisit(f,y={}){this.delegate.allowsVisitingLocationWithAction(f,y.action)&&this.delegate.visitProposedToLocation(f,y)}startVisit(f,y,E={}){this.stop(),this.currentVisit=new Ase(this,Nc(f),y,{referrer:this.location,...E}),this.currentVisit.start()}submitForm(f,y){this.stop(),this.formSubmission=new EH(this,f,y,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(f){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(f)}async formSubmissionSucceededWithResponse(f,y){if(f==this.formSubmission){const E=await y.responseHTML;if(E){const N=f.isSafe;N||this.view.clearSnapshotCache();const{statusCode:U,redirected:Q}=y,Ce={action:po(this,z_,Gee).call(this,f,y),shouldCacheSnapshot:N,response:{statusCode:U,responseHTML:E,redirected:Q}};this.proposeVisit(y.location,Ce)}}}async formSubmissionFailedWithResponse(f,y){const E=await y.responseHTML;if(E){const N=Wh.fromHTMLString(E);y.serverError?await this.view.renderError(N,this.currentVisit):await this.view.renderPage(N,!1,!0,this.currentVisit),N.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(f,y){console.error(y)}formSubmissionFinished(f){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(f)}linkPrefetchingIsEnabledForLocation(f){return typeof this.adapter.linkPrefetchingIsEnabledForLocation=="function"?this.adapter.linkPrefetchingIsEnabledForLocation(f):!0}visitStarted(f){this.delegate.visitStarted(f)}visitCompleted(f){this.delegate.visitCompleted(f),delete this.currentVisit}locationWithActionIsSamePage(f,y){const E=Cx(f),N=Cx(this.view.lastRenderedLocation),U=y==="restore"&&typeof E>"u";return y!=="replace"&&FX(f)===FX(this.view.lastRenderedLocation)&&(U||E!=null&&E!==N)}visitScrolledToSamePageLocation(f,y){this.delegate.visitScrolledToSamePageLocation(f,y)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}}z_=new WeakSet,Gee=function(f,y){const{submitter:E,formElement:N}=f;return yx(E,N)||po(this,z_,Kee).call(this,y)},Kee=function(f){var E;return f.redirected&&f.location.href===((E=this.location)==null?void 0:E.href)?"replace":"advance"};const ux={initial:0,loading:1,interactive:2,complete:3};class Vse{constructor(f){on(this,"stage",ux.initial);on(this,"started",!1);on(this,"interpretReadyState",()=>{const{readyState:f}=this;f=="interactive"?this.pageIsInteractive():f=="complete"&&this.pageIsComplete()});on(this,"pageWillUnload",()=>{this.delegate.pageWillUnload()});this.delegate=f}start(){this.started||(this.stage==ux.initial&&(this.stage=ux.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==ux.loading&&(this.stage=ux.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==ux.interactive&&(this.stage=ux.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}class zse{constructor(f){on(this,"started",!1);on(this,"onScroll",()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})});this.delegate=f}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(f){this.delegate.scrollPositionChanged(f)}}class Use{render({fragment:f}){Uee.preservingPermanentElements(this,Wse(f),()=>{Zse(f,()=>{qse(()=>{document.documentElement.appendChild(f)})})})}enteringBardo(f,y){y.replaceWith(f.cloneNode(!0))}leavingBardo(){}}function Wse(C){const f=Fee(document.documentElement),y={};for(const E of f){const{id:N}=E;for(const U of C.querySelectorAll("turbo-stream")){const Q=Iee(U.templateElement.content,N);Q&&(y[N]=[E,Q])}}return y}async function Zse(C,f){const y=`turbo-stream-autofocus-${Zy()}`,E=C.querySelectorAll("turbo-stream"),N=jse(E);let U=null;if(N&&(N.id?U=N.id:U=y,N.id=U),f(),await jP(),(document.activeElement==null||document.activeElement==document.body)&&U){const te=document.getElementById(U);YX(te)&&te.focus(),te&&te.id==y&&te.removeAttribute("id")}}async function qse(C){const[f,y]=await Noe(C,()=>document.activeElement),E=f&&f.id;if(E){const N=document.getElementById(E);YX(N)&&N!=y&&N.focus()}}function jse(C){for(const f of C){const y=Aee(f.templateElement.content);if(y)return y}return null}var zy;class Gse{constructor(f){on(this,"sources",new Set);Ts(this,zy,!1);on(this,"inspectFetchResponse",f=>{const y=Kse(f);y&&Xse(y)&&(f.preventDefault(),this.receiveMessageResponse(y))});on(this,"receiveMessageEvent",f=>{ro(this,zy)&&typeof f.data=="string"&&this.receiveMessageHTML(f.data)});this.delegate=f}start(){ro(this,zy)||(mr(this,zy,!0),addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){ro(this,zy)&&(mr(this,zy,!1),removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(f){this.streamSourceIsConnected(f)||(this.sources.add(f),f.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(f){this.streamSourceIsConnected(f)&&(this.sources.delete(f),f.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(f){return this.sources.has(f)}async receiveMessageResponse(f){const y=await f.responseHTML;y&&this.receiveMessageHTML(y)}receiveMessageHTML(f){this.delegate.receivedMessageFromStream(wx.wrap(f))}}zy=new WeakMap;function Kse(C){var y;const f=(y=C.detail)==null?void 0:y.fetchResponse;if(f instanceof QX)return f}function Xse(C){return(C.contentType??"").startsWith(wx.contentType)}class Yse extends oY{static renderElement(f,y){const{documentElement:E,body:N}=document;E.replaceChild(y,N)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){const{documentElement:f,head:y}=document;f.replaceChild(this.newHead,y),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(const f of this.scriptElements){const y=f.parentNode;if(y){const E=eN(f);y.replaceChild(E,f)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}}var bH,Xee;class aY extends oY{constructor(){super(...arguments);Ts(this,bH)}static renderElement(y,E){document.body&&E instanceof HTMLBodyElement?document.body.replaceWith(E):document.documentElement.appendChild(E)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){po(this,bH,Xee).call(this),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){const y=this.mergeProvisionalElements(),E=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await y,await E,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){const y=[];for(const E of this.newHeadStylesheetElements)y.push(Doe(E)),document.head.appendChild(E);await Promise.all(y)}copyNewHeadScriptElements(){for(const y of this.newHeadScriptElements)document.head.appendChild(eN(y))}removeUnusedDynamicStylesheetElements(){for(const y of this.unusedDynamicStylesheetElements)document.head.removeChild(y)}async mergeProvisionalElements(){const y=[...this.newHeadProvisionalElements];for(const E of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(E,y)||document.head.removeChild(E);for(const E of y)document.head.appendChild(E)}isCurrentElementInElementList(y,E){for(const[N,U]of E.entries()){if(y.tagName=="TITLE"){if(U.tagName!="TITLE")continue;if(y.innerHTML==U.innerHTML)return E.splice(N,1),!0}if(U.isEqualNode(y))return E.splice(N,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(const y of this.currentHeadProvisionalElements)document.head.removeChild(y)}copyNewHeadProvisionalElements(){for(const y of this.newHeadProvisionalElements)document.head.appendChild(y)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(const y of this.newBodyScriptElements){const E=eN(y);y.replaceWith(E)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(y=>y.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}bH=new WeakSet,Xee=function(){const{documentElement:y}=this.currentSnapshot,{lang:E}=this.newSnapshot;E?y.setAttribute("lang",E):y.removeAttribute("lang")};class Jse extends aY{static renderElement(f,y){rY(f,y,{callbacks:{beforeNodeMorphed:E=>!gQ(E)}});for(const E of f.querySelectorAll("turbo-frame"))gQ(E)&&E.reload();$a("turbo:morph",{detail:{currentElement:f,newElement:y}})}async preservingPermanentElements(f){return await f()}get renderMethod(){return"morph"}get shouldAutofocus(){return!1}}function gQ(C){return C instanceof Zh&&C.src&&C.refresh==="morph"&&!C.closest("[data-turbo-permanent]")}class Qse{constructor(f){on(this,"keys",[]);on(this,"snapshots",{});this.size=f}has(f){return H7(f)in this.snapshots}get(f){if(this.has(f)){const y=this.read(f);return this.touch(f),y}}put(f,y){return this.write(f,y),this.touch(f),y}clear(){this.snapshots={}}read(f){return this.snapshots[H7(f)]}write(f,y){this.snapshots[H7(f)]=y}touch(f){const y=H7(f),E=this.keys.indexOf(y);E>-1&&this.keys.splice(E,1),this.keys.unshift(y),this.trim()}trim(){for(const f of this.keys.splice(this.size))delete this.snapshots[f]}}class ere extends $ee{constructor(){super(...arguments);on(this,"snapshotCache",new Qse(10));on(this,"lastRenderedLocation",new URL(location.href));on(this,"forceReloaded",!1)}shouldTransitionTo(y){return this.snapshot.prefersViewTransitions&&y.prefersViewTransitions}renderPage(y,E=!1,N=!0,U){const te=this.isPageRefresh(U)&&this.snapshot.shouldMorphPage?Jse:aY,Ce=new te(this.snapshot,y,E,N);return Ce.shouldRender?U==null||U.changeHistory():this.forceReloaded=!0,this.render(Ce)}renderError(y,E){E==null||E.changeHistory();const N=new Yse(this.snapshot,y,!1);return this.render(N)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(y=this.snapshot){if(y.isCacheable){this.delegate.viewWillCacheSnapshot();const{lastRenderedLocation:E}=this;await xee();const N=y.clone();return this.snapshotCache.put(E,N),N}}getCachedSnapshotForLocation(y){return this.snapshotCache.get(y)}isPageRefresh(y){return!y||this.lastRenderedLocation.pathname===y.location.pathname&&y.action==="replace"}shouldPreserveScrollPosition(y){return this.isPageRefresh(y)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return Wh.fromElement(this.element)}}var dN;class tre{constructor(f,y){on(this,"selector","a[data-turbo-preload]");Ts(this,dN,()=>{this.preloadOnLoadLinksForView(document.body)});this.delegate=f,this.snapshotCache=y}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ro(this,dN)):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",ro(this,dN))}preloadOnLoadLinksForView(f){for(const y of f.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(y)&&this.preloadURL(y)}async preloadURL(f){const y=new URL(f.href);if(this.snapshotCache.has(y))return;await new pN(this,Tf.get,y,new URLSearchParams,f).perform()}prepareRequest(f){f.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(f,y){try{const E=await y.responseHTML,N=Wh.fromHTMLString(E);this.snapshotCache.put(f.url,N)}catch{}}requestStarted(f){}requestErrored(f){}requestFinished(f){}requestPreventedHandlingResponse(f,y){}requestFailedWithResponse(f,y){}}dN=new WeakMap;var B_,Y7;class nre{constructor(f){Ts(this,B_);this.session=f}clear(){this.session.clearCache()}resetCacheControl(){po(this,B_,Y7).call(this,"")}exemptPageFromCache(){po(this,B_,Y7).call(this,"no-cache")}exemptPageFromPreview(){po(this,B_,Y7).call(this,"no-preview")}}B_=new WeakSet,Y7=function(f){Poe("turbo-cache-control",f)};var mN;class ore{constructor(f){on(this,"navigator",new Hse(this));on(this,"history",new Mse(this));on(this,"view",new ere(this,document.documentElement));on(this,"adapter",new Ose(this));on(this,"pageObserver",new Vse(this));on(this,"cacheObserver",new Rse);on(this,"linkPrefetchObserver",new Pse(this,document));on(this,"linkClickObserver",new Vee(this,window));on(this,"formSubmitObserver",new nY(this,document));on(this,"scrollObserver",new zse(this));on(this,"streamObserver",new Gse(this));on(this,"formLinkClickObserver",new zee(this,document.documentElement));on(this,"frameRedirector",new Dse(this,document.documentElement));on(this,"streamMessageRenderer",new Use);on(this,"cache",new nre(this));on(this,"enabled",!0);on(this,"started",!1);Ts(this,mN,150);this.recentRequests=f,this.preloader=new tre(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(f){this.adapter=f}visit(f,y={}){const E=y.frame?document.getElementById(y.frame):null;if(E instanceof Zh){const N=y.action||yx(E);E.delegate.proposeVisitIfNavigatedWithAction(E,N),E.src=f.toString()}else this.navigator.proposeVisit(Nc(f),y)}refresh(f,y){const E=y&&this.recentRequests.has(y),N=f===document.baseURI;!E&&!this.navigator.currentVisit&&N&&this.visit(f,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(f){this.streamObserver.connectStreamSource(f)}disconnectStreamSource(f){this.streamObserver.disconnectStreamSource(f)}renderStreamMessage(f){this.streamMessageRenderer.render(wx.wrap(f))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(f){console.warn("Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`"),this.progressBarDelay=f}set progressBarDelay(f){Pc.drive.progressBarDelay=f}get progressBarDelay(){return Pc.drive.progressBarDelay}set drive(f){Pc.drive.enabled=f}get drive(){return Pc.drive.enabled}set formMode(f){Pc.forms.mode=f}get formMode(){return Pc.forms.mode}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return ro(this,mN)}set pageRefreshDebouncePeriod(f){this.refresh=Boe(this.debouncedRefresh.bind(this),f),mr(this,mN,f)}shouldPreloadLink(f){const y=f.hasAttribute("data-turbo-method"),E=f.hasAttribute("data-turbo-stream"),N=f.getAttribute("data-turbo-frame"),U=N=="_top"?null:document.getElementById(N)||D_(f,"turbo-frame:not([disabled])");if(y||E||U instanceof Zh)return!1;{const Q=new URL(f.href);return this.elementIsNavigatable(f)&&$y(Q,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(f,y,E){this.enabled?this.navigator.startVisit(f,y,{action:"restore",historyChanged:!0,direction:E}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(f){this.history.updateRestorationData({scrollPosition:f})}willSubmitFormLinkToLocation(f,y){return this.elementIsNavigatable(f)&&$y(y,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(f,y){return this.elementIsNavigatable(f)&&$y(y,this.snapshot.rootLocation)&&this.navigator.linkPrefetchingIsEnabledForLocation(y)}willFollowLinkToLocation(f,y,E){return this.elementIsNavigatable(f)&&$y(y,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(f,y,E)}followedLinkToLocation(f,y){const E=this.getActionForLink(f),N=f.hasAttribute("data-turbo-stream");this.visit(y.href,{action:E,acceptsStreamResponse:N})}allowsVisitingLocationWithAction(f,y){return this.locationWithActionIsSamePage(f,y)||this.applicationAllowsVisitingLocation(f)}visitProposedToLocation(f,y){pQ(f),this.adapter.visitProposedToLocation(f,y)}visitStarted(f){f.acceptsStreamResponse||(iH(document.documentElement),this.view.markVisitDirection(f.direction)),pQ(f.location),f.silent||this.notifyApplicationAfterVisitingLocation(f.location,f.action)}visitCompleted(f){this.view.unmarkVisitDirection(),cH(document.documentElement),this.notifyApplicationAfterPageLoad(f.getTimingMetrics())}locationWithActionIsSamePage(f,y){return this.navigator.locationWithActionIsSamePage(f,y)}visitScrolledToSamePageLocation(f,y){this.notifyApplicationAfterVisitingSamePageLocation(f,y)}willSubmitForm(f,y){const E=JX(f,y);return this.submissionIsNavigatable(f,y)&&$y(Nc(E),this.snapshot.rootLocation)}formSubmitted(f,y){this.navigator.submitForm(f,y)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(f){this.renderStreamMessage(f)}viewWillCacheSnapshot(){var f;(f=this.navigator.currentVisit)!=null&&f.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:f},y){const E=this.notifyApplicationBeforeRender(f,y),{defaultPrevented:N,detail:{render:U}}=E;return this.view.renderer&&U&&(this.view.renderer.renderElement=U),!N}viewRenderedSnapshot(f,y,E){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(E)}preloadOnLoadLinksForView(f){this.preloader.preloadOnLoadLinksForView(f)}viewInvalidated(f){this.adapter.pageInvalidated(f)}frameLoaded(f){this.notifyApplicationAfterFrameLoad(f)}frameRendered(f,y){this.notifyApplicationAfterFrameRender(f,y)}applicationAllowsFollowingLinkToLocation(f,y,E){return!this.notifyApplicationAfterClickingLinkToLocation(f,y,E).defaultPrevented}applicationAllowsVisitingLocation(f){return!this.notifyApplicationBeforeVisitingLocation(f).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(f,y,E){return $a("turbo:click",{target:f,detail:{url:y.href,originalEvent:E},cancelable:!0})}notifyApplicationBeforeVisitingLocation(f){return $a("turbo:before-visit",{detail:{url:f.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(f,y){return $a("turbo:visit",{detail:{url:f.href,action:y}})}notifyApplicationBeforeCachingSnapshot(){return $a("turbo:before-cache")}notifyApplicationBeforeRender(f,y){return $a("turbo:before-render",{detail:{newBody:f,...y},cancelable:!0})}notifyApplicationAfterRender(f){return $a("turbo:render",{detail:{renderMethod:f}})}notifyApplicationAfterPageLoad(f={}){return $a("turbo:load",{detail:{url:this.location.href,timing:f}})}notifyApplicationAfterVisitingSamePageLocation(f,y){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:f.toString(),newURL:y.toString()}))}notifyApplicationAfterFrameLoad(f){return $a("turbo:frame-load",{target:f})}notifyApplicationAfterFrameRender(f,y){return $a("turbo:frame-render",{detail:{fetchResponse:f},target:y,cancelable:!0})}submissionIsNavigatable(f,y){if(Pc.forms.mode=="off")return!1;{const E=y?this.elementIsNavigatable(y):!0;return Pc.forms.mode=="optin"?E&&f.closest('[data-turbo="true"]')!=null:E&&this.elementIsNavigatable(f)}}elementIsNavigatable(f){const y=D_(f,"[data-turbo]"),E=D_(f,"turbo-frame");return Pc.drive.enabled||E?y?y.getAttribute("data-turbo")!="false":!0:y?y.getAttribute("data-turbo")=="true":!1}getActionForLink(f){return yx(f)||"advance"}get snapshot(){return this.view.snapshot}}mN=new WeakMap;function pQ(C){Object.defineProperties(C,sre)}const sre={absoluteURL:{get(){return this.toString()}}},yi=new ore(Mee),{cache:rre,navigator:are}=yi;function iY(){yi.start()}function ire(C){yi.registerAdapter(C)}function cre(C,f){yi.visit(C,f)}function cY(C){yi.connectStreamSource(C)}function lY(C){yi.disconnectStreamSource(C)}function lre(C){yi.renderStreamMessage(C)}function ure(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),yi.clearCache()}function dre(C){console.warn("Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Pc.drive.progressBarDelay=C}function mre(C){console.warn("Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Pc.forms.confirm=C}function fre(C){console.warn("Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Pc.forms.mode=C}var hre=Object.freeze({__proto__:null,navigator:are,session:yi,cache:rre,PageRenderer:aY,PageSnapshot:Wh,FrameRenderer:sY,fetch:Pee,config:Pc,start:iY,registerAdapter:ire,visit:cre,connectStreamSource:cY,disconnectStreamSource:lY,renderStreamMessage:lre,clearCache:ure,setProgressBarDelay:dre,setConfirmMethod:mre,setFormMode:fre});class gre extends Error{}var L_,Dp,Uy,fN,I_,F_,Ao,T_,Yee,Jee,Qee,ete,tte,nte,ote,HX,k_,ste,J7,rte,ate,ite;class pre{constructor(f){Ts(this,Ao);on(this,"fetchResponseLoaded",f=>Promise.resolve());Ts(this,L_,null);Ts(this,Dp,()=>{});Ts(this,Uy,!1);Ts(this,fN,!1);Ts(this,I_,new Set);Ts(this,F_,!1);on(this,"action",null);on(this,"visitCachedSnapshot",({element:f})=>{const y=f.querySelector("#"+this.element.id);y&&this.previousFrameElement&&y.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement});this.element=f,this.view=new use(this,this.element),this.appearanceObserver=new Xoe(this,this.element),this.formLinkClickObserver=new zee(this,this.element),this.linkInterceptor=new Hee(this,this.element),this.restorationIdentifier=Zy(),this.formSubmitObserver=new nY(this,this.element)}connect(){ro(this,Uy)||(mr(this,Uy,!0),this.loadingStyle==A_.lazy?this.appearanceObserver.start():po(this,Ao,T_).call(this),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){ro(this,Uy)&&(mr(this,Uy,!1),this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==A_.eager&&po(this,Ao,T_).call(this)}sourceURLChanged(){po(this,Ao,rte).call(this,"src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==A_.eager||ro(this,fN))&&po(this,Ao,T_).call(this))}sourceURLReloaded(){const{refresh:f,src:y}=this.element;return mr(this,F_,y&&f==="morph"),this.element.removeAttribute("complete"),this.element.src=null,this.element.src=y,this.element.loaded}loadingStyleChanged(){this.loadingStyle==A_.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),po(this,Ao,T_).call(this))}async loadResponse(f){(f.redirected||f.succeeded&&f.isHTML)&&(this.sourceURL=f.response.url);try{const y=await f.responseHTML;if(y){const E=Eee(y);Wh.fromDocument(E).isVisitable?await po(this,Ao,Yee).call(this,f,E):await po(this,Ao,ete).call(this,f)}}finally{mr(this,F_,!1),this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(f){this.proposeVisitIfNavigatedWithAction(f,yx(f)),po(this,Ao,T_).call(this)}willSubmitFormLinkToLocation(f){return po(this,Ao,J7).call(this,f)}submittedFormLinkToLocation(f,y,E){const N=po(this,Ao,k_).call(this,f);N&&E.setAttribute("data-turbo-frame",N.id)}shouldInterceptLinkClick(f,y,E){return po(this,Ao,J7).call(this,f)}linkClickIntercepted(f,y){po(this,Ao,Qee).call(this,f,y)}willSubmitForm(f,y){return f.closest("turbo-frame")==this.element&&po(this,Ao,J7).call(this,f,y)}formSubmitted(f,y){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new EH(this,f,y);const{fetchRequest:E}=this.formSubmission;this.prepareRequest(E),this.formSubmission.start()}prepareRequest(f){var y;f.headers["Turbo-Frame"]=this.id,(y=this.currentNavigationElement)!=null&&y.hasAttribute("data-turbo-stream")&&f.acceptResponseType(wx.contentType)}requestStarted(f){iH(this.element)}requestPreventedHandlingResponse(f,y){ro(this,Dp).call(this)}async requestSucceededWithResponse(f,y){await this.loadResponse(y),ro(this,Dp).call(this)}async requestFailedWithResponse(f,y){await this.loadResponse(y),ro(this,Dp).call(this)}requestErrored(f,y){console.error(y),ro(this,Dp).call(this)}requestFinished(f){cH(this.element)}formSubmissionStarted({formElement:f}){iH(f,po(this,Ao,k_).call(this,f))}formSubmissionSucceededWithResponse(f,y){const E=po(this,Ao,k_).call(this,f.formElement,f.submitter);E.delegate.proposeVisitIfNavigatedWithAction(E,yx(f.submitter,f.formElement,E)),E.delegate.loadResponse(y),f.isSafe||yi.clearCache()}formSubmissionFailedWithResponse(f,y){this.element.delegate.loadResponse(y),yi.clearCache()}formSubmissionErrored(f,y){console.error(y)}formSubmissionFinished({formElement:f}){cH(f,po(this,Ao,k_).call(this,f))}allowsImmediateRender({element:f},y){const E=$a("turbo:before-frame-render",{target:this.element,detail:{newFrame:f,...y},cancelable:!0}),{defaultPrevented:N,detail:{render:U}}=E;return this.view.renderer&&U&&(this.view.renderer.renderElement=U),!N}viewRenderedSnapshot(f,y,E){}preloadOnLoadLinksForView(f){yi.preloadOnLoadLinksForView(f)}viewInvalidated(){}willRenderFrame(f,y){this.previousFrameElement=f.cloneNode(!0)}proposeVisitIfNavigatedWithAction(f,y=null){if(this.action=y,this.action){const E=Wh.fromElement(f).clone(),{visitCachedSnapshot:N}=f.delegate;f.delegate.fetchResponseLoaded=async U=>{if(f.src){const{statusCode:Q,redirected:te}=U,Ce=await U.responseHTML,Ie={response:{statusCode:Q,redirected:te,responseHTML:Ce},visitCachedSnapshot:N,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:E};this.action&&(Ie.action=this.action),yi.visit(f.src,Ie)}}}}changeHistory(){if(this.action){const f=kee(this.action);yi.history.update(f,Nc(this.element.src||""),this.restorationIdentifier)}}async extractForeignFrameElement(f){let y;const E=CSS.escape(this.id);try{if(y=vQ(f.querySelector(`turbo-frame#${E}`),this.sourceURL),y)return y;if(y=vQ(f.querySelector(`turbo-frame[src][recurse~=${E}]`),this.sourceURL),y)return await y.loaded,await this.extractForeignFrameElement(y)}catch(N){return console.error(N),new Zh}return null}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(f){po(this,Ao,ate).call(this,"src",()=>{this.element.src=f??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||ro(this,Dp).call(this)!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(f){f?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&ro(this,Uy)}get rootLocation(){const f=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),y=(f==null?void 0:f.content)??"/";return Nc(y)}}L_=new WeakMap,Dp=new WeakMap,Uy=new WeakMap,fN=new WeakMap,I_=new WeakMap,F_=new WeakMap,Ao=new WeakSet,T_=async function(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=po(this,Ao,Jee).call(this,Nc(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,mr(this,fN,!0))},Yee=async function(f,y){const E=await this.extractForeignFrameElement(y.body),N=ro(this,F_)?pse:sY;if(E){const U=new TH(E),Q=new N(this,this.view.snapshot,U,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(Q),this.complete=!0,yi.frameRendered(f,this.element),yi.frameLoaded(this.element),await this.fetchResponseLoaded(f)}else po(this,Ao,tte).call(this,f)&&po(this,Ao,nte).call(this,f)},Jee=async function(f){var E;const y=new pN(this,Tf.get,f,new URLSearchParams,this.element);return(E=ro(this,L_))==null||E.cancel(),mr(this,L_,y),new Promise(N=>{mr(this,Dp,()=>{mr(this,Dp,()=>{}),mr(this,L_,null),N()}),y.perform()})},Qee=function(f,y,E){const N=po(this,Ao,k_).call(this,f,E);N.delegate.proposeVisitIfNavigatedWithAction(N,yx(E,f,N)),po(this,Ao,ite).call(this,f,()=>{N.src=y})},ete=async function(f){console.warn(`The response (${f.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await po(this,Ao,HX).call(this,f.response)},tte=function(f){this.element.setAttribute("complete","");const y=f.response,E=async(U,Q)=>{U instanceof Response?po(this,Ao,HX).call(this,U):yi.visit(U,Q)};return!$a("turbo:frame-missing",{target:this.element,detail:{response:y,visit:E},cancelable:!0}).defaultPrevented},nte=function(f){this.view.missing(),po(this,Ao,ote).call(this,f)},ote=function(f){const y=`The response (${f.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new gre(y)},HX=async function(f){const y=new QX(f),E=await y.responseHTML,{location:N,redirected:U,statusCode:Q}=y;return yi.visit(N,{response:{redirected:U,statusCode:Q,responseHTML:E}})},k_=function(f,y){const E=aH("data-turbo-frame",y,f)||this.element.getAttribute("target");return bQ(E)??this.element},ste=function(f,y){const E=JX(f,y);return $y(Nc(E),this.rootLocation)},J7=function(f,y){const E=aH("data-turbo-frame",y,f)||this.element.getAttribute("target");if(f instanceof HTMLFormElement&&!po(this,Ao,ste).call(this,f,y)||!this.enabled||E=="_top")return!1;if(E){const N=bQ(E);if(N)return!N.disabled}return!(!yi.elementIsNavigatable(f)||y&&!yi.elementIsNavigatable(y))},rte=function(f){return ro(this,I_).has(f)},ate=function(f,y){ro(this,I_).add(f),y(),ro(this,I_).delete(f)},ite=function(f,y){this.currentNavigationElement=f,y(),delete this.currentNavigationElement};function bQ(C){if(C!=null){const f=document.getElementById(C);if(f instanceof Zh)return f}}function vQ(C,f){if(C){const y=C.getAttribute("src");if(y!=null&&f!=null&&Voe(y,f))throw new Error(`Matching <turbo-frame id="${C.id}"> element has a source URL which references itself`);if(C.ownerDocument!==document&&(C=document.importNode(C,!0)),C instanceof Zh)return C.connectedCallback(),C.disconnectedCallback(),C}}const cte={after(){this.targetElements.forEach(C=>{var f;return(f=C.parentElement)==null?void 0:f.insertBefore(this.templateContent,C.nextSibling)})},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(C=>C.append(this.templateContent))},before(){this.targetElements.forEach(C=>{var f;return(f=C.parentElement)==null?void 0:f.insertBefore(this.templateContent,C)})},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(C=>C.prepend(this.templateContent))},remove(){this.targetElements.forEach(C=>C.remove())},replace(){const C=this.getAttribute("method");this.targetElements.forEach(f=>{C==="morph"?rY(f,this.templateContent):f.replaceWith(this.templateContent)})},update(){const C=this.getAttribute("method");this.targetElements.forEach(f=>{C==="morph"?Wee(f,this.templateContent):(f.innerHTML="",f.append(this.templateContent))})},refresh(){yi.refresh(this.baseURI,this.requestId)}};var bx,UP;const gY=class gY extends HTMLElement{constructor(){super(...arguments);Ts(this,bx)}static async renderElement(y){await y.performAction()}async connectedCallback(){try{await this.render()}catch(y){console.error(y)}finally{this.disconnect()}}async render(){return this.renderPromise??(this.renderPromise=(async()=>{const y=this.beforeRenderEvent;this.dispatchEvent(y)&&(await jP(),await y.detail.render(this))})())}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(y=>y.remove())}get duplicateChildren(){var N;const y=this.targetElements.flatMap(U=>[...U.children]).filter(U=>!!U.getAttribute("id")),E=[...((N=this.templateContent)==null?void 0:N.children)||[]].filter(U=>!!U.getAttribute("id")).map(U=>U.getAttribute("id"));return y.filter(U=>E.includes(U.getAttribute("id")))}get performAction(){if(this.action){const y=cte[this.action];if(y)return y;po(this,bx,UP).call(this,"unknown action")}po(this,bx,UP).call(this,"action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;po(this,bx,UP).call(this,"target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){const y=this.ownerDocument.createElement("template");return this.appendChild(y),y}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;po(this,bx,UP).call(this,"first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:gY.renderElement}})}get targetElementsById(){var E;const y=(E=this.ownerDocument)==null?void 0:E.getElementById(this.target);return y!==null?[y]:[]}get targetElementsByQuery(){var E;const y=(E=this.ownerDocument)==null?void 0:E.querySelectorAll(this.targets);return y.length!==0?Array.prototype.slice.call(y):[]}};bx=new WeakSet,UP=function(y){throw new Error(`${this.description}: ${y}`)};let VX=gY;class bre extends HTMLElement{constructor(){super(...arguments);on(this,"streamSource",null)}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),cY(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),lY(this.streamSource))}get src(){return this.getAttribute("src")||""}}Zh.delegateConstructor=pre;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",Zh);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",VX);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",bre);(()=>{let C=document.currentScript;if(C&&!C.hasAttribute("data-turbo-suppress-warning"))for(C=C.parentElement;C;){if(C==document.body)return console.warn(Tee`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your application’s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ——
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,C.outerHTML);C=C.parentElement}})();window.Turbo={...hre,StreamActions:cte};iY();const vre=(C,f)=>C==="presence"?window.Echo.join(f):C==="private"?window.Echo.private(f):window.Echo.channel(f);class yre extends HTMLElement{async connectedCallback(){cY(this),this.subscription=vre(this.type,this.channel).listen(".HotwiredLaravel\\TurboLaravel\\Events\\TurboStreamBroadcast",f=>{this.dispatchMessageEvent(f.message)})}disconnectedCallback(){lY(this),this.subscription&&(window.Echo.leave(this.channel),this.subscription=null)}dispatchMessageEvent(f){const y=new MessageEvent("message",{data:f});return this.dispatchEvent(y)}get channel(){return this.getAttribute("channel")}get type(){return this.getAttribute("type")||"private"}}customElements.get("turbo-echo-stream-source")===void 0&&customElements.define("turbo-echo-stream-source",yre);/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function yQ(C,f){var y=Object.keys(C);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(C);f&&(E=E.filter(function(N){return Object.getOwnPropertyDescriptor(C,N).enumerable})),y.push.apply(y,E)}return y}function Pp(C){for(var f=1;f<arguments.length;f++){var y=arguments[f]!=null?arguments[f]:{};f%2?yQ(Object(y),!0).forEach(function(E){Cre(C,E,y[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(y)):yQ(Object(y)).forEach(function(E){Object.defineProperty(C,E,Object.getOwnPropertyDescriptor(y,E))})}return C}function Q7(C){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Q7=function(f){return typeof f}:Q7=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},Q7(C)}function Cre(C,f,y){return f in C?Object.defineProperty(C,f,{value:y,enumerable:!0,configurable:!0,writable:!0}):C[f]=y,C}function Wb(){return Wb=Object.assign||function(C){for(var f=1;f<arguments.length;f++){var y=arguments[f];for(var E in y)Object.prototype.hasOwnProperty.call(y,E)&&(C[E]=y[E])}return C},Wb.apply(this,arguments)}function Sre(C,f){if(C==null)return{};var y={},E=Object.keys(C),N,U;for(U=0;U<E.length;U++)N=E[U],!(f.indexOf(N)>=0)&&(y[N]=C[N]);return y}function wre(C,f){if(C==null)return{};var y=Sre(C,f),E,N;if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(C);for(N=0;N<U.length;N++)E=U[N],!(f.indexOf(E)>=0)&&Object.prototype.propertyIsEnumerable.call(C,E)&&(y[E]=C[E])}return y}var xre="1.15.6";function Ub(C){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(C)}var Zb=Ub(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),bN=Ub(/Edge/i),CQ=Ub(/firefox/i),GP=Ub(/safari/i)&&!Ub(/chrome/i)&&!Ub(/android/i),uY=Ub(/iP(ad|od|hone)/i),lte=Ub(/chrome/i)&&Ub(/android/i),ute={capture:!1,passive:!1};function Ss(C,f,y){C.addEventListener(f,y,!Zb&&ute)}function hs(C,f,y){C.removeEventListener(f,y,!Zb&&ute)}function uH(C,f){if(f){if(f[0]===">"&&(f=f.substring(1)),C)try{if(C.matches)return C.matches(f);if(C.msMatchesSelector)return C.msMatchesSelector(f);if(C.webkitMatchesSelector)return C.webkitMatchesSelector(f)}catch{return!1}return!1}}function dte(C){return C.host&&C!==document&&C.host.nodeType?C.host:C.parentNode}function Uh(C,f,y,E){if(C){y=y||document;do{if(f!=null&&(f[0]===">"?C.parentNode===y&&uH(C,f):uH(C,f))||E&&C===y)return C;if(C===y)break}while(C=dte(C))}return null}var SQ=/\s+/g;function Tm(C,f,y){if(C&&f)if(C.classList)C.classList[y?"add":"remove"](f);else{var E=(" "+C.className+" ").replace(SQ," ").replace(" "+f+" "," ");C.className=(E+(y?" "+f:"")).replace(SQ," ")}}function mo(C,f,y){var E=C&&C.style;if(E){if(y===void 0)return document.defaultView&&document.defaultView.getComputedStyle?y=document.defaultView.getComputedStyle(C,""):C.currentStyle&&(y=C.currentStyle),f===void 0?y:y[f];!(f in E)&&f.indexOf("webkit")===-1&&(f="-webkit-"+f),E[f]=y+(typeof y=="string"?"":"px")}}function P_(C,f){var y="";if(typeof C=="string")y=C;else do{var E=mo(C,"transform");E&&E!=="none"&&(y=E+" "+y)}while(!f&&(C=C.parentNode));var N=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return N&&new N(y)}function mte(C,f,y){if(C){var E=C.getElementsByTagName(f),N=0,U=E.length;if(y)for(;N<U;N++)y(E[N],N);return E}return[]}function Mp(){var C=document.scrollingElement;return C||document.documentElement}function Zi(C,f,y,E,N){if(!(!C.getBoundingClientRect&&C!==window)){var U,Q,te,Ce,_e,Ie,nt;if(C!==window&&C.parentNode&&C!==Mp()?(U=C.getBoundingClientRect(),Q=U.top,te=U.left,Ce=U.bottom,_e=U.right,Ie=U.height,nt=U.width):(Q=0,te=0,Ce=window.innerHeight,_e=window.innerWidth,Ie=window.innerHeight,nt=window.innerWidth),(f||y)&&C!==window&&(N=N||C.parentNode,!Zb))do if(N&&N.getBoundingClientRect&&(mo(N,"transform")!=="none"||y&&mo(N,"position")!=="static")){var pt=N.getBoundingClientRect();Q-=pt.top+parseInt(mo(N,"border-top-width")),te-=pt.left+parseInt(mo(N,"border-left-width")),Ce=Q+U.height,_e=te+U.width;break}while(N=N.parentNode);if(E&&C!==window){var Ht=P_(N||C),ot=Ht&&Ht.a,st=Ht&&Ht.d;Ht&&(Q/=st,te/=ot,nt/=ot,Ie/=st,Ce=Q+Ie,_e=te+nt)}return{top:Q,left:te,bottom:Ce,right:_e,width:nt,height:Ie}}}function wQ(C,f,y){for(var E=Wy(C,!0),N=Zi(C)[f];E;){var U=Zi(E)[y],Q=void 0;if(Q=N>=U,!Q)return E;if(E===Mp())break;E=Wy(E,!1)}return!1}function $_(C,f,y,E){for(var N=0,U=0,Q=C.children;U<Q.length;){if(Q[U].style.display!=="none"&&Q[U]!==fo.ghost&&(E||Q[U]!==fo.dragged)&&Uh(Q[U],y.draggable,C,!1)){if(N===f)return Q[U];N++}U++}return null}function dY(C,f){for(var y=C.lastElementChild;y&&(y===fo.ghost||mo(y,"display")==="none"||f&&!uH(y,f));)y=y.previousElementSibling;return y||null}function Ef(C,f){var y=0;if(!C||!C.parentNode)return-1;for(;C=C.previousElementSibling;)C.nodeName.toUpperCase()!=="TEMPLATE"&&C!==fo.clone&&(!f||uH(C,f))&&y++;return y}function xQ(C){var f=0,y=0,E=Mp();if(C)do{var N=P_(C),U=N.a,Q=N.d;f+=C.scrollLeft*U,y+=C.scrollTop*Q}while(C!==E&&(C=C.parentNode));return[f,y]}function Ere(C,f){for(var y in C)if(C.hasOwnProperty(y)){for(var E in f)if(f.hasOwnProperty(E)&&f[E]===C[y][E])return Number(y)}return-1}function Wy(C,f){if(!C||!C.getBoundingClientRect)return Mp();var y=C,E=!1;do if(y.clientWidth<y.scrollWidth||y.clientHeight<y.scrollHeight){var N=mo(y);if(y.clientWidth<y.scrollWidth&&(N.overflowX=="auto"||N.overflowX=="scroll")||y.clientHeight<y.scrollHeight&&(N.overflowY=="auto"||N.overflowY=="scroll")){if(!y.getBoundingClientRect||y===document.body)return Mp();if(E||f)return y;E=!0}}while(y=y.parentNode);return Mp()}function Tre(C,f){if(C&&f)for(var y in f)f.hasOwnProperty(y)&&(C[y]=f[y]);return C}function wX(C,f){return Math.round(C.top)===Math.round(f.top)&&Math.round(C.left)===Math.round(f.left)&&Math.round(C.height)===Math.round(f.height)&&Math.round(C.width)===Math.round(f.width)}var KP;function fte(C,f){return function(){if(!KP){var y=arguments,E=this;y.length===1?C.call(E,y[0]):C.apply(E,y),KP=setTimeout(function(){KP=void 0},f)}}}function kre(){clearTimeout(KP),KP=void 0}function hte(C,f,y){C.scrollLeft+=f,C.scrollTop+=y}function gte(C){var f=window.Polymer,y=window.jQuery||window.Zepto;return f&&f.dom?f.dom(C).cloneNode(!0):y?y(C).clone(!0)[0]:C.cloneNode(!0)}function pte(C,f,y){var E={};return Array.from(C.children).forEach(function(N){var U,Q,te,Ce;if(!(!Uh(N,f.draggable,C,!1)||N.animated||N===y)){var _e=Zi(N);E.left=Math.min((U=E.left)!==null&&U!==void 0?U:1/0,_e.left),E.top=Math.min((Q=E.top)!==null&&Q!==void 0?Q:1/0,_e.top),E.right=Math.max((te=E.right)!==null&&te!==void 0?te:-1/0,_e.right),E.bottom=Math.max((Ce=E.bottom)!==null&&Ce!==void 0?Ce:-1/0,_e.bottom)}}),E.width=E.right-E.left,E.height=E.bottom-E.top,E.x=E.left,E.y=E.top,E}var Od="Sortable"+new Date().getTime();function _re(){var C=[],f;return{captureAnimationState:function(){if(C=[],!!this.options.animation){var E=[].slice.call(this.el.children);E.forEach(function(N){if(!(mo(N,"display")==="none"||N===fo.ghost)){C.push({target:N,rect:Zi(N)});var U=Pp({},C[C.length-1].rect);if(N.thisAnimationDuration){var Q=P_(N,!0);Q&&(U.top-=Q.f,U.left-=Q.e)}N.fromRect=U}})}},addAnimationState:function(E){C.push(E)},removeAnimationState:function(E){C.splice(Ere(C,{target:E}),1)},animateAll:function(E){var N=this;if(!this.options.animation){clearTimeout(f),typeof E=="function"&&E();return}var U=!1,Q=0;C.forEach(function(te){var Ce=0,_e=te.target,Ie=_e.fromRect,nt=Zi(_e),pt=_e.prevFromRect,Ht=_e.prevToRect,ot=te.rect,st=P_(_e,!0);st&&(nt.top-=st.f,nt.left-=st.e),_e.toRect=nt,_e.thisAnimationDuration&&wX(pt,nt)&&!wX(Ie,nt)&&(ot.top-nt.top)/(ot.left-nt.left)===(Ie.top-nt.top)/(Ie.left-nt.left)&&(Ce=Ore(ot,pt,Ht,N.options)),wX(nt,Ie)||(_e.prevFromRect=Ie,_e.prevToRect=nt,Ce||(Ce=N.options.animation),N.animate(_e,ot,nt,Ce)),Ce&&(U=!0,Q=Math.max(Q,Ce),clearTimeout(_e.animationResetTimer),_e.animationResetTimer=setTimeout(function(){_e.animationTime=0,_e.prevFromRect=null,_e.fromRect=null,_e.prevToRect=null,_e.thisAnimationDuration=null},Ce),_e.thisAnimationDuration=Ce)}),clearTimeout(f),U?f=setTimeout(function(){typeof E=="function"&&E()},Q):typeof E=="function"&&E(),C=[]},animate:function(E,N,U,Q){if(Q){mo(E,"transition",""),mo(E,"transform","");var te=P_(this.el),Ce=te&&te.a,_e=te&&te.d,Ie=(N.left-U.left)/(Ce||1),nt=(N.top-U.top)/(_e||1);E.animatingX=!!Ie,E.animatingY=!!nt,mo(E,"transform","translate3d("+Ie+"px,"+nt+"px,0)"),this.forRepaintDummy=Are(E),mo(E,"transition","transform "+Q+"ms"+(this.options.easing?" "+this.options.easing:"")),mo(E,"transform","translate3d(0,0,0)"),typeof E.animated=="number"&&clearTimeout(E.animated),E.animated=setTimeout(function(){mo(E,"transition",""),mo(E,"transform",""),E.animated=!1,E.animatingX=!1,E.animatingY=!1},Q)}}}}function Are(C){return C.offsetWidth}function Ore(C,f,y,E){return Math.sqrt(Math.pow(f.top-C.top,2)+Math.pow(f.left-C.left,2))/Math.sqrt(Math.pow(f.top-y.top,2)+Math.pow(f.left-y.left,2))*E.animation}var x_=[],xX={initializeByDefault:!0},vN={mount:function(f){for(var y in xX)xX.hasOwnProperty(y)&&!(y in f)&&(f[y]=xX[y]);x_.forEach(function(E){if(E.pluginName===f.pluginName)throw"Sortable: Cannot mount plugin ".concat(f.pluginName," more than once")}),x_.push(f)},pluginEvent:function(f,y,E){var N=this;this.eventCanceled=!1,E.cancel=function(){N.eventCanceled=!0};var U=f+"Global";x_.forEach(function(Q){y[Q.pluginName]&&(y[Q.pluginName][U]&&y[Q.pluginName][U](Pp({sortable:y},E)),y.options[Q.pluginName]&&y[Q.pluginName][f]&&y[Q.pluginName][f](Pp({sortable:y},E)))})},initializePlugins:function(f,y,E,N){x_.forEach(function(te){var Ce=te.pluginName;if(!(!f.options[Ce]&&!te.initializeByDefault)){var _e=new te(f,y,f.options);_e.sortable=f,_e.options=f.options,f[Ce]=_e,Wb(E,_e.defaults)}});for(var U in f.options)if(f.options.hasOwnProperty(U)){var Q=this.modifyOption(f,U,f.options[U]);typeof Q<"u"&&(f.options[U]=Q)}},getEventProperties:function(f,y){var E={};return x_.forEach(function(N){typeof N.eventProperties=="function"&&Wb(E,N.eventProperties.call(y[N.pluginName],f))}),E},modifyOption:function(f,y,E){var N;return x_.forEach(function(U){f[U.pluginName]&&U.optionListeners&&typeof U.optionListeners[y]=="function"&&(N=U.optionListeners[y].call(f[U.pluginName],E))}),N}};function Rre(C){var f=C.sortable,y=C.rootEl,E=C.name,N=C.targetEl,U=C.cloneEl,Q=C.toEl,te=C.fromEl,Ce=C.oldIndex,_e=C.newIndex,Ie=C.oldDraggableIndex,nt=C.newDraggableIndex,pt=C.originalEvent,Ht=C.putSortable,ot=C.extraEventProperties;if(f=f||y&&y[Od],!!f){var st,Ne=f.options,Vt="on"+E.charAt(0).toUpperCase()+E.substr(1);window.CustomEvent&&!Zb&&!bN?st=new CustomEvent(E,{bubbles:!0,cancelable:!0}):(st=document.createEvent("Event"),st.initEvent(E,!0,!0)),st.to=Q||y,st.from=te||y,st.item=N||y,st.clone=U,st.oldIndex=Ce,st.newIndex=_e,st.oldDraggableIndex=Ie,st.newDraggableIndex=nt,st.originalEvent=pt,st.pullMode=Ht?Ht.lastPutMode:void 0;var Oe=Pp(Pp({},ot),vN.getEventProperties(E,f));for(var Y in Oe)st[Y]=Oe[Y];y&&y.dispatchEvent(st),Ne[Vt]&&Ne[Vt].call(f,st)}}var Dre=["evt"],Ad=function(f,y){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},N=E.evt,U=wre(E,Dre);vN.pluginEvent.bind(fo)(f,y,Pp({dragEl:hn,parentEl:ei,ghostEl:wo,rootEl:Ea,nextEl:fx,lastDownEl:eH,cloneEl:Fa,cloneHidden:Hy,dragStarted:WP,putSortable:rl,activeSortable:fo.active,originalEvent:N,oldIndex:R_,oldDraggableIndex:XP,newIndex:km,newDraggableIndex:Fy,hideGhostForTarget:Cte,unhideGhostForTarget:Ste,cloneNowHidden:function(){Hy=!0},cloneNowShown:function(){Hy=!1},dispatchSortableEvent:function(te){ku({sortable:y,name:te,originalEvent:N})}},U))};function ku(C){Rre(Pp({putSortable:rl,cloneEl:Fa,targetEl:hn,rootEl:Ea,oldIndex:R_,oldDraggableIndex:XP,newIndex:km,newDraggableIndex:Fy},C))}var hn,ei,wo,Ea,fx,eH,Fa,Hy,R_,km,XP,Fy,z7,rl,__=!1,dH=!1,mH=[],dx,zh,EX,TX,EQ,TQ,WP,E_,YP,JP=!1,U7=!1,tH,Fl,kX=[],zX=!1,fH=[],kH=typeof document<"u",W7=uY,kQ=bN||Zb?"cssFloat":"float",Mre=kH&&!lte&&!uY&&"draggable"in document.createElement("div"),bte=function(){if(kH){if(Zb)return!1;var C=document.createElement("x");return C.style.cssText="pointer-events:auto",C.style.pointerEvents==="auto"}}(),vte=function(f,y){var E=mo(f),N=parseInt(E.width)-parseInt(E.paddingLeft)-parseInt(E.paddingRight)-parseInt(E.borderLeftWidth)-parseInt(E.borderRightWidth),U=$_(f,0,y),Q=$_(f,1,y),te=U&&mo(U),Ce=Q&&mo(Q),_e=te&&parseInt(te.marginLeft)+parseInt(te.marginRight)+Zi(U).width,Ie=Ce&&parseInt(Ce.marginLeft)+parseInt(Ce.marginRight)+Zi(Q).width;if(E.display==="flex")return E.flexDirection==="column"||E.flexDirection==="column-reverse"?"vertical":"horizontal";if(E.display==="grid")return E.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(U&&te.float&&te.float!=="none"){var nt=te.float==="left"?"left":"right";return Q&&(Ce.clear==="both"||Ce.clear===nt)?"vertical":"horizontal"}return U&&(te.display==="block"||te.display==="flex"||te.display==="table"||te.display==="grid"||_e>=N&&E[kQ]==="none"||Q&&E[kQ]==="none"&&_e+Ie>N)?"vertical":"horizontal"},Pre=function(f,y,E){var N=E?f.left:f.top,U=E?f.right:f.bottom,Q=E?f.width:f.height,te=E?y.left:y.top,Ce=E?y.right:y.bottom,_e=E?y.width:y.height;return N===te||U===Ce||N+Q/2===te+_e/2},Nre=function(f,y){var E;return mH.some(function(N){var U=N[Od].options.emptyInsertThreshold;if(!(!U||dY(N))){var Q=Zi(N),te=f>=Q.left-U&&f<=Q.right+U,Ce=y>=Q.top-U&&y<=Q.bottom+U;if(te&&Ce)return E=N}}),E},yte=function(f){function y(U,Q){return function(te,Ce,_e,Ie){var nt=te.options.group.name&&Ce.options.group.name&&te.options.group.name===Ce.options.group.name;if(U==null&&(Q||nt))return!0;if(U==null||U===!1)return!1;if(Q&&U==="clone")return U;if(typeof U=="function")return y(U(te,Ce,_e,Ie),Q)(te,Ce,_e,Ie);var pt=(Q?te:Ce).options.group.name;return U===!0||typeof U=="string"&&U===pt||U.join&&U.indexOf(pt)>-1}}var E={},N=f.group;(!N||Q7(N)!="object")&&(N={name:N}),E.name=N.name,E.checkPull=y(N.pull,!0),E.checkPut=y(N.put),E.revertClone=N.revertClone,f.group=E},Cte=function(){!bte&&wo&&mo(wo,"display","none")},Ste=function(){!bte&&wo&&mo(wo,"display","")};kH&&!lte&&document.addEventListener("click",function(C){if(dH)return C.preventDefault(),C.stopPropagation&&C.stopPropagation(),C.stopImmediatePropagation&&C.stopImmediatePropagation(),dH=!1,!1},!0);var mx=function(f){if(hn){f=f.touches?f.touches[0]:f;var y=Nre(f.clientX,f.clientY);if(y){var E={};for(var N in f)f.hasOwnProperty(N)&&(E[N]=f[N]);E.target=E.rootEl=y,E.preventDefault=void 0,E.stopPropagation=void 0,y[Od]._onDragOver(E)}}},Bre=function(f){hn&&hn.parentNode[Od]._isOutsideThisEl(f.target)};function fo(C,f){if(!(C&&C.nodeType&&C.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(C));this.el=C,this.options=f=Wb({},f),C[Od]=this;var y={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(C.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return vte(C,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(Q,te){Q.setData("Text",te.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:fo.supportPointer!==!1&&"PointerEvent"in window&&(!GP||uY),emptyInsertThreshold:5};vN.initializePlugins(this,C,y);for(var E in y)!(E in f)&&(f[E]=y[E]);yte(f);for(var N in this)N.charAt(0)==="_"&&typeof this[N]=="function"&&(this[N]=this[N].bind(this));this.nativeDraggable=f.forceFallback?!1:Mre,this.nativeDraggable&&(this.options.touchStartThreshold=1),f.supportPointer?Ss(C,"pointerdown",this._onTapStart):(Ss(C,"mousedown",this._onTapStart),Ss(C,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ss(C,"dragover",this),Ss(C,"dragenter",this)),mH.push(this.el),f.store&&f.store.get&&this.sort(f.store.get(this)||[]),Wb(this,_re())}fo.prototype={constructor:fo,_isOutsideThisEl:function(f){!this.el.contains(f)&&f!==this.el&&(E_=null)},_getDirection:function(f,y){return typeof this.options.direction=="function"?this.options.direction.call(this,f,y,hn):this.options.direction},_onTapStart:function(f){if(f.cancelable){var y=this,E=this.el,N=this.options,U=N.preventOnFilter,Q=f.type,te=f.touches&&f.touches[0]||f.pointerType&&f.pointerType==="touch"&&f,Ce=(te||f).target,_e=f.target.shadowRoot&&(f.path&&f.path[0]||f.composedPath&&f.composedPath()[0])||Ce,Ie=N.filter;if(Ure(E),!hn&&!(/mousedown|pointerdown/.test(Q)&&f.button!==0||N.disabled)&&!_e.isContentEditable&&!(!this.nativeDraggable&&GP&&Ce&&Ce.tagName.toUpperCase()==="SELECT")&&(Ce=Uh(Ce,N.draggable,E,!1),!(Ce&&Ce.animated)&&eH!==Ce)){if(R_=Ef(Ce),XP=Ef(Ce,N.draggable),typeof Ie=="function"){if(Ie.call(this,f,Ce,this)){ku({sortable:y,rootEl:_e,name:"filter",targetEl:Ce,toEl:E,fromEl:E}),Ad("filter",y,{evt:f}),U&&f.preventDefault();return}}else if(Ie&&(Ie=Ie.split(",").some(function(nt){if(nt=Uh(_e,nt.trim(),E,!1),nt)return ku({sortable:y,rootEl:nt,name:"filter",targetEl:Ce,fromEl:E,toEl:E}),Ad("filter",y,{evt:f}),!0}),Ie)){U&&f.preventDefault();return}N.handle&&!Uh(_e,N.handle,E,!1)||this._prepareDragStart(f,te,Ce)}}},_prepareDragStart:function(f,y,E){var N=this,U=N.el,Q=N.options,te=U.ownerDocument,Ce;if(E&&!hn&&E.parentNode===U){var _e=Zi(E);if(Ea=U,hn=E,ei=hn.parentNode,fx=hn.nextSibling,eH=E,z7=Q.group,fo.dragged=hn,dx={target:hn,clientX:(y||f).clientX,clientY:(y||f).clientY},EQ=dx.clientX-_e.left,TQ=dx.clientY-_e.top,this._lastX=(y||f).clientX,this._lastY=(y||f).clientY,hn.style["will-change"]="all",Ce=function(){if(Ad("delayEnded",N,{evt:f}),fo.eventCanceled){N._onDrop();return}N._disableDelayedDragEvents(),!CQ&&N.nativeDraggable&&(hn.draggable=!0),N._triggerDragStart(f,y),ku({sortable:N,name:"choose",originalEvent:f}),Tm(hn,Q.chosenClass,!0)},Q.ignore.split(",").forEach(function(Ie){mte(hn,Ie.trim(),_X)}),Ss(te,"dragover",mx),Ss(te,"mousemove",mx),Ss(te,"touchmove",mx),Q.supportPointer?(Ss(te,"pointerup",N._onDrop),!this.nativeDraggable&&Ss(te,"pointercancel",N._onDrop)):(Ss(te,"mouseup",N._onDrop),Ss(te,"touchend",N._onDrop),Ss(te,"touchcancel",N._onDrop)),CQ&&this.nativeDraggable&&(this.options.touchStartThreshold=4,hn.draggable=!0),Ad("delayStart",this,{evt:f}),Q.delay&&(!Q.delayOnTouchOnly||y)&&(!this.nativeDraggable||!(bN||Zb))){if(fo.eventCanceled){this._onDrop();return}Q.supportPointer?(Ss(te,"pointerup",N._disableDelayedDrag),Ss(te,"pointercancel",N._disableDelayedDrag)):(Ss(te,"mouseup",N._disableDelayedDrag),Ss(te,"touchend",N._disableDelayedDrag),Ss(te,"touchcancel",N._disableDelayedDrag)),Ss(te,"mousemove",N._delayedDragTouchMoveHandler),Ss(te,"touchmove",N._delayedDragTouchMoveHandler),Q.supportPointer&&Ss(te,"pointermove",N._delayedDragTouchMoveHandler),N._dragStartTimer=setTimeout(Ce,Q.delay)}else Ce()}},_delayedDragTouchMoveHandler:function(f){var y=f.touches?f.touches[0]:f;Math.max(Math.abs(y.clientX-this._lastX),Math.abs(y.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){hn&&_X(hn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var f=this.el.ownerDocument;hs(f,"mouseup",this._disableDelayedDrag),hs(f,"touchend",this._disableDelayedDrag),hs(f,"touchcancel",this._disableDelayedDrag),hs(f,"pointerup",this._disableDelayedDrag),hs(f,"pointercancel",this._disableDelayedDrag),hs(f,"mousemove",this._delayedDragTouchMoveHandler),hs(f,"touchmove",this._delayedDragTouchMoveHandler),hs(f,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(f,y){y=y||f.pointerType=="touch"&&f,!this.nativeDraggable||y?this.options.supportPointer?Ss(document,"pointermove",this._onTouchMove):y?Ss(document,"touchmove",this._onTouchMove):Ss(document,"mousemove",this._onTouchMove):(Ss(hn,"dragend",this),Ss(Ea,"dragstart",this._onDragStart));try{document.selection?nH(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(f,y){if(__=!1,Ea&&hn){Ad("dragStarted",this,{evt:y}),this.nativeDraggable&&Ss(document,"dragover",Bre);var E=this.options;!f&&Tm(hn,E.dragClass,!1),Tm(hn,E.ghostClass,!0),fo.active=this,f&&this._appendGhost(),ku({sortable:this,name:"start",originalEvent:y})}else this._nulling()},_emulateDragOver:function(){if(zh){this._lastX=zh.clientX,this._lastY=zh.clientY,Cte();for(var f=document.elementFromPoint(zh.clientX,zh.clientY),y=f;f&&f.shadowRoot&&(f=f.shadowRoot.elementFromPoint(zh.clientX,zh.clientY),f!==y);)y=f;if(hn.parentNode[Od]._isOutsideThisEl(f),y)do{if(y[Od]){var E=void 0;if(E=y[Od]._onDragOver({clientX:zh.clientX,clientY:zh.clientY,target:f,rootEl:y}),E&&!this.options.dragoverBubble)break}f=y}while(y=dte(y));Ste()}},_onTouchMove:function(f){if(dx){var y=this.options,E=y.fallbackTolerance,N=y.fallbackOffset,U=f.touches?f.touches[0]:f,Q=wo&&P_(wo,!0),te=wo&&Q&&Q.a,Ce=wo&&Q&&Q.d,_e=W7&&Fl&&xQ(Fl),Ie=(U.clientX-dx.clientX+N.x)/(te||1)+(_e?_e[0]-kX[0]:0)/(te||1),nt=(U.clientY-dx.clientY+N.y)/(Ce||1)+(_e?_e[1]-kX[1]:0)/(Ce||1);if(!fo.active&&!__){if(E&&Math.max(Math.abs(U.clientX-this._lastX),Math.abs(U.clientY-this._lastY))<E)return;this._onDragStart(f,!0)}if(wo){Q?(Q.e+=Ie-(EX||0),Q.f+=nt-(TX||0)):Q={a:1,b:0,c:0,d:1,e:Ie,f:nt};var pt="matrix(".concat(Q.a,",").concat(Q.b,",").concat(Q.c,",").concat(Q.d,",").concat(Q.e,",").concat(Q.f,")");mo(wo,"webkitTransform",pt),mo(wo,"mozTransform",pt),mo(wo,"msTransform",pt),mo(wo,"transform",pt),EX=Ie,TX=nt,zh=U}f.cancelable&&f.preventDefault()}},_appendGhost:function(){if(!wo){var f=this.options.fallbackOnBody?document.body:Ea,y=Zi(hn,!0,W7,!0,f),E=this.options;if(W7){for(Fl=f;mo(Fl,"position")==="static"&&mo(Fl,"transform")==="none"&&Fl!==document;)Fl=Fl.parentNode;Fl!==document.body&&Fl!==document.documentElement?(Fl===document&&(Fl=Mp()),y.top+=Fl.scrollTop,y.left+=Fl.scrollLeft):Fl=Mp(),kX=xQ(Fl)}wo=hn.cloneNode(!0),Tm(wo,E.ghostClass,!1),Tm(wo,E.fallbackClass,!0),Tm(wo,E.dragClass,!0),mo(wo,"transition",""),mo(wo,"transform",""),mo(wo,"box-sizing","border-box"),mo(wo,"margin",0),mo(wo,"top",y.top),mo(wo,"left",y.left),mo(wo,"width",y.width),mo(wo,"height",y.height),mo(wo,"opacity","0.8"),mo(wo,"position",W7?"absolute":"fixed"),mo(wo,"zIndex","100000"),mo(wo,"pointerEvents","none"),fo.ghost=wo,f.appendChild(wo),mo(wo,"transform-origin",EQ/parseInt(wo.style.width)*100+"% "+TQ/parseInt(wo.style.height)*100+"%")}},_onDragStart:function(f,y){var E=this,N=f.dataTransfer,U=E.options;if(Ad("dragStart",this,{evt:f}),fo.eventCanceled){this._onDrop();return}Ad("setupClone",this),fo.eventCanceled||(Fa=gte(hn),Fa.removeAttribute("id"),Fa.draggable=!1,Fa.style["will-change"]="",this._hideClone(),Tm(Fa,this.options.chosenClass,!1),fo.clone=Fa),E.cloneId=nH(function(){Ad("clone",E),!fo.eventCanceled&&(E.options.removeCloneOnHide||Ea.insertBefore(Fa,hn),E._hideClone(),ku({sortable:E,name:"clone"}))}),!y&&Tm(hn,U.dragClass,!0),y?(dH=!0,E._loopId=setInterval(E._emulateDragOver,50)):(hs(document,"mouseup",E._onDrop),hs(document,"touchend",E._onDrop),hs(document,"touchcancel",E._onDrop),N&&(N.effectAllowed="move",U.setData&&U.setData.call(E,N,hn)),Ss(document,"drop",E),mo(hn,"transform","translateZ(0)")),__=!0,E._dragStartId=nH(E._dragStarted.bind(E,y,f)),Ss(document,"selectstart",E),WP=!0,window.getSelection().removeAllRanges(),GP&&mo(document.body,"user-select","none")},_onDragOver:function(f){var y=this.el,E=f.target,N,U,Q,te=this.options,Ce=te.group,_e=fo.active,Ie=z7===Ce,nt=te.sort,pt=rl||_e,Ht,ot=this,st=!1;if(zX)return;function Ne(St,Uo){Ad(St,ot,Pp({evt:f,isOwner:Ie,axis:Ht?"vertical":"horizontal",revert:Q,dragRect:N,targetRect:U,canSort:nt,fromSortable:pt,target:E,completed:Oe,onMove:function(je,Mo){return Z7(Ea,y,hn,N,je,Zi(je),f,Mo)},changed:Y},Uo))}function Vt(){Ne("dragOverAnimationCapture"),ot.captureAnimationState(),ot!==pt&&pt.captureAnimationState()}function Oe(St){return Ne("dragOverCompleted",{insertion:St}),St&&(Ie?_e._hideClone():_e._showClone(ot),ot!==pt&&(Tm(hn,rl?rl.options.ghostClass:_e.options.ghostClass,!1),Tm(hn,te.ghostClass,!0)),rl!==ot&&ot!==fo.active?rl=ot:ot===fo.active&&rl&&(rl=null),pt===ot&&(ot._ignoreWhileAnimating=E),ot.animateAll(function(){Ne("dragOverAnimationComplete"),ot._ignoreWhileAnimating=null}),ot!==pt&&(pt.animateAll(),pt._ignoreWhileAnimating=null)),(E===hn&&!hn.animated||E===y&&!E.animated)&&(E_=null),!te.dragoverBubble&&!f.rootEl&&E!==document&&(hn.parentNode[Od]._isOutsideThisEl(f.target),!St&&mx(f)),!te.dragoverBubble&&f.stopPropagation&&f.stopPropagation(),st=!0}function Y(){km=Ef(hn),Fy=Ef(hn,te.draggable),ku({sortable:ot,name:"change",toEl:y,newIndex:km,newDraggableIndex:Fy,originalEvent:f})}if(f.preventDefault!==void 0&&f.cancelable&&f.preventDefault(),E=Uh(E,te.draggable,y,!0),Ne("dragOver"),fo.eventCanceled)return st;if(hn.contains(f.target)||E.animated&&E.animatingX&&E.animatingY||ot._ignoreWhileAnimating===E)return Oe(!1);if(dH=!1,_e&&!te.disabled&&(Ie?nt||(Q=ei!==Ea):rl===this||(this.lastPutMode=z7.checkPull(this,_e,hn,f))&&Ce.checkPut(this,_e,hn,f))){if(Ht=this._getDirection(f,E)==="vertical",N=Zi(hn),Ne("dragOverValid"),fo.eventCanceled)return st;if(Q)return ei=Ea,Vt(),this._hideClone(),Ne("revert"),fo.eventCanceled||(fx?Ea.insertBefore(hn,fx):Ea.appendChild(hn)),Oe(!0);var we=dY(y,te.draggable);if(!we||$re(f,Ht,this)&&!we.animated){if(we===hn)return Oe(!1);if(we&&y===f.target&&(E=we),E&&(U=Zi(E)),Z7(Ea,y,hn,N,E,U,f,!!E)!==!1)return Vt(),we&&we.nextSibling?y.insertBefore(hn,we.nextSibling):y.appendChild(hn),ei=y,Y(),Oe(!0)}else if(we&&Fre(f,Ht,this)){var gt=$_(y,0,te,!0);if(gt===hn)return Oe(!1);if(E=gt,U=Zi(E),Z7(Ea,y,hn,N,E,U,f,!1)!==!1)return Vt(),y.insertBefore(hn,gt),ei=y,Y(),Oe(!0)}else if(E.parentNode===y){U=Zi(E);var lt=0,ne,at=hn.parentNode!==y,rn=!Pre(hn.animated&&hn.toRect||N,E.animated&&E.toRect||U,Ht),ln=Ht?"top":"left",Ee=wQ(E,"top","top")||wQ(hn,"top","top"),le=Ee?Ee.scrollTop:void 0;E_!==E&&(ne=U[ln],JP=!1,U7=!rn&&te.invertSwap||at),lt=Hre(f,E,U,Ht,rn?1:te.swapThreshold,te.invertedSwapThreshold==null?te.swapThreshold:te.invertedSwapThreshold,U7,E_===E);var xo;if(lt!==0){var On=Ef(hn);do On-=lt,xo=ei.children[On];while(xo&&(mo(xo,"display")==="none"||xo===wo))}if(lt===0||xo===E)return Oe(!1);E_=E,YP=lt;var Ft=E.nextElementSibling,R=!1;R=lt===1;var Do=Z7(Ea,y,hn,N,E,U,f,R);if(Do!==!1)return(Do===1||Do===-1)&&(R=Do===1),zX=!0,setTimeout(Ire,30),Vt(),R&&!Ft?y.appendChild(hn):E.parentNode.insertBefore(hn,R?Ft:E),Ee&&hte(Ee,0,le-Ee.scrollTop),ei=hn.parentNode,ne!==void 0&&!U7&&(tH=Math.abs(ne-Zi(E)[ln])),Y(),Oe(!0)}if(y.contains(hn))return Oe(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){hs(document,"mousemove",this._onTouchMove),hs(document,"touchmove",this._onTouchMove),hs(document,"pointermove",this._onTouchMove),hs(document,"dragover",mx),hs(document,"mousemove",mx),hs(document,"touchmove",mx)},_offUpEvents:function(){var f=this.el.ownerDocument;hs(f,"mouseup",this._onDrop),hs(f,"touchend",this._onDrop),hs(f,"pointerup",this._onDrop),hs(f,"pointercancel",this._onDrop),hs(f,"touchcancel",this._onDrop),hs(document,"selectstart",this)},_onDrop:function(f){var y=this.el,E=this.options;if(km=Ef(hn),Fy=Ef(hn,E.draggable),Ad("drop",this,{evt:f}),ei=hn&&hn.parentNode,km=Ef(hn),Fy=Ef(hn,E.draggable),fo.eventCanceled){this._nulling();return}__=!1,U7=!1,JP=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),UX(this.cloneId),UX(this._dragStartId),this.nativeDraggable&&(hs(document,"drop",this),hs(y,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),GP&&mo(document.body,"user-select",""),mo(hn,"transform",""),f&&(WP&&(f.cancelable&&f.preventDefault(),!E.dropBubble&&f.stopPropagation()),wo&&wo.parentNode&&wo.parentNode.removeChild(wo),(Ea===ei||rl&&rl.lastPutMode!=="clone")&&Fa&&Fa.parentNode&&Fa.parentNode.removeChild(Fa),hn&&(this.nativeDraggable&&hs(hn,"dragend",this),_X(hn),hn.style["will-change"]="",WP&&!__&&Tm(hn,rl?rl.options.ghostClass:this.options.ghostClass,!1),Tm(hn,this.options.chosenClass,!1),ku({sortable:this,name:"unchoose",toEl:ei,newIndex:null,newDraggableIndex:null,originalEvent:f}),Ea!==ei?(km>=0&&(ku({rootEl:ei,name:"add",toEl:ei,fromEl:Ea,originalEvent:f}),ku({sortable:this,name:"remove",toEl:ei,originalEvent:f}),ku({rootEl:ei,name:"sort",toEl:ei,fromEl:Ea,originalEvent:f}),ku({sortable:this,name:"sort",toEl:ei,originalEvent:f})),rl&&rl.save()):km!==R_&&km>=0&&(ku({sortable:this,name:"update",toEl:ei,originalEvent:f}),ku({sortable:this,name:"sort",toEl:ei,originalEvent:f})),fo.active&&((km==null||km===-1)&&(km=R_,Fy=XP),ku({sortable:this,name:"end",toEl:ei,originalEvent:f}),this.save()))),this._nulling()},_nulling:function(){Ad("nulling",this),Ea=hn=ei=wo=fx=Fa=eH=Hy=dx=zh=WP=km=Fy=R_=XP=E_=YP=rl=z7=fo.dragged=fo.ghost=fo.clone=fo.active=null,fH.forEach(function(f){f.checked=!0}),fH.length=EX=TX=0},handleEvent:function(f){switch(f.type){case"drop":case"dragend":this._onDrop(f);break;case"dragenter":case"dragover":hn&&(this._onDragOver(f),Lre(f));break;case"selectstart":f.preventDefault();break}},toArray:function(){for(var f=[],y,E=this.el.children,N=0,U=E.length,Q=this.options;N<U;N++)y=E[N],Uh(y,Q.draggable,this.el,!1)&&f.push(y.getAttribute(Q.dataIdAttr)||zre(y));return f},sort:function(f,y){var E={},N=this.el;this.toArray().forEach(function(U,Q){var te=N.children[Q];Uh(te,this.options.draggable,N,!1)&&(E[U]=te)},this),y&&this.captureAnimationState(),f.forEach(function(U){E[U]&&(N.removeChild(E[U]),N.appendChild(E[U]))}),y&&this.animateAll()},save:function(){var f=this.options.store;f&&f.set&&f.set(this)},closest:function(f,y){return Uh(f,y||this.options.draggable,this.el,!1)},option:function(f,y){var E=this.options;if(y===void 0)return E[f];var N=vN.modifyOption(this,f,y);typeof N<"u"?E[f]=N:E[f]=y,f==="group"&&yte(E)},destroy:function(){Ad("destroy",this);var f=this.el;f[Od]=null,hs(f,"mousedown",this._onTapStart),hs(f,"touchstart",this._onTapStart),hs(f,"pointerdown",this._onTapStart),this.nativeDraggable&&(hs(f,"dragover",this),hs(f,"dragenter",this)),Array.prototype.forEach.call(f.querySelectorAll("[draggable]"),function(y){y.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),mH.splice(mH.indexOf(this.el),1),this.el=f=null},_hideClone:function(){if(!Hy){if(Ad("hideClone",this),fo.eventCanceled)return;mo(Fa,"display","none"),this.options.removeCloneOnHide&&Fa.parentNode&&Fa.parentNode.removeChild(Fa),Hy=!0}},_showClone:function(f){if(f.lastPutMode!=="clone"){this._hideClone();return}if(Hy){if(Ad("showClone",this),fo.eventCanceled)return;hn.parentNode==Ea&&!this.options.group.revertClone?Ea.insertBefore(Fa,hn):fx?Ea.insertBefore(Fa,fx):Ea.appendChild(Fa),this.options.group.revertClone&&this.animate(hn,Fa),mo(Fa,"display",""),Hy=!1}}};function Lre(C){C.dataTransfer&&(C.dataTransfer.dropEffect="move"),C.cancelable&&C.preventDefault()}function Z7(C,f,y,E,N,U,Q,te){var Ce,_e=C[Od],Ie=_e.options.onMove,nt;return window.CustomEvent&&!Zb&&!bN?Ce=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(Ce=document.createEvent("Event"),Ce.initEvent("move",!0,!0)),Ce.to=f,Ce.from=C,Ce.dragged=y,Ce.draggedRect=E,Ce.related=N||f,Ce.relatedRect=U||Zi(f),Ce.willInsertAfter=te,Ce.originalEvent=Q,C.dispatchEvent(Ce),Ie&&(nt=Ie.call(_e,Ce,Q)),nt}function _X(C){C.draggable=!1}function Ire(){zX=!1}function Fre(C,f,y){var E=Zi($_(y.el,0,y.options,!0)),N=pte(y.el,y.options,wo),U=10;return f?C.clientX<N.left-U||C.clientY<E.top&&C.clientX<E.right:C.clientY<N.top-U||C.clientY<E.bottom&&C.clientX<E.left}function $re(C,f,y){var E=Zi(dY(y.el,y.options.draggable)),N=pte(y.el,y.options,wo),U=10;return f?C.clientX>N.right+U||C.clientY>E.bottom&&C.clientX>E.left:C.clientY>N.bottom+U||C.clientX>E.right&&C.clientY>E.top}function Hre(C,f,y,E,N,U,Q,te){var Ce=E?C.clientY:C.clientX,_e=E?y.height:y.width,Ie=E?y.top:y.left,nt=E?y.bottom:y.right,pt=!1;if(!Q){if(te&&tH<_e*N){if(!JP&&(YP===1?Ce>Ie+_e*U/2:Ce<nt-_e*U/2)&&(JP=!0),JP)pt=!0;else if(YP===1?Ce<Ie+tH:Ce>nt-tH)return-YP}else if(Ce>Ie+_e*(1-N)/2&&Ce<nt-_e*(1-N)/2)return Vre(f)}return pt=pt||Q,pt&&(Ce<Ie+_e*U/2||Ce>nt-_e*U/2)?Ce>Ie+_e/2?1:-1:0}function Vre(C){return Ef(hn)<Ef(C)?1:-1}function zre(C){for(var f=C.tagName+C.className+C.src+C.href+C.textContent,y=f.length,E=0;y--;)E+=f.charCodeAt(y);return E.toString(36)}function Ure(C){fH.length=0;for(var f=C.getElementsByTagName("input"),y=f.length;y--;){var E=f[y];E.checked&&fH.push(E)}}function nH(C){return setTimeout(C,0)}function UX(C){return clearTimeout(C)}kH&&Ss(document,"touchmove",function(C){(fo.active||__)&&C.cancelable&&C.preventDefault()});fo.utils={on:Ss,off:hs,css:mo,find:mte,is:function(f,y){return!!Uh(f,y,f,!1)},extend:Tre,throttle:fte,closest:Uh,toggleClass:Tm,clone:gte,index:Ef,nextTick:nH,cancelNextTick:UX,detectDirection:vte,getChild:$_,expando:Od};fo.get=function(C){return C[Od]};fo.mount=function(){for(var C=arguments.length,f=new Array(C),y=0;y<C;y++)f[y]=arguments[y];f[0].constructor===Array&&(f=f[0]),f.forEach(function(E){if(!E.prototype||!E.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(E));E.utils&&(fo.utils=Pp(Pp({},fo.utils),E.utils)),vN.mount(E)})};fo.create=function(C,f){return new fo(C,f)};fo.version=xre;var Wi=[],ZP,WX,ZX=!1,AX,OX,hH,qP;function Wre(){function C(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var f in this)f.charAt(0)==="_"&&typeof this[f]=="function"&&(this[f]=this[f].bind(this))}return C.prototype={dragStarted:function(y){var E=y.originalEvent;this.sortable.nativeDraggable?Ss(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ss(document,"pointermove",this._handleFallbackAutoScroll):E.touches?Ss(document,"touchmove",this._handleFallbackAutoScroll):Ss(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(y){var E=y.originalEvent;!this.options.dragOverBubble&&!E.rootEl&&this._handleAutoScroll(E)},drop:function(){this.sortable.nativeDraggable?hs(document,"dragover",this._handleAutoScroll):(hs(document,"pointermove",this._handleFallbackAutoScroll),hs(document,"touchmove",this._handleFallbackAutoScroll),hs(document,"mousemove",this._handleFallbackAutoScroll)),_Q(),oH(),kre()},nulling:function(){hH=WX=ZP=ZX=qP=AX=OX=null,Wi.length=0},_handleFallbackAutoScroll:function(y){this._handleAutoScroll(y,!0)},_handleAutoScroll:function(y,E){var N=this,U=(y.touches?y.touches[0]:y).clientX,Q=(y.touches?y.touches[0]:y).clientY,te=document.elementFromPoint(U,Q);if(hH=y,E||this.options.forceAutoScrollFallback||bN||Zb||GP){RX(y,this.options,te,E);var Ce=Wy(te,!0);ZX&&(!qP||U!==AX||Q!==OX)&&(qP&&_Q(),qP=setInterval(function(){var _e=Wy(document.elementFromPoint(U,Q),!0);_e!==Ce&&(Ce=_e,oH()),RX(y,N.options,_e,E)},10),AX=U,OX=Q)}else{if(!this.options.bubbleScroll||Wy(te,!0)===Mp()){oH();return}RX(y,this.options,Wy(te,!1),!1)}}},Wb(C,{pluginName:"scroll",initializeByDefault:!0})}function oH(){Wi.forEach(function(C){clearInterval(C.pid)}),Wi=[]}function _Q(){clearInterval(qP)}var RX=fte(function(C,f,y,E){if(f.scroll){var N=(C.touches?C.touches[0]:C).clientX,U=(C.touches?C.touches[0]:C).clientY,Q=f.scrollSensitivity,te=f.scrollSpeed,Ce=Mp(),_e=!1,Ie;WX!==y&&(WX=y,oH(),ZP=f.scroll,Ie=f.scrollFn,ZP===!0&&(ZP=Wy(y,!0)));var nt=0,pt=ZP;do{var Ht=pt,ot=Zi(Ht),st=ot.top,Ne=ot.bottom,Vt=ot.left,Oe=ot.right,Y=ot.width,we=ot.height,gt=void 0,lt=void 0,ne=Ht.scrollWidth,at=Ht.scrollHeight,rn=mo(Ht),ln=Ht.scrollLeft,Ee=Ht.scrollTop;Ht===Ce?(gt=Y<ne&&(rn.overflowX==="auto"||rn.overflowX==="scroll"||rn.overflowX==="visible"),lt=we<at&&(rn.overflowY==="auto"||rn.overflowY==="scroll"||rn.overflowY==="visible")):(gt=Y<ne&&(rn.overflowX==="auto"||rn.overflowX==="scroll"),lt=we<at&&(rn.overflowY==="auto"||rn.overflowY==="scroll"));var le=gt&&(Math.abs(Oe-N)<=Q&&ln+Y<ne)-(Math.abs(Vt-N)<=Q&&!!ln),xo=lt&&(Math.abs(Ne-U)<=Q&&Ee+we<at)-(Math.abs(st-U)<=Q&&!!Ee);if(!Wi[nt])for(var On=0;On<=nt;On++)Wi[On]||(Wi[On]={});(Wi[nt].vx!=le||Wi[nt].vy!=xo||Wi[nt].el!==Ht)&&(Wi[nt].el=Ht,Wi[nt].vx=le,Wi[nt].vy=xo,clearInterval(Wi[nt].pid),(le!=0||xo!=0)&&(_e=!0,Wi[nt].pid=setInterval((function(){E&&this.layer===0&&fo.active._onTouchMove(hH);var Ft=Wi[this.layer].vy?Wi[this.layer].vy*te:0,R=Wi[this.layer].vx?Wi[this.layer].vx*te:0;typeof Ie=="function"&&Ie.call(fo.dragged.parentNode[Od],R,Ft,C,hH,Wi[this.layer].el)!=="continue"||hte(Wi[this.layer].el,R,Ft)}).bind({layer:nt}),24))),nt++}while(f.bubbleScroll&&pt!==Ce&&(pt=Wy(pt,!1)));ZX=_e}},30),wte=function(f){var y=f.originalEvent,E=f.putSortable,N=f.dragEl,U=f.activeSortable,Q=f.dispatchSortableEvent,te=f.hideGhostForTarget,Ce=f.unhideGhostForTarget;if(y){var _e=E||U;te();var Ie=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:y,nt=document.elementFromPoint(Ie.clientX,Ie.clientY);Ce(),_e&&!_e.el.contains(nt)&&(Q("spill"),this.onSpill({dragEl:N,putSortable:E}))}};function mY(){}mY.prototype={startIndex:null,dragStart:function(f){var y=f.oldDraggableIndex;this.startIndex=y},onSpill:function(f){var y=f.dragEl,E=f.putSortable;this.sortable.captureAnimationState(),E&&E.captureAnimationState();var N=$_(this.sortable.el,this.startIndex,this.options);N?this.sortable.el.insertBefore(y,N):this.sortable.el.appendChild(y),this.sortable.animateAll(),E&&E.animateAll()},drop:wte};Wb(mY,{pluginName:"revertOnSpill"});function fY(){}fY.prototype={onSpill:function(f){var y=f.dragEl,E=f.putSortable,N=E||this.sortable;N.captureAnimationState(),y.parentNode&&y.parentNode.removeChild(y),N.animateAll()},drop:wte};Wb(fY,{pluginName:"removeOnSpill"});fo.mount(new Wre);fo.mount(fY,mY);document.addEventListener("turbo:load",function(){const C=document.querySelector("#pictures"),f=document.querySelector("#preview-container"),y=document.querySelector("#featured_index");let E=[];C.addEventListener("change",U=>{E=Array.from(U.target.files).map((Q,te)=>(Q.customIndex=te,Q)),N()});function N(){f.innerHTML="",E.forEach((U,Q)=>{console.log(U);const te=document.createElement("div");te.style.border=Q===parseInt(y.value)?"3px solid green":"1px solid #ccc",te.style.cursor="pointer",te.style.padding="5px",te.dataset.index=Q;const Ce=document.createElement("img");Ce.width=120,Ce.draggable=!1;const _e=new FileReader;_e.onload=Ie=>{Ce.src=Ie.target.result},_e.readAsDataURL(U),te.appendChild(Ce),te.addEventListener("click",()=>{y.value=Q,N()}),f.appendChild(te)}),console.log(E),new fo(f,{draggable:"div",onEnd:U=>{const Q=Array.from(f.children);E=Q.map(te=>E[te.dataset.index]),Q.forEach((te,Ce)=>{te.dataset.index=Ce}),document.querySelector("#pictures_order").value=E.map(te=>te.customIndex).join(","),N()}})}});const hY=document.getElementById("nav-menu"),AQ=document.getElementById("nav-toggle"),OQ=document.getElementById("nav-close"),Zre=document.querySelectorAll(".nav__link");AQ&&AQ.addEventListener("click",()=>{hY.classList.add("show-menu")});OQ&&OQ.addEventListener("click",()=>{hY.classList.remove("show-menu")});Zre.forEach(C=>C.addEventListener("click",function(){hY.classList.remove("show-menu")}));function qre(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var DX={exports:{}},RQ;function jre(){return RQ||(RQ=1,function(C){(function(){var f=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},y=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},E=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},N=function(e,n){return U(function(o,r){return e.eq(n(o),n(r))})},U=function(e){return{eq:e}},Q=U(function(e,n){return e===n}),te=Q,Ce=function(e){return U(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,i=0;i<r;i++)if(!e.eq(n[i],o[i]))return!1;return!0})},_e=function(e,n){return N(Ce(e),function(o){return E(o,n)})},Ie=function(e){return U(function(n,o){var r=Object.keys(n),i=Object.keys(o);if(!_e(te).eq(r,i))return!1;for(var u=r.length,h=0;h<u;h++){var v=r[h];if(!e.eq(n[v],o[v]))return!1}return!0})},nt=U(function(e,n){if(e===n)return!0;var o=f(e),r=f(n);return o!==r?!1:y(o)?e===n:o==="array"?Ce(nt).eq(e,n):o==="object"?Ie(nt).eq(e,n):!1});const pt=Object.getPrototypeOf,Ht=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},ot=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Ht(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},st=e=>n=>ot(n)===e,Ne=e=>n=>typeof n===e,Vt=e=>n=>e===n,Oe=(e,n)=>we(e)&&Ht(e,n,(o,r)=>pt(o)===r),Y=st("string"),we=st("object"),gt=e=>Oe(e,Object),lt=st("array"),ne=Vt(null),at=Ne("boolean"),rn=Vt(void 0),ln=e=>e==null,Ee=e=>!ln(e),le=Ne("function"),xo=Ne("number"),On=(e,n)=>{if(lt(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Ft=()=>{},R=(e,n)=>(...o)=>e(n.apply(null,o)),Do=(e,n)=>o=>e(n(o)),St=e=>()=>e,Uo=e=>e,bn=(e,n)=>e===n;function je(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const Mo=e=>n=>!e(n),wr=e=>()=>{throw new Error(e)},gs=e=>e(),Xr=e=>{e()},qe=St(!1),Ot=St(!0);class V{constructor(n,o){this.tag=n,this.value=o}static some(n){return new V(!0,n)}static none(){return V.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?V.some(n(this.value)):V.none()}bind(n){return this.tag?n(this.value):V.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:V.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Ee(n)?V.some(n):V.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}V.singletonNone=new V(!1);const Hl=Array.prototype.slice,Eo=Array.prototype.indexOf,Fs=Array.prototype.push,Wo=(e,n)=>Eo.call(e,n),Np=(e,n)=>{const o=Wo(e,n);return o===-1?V.none():V.some(o)},yn=(e,n)=>Wo(e,n)>-1,bo=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return!0}return!1},Cn=(e,n)=>{const o=e.length,r=new Array(o);for(let i=0;i<o;i++){const u=e[i];r[i]=n(u,i)}return r},ye=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];n(i,o)}},ic=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},ir=(e,n)=>{const o=[],r=[];for(let i=0,u=e.length;i<u;i++){const h=e[i];(n(h,i)?o:r).push(h)}return{pass:o,fail:r}},an=(e,n)=>{const o=[];for(let r=0,i=e.length;r<i;r++){const u=e[r];n(u,r)&&o.push(u)}return o},Bc=(e,n,o)=>(ic(e,(r,i)=>{o=n(o,r,i)}),o),as=(e,n,o)=>(ye(e,(r,i)=>{o=n(o,r,i)}),o),_u=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++){const u=e[r];if(n(u,r))return V.some(u);if(o(u,r))break}return V.none()},ps=(e,n)=>_u(e,n,qe),Yr=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return V.some(o)}return V.none()},Dd=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!lt(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);Fs.apply(n,e[o])}return n},ti=(e,n)=>Dd(Cn(e,n)),ks=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const i=e[o];if(n(i,o)!==!0)return!1}return!0},Zo=e=>{const n=Hl.call(e,0);return n.reverse(),n},qi=(e,n)=>an(e,o=>!yn(n,o)),_s=(e,n)=>{const o={};for(let r=0,i=e.length;r<i;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Io=(e,n)=>{const o=Hl.call(e,0);return o.sort(n),o},Vl=(e,n)=>n>=0&&n<e.length?V.some(e[n]):V.none(),Ir=e=>Vl(e,0),Si=e=>Vl(e,e.length-1),Jr=le(Array.from)?Array.from:e=>Hl.call(e),zl=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return V.none()},Au=(e,n)=>{const o=[],r=le(n)?i=>bo(o,u=>n(u,i)):i=>yn(o,i);for(let i=0,u=e.length;i<u;i++){const h=e[i];r(h)||o.push(h)}return o},fr=Object.keys,_f=Object.hasOwnProperty,Tt=(e,n)=>{const o=fr(e);for(let r=0,i=o.length;r<i;r++){const u=o[r],h=e[u];n(h,u)}},Jn=(e,n)=>Ha(e,(o,r)=>({k:r,v:n(o,r)})),Ha=(e,n)=>{const o={};return Tt(e,(r,i)=>{const u=n(r,i);o[u.k]=u.v}),o},Qr=e=>(n,o)=>{e[o]=n},Ou=(e,n,o,r)=>{Tt(e,(i,u)=>{(n(i,u)?o:r)(i,u)})},Ul=(e,n)=>{const o={},r={};return Ou(e,n,Qr(o),Qr(r)),{t:o,f:r}},qo=(e,n)=>{const o={};return Ou(e,n,Qr(o),Ft),o},ni=(e,n)=>{const o=[];return Tt(e,(r,i)=>{o.push(n(r,i))}),o},Ru=e=>ni(e,Uo),Po=(e,n)=>un(e,n)?V.from(e[n]):V.none(),un=(e,n)=>_f.call(e,n),ea=(e,n)=>un(e,n)&&e[n]!==void 0&&e[n]!==null,Lc=(e,n,o=nt)=>Ie(o).eq(e,n),Md=e=>{const n={};return ye(e,o=>{n[o]={}}),fr(n)},jh=e=>e.length!==void 0,Ta=Array.isArray,ms=e=>{if(Ta(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},As=(e,n,o)=>{if(!e)return!1;if(o=o||e,jh(e)){for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(un(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},wi=(e,n)=>{const o=[];return As(e,(r,i)=>{o.push(n(r,i,e))}),o},Pd=(e,n)=>{const o=[];return As(e,(r,i)=>{(!n||n(r,i,e))&&o.push(r)}),o},Ic=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},xr=(e,n,o,r)=>{let i=rn(o)?e[0]:o;for(let u=0;u<e.length;u++)i=n.call(r,i,e[u],u);return i},is=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e))return r;return-1},ji=e=>e[e.length-1],ka=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Af=(e,n,o,r)=>{const i=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!i,h=e.isiOS()||e.isAndroid(),v=h||r("(pointer:coarse)"),w=i||!u&&h&&r("(min-device-width:768px)"),k=u||h&&!w,P=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,I=!k&&!w&&!P;return{isiPad:St(i),isiPhone:St(u),isTablet:St(w),isPhone:St(k),isTouch:St(v),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:St(P),isDesktop:St(I)}},Gh=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Nd=(e,n)=>{const o=Gh(e,n);if(!o)return{major:0,minor:0};const r=i=>Number(n.replace(o,"$"+i));return ct(r(1),r(2))},Wl=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?xt():Nd(e,o)},xt=()=>ct(0,0),ct=(e,n)=>({major:e,minor:n}),Zl={nu:ct,detect:Wl,unknown:xt},Bp=(e,n)=>zl(n.brands,o=>{const r=o.brand.toLowerCase();return ps(e,i=>{var u;return r===((u=i.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(i=>({current:i.name,version:Zl.nu(parseInt(o.version,10),0)}))}),Am=(e,n)=>{const o=String(n).toLowerCase();return ps(e,r=>r.search(o))},Qo=(e,n)=>Am(e,n).map(o=>{const r=Zl.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Of=(e,n)=>Am(e,n).map(o=>{const r=Zl.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Om=(e,n)=>e.substring(n),ql=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Du=(e,n)=>$s(e,n)?Om(e,n.length):e,Fr=(e,n,o=0,r)=>{const i=e.indexOf(n,o);return i!==-1?rn(r)?!0:i+n.length<=r:!1},$s=(e,n)=>ql(e,n,0),_a=(e,n)=>ql(e,n,e.length-n.length),Mu=e=>n=>n.replace(e,""),Hs=Mu(/^\s+|\s+$/g),Rf=Mu(/^\s+/g),xi=Mu(/\s+$/g),Fo=e=>e.length>0,Os=e=>!Fo(e),hr=(e,n)=>n<=0?"":new Array(n+1).join(e),jl=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?V.none():V.some(o)},Fc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Aa=e=>n=>Fr(n,e),jo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Fr(e,"edge/")&&Fr(e,"chrome")&&Fr(e,"safari")&&Fr(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Fc],search:e=>Fr(e,"chrome")&&!Fr(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Fr(e,"msie")||Fr(e,"trident")},{name:"Opera",versionRegexes:[Fc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Aa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Aa("firefox")},{name:"Safari",versionRegexes:[Fc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Fr(e,"safari")||Fr(e,"mobile/"))&&Fr(e,"applewebkit")}],Kh=[{name:"Windows",search:Aa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Fr(e,"iphone")||Fr(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Aa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Aa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Aa("linux"),versionRegexes:[]},{name:"Solaris",search:Aa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Aa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Aa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],al={browsers:St(jo),oses:St(Kh)},Df="Edge",Kn="Chromium",il="IE",ws="Opera",Mf="Firefox",cc="Safari",Gl=()=>Er({current:void 0,version:Zl.unknown()}),Er=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isEdge:r(Df),isChromium:r(Kn),isIE:r(il),isOpera:r(ws),isFirefox:r(Mf),isSafari:r(cc)}},Bd={unknown:Gl,nu:Er},$c="Windows",Rm="iOS",Xh="Android",Pf="Linux",$r="macOS",cl="Solaris",Pu="FreeBSD",Ld="ChromeOS",Yh=()=>Hc({current:void 0,version:Zl.unknown()}),Hc=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isWindows:r($c),isiOS:r(Rm),isAndroid:r(Xh),isMacOS:r($r),isLinux:r(Pf),isSolaris:r(cl),isFreeBSD:r(Pu),isChromeOS:r(Ld)}},Hr={unknown:Yh,nu:Hc},lc={detect:(e,n,o)=>{const r=al.browsers(),i=al.oses(),u=n.bind(w=>Bp(r,w)).orThunk(()=>Qo(r,e)).fold(Bd.unknown,Bd.nu),h=Of(i,e).fold(Hr.unknown,Hr.nu),v=Af(h,u,e,o);return{browser:u,os:h,deviceType:v}}},Dm=e=>window.matchMedia(e).matches;let Nf=ka(()=>lc.detect(window.navigator.userAgent,V.from(window.navigator.userAgentData),Dm));const la=()=>Nf(),Z=window.navigator.userAgent,se=la(),ge=se.browser,He=se.os,mt=se.deviceType,Ve=Z.indexOf("Windows Phone")!==-1,zt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:ge.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!ge.isIE(),windowsPhone:Ve,browser:{current:ge.current,version:ge.version,isChromium:ge.isChromium,isEdge:ge.isEdge,isFirefox:ge.isFirefox,isIE:ge.isIE,isOpera:ge.isOpera,isSafari:ge.isSafari},os:{current:He.current,version:He.version,isAndroid:He.isAndroid,isChromeOS:He.isChromeOS,isFreeBSD:He.isFreeBSD,isiOS:He.isiOS,isLinux:He.isLinux,isMacOS:He.isMacOS,isSolaris:He.isSolaris,isWindows:He.isWindows},deviceType:{isDesktop:mt.isDesktop,isiPad:mt.isiPad,isiPhone:mt.isiPhone,isPhone:mt.isPhone,isTablet:mt.isTablet,isTouch:mt.isTouch,isWebView:mt.isWebView}},Ln=/^\s*|\s*$/g,_n=e=>ln(e)?"":(""+e).replace(Ln,""),Vs=(e,n)=>n?n==="array"&&Ta(e)?!0:typeof e===n:e!==void 0,zn=(e,n,o={})=>{const r=Y(e)?e.split(n||","):e||[];let i=r.length;for(;i--;)o[r[i]]={};return o},Nu=un,Mm=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const i in r)if(un(r,i)){const u=r[i];u!==void 0&&(e[i]=u)}}return e},Kl=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),As(e,(i,u)=>n.call(r,i,u,o)===!1?!1:(Kl(i,n,o,r),!0)))},Xe={trim:_n,isArray:Ta,is:Vs,toArray:ms,makeMap:zn,each:As,map:wi,grep:Pd,inArray:Ic,hasOwn:Nu,extend:Mm,walk:Kl,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,i=o.length;r<i&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>lt(e)?e:e===""?[]:wi(e.split(n||","),_n),_addCacheSuffix:e=>{const n=zt.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Xl=(e,n,o=bn)=>e.exists(r=>o(r,n)),Ps=(e,n,o=bn)=>Ns(e,n,o).getOr(e.isNone()&&n.isNone()),Lp=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Ns=(e,n,o)=>e.isSome()&&n.isSome()?V.some(o(e.getOrDie(),n.getOrDie())):V.none(),Un=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?V.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):V.none(),Ei=(e,n)=>e?V.some(n):V.none(),Vr=typeof window<"u"?window:Function("return this;")(),Lf=(e,n)=>{let o=n??Vr;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},nr=(e,n)=>{const o=e.split(".");return Lf(o,n)},Bu=(e,n)=>nr(e,n),Ip=(e,n)=>{const o=Bu(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},qb=Object.getPrototypeOf,$o=e=>Ip("HTMLElement",e),qy=e=>{const n=nr("ownerDocument.defaultView",e);return we(e)&&($o(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(qb(e).constructor.name))},Tr=8,Va=9,Ti=11,Lu=1,jb=3,Rn=e=>e.dom.nodeName.toLowerCase(),Id=e=>e.dom.nodeType,Yl=e=>n=>Id(n)===e,Jl=e=>Id(e)===Tr||Rn(e)==="#comment",Pm=e=>es(e)&&qy(e.dom),es=Yl(Lu),kr=Yl(jb),Fd=Yl(Va),Fp=Yl(Ti),Ql=e=>n=>es(n)&&Rn(n)===e,oi=(e,n,o)=>{if(Y(o)||at(o)||xo(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},zr=(e,n,o)=>{oi(e.dom,n,o)},ua=(e,n)=>{const o=e.dom;Tt(n,(r,i)=>{oi(o,i,r)})},Oa=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Vc=(e,n)=>V.from(Oa(e,n)),$d=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},cs=(e,n)=>{e.dom.removeAttribute(n)},If=e=>{const n=e.dom.attributes;return n==null||n.length===0},$p=e=>as(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Hd=(e,n)=>{const o=Oa(e,n);return o===void 0||o===""?[]:o.split(" ")},Jh=(e,n,o)=>{const i=Hd(e,n).concat([o]);return zr(e,n,i.join(" ")),!0},jy=(e,n,o)=>{const r=an(Hd(e,n),i=>i!==o);return r.length>0?zr(e,n,r.join(" ")):cs(e,n),!1},Vd=e=>e.dom.classList!==void 0,zd=e=>Hd(e,"class"),Ud=(e,n)=>Jh(e,"class",n),si=(e,n)=>jy(e,"class",n),Gb=(e,n)=>yn(zd(e),n)?si(e,n):Ud(e,n),Iu=(e,n)=>{Vd(e)?e.dom.classList.add(n):Ud(e,n)},Qh=e=>{(Vd(e)?e.dom.classList:zd(e)).length===0&&cs(e,"class")},Ff=(e,n)=>{Vd(e)?e.dom.classList.remove(n):si(e,n),Qh(e)},Kb=(e,n)=>{const o=Vd(e)?e.dom.classList.toggle(n):Gb(e,n);return Qh(e),o},Hp=(e,n)=>Vd(e)&&e.dom.classList.contains(n),$f=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const i="HTML does not have a single root node";throw console.error(i,e),new Error(i)}return Wd(r.childNodes[0])},Vp=(e,n)=>{const r=(n||document).createElement(e);return Wd(r)},Xb=(e,n)=>{const r=(n||document).createTextNode(e);return Wd(r)},Wd=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ie={fromHtml:$f,fromTag:Vp,fromText:Xb,fromDom:Wd,fromPoint:(e,n,o)=>V.from(e.dom.elementFromPoint(n,o)).map(Wd)},Zd=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let i=n(e);do i=i.bind(r);while(i.isSome());return o},za=(e,n)=>{const o=e.dom;if(o.nodeType!==Lu)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Gy=e=>e.nodeType!==Lu&&e.nodeType!==Va&&e.nodeType!==Ti||e.childElementCount===0,Yb=(e,n)=>{const o=n===void 0?document:n.dom;return Gy(o)?[]:Cn(o.querySelectorAll(e),ie.fromDom)},Nm=(e,n)=>{const o=n===void 0?document:n.dom;return Gy(o)?V.none():V.from(o.querySelector(e)).map(ie.fromDom)},oo=(e,n)=>e.dom===n.dom,xs=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},ri=e=>ie.fromDom(e.dom.ownerDocument),eu=e=>Fd(e)?e:ri(e),Jb=e=>ie.fromDom(eu(e).dom.documentElement),qd=e=>ie.fromDom(eu(e).dom.defaultView),ai=e=>V.from(e.dom.parentNode).map(ie.fromDom),Hf=e=>V.from(e.dom.parentElement).map(ie.fromDom),Vf=(e,n)=>{const o=le(n)?n:qe;let r=e.dom;const i=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,h=ie.fromDom(u);if(i.push(h),o(h)===!0)break;r=u}return i},jd=e=>{const n=o=>an(o,r=>!oo(e,r));return ai(e).map(Ur).map(n).getOr([])},Fu=e=>V.from(e.dom.previousSibling).map(ie.fromDom),zf=e=>V.from(e.dom.nextSibling).map(ie.fromDom),ki=e=>Zo(Zd(e,Fu)),Uf=e=>Zd(e,zf),Ur=e=>Cn(e.dom.childNodes,ie.fromDom),$u=(e,n)=>{const o=e.dom.childNodes;return V.from(o[n]).map(ie.fromDom)},uc=e=>$u(e,0),Ra=e=>$u(e,e.dom.childNodes.length-1),Gd=e=>e.dom.childNodes.length,Ky=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return ie.fromDom(n)},eg=e=>Fp(e)&&Ee(e.dom.host),ll=e=>ie.fromDom(e.dom.getRootNode()),Bm=e=>eg(e)?e:Ky(eu(e)),Qb=e=>eg(e)?e:ie.fromDom(eu(e).dom.body),tg=e=>{const n=ll(e);return eg(n)?V.some(n):V.none()},e0=e=>ie.fromDom(e.dom.host),xx=e=>{if(Ee(e.target)){const n=ie.fromDom(e.target);if(es(n)&&t0(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Ir(o)}}return V.from(e.target)},t0=e=>Ee(e.dom.shadowRoot),tu=e=>{const n=kr(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return tg(ie.fromDom(n)).fold(()=>o.body.contains(n),Do(tu,e0))};var Up=(e,n,o,r,i)=>e(o,r)?V.some(o):le(i)&&i(o)?V.none():n(o,r,i);const ul=(e,n,o)=>{let r=e.dom;const i=le(o)?o:qe;for(;r.parentNode;){r=r.parentNode;const u=ie.fromDom(r);if(n(u))return V.some(u);if(i(u))break}return V.none()},bs=(e,n,o)=>Up((i,u)=>u(i),ul,e,n,o),pr=(e,n)=>{const o=e.dom;return o.parentNode?_i(ie.fromDom(o.parentNode),r=>!oo(e,r)&&n(r)):V.none()},_i=(e,n)=>{const o=i=>n(ie.fromDom(i));return ps(e.dom.childNodes,o).map(ie.fromDom)},Wf=(e,n)=>{const o=r=>{for(let i=0;i<r.childNodes.length;i++){const u=ie.fromDom(r.childNodes[i]);if(n(u))return V.some(u);const h=o(r.childNodes[i]);if(h.isSome())return h}return V.none()};return o(e.dom)},Zf=(e,n,o)=>ul(e,r=>za(r,n),o),_r=(e,n)=>Nm(n,e),Wt=(e,n,o)=>Up((i,u)=>za(i,u),Zf,e,n,o),Wp=e=>Wt(e,"[contenteditable]"),nu=(e,n=!1)=>tu(e)?e.dom.isContentEditable:Wp(e).fold(St(n),o=>Ai(o)==="true"),Ai=e=>e.dom.contentEditable,uo=(e,n)=>{e.dom.contentEditable=n?"true":"false"},Hu=e=>e.style!==void 0&&le(e.style.getPropertyValue),qf=(e,n,o)=>{if(!Y(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Hu(e)&&e.style.setProperty(n,o)},ng=(e,n)=>{Hu(e)&&e.style.removeProperty(n)},Zp=(e,n,o)=>{const r=e.dom;qf(r,n,o)},ou=(e,n)=>{const o=e.dom;Tt(n,(r,i)=>{qf(o,i,r)})},dc=(e,n)=>{const o=e.dom,i=window.getComputedStyle(o).getPropertyValue(n);return i===""&&!tu(e)?og(o,n):i},og=(e,n)=>Hu(e)?e.style.getPropertyValue(n):"",zs=(e,n)=>{const o=e.dom,r=og(o,n);return V.from(r).filter(i=>i.length>0)},Ua=e=>{const n={},o=e.dom;if(Hu(o))for(let r=0;r<o.style.length;r++){const i=o.style.item(r);n[i]=o.style[i]}return n},ii=(e,n)=>{const o=e.dom;ng(o,n),Xl(Vc(e,"style").map(Hs),"")&&cs(e,"style")},Pn=e=>e.dom.offsetWidth,Us=(e,n)=>{ai(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},mc=(e,n)=>{zf(e).fold(()=>{ai(e).each(i=>{ts(i,n)})},r=>{Us(r,n)})},sg=(e,n)=>{uc(e).fold(()=>{ts(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},ts=(e,n)=>{e.dom.appendChild(n.dom)},rg=(e,n)=>{Us(e,n),ts(n,e)},In=(e,n)=>{ye(n,(o,r)=>{const i=r===0?e:n[r-1];mc(i,o)})},na=(e,n)=>{ye(n,o=>{ts(e,o)})},dl=e=>{e.dom.textContent="",ye(Ur(e),n=>{ns(n)})},ns=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},su=e=>{const n=Ur(e);n.length>0&&In(e,n),ns(e)},Ex=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Ur(ie.fromDom(r))},n0=e=>Cn(e,ie.fromDom),Xy=e=>e.dom.innerHTML,jf=(e,n)=>{const r=ri(e).dom,i=ie.fromDom(r.createDocumentFragment()),u=Ex(n,r);na(i,u),dl(e),ts(e,i)},Yy=e=>{const n=ie.fromTag("div"),o=ie.fromDom(e.dom.cloneNode(!0));return ts(n,o),Xy(n)},Qn=(e,n,o,r,i,u,h)=>({target:e,x:n,y:o,stop:r,prevent:i,kill:u,raw:h}),o0=e=>{const n=ie.fromDom(xx(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),i=R(r,o);return Qn(n,e.clientX,e.clientY,o,r,i,e)},Bs=(e,n)=>o=>{e(o)&&n(o0(o))},_=(e,n,o,r,i)=>{const u=Bs(o,r);return e.dom.addEventListener(n,u,i),{unbind:je(z,e,n,u,i)}},B=(e,n,o,r)=>_(e,n,o,r,!1),z=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},ae=(e,n)=>({left:e,top:n,translate:(r,i)=>ae(e+r,n+i)}),me=ae,Ye=e=>{const n=e.getBoundingClientRect();return me(n.left,n.top)},Rt=(e,n)=>e!==void 0?e:n!==void 0?n:0,Dn=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,i=n.documentElement;if(o===e.dom)return me(o.offsetLeft,o.offsetTop);const u=Rt(r==null?void 0:r.pageYOffset,i.scrollTop),h=Rt(r==null?void 0:r.pageXOffset,i.scrollLeft),v=Rt(i.clientTop,o.clientTop),w=Rt(i.clientLeft,o.clientLeft);return pn(e).translate(h-w,u-v)},pn=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?me(r.offsetLeft,r.offsetTop):tu(e)?Ye(n):me(0,0)},Zt=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return me(o,r)},Ho=(e,n,o)=>{const i=(o!==void 0?o.dom:document).defaultView;i&&i.scrollTo(e,n)},vs=(e,n)=>{la().browser.isSafari()&&le(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},ci=e=>{const n=e===void 0?window:e;return la().browser.isFirefox()?V.none():V.from(n.visualViewport)},Oi=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),Jy=e=>{const n=e===void 0?window:e,o=n.document,r=Zt(ie.fromDom(o));return ci(n).fold(()=>{const i=n.document.documentElement,u=i.clientWidth,h=i.clientHeight;return Oi(r.left,r.top,u,h)},i=>Oi(Math.max(i.pageLeft,r.left),Math.max(i.pageTop,r.top),i.width,i.height))},Qy=(e,n)=>an(Ur(e),n),Tx=(e,n)=>{let o=[];return ye(Ur(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Tx(r,n))}),o},Wa=(e,n)=>Yb(n,e),s0=(e,n,o)=>ul(e,n,o).isSome(),r0=(e,n)=>pr(e,n).isSome(),qp=(e,n)=>Wf(e,n).isSome();class cr{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,i){if(n){if(!i&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let h=n.parentNode;h&&h!==this.rootNode;h=h.parentNode)if(u=h[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const i=n.parentNode;if(i&&i!==this.rootNode)return i}}}const jp="\uFEFF",br=" ",e2=e=>e===jp,a0=e=>e.replace(/\uFEFF/g,""),yN=/^[ \t\r\n]*$/,Vu=e=>yN.test(e),i0=e=>{for(const n of e)if(!e2(n))return!1;return!0},c0=e=>" \f	\v".indexOf(e)!==-1,t2=e=>e===`
`||e==="\r",Z_=(e,n)=>n<e.length&&n>=0?t2(e[n]):!1,kx=(e,n=4,o=!0,r=!0)=>{const i=hr(" ",n),u=e.replace(/\t/g,i);return as(u,(v,w)=>c0(w)||w===br?v.pcIsSpace||v.str===""&&o||v.str.length===u.length-1&&r||Z_(u,v.str.length+1)?{pcIsSpace:!1,str:v.str+br}:{pcIsSpace:!0,str:v.str+" "}:{pcIsSpace:t2(w),str:v.str+w},{pcIsSpace:!1,str:""}).str},Gf=e=>n=>!!n&&n.nodeType===e,Gp=e=>!!e&&!Object.getPrototypeOf(e),qt=Gf(1),zu=e=>qt(e)&&Pm(ie.fromDom(e)),fc=e=>qt(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",dn=e=>{const n=e.toLowerCase();return o=>Ee(o)&&o.nodeName.toLowerCase()===n},Da=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return yn(n,r)}return!1}},Lm=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(qt(r)){const i=r.ownerDocument.defaultView;if(i)for(let u=0;u<o.length;u++){const h=i.getComputedStyle(r,null);if((h?h.getPropertyValue(e):null)===o[u])return!0}}return!1}},n2=e=>n=>qt(n)&&n.hasAttribute(e),Kf=e=>qt(e)&&e.hasAttribute("data-mce-bogus"),l0=e=>qt(e)&&e.getAttribute("data-mce-bogus")==="all",oa=e=>qt(e)&&e.tagName==="TABLE",Kp=e=>n=>!!(zu(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),ag=Da(["textarea","input"]),We=Gf(3),Xp=Gf(4),Im=Gf(7),Kd=Gf(8),Yp=Gf(9),u0=Gf(11),Go=dn("br"),_x=dn("img"),li=Kp("true"),ls=Kp("false"),o2=e=>zu(e)&&e.isContentEditable&&Ee(e.parentElement)&&!e.parentElement.isContentEditable,os=Da(["td","th"]),ml=Da(["td","th","caption"]),lr=Da(["video","audio","object","embed"]),ig=dn("li"),Za=dn("details"),Ax=dn("summary"),sa={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},ui=(e,n,o)=>{const r=ie.fromDom(n),i=ie.fromDom(e),u=o.getWhitespaceElements();return s0(i,v=>un(u,Rn(v)),je(oo,r))},s2=e=>qt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Ze=(e,n)=>qt(e)&&un(n.getNonEmptyElements(),e.nodeName),Ri=n2("data-mce-bookmark"),d0=e=>Hf(ie.fromDom(e)).exists(n=>!nu(n)),vr=(e,n,o)=>Vu(e.data)&&!ui(e,n,o),fl=(e,n,o,r)=>We(e)&&!vr(e,n,o)&&(!r.includeZwsp||!i0(e.data)),hc=(e,n,o,r)=>le(r.isContent)&&r.isContent(n)||Ze(n,e)||Ri(n)||s2(n)||fl(n,o,e,r)||ls(n)||li(n)&&d0(n),ru=(e,n,o)=>{const r={...sa,...o};if(r.checkRootAsContent&&hc(e,n,n,r))return!1;let i=n.firstChild,u=0;if(!i)return!0;const h=new cr(i,n);do{if(r.skipBogus&&qt(i)){const v=i.getAttribute("data-mce-bogus");if(v){i=h.next(v==="all");continue}}if(Kd(i)){i=h.next(!0);continue}if(Go(i)){u++,i=h.next();continue}if(hc(e,i,n,r))return!1;i=h.next()}while(i);return u<=1},Ws=(e,n,o)=>ru(e,n.dom,{checkRootAsContent:!0,...o}),r2=(e,n,o)=>hc(e,n,n,{includeZwsp:sa.includeZwsp,...o}),Ko=e=>{let n=e;return{get:()=>n,set:i=>{n=i}}},no=e=>{const n=Ko(V.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(V.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:v=>{o(),n.set(V.some(v))}}},au=e=>{const n=Ko(V.none()),o=()=>n.get().each(v=>clearInterval(v));return{clear:()=>{o(),n.set(V.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:v=>{o(),n.set(V.some(setInterval(v,e)))}}},gc=()=>{const e=no(Ft);return{...e,on:o=>e.get().each(o)}},Ls=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},Fm=e=>Ls(e)!=="html",Uu=e=>Fm(e.nodeName),$m=e=>Ls(e.nodeName),Gi=["svg","math"],q_=()=>{const e=gc(),n=()=>e.get().map($m).getOr("html");return{track:i=>(Uu(i)?e.set(i):e.get().exists(u=>!u.contains(i))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},Se="data-mce-block",zc=e=>an(fr(e),n=>!/[A-Z]/.test(n)),Jp=e=>Cn(zc(e),n=>{const o=CSS.escape(n);return`${o}:`+Cn(Gi,r=>`not(${r} ${o})`).join(":")}).join(","),ys=(e,n)=>Ee(n.querySelector(e))?(n.setAttribute(Se,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Se),!1),hl=(e,n)=>{const o=Jp(e.getTransparentElements()),r=Jp(e.getBlockElements());return an(n.querySelectorAll(o),i=>ys(r,i))},da=(e,n,o)=>{var r;const i=o?"lastChild":"firstChild";for(let u=n[i];u;u=u[i])if(ru(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},ss=(e,n,o)=>{const r=document.createRange(),i=n.parentNode;if(i){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();da(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const h=r.extractContents();da(e,h,!1),ru(e,u,{checkRootAsContent:!0})||i.insertBefore(u,n),ru(e,o,{checkRootAsContent:!0})||i.insertBefore(o,n),ru(e,h,{checkRootAsContent:!0})||i.insertBefore(h,n),i.removeChild(n)}},a2=(e,n,o)=>{const r=e.getBlockElements(),i=ie.fromDom(n),u=v=>Rn(v)in r,h=v=>oo(v,i);ye(n0(o),v=>{ul(v,u,h).each(w=>{const k=Qy(v,P=>u(P)&&!e.isValidChild(Rn(w),Rn(P)));if(k.length>0){const P=Hf(w);ye(k,I=>{ul(I,u,h).each(F=>{ss(e,F.dom,I.dom)})}),P.each(I=>hl(e,I.dom))}})})},Wu=(e,n,o)=>{ye([...o,...Hm(e,n)?[n]:[]],r=>ye(Wa(ie.fromDom(r),r.nodeName.toLowerCase()),i=>{Ox(e,i.dom)&&su(i)}))},cg=(e,n)=>{const o=hl(e,n);a2(e,n,o),Wu(e,n,o)},CN=(e,n)=>{if(l2(e,n)){const o=Jp(e.getBlockElements());ys(o,n)}},Ma=(e,n,o)=>{const r=u=>oo(u,ie.fromDom(n)),i=Vf(ie.fromDom(o),r);Vl(i,i.length-2).filter(es).fold(()=>cg(e,n),u=>cg(e,u.dom))},i2=e=>e.hasAttribute(Se),c2=(e,n)=>un(e.getTransparentElements(),n),l2=(e,n)=>qt(n)&&c2(e,n.nodeName),Hm=(e,n)=>l2(e,n)&&i2(n),Ox=(e,n)=>l2(e,n)&&!i2(n),Zu=(e,n)=>n.type===1&&c2(e,n.name)&&Y(n.attr(Se)),lg=la().browser,Rx=e=>ps(e,es),u2=e=>lg.isFirefox()&&Rn(e)==="table"?Rx(Ur(e)).filter(n=>Rn(n)==="caption").bind(n=>Rx(Uf(n)).map(o=>{const r=o.dom.offsetTop,i=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=i?-u:0})).getOr(0):0,m0=(e,n)=>e.children&&yn(e.children,n),d2=(e,n,o)=>{let r=0,i=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&dc(ie.fromDom(e),"position")==="static"){const v=n.getBoundingClientRect();return r=v.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,i=v.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:i}}let h=n;for(;h&&h!==o&&h.nodeType&&!m0(h,o);){const v=h;r+=v.offsetLeft||0,i+=v.offsetTop||0,h=v.offsetParent}for(h=n.parentNode;h&&h!==o&&h.nodeType&&!m0(h,o);)r-=h.scrollLeft||0,i-=h.scrollTop||0,h=h.parentNode;i+=u2(ie.fromDom(n))}return{x:r,y:i}},f0=(e,n={})=>{let o=0;const r={},i=ie.fromDom(e),u=eu(i),h=ce=>{n.referrerPolicy=ce},v=ce=>{n.contentCssCors=ce},w=ce=>{ts(Bm(i),ce)},k=ce=>{const pe=Bm(i);_r(pe,"#"+ce).each(ns)},P=ce=>Po(r,ce).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),I=ce=>new Promise((pe,be)=>{let Te;const Ue=Xe._addCacheSuffix(ce),dt=P(Ue);r[Ue]=dt,dt.count++;const Bt=(kt,Kt)=>{ye(kt,Xr),dt.status=Kt,dt.passed=[],dt.failed=[],Te&&(Te.onload=null,Te.onerror=null,Te=null)},Fe=()=>Bt(dt.passed,2),Me=()=>Bt(dt.failed,3);if(pe&&dt.passed.push(pe),be&&dt.failed.push(be),dt.status===1)return;if(dt.status===2){Fe();return}if(dt.status===3){Me();return}dt.status=1;const Ge=ie.fromTag("link",u.dom);ua(Ge,{rel:"stylesheet",type:"text/css",id:dt.id}),n.contentCssCors&&zr(Ge,"crossOrigin","anonymous"),n.referrerPolicy&&zr(Ge,"referrerpolicy",n.referrerPolicy),Te=Ge.dom,Te.onload=Fe,Te.onerror=Me,w(Ge),zr(Ge,"href",Ue)}),F=(ce,pe)=>{const be=P(ce);r[ce]=be,be.count++;const Te=ie.fromTag("style",u.dom);ua(Te,{rel:"stylesheet",type:"text/css",id:be.id,"data-mce-key":ce}),Te.dom.innerHTML=pe,w(Te)},W=ce=>Promise.allSettled(Cn(ce,be=>I(be).then(St(be)))).then(be=>{const Te=ir(be,Ue=>Ue.status==="fulfilled");return Te.fail.length>0?Promise.reject(Cn(Te.fail,Ue=>Ue.reason)):Cn(Te.pass,Ue=>Ue.value)}),X=ce=>{const pe=Xe._addCacheSuffix(ce);Po(r,pe).each(be=>{--be.count===0&&(delete r[pe],k(be.id))})};return{load:I,loadRawCss:F,loadAll:W,unload:X,unloadRawCss:ce=>{Po(r,ce).each(pe=>{--pe.count===0&&(delete r[ce],k(pe.id))})},unloadAll:ce=>{ye(ce,pe=>{X(pe)})},_setReferrerPolicy:h,_setContentCssCors:v}},f2=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=ll(o).dom;return V.from(e.get(u)).getOrThunk(()=>{const h=f0(u,r);return e.set(u,h),h})}}})(),j_=e=>e.nodeName.toLowerCase()==="span",Xf=(e,n)=>Ee(e)&&(r2(n,e)||n.isInline(e.nodeName.toLowerCase())),h2=(e,n,o)=>{const r=new cr(e,n).prev(!1),i=new cr(e,n).next(!1),u=rn(r)||Xf(r,o),h=rn(i)||Xf(i,o);return u&&h},g2=e=>j_(e)&&e.getAttribute("data-mce-type")==="bookmark",G_=(e,n,o)=>We(e)&&e.data.length>0&&h2(e,n,o),K_=e=>qt(e)?e.childNodes.length>0:!1,Rs=e=>u0(e)||Yp(e),gl=(e,n,o,r)=>{var i;const u=r||n;if(qt(n)&&g2(n))return n;const h=n.childNodes;for(let v=h.length-1;v>=0;v--)gl(e,h[v],o,u);if(qt(n)){const v=n.childNodes;v.length===1&&g2(v[0])&&((i=n.parentNode)===null||i===void 0||i.insertBefore(v[0],n))}return!Rs(n)&&!r2(o,n)&&!K_(n)&&!G_(n,u,o)&&e.remove(n),n},ug=Xe.makeMap,qu=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qp=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pc=/[<>&\"\']/g,e1=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,h0={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},ju={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},pl={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Uc=e=>{const n=ie.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},g0=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let i=0;i<r.length;i+=2){const u=String.fromCharCode(parseInt(r[i],n));if(!ju[u]){const h="&"+r[i+1]+";";o[u]=h,o[h]=u}}return o}else return},Ki=g0("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),t1=(e,n)=>e.replace(n?qu:Qp,o=>ju[o]||o),bc=e=>(""+e).replace(pc,n=>ju[n]||n),iu=(e,n)=>e.replace(n?qu:Qp,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":ju[o]||"&#"+o.charCodeAt(0)+";"),Xd=(e,n,o)=>{const r=o||Ki;return e.replace(n?qu:Qp,i=>ju[i]||r[i]||i)},Yf={encodeRaw:t1,encodeAllRaw:bc,encodeNumeric:iu,encodeNamed:Xd,getEncodeFunc:(e,n)=>{const o=g0(n)||Ki,r=(h,v)=>h.replace(v?qu:Qp,w=>ju[w]!==void 0?ju[w]:o[w]!==void 0?o[w]:w.length>1?"&#"+((w.charCodeAt(0)-55296)*1024+(w.charCodeAt(1)-56320)+65536)+";":"&#"+w.charCodeAt(0)+";"),i=(h,v)=>Xd(h,v,o),u=ug(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?i:Xd:u.numeric?iu:t1},decode:e=>e.replace(e1,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):h0[o]||String.fromCharCode(o)):pl[n]||Ki[n]||Uc(n))},Pa=(e,n)=>(e=Xe.trim(e),e?e.split(n||" "):[]),Zs=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Y_=e=>we(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",Vm=e=>{const n=o=>lt(o)?Cn(o,n):Y_(o)?new RegExp(o.source,o.flags):we(o)?Jn(o,n):o;return n(e)},n1=e=>{const n=/^(~)?(.+)$/;return ti(Pa(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",h=r[2];return[{cloneName:u,name:h}]}else return[]})},b0=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),zm=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},Di=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=zm(e),i=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:i(n),phrasingContent:i(o),flowContent:i(r)})},dg={html4:ka(()=>Di("html4")),html5:ka(()=>Di("html5")),"html5-strict":ka(()=>Di("html5-strict"))},Gu=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:i}=dg[e]();return n==="blocks"?V.some(o):n==="phrasing"?V.some(r):n==="flow"?V.some(i):V.none()},Dx=e=>{const n=b0(e),{phrasingContent:o,flowContent:r}=zm(e),i={},u=(w,k,P)=>{i[w]={attributes:_s(k,St({})),attributesOrder:k,children:_s(P,St({}))}},h=(w,k="",P="")=>{const I=Pa(P),F=Pa(w);let W=F.length;const X=[...n,...Pa(k)];for(;W--;)u(F[W],X.slice(),I)},v=(w,k)=>{const P=Pa(w),I=Pa(k);let F=P.length;for(;F--;){const W=i[P[F]];for(let X=0,G=I.length;X<G;X++)W.attributes[I[X]]={},W.attributesOrder.push(I[X])}};return e!=="html5-strict"&&(ye(Pa("acronym applet basefont big font strike tt"),P=>{h(P,"",o)}),ye(Pa("center dir isindex noframes"),P=>{h(P,"",r)})),h("html","manifest","head body"),h("head","","base command link meta noscript script style title"),h("title hr noscript br"),h("base","href target"),h("link","href rel media hreflang type sizes hreflang"),h("meta","name http-equiv content charset"),h("style","media type scoped"),h("script","src async defer type charset"),h("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),h("dd div","",r),h("address dt caption","",e==="html4"?o:r),h("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),h("blockquote","cite",r),h("ol","reversed start type","li"),h("ul","","li"),h("li","value",r),h("dl","","dt dd"),h("a","href target rel media hreflang type",e==="html4"?o:r),h("q","cite",o),h("ins del","cite datetime",r),h("img","src sizes srcset alt usemap ismap width height"),h("iframe","src name width height",r),h("embed","src type width height"),h("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),h("param","name value"),h("map","name",[r,"area"].join(" ")),h("area","alt coords shape href target rel media hreflang type"),h("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),h("colgroup","span","col"),h("col","span"),h("tbody thead tfoot","","tr"),h("tr","","td th"),h("td","colspan rowspan headers",r),h("th","colspan rowspan headers scope abbr",r),h("form","accept-charset action autocomplete enctype method name novalidate target",r),h("fieldset","disabled form name",[r,"legend"].join(" ")),h("label","form for",o),h("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),h("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),h("select","disabled form multiple name required size","option optgroup"),h("optgroup","disabled label","option"),h("option","disabled label selected value"),h("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),h("menu","type label",[r,"li"].join(" ")),h("noscript","",r),e!=="html4"&&(h("wbr"),h("ruby","",[o,"rt rp"].join(" ")),h("figcaption","",r),h("mark rt rp bdi","",o),h("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),h("canvas","width height",r),h("data","value",o),h("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),h("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),h("picture","","img source"),h("source","src srcset type media sizes"),h("track","kind src srclang label default"),h("datalist","",[o,"option"].join(" ")),h("article section nav aside main header footer","",r),h("hgroup","","h1 h2 h3 h4 h5 h6"),h("figure","",[r,"figcaption"].join(" ")),h("time","datetime",o),h("dialog","open",r),h("command","type label icon disabled checked radiogroup command"),h("output","for form name",o),h("progress","value max",o),h("meter","value min max low high optimum",o),h("details","open",[r,"summary"].join(" ")),h("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(v("script","language xml:space"),v("style","xml:space"),v("object","declare classid code codebase codetype archive standby align border hspace vspace"),v("embed","align name hspace vspace"),v("param","valuetype type"),v("a","charset name rev shape coords"),v("br","clear"),v("applet","codebase archive code object alt name width height align hspace vspace"),v("img","name longdesc align border hspace vspace"),v("iframe","longdesc frameborder marginwidth marginheight scrolling align"),v("font basefont","size color face"),v("input","usemap align"),v("select"),v("textarea"),v("h1 h2 h3 h4 h5 h6 div p legend caption","align"),v("ul","type compact"),v("li","type"),v("ol dl menu dir","compact"),v("pre","width xml:space"),v("hr","align noshade size width"),v("isindex","prompt"),v("table","summary width frame rules cellspacing cellpadding align bgcolor"),v("col","width align char charoff valign"),v("colgroup","width align char charoff valign"),v("thead","align char charoff valign"),v("tr","align char charoff valign bgcolor"),v("th","axis align char charoff valign nowrap bgcolor width height"),v("form","accept"),v("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),v("tfoot","align char charoff valign"),v("tbody","align char charoff valign"),v("area","nohref"),v("body","background bgcolor text link vlink alink")),e!=="html4"&&(v("input button select textarea","autofocus"),v("input textarea","placeholder"),v("a","download"),v("link script img","crossorigin"),v("img","loading"),v("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&ye([i.video,i.audio],w=>{delete w.children.audio,delete w.children.video}),ye(Pa("a form meter progress dfn"),w=>{i[w]&&delete i[w].children[w]}),delete i.caption.children.table,delete i.script,i},Jf=e=>e==="-"?"remove":"add",Ku=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return V.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},Xu=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return ti(Pa(e,","),o=>{const r=n.exec(o);if(r){const i=r[1],u=i?Jf(i):"replace",h=r[2],v=ti(Pa(r[3],"|"),w=>Ku(w).toArray());return[{operation:u,name:h,validChildren:v}]}else return[]})},v0=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:i,attributesOrder:u}=n;return ye(Pa(e,"|"),h=>{const v=o.exec(h);if(v){const w={},k=v[1],P=v[2].replace(/[\\:]:/g,":"),I=v[3],F=v[4];if(k==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(P),w.required=!0),k==="-"){delete i[P],u.splice(Xe.inArray(u,P),1);return}if(I&&(I==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:P,value:F}),w.defaultValue=F):I==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:P,value:F}),w.forcedValue=F):I==="<"&&(w.validValues=Xe.makeMap(F,"?"))),r.test(P)){const W=w;n.attributePatterns=n.attributePatterns||[],W.pattern=Zs(P),n.attributePatterns.push(W)}else i[P]||u.push(P),i[P]=w}})},Mx=(e,n)=>{Tt(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},y0=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return ti(Pa(n,","),r=>{const i=o.exec(r);if(i){const u=i[1],h=i[2],v=i[3],w=i[4],k=i[5],P={attributes:{},attributesOrder:[]};if(e.each(I=>Mx(I,P)),u==="#"?P.paddEmpty=!0:u==="-"&&(P.removeEmpty=!0),w==="!"&&(P.removeEmptyAttrs=!0),k&&v0(k,P),v&&(P.outputName=h),h==="@")if(e.isNone())e=V.some(P);else return[];return[v?{name:h,element:P,aliasName:v}:{name:h,element:P}]}else return[]})},Yd={},Xi=Xe.makeMap,ma=Xe.each,Um=Xe.extend,p2=Xe.explode,Qf=(e,n={})=>{const o=Xi(e," ",Xi(e.toUpperCase()," "));return Um(o,n)},C0=e=>Qf("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),S0=(e,n)=>{if(e){const o={};return Y(e)&&(e={"*":e}),ma(e,(r,i)=>{o[i]=o[i.toUpperCase()]=n==="map"?Xi(r,/[, ]/):p2(r,/[, ]/)}),o}else return},Jd=(e={})=>{var n;const o={},r={};let i=[];const u={},h={},v=(tn,to,er)=>{const Gr=e[tn];if(Gr)return Xi(Gr,/[, ]/,Xi(Gr.toUpperCase(),/[, ]/));{let ar=Yd[tn];return ar||(ar=Qf(to,er),Yd[tn]=ar),ar}},w=(n=e.schema)!==null&&n!==void 0?n:"html5",k=Dx(w);e.verify_html===!1&&(e.valid_elements="*[*]");const P=S0(e.valid_styles),I=S0(e.invalid_styles,"map"),F=S0(e.valid_classes,"map"),W=v("whitespace_elements","pre script noscript style textarea video audio iframe object code"),X=v("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),G=v("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),ee=v("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),ce="td th iframe video audio object script code",pe=v("non_empty_elements",ce+" pre svg textarea summary",G),be=v("move_caret_before_on_enter_elements",ce+" table",G),Te="h1 h2 h3 h4 h5 h6",Ue=v("text_block_elements",Te+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),dt=v("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Ue),Bt=v("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Fe=v("transparent_elements","a ins del canvas map"),Me=v("wrap_block_elements","pre "+Te);ma("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),tn=>{h[tn]=new RegExp("</"+tn+"[^>]*>","gi")});const Ge=tn=>{const to=V.from(o["@"]),er=/[*?+]/;ye(y0(to,tn??""),({name:Gr,element:ar,aliasName:Lr})=>{if(Lr&&(o[Lr]=ar),er.test(Gr)){const Ds=ar;Ds.pattern=Zs(Gr),i.push(Ds)}else o[Gr]=ar})},kt=tn=>{i=[],ye(fr(o),to=>{delete o[to]}),Ge(tn)},Kt=(tn,to)=>{var er,Gr;delete Yd.text_block_elements,delete Yd.block_elements;const ar=to.extends?!vi(to.extends):!1,Lr=to.extends;if(r[tn]=Lr?r[Lr]:{},u[tn]=Lr??tn,pe[tn.toUpperCase()]={},pe[tn]={},ar||(dt[tn.toUpperCase()]={},dt[tn]={}),Lr&&!o[tn]&&o[Lr]){const Ds=Vm(o[Lr]);delete Ds.removeEmptyAttrs,delete Ds.removeEmpty,o[tn]=Ds}else o[tn]={attributesOrder:[],attributes:{}};if(lt(to.attributes)){const Ds=rc=>{Ms.attributesOrder.push(rc),Ms.attributes[rc]={}},Ms=(er=o[tn])!==null&&er!==void 0?er:{};delete Ms.attributesDefault,delete Ms.attributesForced,delete Ms.attributePatterns,delete Ms.attributesRequired,Ms.attributesOrder=[],Ms.attributes={},ye(to.attributes,rc=>{const Su=b0(w);Ku(rc).each(({preset:wu,name:xu})=>{wu?xu==="global"&&ye(Su,Ds):Ds(xu)})}),o[tn]=Ms}if(at(to.padEmpty)){const Ds=(Gr=o[tn])!==null&&Gr!==void 0?Gr:{};Ds.paddEmpty=to.padEmpty,o[tn]=Ds}if(lt(to.children)){const Ds={},Ms=Su=>{Ds[Su]={}},rc=Su=>{Gu(w,Su).each(wu=>{ye(wu,Ms)})};ye(to.children,Su=>{Ku(Su).each(({preset:wu,name:xu})=>{wu?rc(xu):Ms(xu)})}),r[tn]=Ds}Lr&&Tt(r,(Ds,Ms)=>{Ds[Lr]&&(r[Ms]=Ds=Um({},r[Ms]),Ds[tn]=Ds[Lr])})},Nn=tn=>{ye(n1(tn??""),({name:to,cloneName:er})=>{Kt(to,{extends:er})})},Fn=tn=>{we(tn)?Tt(tn,(to,er)=>Kt(er,to)):Y(tn)&&Nn(tn)},lo=tn=>{ye(Xu(tn??""),({operation:to,name:er,validChildren:Gr})=>{const ar=to==="replace"?{"#comment":{}}:r[er],Lr=Ms=>{to==="remove"?delete ar[Ms]:ar[Ms]={}},Ds=Ms=>{Gu(w,Ms).each(rc=>{ye(rc,Lr)})};ye(Gr,({preset:Ms,name:rc})=>{Ms?Ds(rc):Lr(rc)}),r[er]=ar})},ko=tn=>{const to=o[tn];if(to)return to;let er=i.length;for(;er--;){const Gr=i[er];if(Gr.pattern.test(tn))return Gr}},Js=()=>{e.valid_elements?(kt(e.valid_elements),ma(k,(tn,to)=>{r[to]=tn.children})):(ma(k,(tn,to)=>{o[to]={attributes:tn.attributes,attributesOrder:tn.attributesOrder},r[to]=tn.children}),ma(Pa("strong/b em/i"),tn=>{const to=Pa(tn,"/");o[to[1]].outputName=to[0]}),ma(Bt,(tn,to)=>{o[to]&&(e.padd_empty_block_inline_children&&(o[to].paddInEmptyBlock=!0),o[to].removeEmpty=!0)}),ma(Pa("ol ul blockquote a table tbody"),tn=>{o[tn]&&(o[tn].removeEmpty=!0)}),ma(Pa("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),tn=>{o[tn]&&(o[tn].paddEmpty=!0)}),ma(Pa("span"),tn=>{o[tn].removeEmptyAttrs=!0})),delete o.svg,Fn(e.custom_elements),lo(e.valid_children),Ge(e.extended_valid_elements),lo("+ol[ul|ol],+ul[ul|ol]"),ma({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(tn,to)=>{o[to]&&(o[to].parentsRequired=Pa(tn))}),e.invalid_elements&&ma(p2(e.invalid_elements),tn=>{o[tn]&&delete o[tn]}),ko("span")||Ge("span[!data-mce-type|*]")},Qs=St(P),wa=St(I),yt=St(F),Xt=St(ee),co=St(dt),Pt=St(Ue),Qe=St(Bt),_t=St(Object.seal(G)),Qt=St(X),_o=St(pe),jn=St(be),Ia=St(W),yu=St(Fe),Sf=St(Me),oc=St(Object.seal(h)),xd=(tn,to)=>{const er=r[tn.toLowerCase()];return!!(er&&er[to.toLowerCase()])},Pl=(tn,to)=>{const er=ko(tn);if(er)if(to){if(er.attributes[to])return!0;const Gr=er.attributePatterns;if(Gr){let ar=Gr.length;for(;ar--;)if(Gr[ar].pattern.test(to))return!0}}else return!0;return!1},vi=tn=>un(co(),tn),sc=tn=>!$s(tn,"#")&&Pl(tn)&&!vi(tn),Cu=tn=>un(Sf(),tn)||sc(tn),kp=St(u);return Js(),{type:w,children:r,elements:o,getValidStyles:Qs,getValidClasses:yt,getBlockElements:co,getInvalidStyles:wa,getVoidElements:_t,getTextBlockElements:Pt,getTextInlineElements:Qe,getBoolAttrs:Xt,getElementRule:ko,getSelfClosingElements:Qt,getNonEmptyElements:_o,getMoveCaretBeforeOnEnterElements:jn,getWhitespaceElements:Ia,getTransparentElements:yu,getSpecialElements:oc,isValidChild:xd,isValid:Pl,isBlock:vi,isInline:sc,isWrapper:Cu,getCustomElements:kp,addValidElements:Ge,setValidElements:kt,addCustomElements:Fn,addValidChildren:lo}},Px=e=>({value:w0(e)}),w0=e=>Du(e,"#").toUpperCase(),o1=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Wn=e=>{const n=o1(e.red)+o1(e.green)+o1(e.blue);return Px(n)},Gt=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Qd=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,b2=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),x0=(e,n,o,r)=>{const i=parseInt(e,10),u=parseInt(n,10),h=parseInt(o,10),v=parseFloat(r);return b2(i,u,h,v)},v2=e=>Gt.test(e)?"rgb":Qd.test(e)?"rgba":"other",y2=e=>{const n=Gt.exec(e);if(n!==null)return V.some(x0(n[1],n[2],n[3],"1"));const o=Qd.exec(e);return o!==null?V.some(x0(o[1],o[2],o[3],o[4])):V.none()},No=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,mg=e=>y2(e).map(Wn).map(n=>"#"+n.value).getOr(e),fg=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,u={};let h,v;const w=jp;n&&(h=n.getValidStyles(),v=n.getInvalidStyles());const k=(`\\" \\' \\; \\: ; : `+w).split(" ");for(let I=0;I<k.length;I++)u[k[I]]=w+I,u[w+I]=k[I];const P={parse:I=>{const F={};let W=!1;const X=e.url_converter,G=e.url_converter_scope||P,ee=(Fe,Me,Ge)=>{const kt=F[Fe+"-top"+Me];if(!kt)return;const Kt=F[Fe+"-right"+Me];if(!Kt)return;const Nn=F[Fe+"-bottom"+Me];if(!Nn)return;const Fn=F[Fe+"-left"+Me];if(!Fn)return;const lo=[kt,Kt,Nn,Fn];let ko=lo.length-1;for(;ko--&&lo[ko]===lo[ko+1];);ko>-1&&Ge||(F[Fe+Me]=ko===-1?lo[0]:lo.join(" "),delete F[Fe+"-top"+Me],delete F[Fe+"-right"+Me],delete F[Fe+"-bottom"+Me],delete F[Fe+"-left"+Me])},ce=Fe=>{const Me=F[Fe];if(!Me)return;const Ge=Me.indexOf(",")>-1?[Me]:Me.split(" ");let kt=Ge.length;for(;kt--;)if(Ge[kt]!==Ge[0])return!1;return F[Fe]=Ge[0],!0},pe=(Fe,Me,Ge,kt)=>{ce(Me)&&ce(Ge)&&ce(kt)&&(F[Fe]=F[Me]+" "+F[Ge]+" "+F[kt],delete F[Me],delete F[Ge],delete F[kt])},be=Fe=>(W=!0,u[Fe]),Te=(Fe,Me)=>(W&&(Fe=Fe.replace(/\uFEFF[0-9]/g,Ge=>u[Ge])),Me||(Fe=Fe.replace(/\\([\'\";:])/g,"$1")),Fe),Ue=Fe=>String.fromCharCode(parseInt(Fe.slice(1),16)),dt=Fe=>Fe.replace(/\\[0-9a-f]+/gi,Ue),Bt=(Fe,Me,Ge,kt,Kt,Nn)=>{if(Kt=Kt||Nn,Kt)return Kt=Te(Kt),"'"+Kt.replace(/\'/g,"\\'")+"'";if(Me=Te(Me||Ge||kt||""),!e.allow_script_urls){const Fn=Me.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Fn)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Fn))return""}return X&&(Me=X.call(G,Me,"style")),"url('"+Me.replace(/\'/g,"\\'")+"')"};if(I){I=I.replace(/[\u0000-\u001F]/g,""),I=I.replace(/\\[\"\';:\uFEFF]/g,be).replace(/\"[^\"]+\"|\'[^\']+\'/g,Me=>Me.replace(/[;:]/g,be));let Fe;for(;Fe=r.exec(I);){r.lastIndex=Fe.index+Fe[0].length;let Me=Fe[1].replace(i,"").toLowerCase(),Ge=Fe[2].replace(i,"");if(Me&&Ge){if(Me=dt(Me),Ge=dt(Ge),Me.indexOf(w)!==-1||Me.indexOf('"')!==-1||!e.allow_script_urls&&(Me==="behavior"||/expression\s*\(|\/\*|\*\//.test(Ge)))continue;Me==="font-weight"&&Ge==="700"?Ge="bold":(Me==="color"||Me==="background-color")&&(Ge=Ge.toLowerCase()),v2(Ge)==="rgb"&&y2(Ge).each(kt=>{Ge=mg(No(kt)).toLowerCase()}),Ge=Ge.replace(o,Bt),F[Me]=W?Te(Ge,!0):Ge}}ee("border","",!0),ee("border","-width"),ee("border","-color"),ee("border","-style"),ee("padding",""),ee("margin",""),pe("border","border-width","border-style","border-color"),F.border==="medium none"&&delete F.border,F["border-image"]==="none"&&delete F["border-image"]}return F},serialize:(I,F)=>{let W="";const X=(ee,ce)=>{const pe=ce[ee];if(pe)for(let be=0,Te=pe.length;be<Te;be++){const Ue=pe[be],dt=I[Ue];dt&&(W+=(W.length>0?" ":"")+Ue+": "+dt+";")}},G=(ee,ce)=>{if(!v||!ce)return!0;let pe=v["*"];return pe&&pe[ee]?!1:(pe=v[ce],!(pe&&pe[ee]))};return F&&h?(X("*",h),X(F,h)):Tt(I,(ee,ce)=>{ee&&G(ce,F)&&(W+=(W.length>0?" ":"")+ce+": "+ee+";")}),W}};return P},J_={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},$e=e=>e instanceof Event||le(e.initEvent),C2=e=>e.isDefaultPrevented===Ot||e.isDefaultPrevented===qe,Q_=e=>ln(e.preventDefault)||$e(e),s1=(e,n)=>{const o=n??{};for(const r in e)un(J_,r)||(o[r]=e[r]);return Ee(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Ee(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),Ee(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},S2=(e,n,o,r)=>{var i;const u=s1(n,r);return u.type=e,ln(u.target)&&(u.target=(i=u.srcElement)!==null&&i!==void 0?i:o),Q_(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=Ot,le(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=Ot,le(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=Ot,u.stopPropagation()},C2(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?Ot:qe,u.isPropagationStopped=u.cancelBubble===!0?Ot:qe,u.isImmediatePropagationStopped=qe)),u},hg="mce-data-",w2=/^(?:mouse|contextmenu)|click/,Yu=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},gg=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},pg=e=>Ee(e)&&w2.test(e.type),vo=(e,n)=>{const o=S2(e.type,e,document,n);if(pg(e)&&rn(e.pageX)&&!rn(e.clientX)){const r=o.target.ownerDocument||document,i=r.documentElement,u=r.body,h=o;h.pageX=e.clientX+(i&&i.scrollLeft||u&&u.scrollLeft||0)-(i&&i.clientLeft||u&&u.clientLeft||0),h.pageY=e.clientY+(i&&i.scrollTop||u&&u.scrollTop||0)-(i&&i.clientTop||u&&u.clientTop||0)}return o},vc=(e,n,o)=>{const r=e.document,i={type:"ready"};if(o.domLoaded){n(i);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,h=()=>{gg(e,"DOMContentLoaded",h),gg(e,"load",h),o.domLoaded||(o.domLoaded=!0,n(i)),e=null};u()?h():Yu(e,"DOMContentLoaded",h),o.domLoaded||Yu(e,"load",h)};class Ju{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=hg+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,i){const u=this;let h;const v=window,w=F=>{u.executeHandlers(vo(F||v.event),k)};if(!n||We(n)||Kd(n))return r;let k;n[u.expando]?k=n[u.expando]:(k=u.count++,n[u.expando]=k,u.events[k]={}),i=i||n;const P=o.split(" ");let I=P.length;for(;I--;){let F=P[I],W=w,X=!1,G=!1;if(F==="DOMContentLoaded"&&(F="ready"),u.domLoaded&&F==="ready"&&n.readyState==="complete"){r.call(i,vo({type:F}));continue}!u.hasFocusIn&&(F==="focusin"||F==="focusout")&&(X=!0,G=F==="focusin"?"focus":"blur",W=ee=>{const ce=vo(ee||v.event);ce.type=ce.type==="focus"?"focusin":"focusout",u.executeHandlers(ce,k)}),h=u.events[k][F],h?F==="ready"&&u.domLoaded?r(vo({type:F})):h.push({func:r,scope:i}):(u.events[k][F]=h=[{func:r,scope:i}],h.fakeName=G,h.capture=X,h.nativeHandler=W,F==="ready"?vc(n,W,u):Yu(n,G||F,W,X))}return n=h=null,r}unbind(n,o,r){if(!n||We(n)||Kd(n))return this;const i=n[this.expando];if(i){let u=this.events[i];if(o){const h=o.split(" ");let v=h.length;for(;v--;){const w=h[v],k=u[w];if(k){if(r){let P=k.length;for(;P--;)if(k[P].func===r){const I=k.nativeHandler,F=k.fakeName,W=k.capture,X=k.slice(0,P).concat(k.slice(P+1));X.nativeHandler=I,X.fakeName=F,X.capture=W,u[w]=X}}(!r||k.length===0)&&(delete u[w],gg(n,k.fakeName||w,k.nativeHandler,k.capture))}}}else Tt(u,(h,v)=>{gg(n,h.fakeName||v,h.nativeHandler,h.capture)}),u={};for(const h in u)if(un(u,h))return this;delete this.events[i];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||We(n)||Kd(n))return this;const i=vo({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(i,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!i.isPropagationStopped());return this}clean(n){if(!n||We(n)||Kd(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],i=r&&r[n.type];if(i)for(let u=0,h=i.length;u<h;u++){const v=i[u];if(v&&v.func.call(v.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Ju.Event=new Ju;const cu=Xe.each,Nx=Xe.grep,r1="data-mce-style",x2=Xe.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),bg=(e,n,o)=>{ln(o)||o===""?cs(e,n):zr(e,n,o)},Wc=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),eh=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,i=e.previousSibling;i;i=i.previousSibling){const u=i.nodeType;n&&We(i)&&(u===r||!i.data.length)||(o++,r=u)}return o},Bx=(e,n)=>{const o=Oa(n,"style"),r=e.serialize(e.parse(o),Rn(n));bg(n,r1,r)},E2=(e,n)=>xo(e)?un(x2,n)?e+"":e+"px":e,a1=(e,n,o)=>{const r=Wc(n);ln(o)||o===""?ii(e,r):Zp(e,r,E2(o,r))},eA=(e,n,o)=>{const r=n.keep_values,i={set:(h,v,w)=>{const k=ie.fromDom(h);le(n.url_converter)&&Ee(v)&&(v=n.url_converter.call(n.url_converter_scope||o(),String(v),w,h));const P="data-mce-"+w;bg(k,P,v),bg(k,w,v)},get:(h,v)=>{const w=ie.fromDom(h);return Oa(w,"data-mce-"+v)||Oa(w,v)}},u={style:{set:(h,v)=>{const w=ie.fromDom(h);r&&bg(w,r1,v),cs(w,"style"),Y(v)&&ou(w,e.parse(v))},get:h=>{const v=ie.fromDom(h),w=Oa(v,r1)||Oa(v,"style");return e.serialize(e.parse(w),Rn(v))}}};return r&&(u.href=u.src=i),u},rs=(e,n={})=>{const o={},r=window,i={};let u=0;const h=!0,v=!0,w=f2.forElement(ie.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),k=[],P=n.schema?n.schema:Jd({}),I=fg({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),F=n.ownEvents?new Ju:Ju.Event,W=P.getBlockElements(),X=xe=>Y(xe)?un(W,xe):qt(xe)&&(un(W,xe.nodeName)||Hm(P,xe)),G=xe=>xe&&e&&Y(xe)?e.getElementById(xe):xe,ee=xe=>{const Ae=G(xe);return Ee(Ae)?ie.fromDom(Ae):null},ce=(xe,Ae,bt="")=>{let ft;const mn=ee(xe);if(Ee(mn)&&es(mn)){const so=rx[Ae];so&&so.get?ft=so.get(mn.dom,Ae):ft=Oa(mn,Ae)}return Ee(ft)?ft:bt},pe=xe=>{const Ae=G(xe);return ln(Ae)?[]:Ae.attributes},be=(xe,Ae,bt)=>{Xt(xe,ft=>{if(qt(ft)){const mn=ie.fromDom(ft),so=bt===""?null:bt,tr=Oa(mn,Ae),Td=rx[Ae];Td&&Td.set?Td.set(mn.dom,so,Ae):bg(mn,Ae,so),tr!==so&&n.onSetAttrib&&n.onSetAttrib({attrElm:mn.dom,attrName:Ae,attrValue:so})}})},Te=(xe,Ae)=>xe.cloneNode(Ae),Ue=()=>n.root_element||e.body,dt=xe=>{const Ae=Jy(xe);return{x:Ae.x,y:Ae.y,w:Ae.width,h:Ae.height}},Bt=(xe,Ae)=>d2(e.body,G(xe),Ae),Fe=(xe,Ae,bt)=>{Xt(xe,ft=>{const mn=ie.fromDom(ft);a1(mn,Ae,bt),n.update_styles&&Bx(I,mn)})},Me=(xe,Ae)=>{Xt(xe,bt=>{const ft=ie.fromDom(bt);Tt(Ae,(mn,so)=>{a1(ft,so,mn)}),n.update_styles&&Bx(I,ft)})},Ge=(xe,Ae,bt)=>{const ft=G(xe);if(!(ln(ft)||!zu(ft)&&!fc(ft)))return bt?dc(ie.fromDom(ft),Wc(Ae)):(Ae=Ae.replace(/-(\D)/g,(mn,so)=>so.toUpperCase()),Ae==="float"&&(Ae="cssFloat"),ft.style?ft.style[Ae]:void 0)},kt=xe=>{const Ae=G(xe);if(!Ae)return{w:0,h:0};let bt=Ge(Ae,"width"),ft=Ge(Ae,"height");return(!bt||bt.indexOf("px")===-1)&&(bt="0"),(!ft||ft.indexOf("px")===-1)&&(ft="0"),{w:parseInt(bt,10)||Ae.offsetWidth||Ae.clientWidth,h:parseInt(ft,10)||Ae.offsetHeight||Ae.clientHeight}},Kt=xe=>{const Ae=G(xe),bt=Bt(Ae),ft=kt(Ae);return{x:bt.x,y:bt.y,w:ft.w,h:ft.h}},Nn=(xe,Ae)=>{if(!xe)return!1;const bt=lt(xe)?xe:[xe];return bo(bt,ft=>za(ie.fromDom(ft),Ae))},Fn=(xe,Ae,bt,ft)=>{const mn=[];let so=G(xe);ft=ft===void 0;const tr=bt||(Ue().nodeName!=="BODY"?Ue().parentNode:null);if(Y(Ae))if(Ae==="*")Ae=qt;else{const Td=Ae;Ae=Eu=>Nn(Eu,Td)}for(;so&&!(so===tr||ln(so.nodeType)||Yp(so)||u0(so));){if(!Ae||Ae(so))if(ft)mn.push(so);else return[so];so=so.parentNode}return ft?mn:null},lo=(xe,Ae,bt)=>{const ft=Fn(xe,Ae,bt,!1);return ft&&ft.length>0?ft[0]:null},ko=(xe,Ae,bt)=>{let ft=Ae;if(xe){Y(Ae)&&(ft=mn=>Nn(mn,Ae));for(let mn=xe[bt];mn;mn=mn[bt])if(le(ft)&&ft(mn))return mn}return null},Js=(xe,Ae)=>ko(xe,Ae,"nextSibling"),Qs=(xe,Ae)=>ko(xe,Ae,"previousSibling"),wa=xe=>le(xe.querySelectorAll),yt=(xe,Ae)=>{var bt,ft;const mn=(ft=(bt=G(Ae))!==null&&bt!==void 0?bt:n.root_element)!==null&&ft!==void 0?ft:e;return wa(mn)?Jr(mn.querySelectorAll(xe)):[]},Xt=function(xe,Ae,bt){const ft=bt??this;if(lt(xe)){const mn=[];return cu(xe,(so,tr)=>{const Td=G(so);Td&&mn.push(Ae.call(ft,Td,tr))}),mn}else{const mn=G(xe);return mn?Ae.call(ft,mn):!1}},co=(xe,Ae)=>{Xt(xe,bt=>{Tt(Ae,(ft,mn)=>{be(bt,mn,ft)})})},Pt=(xe,Ae)=>{Xt(xe,bt=>{const ft=ie.fromDom(bt);jf(ft,Ae)})},Qe=(xe,Ae,bt,ft,mn)=>Xt(xe,so=>{const tr=Y(Ae)?e.createElement(Ae):Ae;return Ee(bt)&&co(tr,bt),ft&&(!Y(ft)&&ft.nodeType?tr.appendChild(ft):Y(ft)&&Pt(tr,ft)),mn?tr:so.appendChild(tr)}),_t=(xe,Ae,bt)=>Qe(e.createElement(xe),xe,Ae,bt,!0),Qt=Yf.decode,_o=Yf.encodeAllRaw,jn=(xe,Ae,bt="")=>{let ft="<"+xe;for(const mn in Ae)ea(Ae,mn)&&(ft+=" "+mn+'="'+_o(Ae[mn])+'"');return Os(bt)&&un(P.getVoidElements(),xe)?ft+" />":ft+">"+bt+"</"+xe+">"},Ia=xe=>{const Ae=e.createElement("div"),bt=e.createDocumentFragment();bt.appendChild(Ae),xe&&(Ae.innerHTML=xe);let ft;for(;ft=Ae.firstChild;)bt.appendChild(ft);return bt.removeChild(Ae),bt},yu=(xe,Ae)=>Xt(xe,bt=>{const ft=ie.fromDom(bt);return Ae&&ye(Ur(ft),mn=>{kr(mn)&&mn.dom.length===0?ns(mn):Us(ft,mn)}),ns(ft),ft.dom}),Sf=xe=>Xt(xe,Ae=>{const bt=Ae.attributes;for(let ft=bt.length-1;ft>=0;ft--)Ae.removeAttributeNode(bt.item(ft))}),oc=xe=>I.parse(xe),xd=(xe,Ae)=>I.serialize(xe,Ae),Pl=xe=>{if(Vh!==rs.DOM&&e===document){if(o[xe])return;o[xe]=!0}let Ae=e.getElementById("mceDefaultStyles");if(!Ae){Ae=e.createElement("style"),Ae.id="mceDefaultStyles",Ae.type="text/css";const bt=e.head;bt.firstChild?bt.insertBefore(Ae,bt.firstChild):bt.appendChild(Ae)}Ae.styleSheet?Ae.styleSheet.cssText+=xe:Ae.appendChild(e.createTextNode(xe))},vi=xe=>{xe||(xe=""),ye(xe.split(","),Ae=>{i[Ae]=!0,w.load(Ae).catch(Ft)})},sc=(xe,Ae,bt)=>{Xt(xe,ft=>{if(qt(ft)){const mn=ie.fromDom(ft),so=Ae.split(" ");ye(so,tr=>{Ee(bt)?(bt?Iu:Ff)(mn,tr):Kb(mn,tr)})}})},Cu=(xe,Ae)=>{sc(xe,Ae,!0)},kp=(xe,Ae)=>{sc(xe,Ae,!1)},tn=(xe,Ae)=>{const bt=ee(xe),ft=Ae.split(" ");return Ee(bt)&&ks(ft,mn=>Hp(bt,mn))},to=xe=>{Xt(xe,Ae=>ii(ie.fromDom(Ae),"display"))},er=xe=>{Xt(xe,Ae=>Zp(ie.fromDom(Ae),"display","none"))},Gr=xe=>{const Ae=ee(xe);return Ee(Ae)&&Xl(zs(Ae,"display"),"none")},ar=xe=>(xe||"mce_")+u++,Lr=xe=>{const Ae=ee(xe);return Ee(Ae)?qt(Ae.dom)?Ae.dom.outerHTML:Yy(Ae):""},Ds=(xe,Ae)=>{Xt(xe,bt=>{qt(bt)&&(bt.outerHTML=Ae)})},Ms=(xe,Ae)=>{const bt=G(Ae);return Xt(xe,ft=>{const mn=bt==null?void 0:bt.parentNode,so=bt==null?void 0:bt.nextSibling;return mn&&(so?mn.insertBefore(ft,so):mn.appendChild(ft)),ft})},rc=(xe,Ae,bt)=>Xt(Ae,ft=>{var mn;const so=lt(Ae)?xe.cloneNode(!0):xe;return bt&&cu(Nx(ft.childNodes),tr=>{so.appendChild(tr)}),(mn=ft.parentNode)===null||mn===void 0||mn.replaceChild(so,ft),ft}),Su=(xe,Ae)=>{if(xe.nodeName!==Ae.toUpperCase()){const bt=_t(Ae);return cu(pe(xe),ft=>{be(bt,ft.nodeName,ce(xe,ft.nodeName))}),rc(bt,xe,!0),bt}else return xe},wu=(xe,Ae)=>{let bt=xe;for(;bt;){let ft=Ae;for(;ft&&bt!==ft;)ft=ft.parentNode;if(bt===ft)break;bt=bt.parentNode}return!bt&&xe.ownerDocument?xe.ownerDocument.documentElement:bt},xu=(xe,Ae,bt)=>gt(Ae)?ru(P,xe,{...bt,isContent:mn=>{const so=mn.nodeName.toLowerCase();return!!Ae[so]}}):ru(P,xe,bt),Ny=()=>e.createRange(),Nb=(xe,Ae,bt)=>{let ft=Ny(),mn,so;if(xe&&Ae&&xe.parentNode&&Ae.parentNode){const tr=xe.parentNode;return ft.setStart(tr,eh(xe)),ft.setEnd(Ae.parentNode,eh(Ae)),mn=ft.extractContents(),ft=Ny(),ft.setStart(Ae.parentNode,eh(Ae)+1),ft.setEnd(tr,eh(xe)+1),so=ft.extractContents(),tr.insertBefore(gl(Vh,mn,P),xe),bt?tr.insertBefore(bt,xe):tr.insertBefore(Ae,xe),tr.insertBefore(gl(Vh,so,P),xe),yu(xe),bt||Ae}else return},_p=(xe,Ae,bt,ft)=>{if(lt(xe)){let mn=xe.length;const so=[];for(;mn--;)so[mn]=_p(xe[mn],Ae,bt,ft);return so}else return n.collect&&(xe===e||xe===r)&&k.push([xe,Ae,bt,ft]),F.bind(xe,Ae,bt,ft||Vh)},Ed=(xe,Ae,bt)=>{if(lt(xe)){let ft=xe.length;const mn=[];for(;ft--;)mn[ft]=Ed(xe[ft],Ae,bt);return mn}else{if(k.length>0&&(xe===e||xe===r)){let ft=k.length;for(;ft--;){const[mn,so,tr]=k[ft];xe===mn&&(!Ae||Ae===so)&&(!bt||bt===tr)&&F.unbind(mn,so,tr)}}return F.unbind(xe,Ae,bt)}},Hh=(xe,Ae,bt)=>F.dispatch(xe,Ae,bt),ox=(xe,Ae,bt)=>F.dispatch(xe,Ae,bt),By=xe=>{if(xe&&zu(xe)){const Ae=xe.getAttribute("data-mce-contenteditable");return Ae&&Ae!=="inherit"?Ae:xe.contentEditable!=="inherit"?xe.contentEditable:null}else return null},Vh={doc:e,settings:n,win:r,files:i,stdMode:h,boxModel:v,styleSheetLoader:w,boundEvents:k,styles:I,schema:P,events:F,isBlock:X,root:null,clone:Te,getRoot:Ue,getViewPort:dt,getRect:Kt,getSize:kt,getParent:lo,getParents:Fn,get:G,getNext:Js,getPrev:Qs,select:yt,is:Nn,add:Qe,create:_t,createHTML:jn,createFragment:Ia,remove:yu,setStyle:Fe,getStyle:Ge,setStyles:Me,removeAllAttribs:Sf,setAttrib:be,setAttribs:co,getAttrib:ce,getPos:Bt,parseStyle:oc,serializeStyle:xd,addStyle:Pl,loadCSS:vi,addClass:Cu,removeClass:kp,hasClass:tn,toggleClass:sc,show:to,hide:er,isHidden:Gr,uniqueId:ar,setHTML:Pt,getOuterHTML:Lr,setOuterHTML:Ds,decode:Qt,encode:_o,insertAfter:Ms,replace:rc,rename:Su,findCommonAncestor:wu,run:Xt,getAttribs:pe,isEmpty:xu,createRng:Ny,nodeIndex:eh,split:Nb,bind:_p,unbind:Ed,fire:ox,dispatch:Hh,getContentEditable:By,getContentEditableParent:xe=>{const Ae=Ue();let bt=null;for(let ft=xe;ft&&ft!==Ae&&(bt=By(ft),bt===null);ft=ft.parentNode);return bt},isEditable:xe=>{if(Ee(xe)){const Ae=qt(xe)?xe:xe.parentElement;return Ee(Ae)&&zu(Ae)&&nu(ie.fromDom(Ae))}else return!1},destroy:()=>{if(k.length>0){let xe=k.length;for(;xe--;){const[Ae,bt,ft]=k[xe];F.unbind(Ae,bt,ft)}}Tt(i,(xe,Ae)=>{w.unload(Ae),delete i[Ae]})},isChildOf:(xe,Ae)=>xe===Ae||Ae.contains(xe),dumpRng:xe=>"startContainer: "+xe.startContainer.nodeName+", startOffset: "+xe.startOffset+", endContainer: "+xe.endContainer.nodeName+", endOffset: "+xe.endOffset},rx=eA(I,n,St(Vh));return Vh};rs.DOM=rs(document),rs.nodeIndex=eh;const T2=rs.DOM,Lx=0,Zc=1,di=2,rt=3;class Yi{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const i=T2;let u;const h=()=>{i.remove(k),u&&(u.onerror=u.onload=u=null)},v=()=>{h(),o()},w=()=>{h(),r("Failed to load script: "+n)},k=i.uniqueId();u=document.createElement("script"),u.id=k,u.type="text/javascript",u.src=Xe._addCacheSuffix(n),this.settings.referrerPolicy&&i.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=v,u.onerror=w,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===di}markDone(n){this.states[n]=di}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=Lx),new Promise((i,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:i,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(w,k)=>{Po(o.scriptLoadedCallbacks,k).each(P=>{ye(P,I=>I[w](k))}),delete o.scriptLoadedCallbacks[k]},i=w=>{const k=an(w,P=>P.status==="rejected");return k.length>0?Promise.reject(ti(k,({reason:P})=>lt(P)?P:[P])):Promise.resolve()},u=w=>Promise.allSettled(Cn(w,k=>o.states[k]===di?(r("resolve",k),Promise.resolve()):o.states[k]===rt?(r("reject",k),Promise.reject(k)):(o.states[k]=Zc,o.loadScript(k).then(()=>{o.states[k]=di,r("resolve",k);const P=o.queue;return P.length>0?(o.queue=[],u(P).then(i)):Promise.resolve()},()=>(o.states[k]=rt,r("reject",k),Promise.reject(k)))))),h=w=>(o.loading=!0,u(w).then(k=>{o.loading=!1;const P=o.queueLoadedCallbacks.shift();return V.from(P).each(Xr),i(k)})),v=Md(n);return o.loading?new Promise((w,k)=>{o.queueLoadedCallbacks.push(()=>{h(v).then(w,k)})}):h(v)}}Yi.ScriptLoader=new Yi;const yr=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},tA=e=>we(e)&&un(e,"raw"),Ix=e=>lt(e)&&e.length>1,i1={},vg=Ko("en"),Fx=()=>Po(i1,vg.get()),Mi={getData:()=>Jn(i1,e=>({...e})),setCode:e=>{e&&vg.set(e)},getCode:()=>vg.get(),add:(e,n)=>{let o=i1[e];o||(i1[e]=o={});const r=Cn(fr(n),i=>i.toLowerCase());Tt(n,(i,u)=>{const h=u.toLowerCase();h!==u&&yr(r,h)?(un(n,h)||(o[h]=i),o[u]=i):o[h]=i})},translate:e=>{const n=Fx().getOr({}),o=h=>le(h)?Object.prototype.toString.call(h):r(h)?"":""+h,r=h=>h===""||h===null||h===void 0,i=h=>{const v=o(h);return un(n,v)?o(n[v]):Po(n,v.toLowerCase()).map(o).getOr(v)},u=h=>h.replace(/{context:\w+}$/,"");if(r(e))return"";if(tA(e))return o(e.raw);if(Ix(e)){const h=e.slice(1),v=i(e[0]).replace(/\{([0-9]+)\}/g,(w,k)=>un(h,k)?o(h[k]):w);return u(v)}return u(i(e))},isRtl:()=>Fx().bind(e=>Po(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>un(i1,e)},ao=()=>{const e=[],n={},o={},r=[],i=(G,ee)=>{const ce=an(r,pe=>pe.name===G&&pe.state===ee);ye(ce,pe=>pe.resolve())},u=G=>un(n,G),h=G=>un(o,G),v=G=>{if(o[G])return o[G].instance},w=(G,ee)=>{const ce=Mi.getCode(),pe=","+(ee||"")+",";!ce||ee&&pe.indexOf(","+ce+",")===-1||Yi.ScriptLoader.add(n[G]+"/langs/"+ce+".js")},k=(G,ee)=>{ao.languageLoad!==!1&&(u(G)?w(G,ee):X(G,"loaded").then(()=>w(G,ee)))},P=(G,ee)=>(e.push(ee),o[G]={instance:ee},i(G,"added"),ee),I=G=>{delete n[G],delete o[G]},F=(G,ee)=>Y(ee)?Y(G)?{prefix:"",resource:ee,suffix:""}:{prefix:G.prefix,resource:ee,suffix:G.suffix}:ee,W=(G,ee)=>{if(n[G])return Promise.resolve();let ce=Y(ee)?ee:ee.prefix+ee.resource+ee.suffix;ce.indexOf("/")!==0&&ce.indexOf("://")===-1&&(ce=ao.baseURL+"/"+ce),n[G]=ce.substring(0,ce.lastIndexOf("/"));const pe=()=>(i(G,"loaded"),Promise.resolve());return o[G]?pe():Yi.ScriptLoader.add(ce).then(pe)},X=(G,ee="added")=>ee==="added"&&h(G)||ee==="loaded"&&u(G)?Promise.resolve():new Promise(ce=>{r.push({name:G,state:ee,resolve:ce})});return{items:e,urls:n,lookup:o,get:v,requireLangPack:k,add:P,remove:I,createUrl:F,load:W,waitFor:X}};ao.languageLoad=!0,ao.baseURL="",ao.PluginManager=ao(),ao.ThemeManager=ao(),ao.ModelManager=ao();const c1=(e,n)=>{let o=null;return{cancel:()=>{ne(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{ne(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},Na=(e,n)=>{let o=null;const r=()=>{ne(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},th=(e,n,o)=>Zf(e,n,o).isSome(),Pi=St("mce-annotation"),nh=St("data-mce-annotation"),yg=St("data-mce-annotation-uid"),Wm=St("data-mce-annotation-active"),oh=St("data-mce-annotation-classes"),mi=St("data-mce-annotation-attrs"),l1=e=>n=>oo(n,e),k2=(e,n)=>{const o=e.selection.getRng(),r=ie.fromDom(o.startContainer),i=ie.fromDom(e.getBody()),u=n.fold(()=>"."+Pi(),w=>`[${nh()}="${w}"]`),h=$u(r,o.startOffset).getOr(r);return Wt(h,u,l1(i)).bind(w=>Vc(w,`${yg()}`).bind(k=>Vc(w,`${nh()}`).map(P=>{const I=d1(e,k);return{uid:k,name:P,elements:I}})))},E0=e=>es(e)&&Hp(e,Pi()),u1=(e,n)=>$d(e,"data-mce-bogus")||th(e,'[data-mce-bogus="all"]',l1(n)),d1=(e,n)=>{const o=ie.fromDom(e.getBody()),r=Wa(o,`[${yg()}="${n}"]`);return an(r,i=>!u1(i,o))},m1=(e,n)=>{const o=ie.fromDom(e.getBody()),r=Wa(o,`[${nh()}="${n}"]`),i={};return ye(r,u=>{if(!u1(u,o)){const h=Oa(u,yg()),v=Po(i,h).getOr([]);i[h]=v.concat([u])}}),i},T0=(e,n)=>{const o=Ko({}),r=()=>({listeners:[],previous:gc()}),i=(I,F)=>{u(I,W=>(F(W),W))},u=(I,F)=>{const W=o.get(),X=Po(W,I).getOrThunk(r),G=F(X);W[I]=G,o.set(W)},h=(I,F,W)=>{i(I,X=>{ye(X.listeners,G=>G(!0,I,{uid:F,nodes:Cn(W,ee=>ee.dom)}))})},v=I=>{i(I,F=>{ye(F.listeners,W=>W(!1,I))})},w=(I,F)=>{ye(d1(e,I),W=>{F?zr(W,Wm(),"true"):cs(W,Wm())})},k=Na(()=>{const I=Io(n.getNames());ye(I,F=>{u(F,W=>{const X=W.previous.get();return k2(e,V.some(F)).fold(()=>{X.each(G=>{v(F),W.previous.clear(),w(G,!1)})},({uid:G,name:ee,elements:ce})=>{Xl(X,G)||(X.each(pe=>w(pe,!1)),h(ee,G,ce),W.previous.set(G),w(G,!0))}),{previous:W.previous,listeners:W.listeners}})})},30);return e.on("remove",()=>{k.cancel()}),e.on("NodeChange",()=>{k.throttle()}),{addListener:(I,F)=>{u(I,W=>({previous:W.previous,listeners:W.listeners.concat([F])}))}}},Vx=(e,n)=>{const o=nh(),r=u=>V.from(u.attr(o)).bind(n.lookup),i=u=>{var h,v;u.attr(yg(),null),u.attr(nh(),null),u.attr(Wm(),null);const w=V.from(u.attr(mi())).map(F=>F.split(",")).getOr([]),k=V.from(u.attr(oh())).map(F=>F.split(",")).getOr([]);ye(w,F=>u.attr(F,null));const P=(v=(h=u.attr("class"))===null||h===void 0?void 0:h.split(" "))!==null&&v!==void 0?v:[],I=qi(P,[Pi()].concat(k));u.attr("class",I.length>0?I.join(" "):null),u.attr(oh(),null),u.attr(mi(),null)};e.serializer.addTempAttr(Wm()),e.serializer.addAttributeFilter(o,u=>{for(const h of u)r(h).each(v=>{v.persistent===!1&&(h.name==="span"?h.unwrap():i(h))})})},_2=()=>{const e={};return{register:(i,u)=>{e[i]={name:i,settings:u}},lookup:i=>Po(e,i).map(u=>u.settings),getNames:()=>fr(e)}},f1=(e,n,o)=>Math.min(Math.max(e,n),o),k0=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let _0=0;const sh=e=>{const o=new Date().getTime(),r=Math.floor(k0()*1e9);return _0++,e+"_"+r+_0+String(o)},A2=(e,n)=>{ye(n,o=>{Iu(e,o)})},zx=(e,n)=>{ye(n,o=>{Ff(e,o)})},O2=(e,n)=>ie.fromDom(e.dom.cloneNode(n)),Qu=e=>O2(e,!1),Ux=e=>O2(e,!0),wN=(e,n)=>{const o=ie.fromTag(n),r=$p(e);return ua(o,r),o},Cg=(e,n)=>{const o=wN(e,n);mc(e,o);const r=Ur(e);return na(o,r),ns(e),o},Sg=(e,n,o=qe)=>{const r=new cr(e,n),i=u=>{let h;do h=r[u]();while(h&&!We(h)&&!o(h));return V.from(h).filter(We)};return{current:()=>V.from(r.current()).filter(We),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},ed=(e,n)=>{const o=n||(h=>e.isBlock(h)||Go(h)||ls(h)),r=(h,v,w,k)=>{if(We(h)){const P=k(h,v,h.data);if(P!==-1)return V.some({container:h,offset:P})}return w().bind(P=>r(P.container,P.offset,w,k))};return{backwards:(h,v,w,k)=>{const P=Sg(h,k??e.getRoot(),o);return r(h,v,()=>P.prev().map(I=>({container:I,offset:I.length})),w).getOrNull()},forwards:(h,v,w,k)=>{const P=Sg(h,k??e.getRoot(),o);return r(h,v,()=>P.next().map(I=>({container:I,offset:0})),w).getOrNull()}}},R2=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?V.from(u.dom.nodeValue):V.none();return{get:o,getOption:r,set:(u,h)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=h}}})(kr,"text"),h1=e=>R2.get(e),sA=e=>R2.getOption(e),Wx=(e,n)=>R2.set(e,n),D2=["td","th"],M2=["thead","tbody","tfoot"],Zx=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],wg=["li","dd","dt"],rA=["ul","ol","dl"],A0=["pre","script","textarea","style"],Zm=e=>{let n;return o=>(n=n||_s(e,Ot),un(n,Rn(o)))},xg=e=>Rn(e)==="table",js=e=>es(e)&&Rn(e)==="br",P2=Zm(Zx),g1=Zm(rA),Eg=Zm(wg),EN=Zm(M2),Ji=Zm(D2),qm=Zm(A0),aA=e=>{const n=[];let o=e.dom;for(;o;)n.push(ie.fromDom(o)),o=o.lastChild;return n},iA=e=>{const n=Wa(e,"br"),o=an(aA(e).slice(-1),js);n.length===o.length&&ye(o,ns)},Tg=()=>{const e=ie.fromTag("br");return zr(e,"data-mce-bogus","1"),e},jm=e=>{dl(e),ts(e,Tg())},N2=(e,n)=>{Ra(e).each(o=>{Fu(o).each(r=>{n.isBlock(Rn(e))&&js(o)&&n.isBlock(Rn(r))&&ns(o)})})},Is=jp,O0=e2,Qi=a0,cA=e=>e.insertContent(Is,{preserve_zwsp:!0}),qx=qt,rh=We,bl=e=>(rh(e)&&(e=e.parentNode),qx(e)&&e.hasAttribute("data-mce-caret")),vl=e=>rh(e)&&O0(e.data),qa=e=>bl(e)||vl(e),p1=e=>e.firstChild!==e.lastChild||!Go(e.firstChild),jx=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Is),u=e.parentNode;if(n){const h=e.previousSibling;if(rh(h)){if(qa(h))return h;if(td(h))return h.splitText(h.data.length-1)}u==null||u.insertBefore(i,e)}else{const h=e.nextSibling;if(rh(h)){if(qa(h))return h;if(R0(h))return h.splitText(1),h}e.nextSibling?u==null||u.insertBefore(i,e.nextSibling):u==null||u.appendChild(i)}return i},b1=e=>{const n=e.container();return We(n)?n.data.charAt(e.offset())===Is||e.isAtStart()&&vl(n.previousSibling):!1},B2=e=>{const n=e.container();return We(n)?n.data.charAt(e.offset()-1)===Is||e.isAtEnd()&&vl(n.nextSibling):!1},lA=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(Tg().dom);const h=n.parentNode;return o?h==null||h.insertBefore(u,n):n.nextSibling?h==null||h.insertBefore(u,n.nextSibling):h==null||h.appendChild(u),u},R0=e=>rh(e)&&e.data[0]===Is,td=e=>rh(e)&&e.data[e.data.length-1]===Is,uA=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Kf(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},D0=e=>e&&e.hasAttribute("data-mce-caret")?(uA(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,M0=e=>bl(e.startContainer),ah=Math.round,ih=e=>e?{left:ah(e.left),top:ah(e.top),bottom:ah(e.bottom),right:ah(e.right),width:ah(e.width),height:ah(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},L2=(e,n)=>(e=ih(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),v1=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Gm=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,em=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:Gm(n.top-e.bottom,e,n)},qn=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Gm(n.bottom-e.top,e,n),Ni=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,ch=e=>as(e,(n,o)=>n.fold(()=>V.some(o),r=>{const i=Math.min(o.left,r.left),u=Math.min(o.top,r.top),h=Math.max(o.right,r.right),v=Math.max(o.bottom,r.bottom);return V.some({top:u,right:h,bottom:v,left:i,width:h-i,height:v-u})}),V.none()),P0=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),i=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-i)*(o-i))},us=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),y1=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},nd=(e,n)=>{if(qt(e)&&e.hasChildNodes()){const o=e.childNodes,r=f1(n,0,o.length-1);return o[r]}else return e},dA=(e,n)=>{if(!(n<0&&qt(e)&&e.hasChildNodes()))return nd(e,n)},TN=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),I2=e=>Y(e)&&e.charCodeAt(0)>=768&&TN.test(e),ds=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},mA=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},F2=li,$2=ls,lh=Go,yl=We,Gx=Da(["script","style","textarea"]),H2=Da(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Mt=Da(["table"]),kN=qa,fi=e=>kN(e)?!1:yl(e)?!Gx(e.parentNode):H2(e)||lh(e)||Mt(e)||tm(e),_N=e=>qt(e)&&e.getAttribute("unselectable")==="true",tm=e=>!_N(e)&&$2(e),fA=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(tm(o))return!1;if(F2(o))return!0}return!0},V2=e=>tm(e)?!as(Jr(e.getElementsByTagName("*")),(n,o)=>n||F2(o),!1):!1,C1=e=>H2(e)||V2(e),uh=(e,n)=>fi(e)&&fA(e,n),Kx=qt,N0=fi,Xx=Lm("display","block table"),B0=Lm("float","left right"),Km=mA(Kx,N0,Mo(B0)),Yx=Mo(Lm("white-space","pre pre-line pre-wrap")),dh=We,kg=Go,Jx=rs.nodeIndex,nm=dA,L0=e=>e?e.createRange():rs.DOM.createRng(),S1=e=>Y(e)&&/[\r\n\t ]/.test(e),z2=e=>!!e.setStart&&!!e.setEnd,U2=e=>{const n=e.startContainer,o=e.startOffset;if(S1(e.toString())&&Yx(n.parentNode)&&We(n)){const r=n.data;if(S1(r[o-1])||S1(r[o+1]))return!0}return!1},hA=e=>{const n=e.ownerDocument,o=L0(n),r=n.createTextNode(br),i=e.parentNode;i.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=ih(o.getBoundingClientRect());return i.removeChild(r),u},gA=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,i=e.endOffset;if(n===o&&We(o)&&r===0&&i===1){const u=e.cloneRange();return u.setEndAfter(o),om(u)}else return null},W2=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,om=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=ih(r[0]):o=ih(e.getBoundingClientRect()),!z2(e)&&kg(e)&&W2(o)?hA(e):W2(o)&&z2(e)&&(n=gA(e))!==null&&n!==void 0?n:o},ra=(e,n)=>{const o=L2(e,n);return o.width=1,o.right=o.left+1,o},pA=e=>{const n=[],o=h=>{h.height!==0&&(n.length>0&&v1(h,n[n.length-1])||n.push(h))},r=(h,v)=>{const w=L0(h.ownerDocument);if(v<h.data.length){if(I2(h.data[v]))return;if(I2(h.data[v-1])&&(w.setStart(h,v),w.setEnd(h,v+1),!U2(w))){o(ra(om(w),!1));return}}v>0&&(w.setStart(h,v-1),w.setEnd(h,v),U2(w)||o(ra(om(w),!1))),v<h.data.length&&(w.setStart(h,v),w.setEnd(h,v+1),U2(w)||o(ra(om(w),!0)))},i=e.container(),u=e.offset();if(dh(i))return r(i,u),n;if(Kx(i))if(e.isAtEnd()){const h=nm(i,u);dh(h)&&r(h,h.data.length),Km(h)&&!kg(h)&&o(ra(om(h),!1))}else{const h=nm(i,u);if(dh(h)&&r(h,0),Km(h)&&e.isAtEnd())return o(ra(om(h),!1)),n;const v=nm(e.container(),e.offset()-1);Km(v)&&!kg(v)&&(Xx(v)||Xx(h)||!Km(h))&&o(ra(om(v),!1)),Km(h)&&o(ra(om(h),!0))}return n},Le=(e,n,o)=>{const r=()=>(dh(e),n===0),i=()=>dh(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const P=L0(e.ownerDocument);return P.setStart(e,n),P.setEnd(e,n),P},h=()=>(o||(o=pA(Le(e,n))),o),v=()=>h().length>0,w=P=>P&&e===P.container()&&n===P.offset(),k=P=>nm(e,P?n-1:n);return{container:St(e),offset:St(n),toRange:u,getClientRects:h,isVisible:v,isAtStart:r,isAtEnd:i,isEqual:w,getNode:k}};Le.fromRangeStart=e=>Le(e.startContainer,e.startOffset),Le.fromRangeEnd=e=>Le(e.endContainer,e.endOffset),Le.after=e=>Le(e.parentNode,Jx(e)+1),Le.before=e=>Le(e.parentNode,Jx(e)),Le.isAbove=(e,n)=>Ns(Ir(n.getClientRects()),Si(e.getClientRects()),em).getOr(!1),Le.isBelow=(e,n)=>Ns(Si(n.getClientRects()),Ir(e.getClientRects()),qn).getOr(!1),Le.isAtStart=e=>e?e.isAtStart():!1,Le.isAtEnd=e=>e?e.isAtEnd():!1,Le.isTextPosition=e=>e?We(e.container()):!1,Le.isElementPosition=e=>!Le.isTextPosition(e);const I0=(e,n)=>{We(n)&&n.data.length===0&&e.remove(n)},bA=(e,n,o)=>{n.insertNode(o),I0(e,o.previousSibling),I0(e,o.nextSibling)},Z2=(e,n,o)=>{const r=V.from(o.firstChild),i=V.from(o.lastChild);n.insertNode(o),r.each(u=>I0(e,u.previousSibling)),i.each(u=>I0(e,u.nextSibling))},w1=(e,n,o)=>{u0(o)?Z2(e,n,o):bA(e,n,o)},lu=We,Xm=Kf,Qx=rs.nodeIndex,q2=e=>{const n=e.parentNode;return Xm(n)?q2(n):n},F0=e=>e?xr(e.childNodes,(n,o)=>(Xm(o)&&o.nodeName!=="BR"?n=n.concat(F0(o)):n.push(o),n),[]):[],$0=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&lu(o);)n+=o.data.length;return n},eE=e=>n=>e===n,sm=e=>{let n,o;n=F0(q2(e)),o=is(n,eE(e),e),n=n.slice(0,o+1);const r=xr(n,(i,u,h)=>(lu(u)&&lu(n[h-1])&&i++,i),0);return n=Pd(n,Da([e.nodeName])),o=is(n,eE(e),e),o-r},Ar=e=>(lu(e)?"text()":e.nodeName.toLowerCase())+"["+sm(e)+"]",H0=(e,n,o)=>{const r=[];for(let i=n.parentNode;i&&i!==e;i=i.parentNode)r.push(i);return r},j2=(e,n)=>{let o=[],r=n.container(),i=n.offset(),u;if(lu(r))u=$0(r,i);else{const v=r.childNodes;i>=v.length?(u="after",i=v.length-1):u="before",r=v[i]}o.push(Ar(r));let h=H0(e,r);return h=Pd(h,Mo(Kf)),o=o.concat(wi(h,v=>Ar(v))),o.reverse().join("/")+","+u},tE=(e,n,o)=>{let r=F0(e);return r=Pd(r,(i,u)=>!lu(i)||!lu(r[u-1])),r=Pd(r,Da([n])),r[o]},nE=(e,n)=>{let o=e,r=0;for(;lu(o);){const i=o.data.length;if(n>=r&&n<=r+i){e=o,n=n-r;break}if(!lu(o.nextSibling)){e=o,n=i;break}r+=i,o=o.nextSibling}return lu(e)&&n>e.data.length&&(n=e.data.length),Le(e,n)},oE=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),i=o.length>1?o[1]:"before",u=xr(r,(h,v)=>{const w=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(v);return w?(w[1]==="text()"&&(w[1]="#text"),tE(h,w[1],parseInt(w[2],10))):null},e);if(!u)return null;if(!lu(u)&&u.parentNode){let h;return i==="after"?h=Qx(u)+1:h=Qx(u),Le(u.parentNode,h)}return nE(u,parseInt(i,10))},V0=ls,sE=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let i=n.previousSibling;i&&We(i);i=i.previousSibling)r+=e(i.data).length;return r},rE=(e,n,o,r,i)=>{const u=i?r.startContainer:r.endContainer;let h=i?r.startOffset:r.endOffset;const v=[],w=e.getRoot();if(We(u))v.push(o?sE(n,u,h):h);else{let k=0;const P=u.childNodes;h>=P.length&&P.length&&(k=1,h=Math.max(0,P.length-1)),v.push(e.nodeIndex(P[h],o)+k)}for(let k=u;k&&k!==w;k=k.parentNode)v.push(e.nodeIndex(k,o));return v},vA=(e,n,o,r)=>{const i=n.dom,u=rE(i,e,o,r,!0),h=n.isForward(),v=M0(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:h,...v};{const w=rE(i,e,o,r,!1);return{start:u,end:w,forward:h,...v}}},x1=(e,n,o)=>{let r=0;return Xe.each(e.select(n),i=>{if(i.getAttribute("data-mce-bogus")!=="all"){if(i===o)return!1;r++;return}}),r},aE=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(qt(o)&&o.nodeName==="TR"){const i=o.childNodes;o=i[Math.min(n?r:r-1,i.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},iE=e=>(aE(e,!0),aE(e,!1),e),cE=(e,n)=>{if(qt(e)&&(e=nd(e,n),V0(e)))return e;if(qa(e)){We(e)&&bl(e)&&(e=e.parentNode);let o=e.previousSibling;if(V0(o)||(o=e.nextSibling,V0(o)))return o}},yA=e=>cE(e.startContainer,e.startOffset)||cE(e.endContainer,e.endOffset),lE=(e,n,o)=>{const r=o.getNode(),i=o.getRng();if(r.nodeName==="IMG"||V0(r)){const h=r.nodeName;return{name:h,index:x1(o.dom,h,r)}}const u=yA(i);if(u){const h=u.tagName;return{name:h,index:x1(o.dom,h,u)}}return vA(e,o,n,i)},CA=e=>{const n=e.getRng();return{start:j2(e.dom.getRoot(),Le.fromRangeStart(n)),end:j2(e.dom.getRoot(),Le.fromRangeEnd(n)),forward:e.isForward()}},SA=e=>({rng:e.getRng(),forward:e.isForward()}),uE=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},E1=(e,n)=>{const o=e.dom;let r=e.getRng();const i=o.uniqueId(),u=e.isCollapsed(),h=e.getNode(),v=h.nodeName,w=e.isForward();if(v==="IMG")return{name:v,index:x1(o,v,h)};const k=iE(r.cloneRange());if(!u){k.collapse(!1);const I=uE(o,i+"_end",n);w1(o,k,I)}r=iE(r),r.collapse(!0);const P=uE(o,i+"_start",n);return w1(o,r,P),e.moveToBookmark({id:i,keep:!0,forward:w}),{id:i,forward:w}},wA=(e,n,o=!1)=>n===2?lE(Qi,o,e):n===3?CA(e):n?SA(e):E1(e,!1),Vo=je(lE,Uo,!0),G2=e=>{const n=u=>u(e),o=St(e),r=()=>i,i={tag:!0,inner:e,fold:(u,h)=>h(e),isValue:Ot,isError:qe,map:u=>ja.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>V.some(e)};return i},dE=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,i)=>r(e),isValue:qe,isError:Ot,map:n,mapError:r=>ja.error(r(e)),bind:n,exists:qe,forall:Ot,getOr:Uo,or:Uo,getOrThunk:gs,orThunk:gs,getOrDie:wr(String(e)),each:Ft,toOptional:V.none};return o},ja={value:G2,error:dE,fromOption:(e,n)=>e.fold(()=>dE(n),G2)},ur={generate:e=>{if(!lt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return ye(e,(r,i)=>{const u=fr(r);if(u.length!==1)throw new Error("one and only one name per case");const h=u[0],v=r[h];if(o[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!lt(v))throw new Error("case arguments must be an array");n.push(h),o[h]=(...w)=>{const k=w.length;if(k!==v.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+v.length+" ("+v+"), got "+k);return{fold:(...I)=>{if(I.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+I.length);return I[i].apply(null,w)},match:I=>{const F=fr(I);if(n.length!==F.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+F.join(","));if(!ks(n,X=>yn(F,X)))throw new Error("Not all branches were specified when using match. Specified: "+F.join(", ")+`
Required: `+n.join(", "));return I[h].apply(null,w)},log:I=>{console.log(I,{constructors:n,constructor:h,params:w})}}}}),o}};ur.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const z0=e=>{const n=[],o=[];return ye(e,r=>{r.fold(i=>{n.push(i)},i=>{o.push(i)})}),{errors:n,values:o}},_g=e=>e.type==="inline-command"||e.type==="inline-format",mE=e=>e.type==="block-command"||e.type==="block-format",K2=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,fE=e=>{var n;const o=i=>ja.error({message:i,pattern:e}),r=(i,u,h)=>{if(e.format!==void 0){let v;if(lt(e.format)){if(!ks(e.format,Y))return o(i+" pattern has non-string items in the `format` array");v=e.format}else if(Y(e.format))v=[e.format];else return o(i+" pattern has non-string `format` parameter");return ja.value(u(v))}else return e.cmd!==void 0?Y(e.cmd)?ja.value(h(e.cmd,e.value)):o(i+" pattern has non-string `cmd` parameter"):o(i+" pattern is missing both `format` and `cmd` parameters")};if(!we(e))return o("Raw pattern is not an object");if(!Y(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!Y(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let i=e.start,u=e.end;return u.length===0&&(u=i,i=""),r("Inline",h=>({type:"inline-format",start:i,end:u,format:h}),(h,v)=>({type:"inline-command",start:i,end:u,cmd:h,value:v}))}else{if(e.replacement!==void 0)return Y(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):ja.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const i=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:i}),(u,h)=>({type:"block-command",start:e.start,cmd:u,value:h,trigger:i}))}}},Ym=e=>an(e,mE),Wr=e=>an(e,_g),od=(e,n)=>({inlinePatterns:Wr(e),blockPatterns:Ym(e),dynamicPatternsLookup:n}),Ag=(e,n)=>({...e,blockPatterns:an(e.blockPatterns,o=>K2(o,n))}),hE=e=>{const n=z0(Cn(e,fE));return ye(n.errors,o=>console.error(o.message,o.pattern)),n.values},xA=e=>n=>{const o=e(n);return hE(o)},U0=(e,n)=>e.dispatch("PreProcess",n),X2=(e,n)=>e.dispatch("PostProcess",n),Y2=e=>{e.dispatch("remove")},J2=e=>{e.dispatch("detach")},gE=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},pE=(e,n,o,r,i)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:i})},bE=(e,n,o,r,i)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:i})},vE=e=>{e.dispatch("PreInit")},EA=e=>{e.dispatch("PostRender")},fa=e=>{e.dispatch("Init")},TA=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},rm=(e,n,o)=>{e.dispatch(n,o)},Q2=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},eC=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},yE=(e,n)=>e.dispatch("BeforeSetContent",n),W0=(e,n)=>e.dispatch("SetContent",n),tC=(e,n)=>e.dispatch("BeforeGetContent",n),nC=(e,n)=>e.dispatch("GetContent",n),kA=(e,n)=>{e.dispatch("AutocompleterStart",n)},_A=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},or=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},dr=e=>{e.dispatch("AutocompleterEnd")},aa=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),sr=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),Or=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),Cr=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),oC=(e,n)=>e.dispatch("DisabledStateChange",{state:n}),T1=la().deviceType,k1=T1.isTouch(),Zr=rs.DOM,CE=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return as(n,(o,r)=>{const i=r.split("="),u=i[0],h=i.length>1?i[1]:u;return o[Hs(u)]=Hs(h),o},{})},Z0=e=>Oe(e,RegExp),Lt=e=>n=>n.options.get(e),mh=e=>Y(e)||we(e),sC=(e,n="")=>o=>{const r=Y(o);if(r)if(o.indexOf("=")!==-1){const i=CE(o);return{value:Po(i,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},ON=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:sC(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:sC(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=Y(o)&&Fo(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=yn(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>at(o)?{valid:!0,value:o}:Y(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||Y(o)||On(o,Y);return r?Y(o)?{value:Cn(o.split(","),Hs),valid:r}:lt(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:R1(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=Y(o)||On(o,Y);return r?{value:lt(o)?o:Cn(o.split(","),Hs),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("extended_mathml_attributes",{processor:"string[]"}),n("extended_mathml_elements",{processor:"string[]"}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=at(o)||Y(o);return r?o===!1||T1.isiPhone()||T1.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!k1}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("onboarding",{processor:"boolean",default:!0}),n("tiny_cloud_entry_url",{processor:"string"}),n("theme",{processor:o=>o===!1||Y(o)||le(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||Y(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("disabled",{processor:o=>at(o)?(e.initialized&&ef(e)!==o&&Promise.resolve().then(()=>{oC(e,o)}),{valid:!0,value:o}):{valid:!1,message:"The value must be a boolean."},default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=On(o,Y);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:mh}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:mh}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:mh}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:mh}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>Y(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>On(o,we)||o===!1?{value:hE(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>le(o)?{value:xA(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>On(o,Z0)?{value:o,valid:!0}:Z0(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=yn(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=yn(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Mi.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:Zr.getAttrib(e.getElement(),"placeholder")})})},AA=Lt("iframe_attrs"),OA=Lt("doctype"),Bi=Lt("document_base_url"),q0=Lt("body_id"),SE=Lt("body_class"),ha=Lt("content_security_policy"),sd=Lt("br_in_pre"),Rr=Lt("forced_root_block"),Cc=Lt("forced_root_block_attrs"),Ka=Lt("newline_behavior"),rC=Lt("br_newline_selector"),j0=Lt("no_newline_selector"),aC=Lt("keep_styles"),wE=Lt("end_container_on_empty_block"),G0=Lt("automatic_uploads"),xE=Lt("images_reuse_filename"),EE=Lt("images_replace_blob_uris"),TE=Lt("icons"),RA=Lt("icons_url"),DA=Lt("images_upload_url"),MA=Lt("images_upload_base_path"),iC=Lt("images_upload_credentials"),K0=Lt("images_upload_handler"),kE=Lt("content_css_cors"),_1=Lt("referrer_policy"),Og=Lt("language"),Jm=Lt("language_url"),X0=Lt("indent_use_margin"),PA=Lt("indentation"),_E=Lt("content_css"),NA=Lt("content_style"),AE=Lt("font_css"),OE=Lt("directionality"),hi=Lt("inline_boundaries_selector"),Y0=Lt("object_resizing"),RE=Lt("resize_img_proportional"),cC=Lt("placeholder"),A1=Lt("event_root"),BA=Lt("service_message"),Rg=Lt("theme"),LA=Lt("theme_url"),lC=Lt("model"),IA=Lt("model_url"),O1=Lt("inline_boundaries"),FA=Lt("formats"),$A=Lt("preview_styles"),J0=Lt("format_empty_lines"),DE=Lt("format_noneditable_selector"),uC=Lt("custom_ui_selector"),R1=Lt("inline"),ME=Lt("hidden_input"),dC=Lt("submit_patch"),mC=Lt("add_form_submit_trigger"),fC=Lt("add_unload_trigger"),fh=Lt("custom_undo_redo_levels"),PE=Lt("disable_nodechange"),hC=Lt("readonly"),NE=Lt("editable_root"),BE=Lt("content_css_cors"),gi=Lt("plugins"),Q0=Lt("external_plugins"),ev=Lt("block_unsupported_drop"),gC=Lt("visual"),pC=Lt("visual_table_class"),rd=Lt("visual_anchor_class"),tv=Lt("iframe_aria_text"),HA=Lt("setup"),Qm=Lt("init_instance_callback"),nv=Lt("urlconverter_callback"),pi=Lt("auto_focus"),RN=Lt("browser_spellcheck"),Dg=Lt("protect"),VA=Lt("paste_block_drop"),D1=Lt("paste_data_images"),zA=Lt("paste_preprocess"),UA=Lt("paste_postprocess"),LE=Lt("newdocument_content"),IE=Lt("paste_webkit_styles"),ov=Lt("paste_remove_styles_if_webkit"),WA=Lt("paste_merge_formats"),ZA=Lt("smart_paste"),M1=Lt("paste_as_text"),bC=Lt("paste_tab_spaces"),vC=Lt("allow_html_data_urls"),FE=Lt("text_patterns"),$E=Lt("text_patterns_lookup"),sv=Lt("noneditable_class"),DN=Lt("editable_class"),Mg=Lt("noneditable_regexp"),_H=Lt("preserve_cdata"),P1=Lt("highlight_on_focus"),N1=Lt("xss_sanitization"),rv=Lt("init_content_sync"),qA=e=>e.options.isSet("text_patterns_lookup"),HE=e=>Xe.explode(e.options.get("font_size_style_values")),jA=e=>Xe.explode(e.options.get("font_size_classes")),yC=e=>e.options.get("encoding")==="xml",CC=e=>Xe.explode(e.options.get("images_file_types")),am=Lt("table_tab_navigation"),B1=Lt("details_initial_state"),GA=Lt("details_serialized_state"),SC=Lt("sandbox_iframes"),VE=e=>e.options.get("sandbox_iframes_exclusions"),MN=Lt("convert_unsafe_embeds"),zE=Lt("license_key"),wC=Lt("api_key"),ef=Lt("disabled"),KA=qt,xC=We,EC=e=>{const n=e.parentNode;n&&n.removeChild(e)},TC=e=>{const n=Qi(e);return{count:e.length-n.length,text:n}},av=e=>{let n;for(;(n=e.data.lastIndexOf(Is))!==-1;)e.deleteData(n,1)},kC=(e,n)=>(hh(e),n),iv=(e,n)=>{const o=TC(e.data.substr(0,n.offset())),r=TC(e.data.substr(n.offset()));return(o.text+r.text).length>0?(av(e),Le(e,n.offset()-o.count)):n},Pg=(e,n)=>{const o=n.container(),r=Np(Jr(o.childNodes),e).map(i=>i<n.offset()?Le(o,n.offset()-1):n).getOr(n);return hh(e),r},_C=(e,n)=>xC(e)&&n.container()===e?iv(e,n):kC(e,n),XA=(e,n)=>n.container()===e.parentNode?Pg(e,n):kC(e,n),YA=(e,n)=>Le.isTextPosition(n)?_C(e,n):XA(e,n),hh=e=>{KA(e)&&qa(e)&&(p1(e)?e.removeAttribute("data-mce-caret"):EC(e)),xC(e)&&(av(e),e.data.length===0&&EC(e))},L1=ls,UE=lr,bi=os,PN="*[contentEditable=false],video,audio,embed,object",JA=(e,n,o)=>{const r=L2(n.getBoundingClientRect(),o);let i,u;if(e.tagName==="BODY"){const v=e.ownerDocument.documentElement;i=e.scrollLeft||v.scrollLeft,u=e.scrollTop||v.scrollTop}else{const v=e.getBoundingClientRect();i=e.scrollLeft-v.left,u=e.scrollTop-v.top}r.left+=i,r.right+=i,r.top+=u,r.bottom+=u,r.width=1;let h=n.offsetWidth-n.clientWidth;return h>0&&(o&&(h*=-1),r.left+=h,r.right+=h),r},Ng=e=>{var n,o;const r=Wa(ie.fromDom(e),PN);for(let i=0;i<r.length;i++){const u=r[i].dom;let h=u.previousSibling;if(td(h)){const v=h.data;v.length===1?(n=h.parentNode)===null||n===void 0||n.removeChild(h):h.deleteData(v.length-1,1)}h=u.nextSibling,R0(h)&&(h.data.length===1?(o=h.parentNode)===null||o===void 0||o.removeChild(h):h.deleteData(0,1))}},WE=(e,n,o,r)=>{const i=gc();let u,h;const v=Rr(e),w=e.dom,k=(G,ee)=>{let ce;if(P(),bi(ee))return null;if(o(ee)){const pe=lA(v,ee,G),be=JA(n,ee,G);w.setStyle(pe,"top",be.top),w.setStyle(pe,"caret-color","transparent"),h=pe;const Te=w.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});w.setStyles(Te,{...be}),w.add(n,Te),i.set({caret:Te,element:ee,before:G}),G&&w.addClass(Te,"mce-visual-caret-before"),I(),ce=ee.ownerDocument.createRange(),ce.setStart(pe,0),ce.setEnd(pe,0)}else return h=jx(ee,G),ce=ee.ownerDocument.createRange(),I1(h.nextSibling)?(ce.setStart(h,0),ce.setEnd(h,0)):(ce.setStart(h,1),ce.setEnd(h,1)),ce;return ce},P=()=>{Ng(n),h&&(hh(h),h=null),i.on(G=>{w.remove(G.caret),i.clear()}),u&&(clearInterval(u),u=void 0)},I=()=>{u=window.setInterval(()=>{i.on(G=>{r()?w.toggleClass(G.caret,"mce-visual-caret-hidden"):w.addClass(G.caret,"mce-visual-caret-hidden")})},500)};return{show:k,hide:P,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on(G=>{const ee=JA(n,G.element,G.before);w.setStyles(G.caret,{...ee})})},destroy:()=>clearInterval(u)}},ZE=()=>zt.browser.isFirefox(),I1=e=>L1(e)||UE(e),tf=e=>(I1(e)||oa(e)&&ZE())&&Hf(ie.fromDom(e)).exists(nu),AC=li,qE=ls,QA=lr,jE=Lm("display","block table table-cell table-row table-caption list-item"),F1=qa,GE=bl,$1=qt,Bg=We,OC=fi,Lg=e=>e===1,gh=e=>e===-1,ph=(e,n)=>{let o;for(;o=e(n);)if(!GE(o))return o;return null},im=(e,n,o,r,i)=>{const u=new cr(e,r),h=qE(e)||GE(e);let v;if(gh(n)){if(h&&(v=ph(u.prev.bind(u),!0),o(v)))return v;for(;v=ph(u.prev.bind(u),i);)if(o(v))return v}if(Lg(n)){if(h&&(v=ph(u.next.bind(u),!0),o(v)))return v;for(;v=ph(u.next.bind(u),i);)if(o(v))return v}return null},RC=(e,n)=>{const o=i=>AC(i.dom),r=i=>i.dom===n;return ul(ie.fromDom(e),o,r).map(i=>i.dom).getOr(n)},ad=(e,n)=>{for(;e&&e!==n;){if(jE(e))return e;e=e.parentNode}return null},Cl=(e,n,o)=>ad(e.container(),o)===ad(n.container(),o),id=(e,n)=>{if(!n)return V.none();const o=n.container(),r=n.offset();return $1(o)?V.from(o.childNodes[r+e]):V.none()},DC=(e,n)=>{var o;const i=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),i},uu=(e,n,o)=>ad(n,e)===ad(o,e),MC=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let i=o;for(;i&&i!==n;){let u=i[r];if(u&&F1(u)&&(u=u[r]),qE(u)||QA(u)){if(uu(n,u,i))return u;break}if(OC(u))break;i=i.parentNode}return null},bh=je(DC,!0),Ig=je(DC,!1),KE=(e,n,o)=>{let r;const i=je(MC,!0,n),u=je(MC,!1,n),h=o.startContainer,v=o.startOffset;if(bl(h)){const w=Bg(h)?h.parentNode:h,k=w.getAttribute("data-mce-caret");if(k==="before"&&(r=w.nextSibling,tf(r)))return bh(r);if(k==="after"&&(r=w.previousSibling,tf(r)))return Ig(r)}if(!o.collapsed)return o;if(We(h)){if(F1(h)){if(e===1){if(r=u(h),r)return bh(r);if(r=i(h),r)return Ig(r)}if(e===-1){if(r=i(h),r)return Ig(r);if(r=u(h),r)return bh(r)}return o}if(td(h)&&v>=h.data.length-1)return e===1&&(r=u(h),r)?bh(r):o;if(R0(h)&&v<=1)return e===-1&&(r=i(h),r)?Ig(r):o;if(v===h.data.length)return r=u(h),r?bh(r):o;if(v===0)return r=i(h),r?Ig(r):o}return o},XE=(e,n)=>id(e?0:-1,n).filter(qE),H1=(e,n,o)=>{const r=KE(e,n,o);return e===-1?Le.fromRangeStart(r):Le.fromRangeEnd(r)},cv=e=>V.from(e.getNode()).map(ie.fromDom),e3=e=>V.from(e.getNode(!0)).map(ie.fromDom),V1=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},lv=(e,n)=>{const o=Cl(e,n);return!o&&Go(e.getNode())?!0:o},YE=ls,Sl=We,JE=qt,uv=Go,vh=fi,QE=C1,z1=uh,NN=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},eT=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,ga=(e,n)=>{if(Lg(e)){if(vh(n.previousSibling)&&!Sl(n.previousSibling))return Le.before(n);if(Sl(n))return Le(n,0)}if(gh(e)){if(vh(n.nextSibling)&&!Sl(n.nextSibling))return Le.after(n);if(Sl(n))return Le(n,n.data.length)}return gh(e)?uv(n)?Le.before(n):Le.after(n):Le.before(n)},dv=(e,n)=>{const o=n.nextSibling;return o&&vh(o)?Sl(o)?Le(o,0):Le.before(o):nf(1,Le.after(n),e)},nf=(e,n,o)=>{let r,i,u,h;if(!JE(o)||!n)return null;if(n.isEqual(Le.after(o))&&o.lastChild){if(h=Le.after(o.lastChild),gh(e)&&vh(o.lastChild)&&JE(o.lastChild))return uv(o.lastChild)?Le.before(o.lastChild):h}else h=n;const v=h.container();let w=h.offset();if(Sl(v)){if(gh(e)&&w>0)return Le(v,--w);if(Lg(e)&&w<v.length)return Le(v,++w);r=v}else{if(gh(e)&&w>0&&(i=eT(v,w-1),vh(i)))return!QE(i)&&(u=im(i,e,z1,i),u)?Sl(u)?Le(u,u.data.length):Le.after(u):Sl(i)?Le(i,i.data.length):Le.before(i);if(Lg(e)&&w<v.childNodes.length&&(i=eT(v,w),vh(i)))return uv(i)?dv(o,i):!QE(i)&&(u=im(i,e,z1,i),u)?Sl(u)?Le(u,0):Le.before(u):Sl(i)?Le(i,0):Le.after(i);r=i||h.getNode()}if(r&&(Lg(e)&&h.isAtEnd()||gh(e)&&h.isAtStart())&&(r=im(r,e,Ot,o,!0),z1(r,o)))return ga(e,r);i=r&&im(r,e,z1,o);const k=ji(an(NN(v,o),YE));return k&&(!i||!k.contains(i))?(Lg(e)?h=Le.after(k):h=Le.before(k),h):i?ga(e,i):null},Sc=e=>({next:n=>nf(1,n,e),prev:n=>nf(-1,n,e)}),tT=(e,n,o)=>{const r=e?Le.before(o):Le.after(o);return wc(e,n,r)},mv=e=>Go(e)?Le.before(e):Le.after(e),U1=e=>Le.isTextPosition(e)?e.offset()===0:fi(e.getNode()),nT=e=>{if(Le.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return fi(e.getNode(!0))},W1=(e,n)=>!Le.isTextPosition(e)&&!Le.isTextPosition(n)&&e.getNode()===n.getNode(!0),oT=e=>!Le.isTextPosition(e)&&Go(e.getNode()),yh=(e,n,o)=>e?!W1(n,o)&&!oT(n)&&nT(n)&&U1(o):!W1(o,n)&&U1(n)&&nT(o),wc=(e,n,o)=>{const r=Sc(n);return V.from(e?r.next(o):r.prev(o))},of=(e,n,o)=>wc(e,n,o).bind(r=>Cl(o,r,n)&&yh(e,o,r)?wc(e,n,r):V.some(r)),du=(e,n,o,r)=>of(e,n,o).bind(i=>r(i)?du(e,n,i,r):V.some(i)),wl=(e,n)=>{const o=e?n.firstChild:n.lastChild;return We(o)?V.some(Le(o,e?0:o.data.length)):o?fi(o)?V.some(e?Le.before(o):mv(o)):tT(e,n,o):V.none()},pa=je(wc,!0),ia=je(wc,!1),Sr=je(wl,!0),xl=je(wl,!1),fv="_mce_caret",xc=e=>qt(e)&&e.id===fv,Ch=(e,n)=>{let o=n;for(;o&&o!==e;){if(xc(o))return o;o=o.parentNode}return null},hv=e=>Y(e.start),sT=e=>un(e,"rng"),rT=e=>un(e,"id"),aT=e=>un(e,"name"),iT=e=>Xe.isArray(e.start),gv=e=>!aT(e)&&at(e.forward)?e.forward:!0,cT=(e,n)=>(qt(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),lT=(e,n)=>{const o=V.from(oE(e.getRoot(),n.start)),r=V.from(oE(e.getRoot(),n.end));return Ns(o,r,(i,u)=>{const h=e.createRng();return h.setStart(i.container(),i.offset()),h.setEnd(u.container(),u.offset()),{range:h,forward:gv(n)}})},Fg=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Is);e.appendChild(i),n.setStart(i,0),n.setEnd(i,0)},uT=e=>!e.hasChildNodes(),t3=(e,n)=>xl(e).fold(qe,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),n3=(e,n,o)=>uT(n)&&Ch(e,n)?(Fg(n,o),!0):!1,dT=(e,n,o,r)=>{const i=o[n?"start":"end"],u=e.getRoot();if(i){let h=u,v=i[0];for(let w=i.length-1;h&&w>=1;w--){const k=h.childNodes;if(n3(u,h,r))return!0;if(i[w]>k.length-1)return n3(u,h,r)?!0:t3(h,r);h=k[i[w]]}We(h)&&(v=Math.min(i[0],h.data.length)),qt(h)&&(v=Math.min(i[0],h.childNodes.length)),n?r.setStart(h,v):r.setEnd(h,v)}return!0},$g=e=>We(e)&&e.data.length>0,o3=(e,n,o)=>{const r=e.get(o.id+"_"+n),i=r==null?void 0:r.parentNode,u=o.keep;if(r&&i){let h,v;if(n==="start"?u?r.hasChildNodes()?(h=r.firstChild,v=1):$g(r.nextSibling)?(h=r.nextSibling,v=0):$g(r.previousSibling)?(h=r.previousSibling,v=r.previousSibling.data.length):(h=i,v=e.nodeIndex(r)+1):(h=i,v=e.nodeIndex(r)):u?r.hasChildNodes()?(h=r.firstChild,v=1):$g(r.previousSibling)?(h=r.previousSibling,v=r.previousSibling.data.length):(h=i,v=e.nodeIndex(r)):(h=i,v=e.nodeIndex(r)),!u){const w=r.previousSibling,k=r.nextSibling;Xe.each(Xe.grep(r.childNodes),I=>{We(I)&&(I.data=I.data.replace(/\uFEFF/g,""))});let P;for(;P=e.get(o.id+"_"+n);)e.remove(P,!0);if(We(k)&&We(w)&&!zt.browser.isOpera()){const I=w.data.length;w.appendData(k.data),e.remove(k),h=w,v=I}}return V.some(Le(h,v))}else return V.none()},s3=(e,n)=>{const o=e.createRng();return dT(e,!0,n,o)&&dT(e,!1,n,o)?V.some({range:o,forward:gv(n)}):V.none()},eo=(e,n)=>{const o=o3(e,"start",n),r=o3(e,"end",n);return Ns(o,r.or(o),(i,u)=>{const h=e.createRng();return h.setStart(cT(e,i.container()),i.offset()),h.setEnd(cT(e,u.container()),u.offset()),{range:h,forward:gv(n)}})},cm=(e,n)=>V.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),lm=(e,n)=>{const o=e.dom;if(n){if(iT(n))return s3(o,n);if(hv(n))return lT(o,n);if(rT(n))return eo(o,n);if(aT(n))return cm(o,n);if(sT(n))return V.some({range:n.rng,forward:gv(n)})}return V.none()},pv=(e,n,o)=>wA(e,n,o),PC=(e,n)=>{lm(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},ec=e=>qt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Sh=(e=>n=>e===n)(br),cd=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Z1=e=>!cd(e)&&!Sh(e)&&!e2(e),mT=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},a3=e=>ti(e,n=>{const o=y1(n);return o?[ie.fromDom(o)]:[]}),BN=e=>mT(e).length>1,fT=e=>an(a3(e),Ji),LN=e=>Wa(e,"td[data-mce-selected],th[data-mce-selected]"),hT=(e,n)=>{const o=LN(n);return o.length>0?o:fT(e)},wh=e=>hT(mT(e.selection.getSel()),ie.fromDom(e.getBody())),xh=(e,n)=>Zf(e,"table",n),Eh=e=>{const n=e.startContainer,o=e.startOffset;return We(n)?o===0?V.some(ie.fromDom(n)):V.none():V.from(n.childNodes[o]).map(ie.fromDom)},IN=e=>{const n=e.endContainer,o=e.endOffset;return We(n)?o===n.data.length?V.some(ie.fromDom(n)):V.none():V.from(n.childNodes[o-1]).map(ie.fromDom)},NC=e=>uc(e).fold(St([e]),n=>[e].concat(NC(n))),Hg=e=>Ra(e).fold(St([e]),n=>Rn(n)==="br"?Fu(n).map(o=>[e].concat(Hg(o))).getOr([]):[e].concat(Hg(n))),BC=(e,n)=>Ns(Eh(n),IN(n),(o,r)=>{const i=ps(NC(e),je(oo,o)),u=ps(Hg(e),je(oo,r));return i.isSome()&&u.isSome()}).getOr(!1),LC=(e,n,o,r)=>{const i=o,u=new cr(o,i),h=qo(e.schema.getMoveCaretBeforeOnEnterElements(),(w,k)=>!yn(["td","th","table"],k.toLowerCase()));let v=o;do{if(We(v)&&Xe.trim(v.data).length!==0){r?n.setStart(v,0):n.setEnd(v,v.data.length);return}if(h[v.nodeName]){r?n.setStartBefore(v):v.nodeName==="BR"?n.setEndBefore(v):n.setEndAfter(v);return}}while(v=r?u.next():u.prev());i.nodeName==="BODY"&&(r?n.setStart(i,0):n.setEnd(i,i.childNodes.length))},Vg=e=>{const n=e.selection.getSel();return Ee(n)&&n.rangeCount>0},IC=(e,n)=>{const o=wh(e);o.length>0?ye(o,r=>{const i=r.dom,u=e.dom.createRng();u.setStartBefore(i),u.setEndAfter(i),n(u,!0)}):n(e.selection.getRng(),!1)},gT=(e,n,o)=>{const r=E1(e,n);o(r),e.moveToBookmark(r)},sf=e=>xo(e==null?void 0:e.nodeType),FC=e=>qt(e)&&!ec(e)&&!xc(e)&&!Kf(e),i3=(e,n)=>{if(FC(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},pT=(e,n,o)=>{const{selection:r,dom:i}=e,u=r.getNode(),h=ls(u);gT(r,!0,()=>{n()}),h&&ls(u)&&i.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&um(i,r)},um=(e,n)=>{var o,r;const i=n.getRng(),{startContainer:u,startOffset:h}=i,v=n.getNode();if(!i3(e,v)&&qt(u)){const w=u.childNodes,k=e.getRoot();let P;if(h<w.length){const I=w[h];P=new cr(I,(o=e.getParent(I,e.isBlock))!==null&&o!==void 0?o:k)}else{const I=w[w.length-1];P=new cr(I,(r=e.getParent(I,e.isBlock))!==null&&r!==void 0?r:k),P.next(!0)}for(let I=P.current();I;I=P.next()){if(e.getContentEditable(I)==="false")return;if(We(I)&&!HC(I)){i.setStart(I,0),n.setRng(i);return}}}},bT=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(qt(e)||!HC(e))return e}},$C=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Hm(e,n),rf=(e,n,o)=>e.schema.isValidChild(n,o),HC=(e,n=!1)=>{if(Ee(e)&&We(e)){const o=n?e.data.replace(/ /g," "):e.data;return Vu(o)}else return!1},Et=e=>Ee(e)&&We(e)&&e.length===0,qr=(e,n)=>{const o="[data-mce-cef-wrappable]",r=DE(e),i=Os(r)?o:`${o},${r}`;return za(ie.fromDom(n),i)},bv=(e,n)=>{const o=e.dom;return FC(n)&&o.getContentEditable(n)==="false"&&qr(e,n)&&o.select('[contenteditable="true"]',n).length===0},Gs=(e,n)=>le(e)?e(n):(Ee(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),Ec=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),vv=(e,n)=>{if(ln(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=mg(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},Th=(e,n,o)=>{const r=e.getStyle(n,o);return vv(r,o)},yv=(e,n)=>{let o;return e.getParent(n,r=>qt(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},Cv=(e,n,o)=>e.getParents(n,o,e.getRoot()),VC=(e,n,o)=>{const r=e.formatter.get(n);return Ee(r)&&bo(r,o)},vT=(e,n)=>VC(e,n,r=>{const i=u=>le(u)||u.length>1&&u.charAt(0)==="%";return bo(["styles","attributes"],u=>Po(r,u).exists(h=>{const v=lt(h)?h:Ru(h);return bo(v,i)}))}),c3=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],i=u=>qo(u,(h,v)=>bo(r,w=>w===v));return VC(e,n,u=>{const h=i(u);return VC(e,o,v=>{const w=i(v);return Lc(h,w)})})},ld=e=>ea(e,"block"),l3=e=>ld(e)&&e.wrapper===!0,zC=e=>ld(e)&&e.wrapper!==!0,qc=e=>ea(e,"selector"),Dr=e=>ea(e,"inline"),Sv=e=>qc(e)&&Dr(e)&&Xl(Po(e,"mixed"),!0),zg=e=>qc(e)&&e.expand!==!1&&!Dr(e),UC=e=>{const n=[];let o=e;for(;o;){if(We(o)&&o.data!==Is||o.childNodes.length>1)return[];qt(o)&&n.push(o),o=o.firstChild}return n},ud=e=>UC(e).length>0,dm=e=>xc(e.dom)&&ud(e.dom),af=ec,q1=Cv,Li=HC,kh=$C,u3=e=>Go(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Ug=(e,n)=>{let o=n;for(;o;){if(qt(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},yT=(e,n,o,r)=>{const i=n.data;if(e){for(let u=o;u>0;u--)if(r(i.charAt(u-1)))return u}else for(let u=o;u<i.length;u++)if(r(i.charAt(u)))return u;return-1},CT=(e,n,o)=>yT(e,n,o,r=>Sh(r)||cd(r)),ST=(e,n,o)=>yT(e,n,o,Z1),wT=(e,n,o,r,i,u)=>{let h;const v=e.getParent(o,I=>o2(I)||e.isBlock(I)),w=Ee(v)?v:n,k=(I,F,W)=>{const X=ed(e),G=i?X.backwards:X.forwards;return V.from(G(I,F,(ee,ce)=>af(ee.parentNode)?-1:(h=ee,W(i,ee,ce)),w))};return k(o,r,CT).bind(I=>u?k(I.container,I.offset+(i?-1:0),ST):V.some(I)).orThunk(()=>h?V.some({container:h,offset:i?0:h.length}):V.none())},j1=(e,n,o,r,i)=>{const u=r[i];We(r)&&Os(r.data)&&u&&(r=u);const h=q1(e,r);for(let v=0;v<h.length;v++)for(let w=0;w<n.length;w++){const k=n[w];if(!(Ee(k.collapsed)&&k.collapsed!==o.collapsed)&&qc(k)&&e.is(h[v],k.selector))return h[v]}return r},ba=(e,n,o,r)=>{var i;let u=o;const h=e.getRoot(),v=n[0];if(ld(v)&&(u=v.wrapper?null:e.getParent(o,v.block,h)),!u){const w=(i=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&i!==void 0?i:h;u=e.getParent(We(o)?o.parentNode:o,k=>k!==h&&kh(e.schema,k),w)}if(u&&ld(v)&&v.wrapper&&(u=q1(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!Ec(u,"br")););return u||o},jc=(e,n,o,r)=>{const i=o.parentNode;return Ee(o[r])?!1:i===n||ln(i)||e.isBlock(i)?!0:jc(e,n,i,r)},Ii=(e,n,o,r,i,u)=>{let h=o;const v=i?"previousSibling":"nextSibling",w=e.getRoot();if(We(o)&&!Li(o)&&(i?r>0:r<o.data.length))return o;for(;h;){if(o2(h))return o;if(!n[0].block_expand&&e.isBlock(h))return u?h:o;for(let k=h[v];k;k=k[v]){const P=We(k)&&!jc(e,w,k,v);if(!af(k)&&!u3(k)&&!Li(k,P))return h}if(h===w||h.parentNode===w){o=h;break}h=h.parentNode}return o},_h=e=>af(e.parentNode)||af(e),mm=(e,n,o,r={})=>{const{includeTrailingSpace:i=!1,expandToBlock:u=!0}=r,h=e.getParent(n.commonAncestorContainer,W=>o2(W)),v=Ee(h)?h:e.getRoot();let{startContainer:w,startOffset:k,endContainer:P,endOffset:I}=n;const F=o[0];return qt(w)&&w.hasChildNodes()&&(w=nd(w,k),We(w)&&(k=0)),qt(P)&&P.hasChildNodes()&&(P=nd(P,n.collapsed?I:I-1),We(P)&&(I=P.data.length)),w=Ug(e,w),P=Ug(e,P),_h(w)&&(w=af(w)?w:w.parentNode,n.collapsed?w=w.previousSibling||w:w=w.nextSibling||w,We(w)&&(k=n.collapsed?w.length:0)),_h(P)&&(P=af(P)?P:P.parentNode,n.collapsed?P=P.nextSibling||P:P=P.previousSibling||P,We(P)&&(I=n.collapsed?0:P.length)),n.collapsed&&(wT(e,v,w,k,!0,i).each(({container:G,offset:ee})=>{w=G,k=ee}),wT(e,v,P,I,!1,i).each(({container:G,offset:ee})=>{P=G,I=ee})),(Dr(F)||F.block_expand)&&((!Dr(F)||!We(w)||k===0)&&(w=Ii(e,o,w,k,!0,u)),(!Dr(F)||!We(P)||I===P.data.length)&&(P=Ii(e,o,P,I,!1,u))),zg(F)&&(w=j1(e,o,n,w,"previousSibling"),P=j1(e,o,n,P,"nextSibling")),(ld(F)||qc(F))&&(w=ba(e,o,w,"previousSibling"),P=ba(e,o,P,"nextSibling"),ld(F)&&(e.isBlock(w)||(w=Ii(e,o,w,k,!0,u),We(w)&&(k=0)),e.isBlock(P)||(P=Ii(e,o,P,I,!1,u),We(P)&&(I=P.data.length)))),qt(w)&&w.parentNode&&(k=e.nodeIndex(w),w=w.parentNode),qt(P)&&P.parentNode&&(I=e.nodeIndex(P)+1,P=P.parentNode),{startContainer:w,startOffset:k,endContainer:P,endOffset:I}},G1=(e,n,o)=>{var r;const i=n.startOffset,u=nd(n.startContainer,i),h=n.endOffset,v=nd(n.endContainer,h-1),w=ee=>{const ce=ee[0];We(ce)&&ce===u&&i>=ce.data.length&&ee.splice(0,1);const pe=ee[ee.length-1];return h===0&&ee.length>0&&pe===v&&We(pe)&&ee.splice(ee.length-1,1),ee},k=(ee,ce,pe)=>{const be=[];for(;ee&&ee!==pe;ee=ee[ce])be.push(ee);return be},P=(ee,ce)=>e.getParent(ee,pe=>pe.parentNode===ce,ce),I=(ee,ce,pe)=>{const be=pe?"nextSibling":"previousSibling";for(let Te=ee,Ue=Te.parentNode;Te&&Te!==ce;Te=Ue){Ue=Te.parentNode;const dt=k(Te===ee?Te:Te[be],be);dt.length&&(pe||dt.reverse(),o(w(dt)))}};if(u===v)return o(w([u]));const F=(r=e.findCommonAncestor(u,v))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,v))return I(u,F,!0);if(e.isChildOf(v,u))return I(v,F);const W=P(u,F)||u,X=P(v,F)||v;I(u,W,!0);const G=k(W===u?W:W.nextSibling,"nextSibling",X===v?X.nextSibling:X);G.length&&o(w(G)),I(v,X)},WC=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],d3=e=>kr(e)&&h1(e)===Is,ZC=(e,n,o,r)=>Hf(n).fold(()=>"skipping",i=>r==="br"||d3(n)?"valid":E0(n)?"existing":xc(n.dom)?"caret":bo(WC,u=>za(n,u))?"valid-block":!rf(e,o,r)||!rf(e,Rn(i),o)?"invalid-child":"valid"),m3=(e,n)=>{const o=mm(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},wv=(e,n,o,r,i,u)=>{const{uid:h=n,...v}=o;Iu(e,Pi()),zr(e,`${yg()}`,h),zr(e,`${nh()}`,r);const{attributes:w={},classes:k=[]}=i(h,v);if(ua(e,w),A2(e,k),u){k.length>0&&zr(e,`${oh()}`,k.join(","));const P=fr(w);P.length>0&&zr(e,`${mi()}`,P.join(","))}},qC=e=>{Ff(e,Pi()),cs(e,`${yg()}`),cs(e,`${nh()}`),cs(e,`${Wm()}`);const n=Vc(e,`${mi()}`).map(r=>r.split(",")).getOr([]),o=Vc(e,`${oh()}`).map(r=>r.split(",")).getOr([]);ye(n,r=>cs(e,r)),zx(e,o),cs(e,`${oh()}`),cs(e,`${mi()}`)},xT=(e,n,o,r,i)=>{const u=ie.fromTag("span",e);return wv(u,n,o,r,i,!1),u},xv=(e,n,o,r,i,u)=>{const h=[],v=xT(e.getDoc(),o,u,r,i),w=gc(),k=()=>{w.clear()},P=()=>w.get().getOrThunk(()=>{const X=Qu(v);return h.push(X),w.set(X),X}),I=X=>{ye(X,F)},F=X=>{switch(ZC(e,X,"span",Rn(X))){case"invalid-child":{k();const ee=Ur(X);I(ee),k();break}case"valid-block":{k(),wv(X,o,u,r,i,!0);break}case"valid":{const ee=P();rg(X,ee);break}}},W=X=>{const G=Cn(X,ie.fromDom);I(G)};return G1(e.dom,n,X=>{k(),W(X)}),h},jC=(e,n,o,r)=>{e.undoManager.transact(()=>{const i=e.selection,u=i.getRng(),h=wh(e).length>0,v=sh("mce-annotation");if(u.collapsed&&!h&&m3(e,u),i.getRng().collapsed&&!h){const w=xT(e.getDoc(),v,r,n,o.decorate);jf(w,br),i.getRng().insertNode(w.dom),i.select(w.dom)}else gT(i,!1,()=>{IC(e,w=>{xv(e,w,v,n,o.decorate,r)})})})},Bo=e=>{const n=_2();Vx(e,n);const o=T0(e,n),r=Ql("span"),i=u=>{ye(u,h=>{r(h)?su(h):qC(h)})};return{register:(u,h)=>{n.register(u,h)},annotate:(u,h)=>{n.lookup(u).each(v=>{jC(e,u,v,h)})},annotationChanged:(u,h)=>{o.addListener(u,h)},remove:u=>{k2(e,V.some(u)).each(({elements:h})=>{const v=e.selection.getBookmark();i(h),e.selection.moveToBookmark(v)})},removeAll:u=>{const h=e.selection.getBookmark();Tt(m1(e,u),(v,w)=>{i(v)}),e.selection.moveToBookmark(h)},getAll:u=>{const h=m1(e,u);return Jn(h,v=>Cn(v,w=>w.dom))}}},mu=e=>({getBookmark:je(pv,e),moveToBookmark:je(PC,e)});mu.isBookmarkNode=ec;const ET=(e,n,o)=>o.collapsed?!1:bo(o.getClientRects(),r=>Ni(r,e,n)),TT=()=>ie.fromDom(document),GC=(e,n=!1)=>e.dom.focus({preventScroll:n}),Ev=e=>{const n=ll(e).dom;return e.dom===n.activeElement},KC=(e=TT())=>V.from(e.dom.activeElement).map(ie.fromDom),Wg=e=>KC(ll(e)).filter(n=>e.dom.contains(n.dom)),kT={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},Tv=ur.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),f3=(e,n,o,r)=>e.fold(n,o,r),K1=e=>e.fold(Uo,Uo,Uo),_T=Tv.before,XC=Tv.on,AT=Tv.after,fm={before:_T,on:XC,after:AT,cata:f3,getStart:K1},kv=ur.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Fi=e=>kv.exact(e.start,e.soffset,e.finish,e.foffset),Ba=e=>e.match({domRange:n=>ie.fromDom(n.startContainer),relative:(n,o)=>fm.getStart(n),exact:(n,o,r,i)=>n}),Zg=kv.domRange,$N=kv.relative,h3=kv.exact,YC=e=>{const n=Ba(e);return qd(n)},Xn=kT.create,qg={domRange:Zg,relative:$N,exact:h3,exactFromRange:Fi,getWin:YC,range:Xn},JC=(e,n)=>{const o=kr(n)?h1(n).length:Ur(n).length+1;return e>o?o:e<0?0:e},QC=e=>qg.range(e.start,JC(e.soffset,e.start),e.finish,JC(e.foffset,e.finish)),OT=(e,n)=>!Gp(n.dom)&&(xs(e,n)||oo(e,n)),RT=e=>n=>OT(e,n.start)&&OT(e,n.finish),g3=e=>e.inline||zt.browser.isFirefox(),HN=e=>qg.range(ie.fromDom(e.startContainer),e.startOffset,ie.fromDom(e.endContainer),e.endOffset),p3=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?V.none():V.from(n.getRangeAt(0))).map(HN)},b3=e=>{const n=qd(e);return p3(n.dom).filter(RT(e))},_v=(e,n)=>V.from(n).filter(RT(e)).map(QC),eS=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),V.some(n)}catch{return V.none()}},Av=e=>{const n=g3(e)?b3(ie.fromDom(e.getBody())):V.none();e.bookmark=n.isSome()?n:e.bookmark},v3=e=>(e.bookmark?e.bookmark:V.none()).bind(o=>_v(ie.fromDom(e.getBody()),o)).bind(eS),VN=e=>{v3(e).each(n=>e.selection.setRng(n))},tS={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},y3=(e,n)=>(xo(n)||(n=0),window.setTimeout(e,n)),C3=(e,n)=>(xo(n)||(n=0),window.setInterval(e,n)),Nt={setEditorTimeout:(e,n,o)=>y3(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=C3(()=>{e.removed?window.clearInterval(r):n()},o);return r}},DT=e=>e.type==="nodechange"&&e.selectionChange,MT=(e,n)=>{const o=()=>{n.throttle()};rs.DOM.bind(document,"mouseup",o),e.on("remove",()=>{rs.DOM.unbind(document,"mouseup",o)})},nS=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},X1=(e,n)=>{nS(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{DT(o)||Av(e)})},S3=e=>{const n=c1(()=>{Av(e)},0);e.on("init",()=>{e.inline&&MT(e,n),X1(e,n)}),e.on("remove",()=>{n.cancel()})};let jg;const oS=rs.DOM,w3=e=>qt(e)&&tS.isEditorUIElement(e),Y1=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Ov=(e,n)=>{const o=uC(e);return oS.getParent(n,i=>w3(i)||(o?e.dom.is(i,o):!1))!==null},sS=e=>{try{const n=ll(ie.fromDom(e.getElement()));return KC(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},l=(e,n)=>{const o=n.editor;S3(o);const r=(i,u)=>{if(P1(i)&&i.inline!==!0){const h=ie.fromDom(i.getContainer());u(h,"tox-edit-focus")}};o.on("focusin",()=>{const i=e.focusedEditor;Y1(sS(o))&&r(o,Iu),i!==o&&(i&&i.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:i}),o.focus(!0))}),o.on("focusout",()=>{Nt.setEditorTimeout(o,()=>{const i=e.focusedEditor;(!Y1(sS(o))||i!==o)&&r(o,Ff),!Ov(o,sS(o))&&i===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),jg||(jg=i=>{const u=e.activeEditor;u&&xx(i).each(h=>{const v=h;v.ownerDocument===document&&v!==document.body&&!Ov(u,v)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},oS.bind(document,"focusin",jg))},m=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&jg&&(oS.unbind(document,"focusin",jg),jg=null)},b=e=>{e.on("AddEditor",je(l,e)),e.on("RemoveEditor",je(m,e))},S=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),A=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,M=e=>e.collapsed?V.from(nd(e.startContainer,e.startOffset)).map(ie.fromDom):V.none(),$=(e,n)=>M(n).bind(o=>EN(o)?V.some(o):xs(e,o)?V.none():V.some(e)),j=(e,n)=>{$(ie.fromDom(e.getBody()),n).bind(o=>Sr(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},K=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},ue=e=>Ev(e)||Wg(e).isSome(),ve=e=>Ee(e.iframeElement)&&Ev(ie.fromDom(e.iframeElement)),Ke=e=>{const n=e.getBody();return n&&ue(ie.fromDom(n))},wt=e=>{const n=ll(ie.fromDom(e.getElement()));return KC(n).filter(o=>!Y1(o.dom)&&Ov(e,o.dom)).isSome()},it=e=>e.inline?Ke(e):ve(e),ut=e=>it(e)||wt(e),It=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const i=h=>{v3(h).each(v=>{h.selection.setRng(v),r=v})};!it(e)&&e.hasEditableRoot()&&i(e);const u=S(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){A(e,u)||K(o),K(u),e.hasEditableRoot()||i(e),j(e,r),Je(e);return}e.inline||(zt.browser.isOpera()||K(o),e.getWin().focus()),(zt.browser.isFirefox()||e.inline)&&(K(o),j(e,r)),Je(e)},Je=e=>e.editorManager.setActive(e),sn=(e,n)=>{e.removed||(n?Je(e):It(e))},ze={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ze.metaKeyPressed(e),metaKeyPressed:e=>zt.os.isMacOS()||zt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Dt="data-mce-selected",ho="table,img,figure.image,hr,video,span.mce-preview-object,details",go=Math.abs,Ut=Math.round,Lo={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Xa=e=>e.type==="longpress"||e.type.indexOf("touch")===0,cf=(e,n)=>{const o=n.dom,r=n.getDoc(),i=document,u=n.getBody();let h,v,w,k,P,I,F,W,X,G,ee,ce,pe,be,Te;const Ue=Qe=>Ee(Qe)&&(_x(Qe)||o.is(Qe,"figure.image")),dt=Qe=>lr(Qe)||o.hasClass(Qe,"mce-preview-object"),Bt=(Qe,_t)=>{if(Xa(Qe)){const Qt=Qe.touches[0];return Ue(Qe.target)&&!ET(Qt.clientX,Qt.clientY,_t)}else return Ue(Qe.target)&&!ET(Qe.clientX,Qe.clientY,_t)},Fe=Qe=>{const _t=Qe.target;Bt(Qe,n.selection.getRng())&&!Qe.isDefaultPrevented()&&n.selection.select(_t)},Me=Qe=>o.hasClass(Qe,"mce-preview-object")&&Ee(Qe.firstElementChild)?[Qe,Qe.firstElementChild]:o.is(Qe,"figure.image")?[Qe.querySelector("img")]:[Qe],Ge=Qe=>{const _t=Y0(n);return!_t||n.mode.isReadOnly()||Qe.getAttribute("data-mce-resize")==="false"||Qe===n.getBody()?!1:o.hasClass(Qe,"mce-preview-object")&&Ee(Qe.firstElementChild)?za(ie.fromDom(Qe.firstElementChild),_t):za(ie.fromDom(Qe),_t)},kt=(Qe,_t)=>{if(dt(_t))return Qe.create("img",{src:zt.transparentSrc});if(oa(_t)){const _o=$s(k.name,"n")?Ir:Si,jn=_t.cloneNode(!0);return _o(Qe.select("tr",jn)).each(Ia=>{const yu=Qe.select("td,th",Ia);Qe.setStyle(Ia,"height",null),ye(yu,Sf=>Qe.setStyle(Sf,"height",null))}),jn}else return _t.cloneNode(!0)},Kt=(Qe,_t,Qt)=>{if(Ee(Qt)){const _o=Me(Qe);ye(_o,jn=>{jn.style[_t]||!n.schema.isValid(jn.nodeName.toLowerCase(),_t)?o.setStyle(jn,_t,Qt):o.setAttrib(jn,_t,""+Qt)})}},Nn=(Qe,_t,Qt)=>{Kt(Qe,"width",_t),Kt(Qe,"height",Qt)},Fn=Qe=>{let _t,Qt,_o,jn,Ia;_t=Qe.screenX-I,Qt=Qe.screenY-F,ce=_t*k[2]+W,pe=Qt*k[3]+X,ce=ce<5?5:ce,pe=pe<5?5:pe,(Ue(h)||dt(h))&&RE(n)!==!1?_o=!ze.modifierPressed(Qe):_o=ze.modifierPressed(Qe),_o&&(go(_t)>go(Qt)?(pe=Ut(ce*G),ce=Ut(pe/G)):(ce=Ut(pe/G),pe=Ut(ce*G))),Nn(v,ce,pe),jn=k.startPos.x+_t,Ia=k.startPos.y+Qt,jn=jn>0?jn:0,Ia=Ia>0?Ia:0,o.setStyles(w,{left:jn,top:Ia,display:"block"}),w.innerHTML=ce+" &times; "+pe,_t=u.scrollWidth-be,Qt=u.scrollHeight-Te,_t+Qt!==0&&o.setStyles(w,{left:jn-_t,top:Ia-Qt}),ee||(pE(n,h,W,X,"corner-"+k.name),ee=!0)},lo=()=>{const Qe=ee;ee=!1,Qe&&(Kt(h,"width",ce),Kt(h,"height",pe)),o.unbind(r,"mousemove",Fn),o.unbind(r,"mouseup",lo),i!==r&&(o.unbind(i,"mousemove",Fn),o.unbind(i,"mouseup",lo)),o.remove(v),o.remove(w),o.remove(P),ko(h),Qe&&(bE(n,h,ce,pe,"corner-"+k.name),o.setAttrib(h,"style",o.getAttrib(h,"style"))),n.nodeChanged()},ko=Qe=>{Xt();const _t=o.getPos(Qe,u),Qt=_t.x,_o=_t.y,jn=Qe.getBoundingClientRect(),Ia=jn.width||jn.right-jn.left,yu=jn.height||jn.bottom-jn.top;h!==Qe&&(Qs(),h=Qe,ce=pe=0);const Sf=n.dispatch("ObjectSelected",{target:Qe});Ge(Qe)&&!Sf.isDefaultPrevented()?Tt(Lo,(oc,xd)=>{const Pl=sc=>{const Cu=Me(h)[0];I=sc.screenX,F=sc.screenY,W=Cu.clientWidth,X=Cu.clientHeight,G=X/W,k=oc,k.name=xd,k.startPos={x:Ia*oc[0]+Qt,y:yu*oc[1]+_o},be=u.scrollWidth,Te=u.scrollHeight,P=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(P,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),v=kt(o,h),o.addClass(v,"mce-clonedresizable"),o.setAttrib(v,"data-mce-bogus","all"),v.contentEditable="false",o.setStyles(v,{left:Qt,top:_o,margin:0}),Nn(v,Ia,yu),v.removeAttribute(Dt),u.appendChild(v),o.bind(r,"mousemove",Fn),o.bind(r,"mouseup",lo),i!==r&&(o.bind(i,"mousemove",Fn),o.bind(i,"mouseup",lo)),w=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},W+" &times; "+X)};let vi=o.get("mceResizeHandle"+xd);vi&&o.remove(vi),vi=o.add(u,"div",{id:"mceResizeHandle"+xd,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+xd+"-resize; margin:0; padding:0"}),o.bind(vi,"mousedown",sc=>{sc.stopImmediatePropagation(),sc.preventDefault(),Pl(sc)}),oc.elm=vi,o.setStyles(vi,{left:Ia*oc[0]+Qt-vi.offsetWidth/2,top:yu*oc[1]+_o-vi.offsetHeight/2})}):Qs(!1)},Js=c1(ko,0),Qs=(Qe=!0)=>{Js.cancel(),Xt(),h&&Qe&&h.removeAttribute(Dt),Tt(Lo,(_t,Qt)=>{const _o=o.get("mceResizeHandle"+Qt);_o&&(o.unbind(_o),o.remove(_o))})},wa=(Qe,_t)=>o.isChildOf(Qe,_t),yt=Qe=>{if(ee||n.removed||n.composing)return;const _t=Qe.type==="mousedown"?Qe.target:e.getNode(),Qt=Wt(ie.fromDom(_t),ho).map(jn=>jn.dom).filter(jn=>o.isEditable(jn.parentElement)||jn.nodeName==="IMG"&&o.isEditable(jn)).getOrUndefined(),_o=Ee(Qt)?o.getAttrib(Qt,Dt,"1"):"1";if(ye(o.select(`img[${Dt}],hr[${Dt}]`),jn=>{jn.removeAttribute(Dt)}),Ee(Qt)&&wa(Qt,u)&&ut(n)){co();const jn=e.getStart(!0);if(wa(jn,Qt)&&wa(e.getEnd(!0),Qt)){o.setAttrib(Qt,Dt,_o),Js.throttle(Qt);return}}Qs()},Xt=()=>{Tt(Lo,Qe=>{Qe.elm&&(o.unbind(Qe.elm),delete Qe.elm)})},co=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{co(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",yt),n.on("keyup compositionend",Qe=>{h&&h.nodeName==="TABLE"&&yt(Qe)}),n.on("hide blur",Qs),n.on("contextmenu longpress",Fe,!0)}),n.on("remove",Xt),{isResizable:Ge,showResizeRect:ko,hideResizeRect:Qs,updateResizeRect:yt,destroy:()=>{Js.cancel(),h=v=P=null}}},El=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},Zn=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Co=(e,n,o)=>{const r=e.document.createRange();return El(r,n),Zn(r,o),r},va=(e,n,o,r,i)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,i),u},Mr=ur.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Gc=(e,n,o)=>n(ie.fromDom(o.startContainer),o.startOffset,ie.fromDom(o.endContainer),o.endOffset),ya=(e,n)=>n.match({domRange:o=>({ltr:St(o),rtl:V.none}),relative:(o,r)=>({ltr:ka(()=>Co(e,o,r)),rtl:ka(()=>V.some(Co(e,r,o)))}),exact:(o,r,i,u)=>({ltr:ka(()=>va(e,o,r,i,u)),rtl:ka(()=>V.some(va(e,i,u,o,r)))})}),Tl=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(i=>i.collapsed===!1).map(i=>Mr.rtl(ie.fromDom(i.endContainer),i.endOffset,ie.fromDom(i.startContainer),i.startOffset)).getOrThunk(()=>Gc(e,Mr.ltr,o)):Gc(e,Mr.ltr,o)},Ya=(e,n)=>{const o=ya(e,n);return Tl(e,o)};Mr.ltr,Mr.rtl;const rS=(e,n,o)=>{var r;return V.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(i=>{if(i.offsetNode===null)return V.none();const u=e.createRange();return u.setStart(i.offsetNode,i.offset),u.collapse(),V.some(u)})},J1=(e,n,o)=>{var r;return V.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},dd=(e,n,o)=>e.caretPositionFromPoint?rS(e,n,o):e.caretRangeFromPoint?J1(e,n,o):V.none(),Pr=(e,n,o)=>{const r=e.document;return dd(r,n,o).map(i=>kT.create(ie.fromDom(i.startContainer),i.startOffset,ie.fromDom(i.endContainer),i.endOffset))},hm=(e,n)=>{const o=Rn(e);return o==="input"?fm.after(e):yn(["br","img"],o)?n===0?fm.before(e):fm.after(e):fm.on(e,n)},x3=(e,n)=>{const o=e.fold(fm.before,hm,fm.after),r=n.fold(fm.before,hm,fm.after);return qg.relative(o,r)},aS=(e,n,o,r)=>{const i=hm(e,n),u=hm(o,r);return qg.relative(i,u)},E3=e=>e.match({domRange:n=>{const o=ie.fromDom(n.startContainer),r=ie.fromDom(n.endContainer);return aS(o,n.startOffset,r,n.endOffset)},relative:x3,exact:aS}),iS=(e,n)=>{const r=document.createDocumentFragment();return ye(e,i=>{r.appendChild(i.dom)}),ie.fromDom(r)},cS=e=>{const n=qg.getWin(e).dom,o=(i,u,h,v)=>va(n,i,u,h,v),r=E3(e);return Ya(n,r).match({ltr:o,rtl:o})},PT=(e,n,o)=>Pr(e,n,o),Q1=(e,n,o)=>{const r=qd(ie.fromDom(o));return PT(r.dom,e,n).map(i=>{const u=o.createRange();return u.setStart(i.start.dom,i.soffset),u.setEnd(i.finish.dom,i.foffset),u}).getOrUndefined()},T3=(e,n)=>Ee(e)&&Ee(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,zN=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},NT=(e,n,o)=>zN(e,n,o)!==null,k3=(e,n,o)=>NT(e,n,r=>r.nodeName===o),_3=(e,n)=>qa(e)&&!NT(e,n,xc),A3=(e,n,o)=>{const r=n.parentNode;if(r){const i=new cr(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=i[o?"prev":"next"]();)if(Go(u))return!0}return!1},UN=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},WN=(e,n)=>{let o=n;for(;o&&o!==e;){if(ls(o))return!0;o=o.parentNode}return!1},Rv=(e,n,o,r,i)=>{const u=e.getRoot(),h=e.schema.getNonEmptyElements(),v=i.parentNode;let w,k;if(!v)return V.none();const P=e.getParent(v,e.isBlock)||u;if(r&&Go(i)&&n&&e.isEmpty(P))return V.some(Le(v,e.nodeIndex(i)));const I=new cr(i,P);for(;k=I[r?"prev":"next"]();){if(e.getContentEditableParent(k)==="false"||_3(k,u))return V.none();if(We(k)&&k.data.length>0)return k3(k,u,"A")?V.none():V.some(Le(k,r?k.data.length:0));if(e.isBlock(k)||h[k.nodeName.toLowerCase()])return V.none();w=k}return Kd(w)?V.none():o&&w?V.some(Le(w,0)):V.none()},ZN=(e,n,o,r)=>{const i=e.getRoot();let u,h=!1,v=o?r.startContainer:r.endContainer,w=o?r.startOffset:r.endOffset;const k=qt(v)&&w===v.childNodes.length,P=e.schema.getNonEmptyElements();let I=o;if(qa(v))return V.none();if(qt(v)&&w>v.childNodes.length-1&&(I=!1),Yp(v)&&(v=i,w=0),v===i){if(I&&(u=v.childNodes[w>0?w-1:0],u&&(qa(u)||P[u.nodeName]||oa(u))))return V.none();if(v.hasChildNodes()){if(w=Math.min(!I&&w>0?w-1:w,v.childNodes.length-1),v=v.childNodes[w],w=We(v)&&k?v.data.length:0,!n&&v===i.lastChild&&oa(v)||WN(i,v)||qa(v)||Za(v))return V.none();if(v.hasChildNodes()&&!oa(v)){u=v;const F=new cr(v,i);do{if(ls(u)||qa(u)){h=!1;break}if(We(u)&&u.data.length>0){w=I?0:u.data.length,v=u,h=!0;break}if(P[u.nodeName.toLowerCase()]&&!ml(u)){w=e.nodeIndex(u),v=u.parentNode,I||w++,h=!0;break}}while(u=I?F.next():F.prev())}}}return n&&(We(v)&&w===0&&Rv(e,k,n,!0,v).each(F=>{v=F.container(),w=F.offset(),h=!0}),qt(v)&&(u=v.childNodes[w],u||(u=v.childNodes[w-1]),u&&Go(u)&&!UN(u,"A")&&!A3(e,u,!1)&&!A3(e,u,!0)&&Rv(e,k,n,!0,u).each(F=>{v=F.container(),w=F.offset(),h=!0}))),I&&!n&&We(v)&&w===v.data.length&&Rv(e,k,n,!1,v).each(F=>{v=F.container(),w=F.offset(),h=!0}),h&&v?V.some(Le(v,w)):V.none()},lS=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),i=Le.fromRangeStart(n);return ZN(e,o,!0,r).each(u=>{(!o||!Le.isAbove(i,u))&&r.setStart(u.container(),u.offset())}),o||ZN(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),T3(n,r)?V.none():V.some(r)},BT=(e,n)=>e.splitText(n),uS=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,i=e.endOffset;if(n===r&&We(n)){if(o>0&&o<n.data.length)if(r=BT(n,o),n=r.previousSibling,i>o){i=i-o;const u=BT(r,i).previousSibling;n=r=u,i=u.data.length,o=0}else i=0}else if(We(n)&&o>0&&o<n.data.length&&(n=BT(n,o),o=0),We(r)&&i>0&&i<r.data.length){const u=BT(r,i).previousSibling;r=u,i=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:i}},Gg=e=>({walk:(u,h)=>G1(e,u,h),split:uS,expand:(u,h={type:"word"})=>{if(h.type==="word"){const v=mm(e,u,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),w=e.createRng();return w.setStart(v.startContainer,v.startOffset),w.setEnd(v.endContainer,v.endOffset),w}return u},normalize:u=>lS(e,u).fold(qe,h=>(u.setStart(h.startContainer,h.startOffset),u.setEnd(h.endContainer,h.endOffset),!0))});Gg.compareRanges=T3,Gg.getCaretRangeFromPoint=Q1,Gg.getSelectedNode=y1,Gg.getNode=nd;const qN=((e,n)=>{const o=(v,w)=>{if(!xo(w)&&!w.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+w);const k=v.dom;Hu(k)&&(k.style[e]=w+"px")},r=v=>{const w=n(v);if(w<=0||w===null){const k=dc(v,e);return parseFloat(k)||0}return w},i=r,u=(v,w)=>as(w,(k,P)=>{const I=dc(v,P),F=I===void 0?0:parseInt(I,10);return isNaN(F)?k:k+F},0);return{set:o,get:r,getOuter:i,aggregate:u,max:(v,w,k)=>{const P=u(v,k);return w>P?w-P:0}}})("height",e=>{const n=e.dom;return tu(e)?n.getBoundingClientRect().height:n.offsetHeight}),jN=e=>qN.get(e),GN=(e,n)=>e.view(n).fold(St([]),r=>{const i=e.owner(r),u=GN(e,i);return[r].concat(u)}),OH=(e,n)=>{const o=n.owner(e);return GN(n,o)};var RH=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?V.none():V.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(ie.fromDom)},owner:e=>eu(e)});const DH=e=>{const n=TT(),o=Zt(n),r=OH(e,RH),i=pn(e),u=Bc(r,(h,v)=>{const w=pn(v);return{left:h.left+w.left,top:h.top+w.top}},{left:0,top:0});return me(u.left+i.left+o.left,u.top+i.top+o.top)},O3=e=>Rn(e)==="textarea",MH=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),LT=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},KN=(e,n)=>{const o=Ur(e);if(o.length===0||O3(e))return{element:e,offset:n};if(n<o.length&&!O3(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return O3(r)?{element:e,offset:n}:Rn(r)==="img"?{element:r,offset:1}:kr(r)?{element:r,offset:h1(r).length}:{element:r,offset:Ur(r).length}}},XN=(e,n)=>{const o=Dn(e),r=jN(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},YN=(e,n)=>{const o=KN(e,n),r=ie.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Is+"</span>");return Us(o.element,r),XN(r,()=>ns(r))},JN=e=>XN(ie.fromDom(e),Ft),QN=(e,n,o,r)=>{NH(e,(i,u)=>PH(e,n,o,r),o)},e5=(e,n,o,r,i)=>{const u={elm:r.element.dom,alignToTop:i};if(MH(e,u))return;const h=Zt(n).top;o(e,n,h,r,i),LT(e,u)},PH=(e,n,o,r)=>{const i=ie.fromDom(e.getBody()),u=ie.fromDom(e.getDoc());Pn(i);const h=YN(ie.fromDom(o.startContainer),o.startOffset);e5(e,u,n,h,r),h.cleanup()},t5=(e,n,o,r)=>{const i=ie.fromDom(e.getDoc());e5(e,i,o,JN(n),r)},NH=(e,n,o)=>{const r=o.startContainer,i=o.startOffset,u=o.endContainer,h=o.endOffset;n(ie.fromDom(r),ie.fromDom(u));const v=e.dom.createRng();v.setStart(r,i),v.setEnd(u,h),e.selection.setRng(o)},IT=(e,n,o,r,i)=>{const u=n.pos,h=30;if(r)Ho(u.left,Math.max(0,u.top-h),i);else{const v=u.top-o+n.height+h;Ho(-e.getBody().getBoundingClientRect().left,v,i)}},R3=(e,n,o,r,i,u)=>{const h=r+o,v=i.pos.top,w=i.bottom,k=w-v>=r;v<o?IT(e,i,r,u!==!1,n):v>h?IT(e,i,r,k?u!==!1:u===!0,n):w>h&&!k&&IT(e,i,r,u===!0,n)},dS=(e,n,o,r,i)=>{const u=qd(n).dom.innerHeight;R3(e,n,o,u,r,i)},n5=(e,n,o,r,i)=>{const u=qd(n).dom.innerHeight;R3(e,n,o,u,r,i);const h=DH(r.element),v=Jy(window);h.top<v.y?vs(r.element,i!==!1):h.top>v.bottom&&vs(r.element,i===!0)},BH=(e,n,o)=>QN(e,dS,n,o),D3=(e,n,o)=>t5(e,n,dS,o),LH=(e,n,o)=>QN(e,n5,n,o),o5=(e,n,o)=>t5(e,n,n5,o),s5=(e,n,o)=>{(e.inline?D3:o5)(e,n,o)},Dv=(e,n,o)=>{(e.inline?BH:LH)(e,n,o)},r5=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),a5=(e,n,o,r,i)=>{const u=o?n.startContainer:n.endContainer,h=o?n.startOffset:n.endOffset;return V.from(u).map(ie.fromDom).map(v=>!r||!n.collapsed?$u(v,i(v,h)).getOr(v):v).bind(v=>es(v)?V.some(v):ai(v).filter(es)).map(v=>v.dom).getOr(e)},i5=(e,n,o=!1)=>a5(e,n,!0,o,(r,i)=>Math.min(Gd(r),i)),c5=(e,n,o=!1)=>a5(e,n,!1,o,(r,i)=>i>0?i-1:i),mS=(e,n)=>{const o=e;for(;e&&We(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},l5=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const i=n.startOffset,u=n.endOffset;let h=n.commonAncestorContainer;n.collapsed||(o===r&&u-i<2&&o.hasChildNodes()&&(h=o.childNodes[i]),We(o)&&We(r)&&(o.length===i?o=mS(o.nextSibling,!0):o=o.parentNode,u===0?r=mS(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(h=o)));const v=We(h)?h.parentNode:h;return zu(v)?v:e},u5=(e,n,o,r)=>{const i=[],u=e.getRoot(),h=e.getParent(o||i5(u,n,n.collapsed),e.isBlock),v=e.getParent(r||c5(u,n,n.collapsed),e.isBlock);if(h&&h!==u&&i.push(h),h&&v&&h!==v){let w;const k=new cr(h,u);for(;(w=k.next())&&w!==v;)e.isBlock(w)&&i.push(w)}return v&&h!==v&&v!==u&&i.push(v),i},d5=(e,n,o)=>V.from(n).bind(r=>V.from(r.parentNode).map(i=>{const u=e.nodeIndex(r),h=e.createRng();return h.setStart(i,u),h.setEnd(i,u+1),o&&(LC(e,h,r,!0),LC(e,h,r,!1)),h})),FT=(e,n)=>Cn(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),IH={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},$T=(e,n,o)=>{const r=o?"lastChild":"firstChild",i=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[i];if(u)return u;for(let h=e.parent;h&&h!==n;h=h.parent)if(u=h[i],u)return u}},FH=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Vu(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},m5=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class tc{static create(n,o){const r=new tc(n,IH[n]||1);return o&&Tt(o,(i,u)=>{r.attr(u,i)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!Y(n))return Ee(n)&&Tt(n,(u,h)=>{r.attr(h,u)}),r;const i=r.attributes;if(i){if(o!==void 0){if(o===null){if(n in i.map){delete i.map[n];let u=i.length;for(;u--;)if(i[u].name===n)return i.splice(u,1),r}return r}if(n in i.map){let u=i.length;for(;u--;)if(i[u].name===n){i[u].value=o;break}}else i.push({name:n,value:o});return i.map[n]=o,r}return i.map[n]}}clone(){const n=this,o=new tc(n.name,n.type),r=n.attributes;if(r){const i=[];i.map={};for(let u=0,h=r.length;u<h;u++){const v=r[u];v.name!=="id"&&(i[i.length]={name:v.name,value:v.value},i.map[v.name]=v.value)}o.attributes=i}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,i=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):i&&(i.next=r),o.lastChild===n?(o.lastChild=i,i&&(i.next=null)):r&&(r.prev=i),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const i=o.parent||this;return r?(o===i.firstChild?i.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===i.lastChild?i.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=i,n}getAll(n){const o=this,r=[];for(let i=o.firstChild;i;i=$T(i,o))i.name===n&&r.push(i);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let i=n.firstChild;i;i=$T(i,n))o.push(i);let r=o.length;for(;r--;){const i=o[r];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var i;const u=this;let h=u.firstChild;if(m5(u))return!1;if(h)do{if(h.type===1){if(h.attr("data-mce-bogus"))continue;if(n[h.name]||m5(h))return!1}if(h.type===8||h.type===3&&!FH(h)||h.type===3&&h.parent&&o[h.parent.name]&&Vu((i=h.value)!==null&&i!==void 0?i:"")||r&&r(h))return!1}while(h=$T(h,u));return!0}walk(n){return $T(this,null,n)}}const $H=Xe.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),f5=e=>Y(e.nodeValue)&&e.nodeValue.includes(Is),h5=e=>`${e.length===0?"":`${Cn(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,HH=(e,n)=>n.querySelectorAll(h5(e)),g5=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>f5(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),p5=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(f5(n)){const o=n.parentNode;return o&&un($H,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),VH=e=>g5(e).nextNode()!==null,HT=e=>p5(e).nextNode()!==null,b5=(e,n)=>n.querySelector(h5(e))!==null,v5=(e,n)=>{ye(HH(e,n),o=>{const r=ie.fromDom(o);Oa(r,"data-mce-bogus")==="all"?ns(r):ye(e,i=>{$d(r,i)&&cs(r,i)})})},y5=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},zH=R(y5,g5),UH=R(y5,p5),C5=(e,n)=>{const o=[{condition:je(b5,n),action:je(v5,n)},{condition:VH,action:zH},{condition:HT,action:UH}];let r=e,i=!1;return ye(o,({condition:u,action:h})=>{u(r)&&(i||(r=e.cloneNode(!0),i=!0),h(r))}),r},S5=e=>{const n=Wa(e,"[data-mce-bogus]");ye(n,o=>{Oa(o,"data-mce-bogus")==="all"?ns(o):js(o)?(Us(o,ie.fromText(jp)),ns(o)):su(o)})},w5=e=>{const n=Wa(e,"input");ye(n,o=>{cs(o,"name")})},x5=(e,n)=>{const o=Rr(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},WH=(e,n)=>{const o=e.getDoc(),r=ll(ie.fromDom(e.getBody())),i=ie.fromTag("div",o);zr(i,"data-mce-bogus","all"),ou(i,{position:"fixed",left:"-9999999px",top:"0"}),jf(i,n.innerHTML),S5(i),w5(i);const u=Qb(r);ts(u,i);const h=Qi(i.dom.innerText);return ns(i),h},E5=(e,n,o)=>{let r;return n.format==="raw"?r=Xe.trim(Qi(C5(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=WH(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=x5(e,e.serializer.serialize(o,n)),n.format!=="text"&&!qm(ie.fromDom(o))&&Y(r)?Xe.trim(r):r},T5=(e,n)=>V.from(e.getBody()).fold(St(n.format==="tree"?new tc("body",11):""),o=>E5(e,n,o)),k5=Xe.makeMap,_5=e=>{const n=[];e=e||{};const o=e.indent,r=k5(e.indent_before||""),i=k5(e.indent_after||""),u=Yf.getEncodeFunc(e.entity_encoding||"raw",e.entities),h=e.element_format!=="xhtml";return{start:(v,w,k)=>{if(o&&r[v]&&n.length>0){const P=n[n.length-1];P.length>0&&P!==`
`&&n.push(`
`)}if(n.push("<",v),w)for(let P=0,I=w.length;P<I;P++){const F=w[P];n.push(" ",F.name,'="',u(F.value,!0),'"')}if(!k||h?n[n.length]=">":n[n.length]=" />",k&&o&&i[v]&&n.length>0){const P=n[n.length-1];P.length>0&&P!==`
`&&n.push(`
`)}},end:v=>{let w;n.push("</",v,">"),o&&i[v]&&n.length>0&&(w=n[n.length-1],w.length>0&&w!==`
`&&n.push(`
`))},text:(v,w)=>{v.length>0&&(n[n.length]=w?v:u(v))},cdata:v=>{n.push("<![CDATA[",v,"]]>")},comment:v=>{n.push("<!--",v,"-->")},pi:(v,w)=>{w?n.push("<?",v," ",u(w),"?>"):n.push("<?",v,"?>"),o&&n.push(`
`)},doctype:v=>{n.push("<!DOCTYPE",v,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Kg=(e={},n=Jd())=>{const o=_5(e);return e.validate="validate"in e?e.validate:!0,{serialize:i=>{const u=e.validate,h={3:w=>{var k;o.text((k=w.value)!==null&&k!==void 0?k:"",w.raw)},8:w=>{var k;o.comment((k=w.value)!==null&&k!==void 0?k:"")},7:w=>{o.pi(w.name,w.value)},10:w=>{var k;o.doctype((k=w.value)!==null&&k!==void 0?k:"")},4:w=>{var k;o.cdata((k=w.value)!==null&&k!==void 0?k:"")},11:w=>{let k=w;if(k=k.firstChild)do v(k);while(k=k.next)}};o.reset();const v=w=>{var k;const P=h[w.type];if(P)P(w);else{const I=w.name,F=I in n.getVoidElements();let W=w.attributes;if(u&&W&&W.length>1){const X=[];X.map={};const G=n.getElementRule(w.name);if(G){for(let ee=0,ce=G.attributesOrder.length;ee<ce;ee++){const pe=G.attributesOrder[ee];if(pe in W.map){const be=W.map[pe];X.map[pe]=be,X.push({name:pe,value:be})}}for(let ee=0,ce=W.length;ee<ce;ee++){const pe=W[ee].name;if(!(pe in X.map)){const be=W.map[pe];X.map[pe]=be,X.push({name:pe,value:be})}}W=X}}if(o.start(I,W,F),Fm(I))Y(w.value)&&o.text(w.value,!0),o.end(I);else if(!F){let X=w.firstChild;if(X){(I==="pre"||I==="textarea")&&X.type===3&&((k=X.value)===null||k===void 0?void 0:k[0])===`
`&&o.text(`
`,!0);do v(X);while(X=X.next)}o.end(I)}}};return i.type===1&&!e.inner?v(i):i.type===3?h[3](i):h[11](i),o.getContent()}}},A5=new Set;ye(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{A5.add(n)});const O5=new Set;ye(["background-color"],n=>{O5.add(n)});const R5=["font","text-decoration","text-emphasis"],ZH=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),Mv=(e,n)=>fr(ZH(e,n)),qH=e=>A5.has(e),jH=e=>O5.has(e),D5=(e,n)=>bo(Mv(e,n),o=>qH(o)),GH=(e,n)=>D5(e,n)&&bo(Mv(e,n),o=>jH(o)),KH=e=>an(e,n=>bo(R5,o=>$s(n,o))),XH=(e,n,o)=>{const r=Mv(e,n),i=Mv(e,o),u=h=>{var v,w;const k=(v=e.getStyle(n,h))!==null&&v!==void 0?v:"",P=(w=e.getStyle(o,h))!==null&&w!==void 0?w:"";return Fo(k)&&Fo(P)&&k!==P};return bo(r,h=>{const v=w=>bo(w,k=>k===h);if(!v(i)&&v(R5)){const w=KH(i);return bo(w,u)}else return u(h)})},M5=(e,n,o)=>V.from(o.container()).filter(We).exists(r=>{const i=e?0:-1;return n(r.data.charAt(o.offset()+i))}),M3=je(M5,!0,cd),P3=je(M5,!1,cd),YH=e=>{const n=e.container();return We(n)&&(n.data.length===0||O0(n.data)&&mu.isBookmarkNode(n.parentNode))},Xg=(e,n)=>o=>id(e?0:-1,o).filter(n).isSome(),jt=e=>_x(e)&&dc(ie.fromDom(e),"display")==="block",N3=e=>ls(e)&&!l0(e),P5=Xg(!0,jt),JH=Xg(!1,jt),eb=Xg(!0,lr),fS=Xg(!1,lr),N5=Xg(!0,oa),B3=Xg(!1,oa),Yg=Xg(!0,N3),Jg=Xg(!1,N3),VT=e=>e.slice(0,-1),B5=(e,n,o)=>xs(n,e)?VT(Vf(e,r=>o(r)||oo(r,n))):[],QH=(e,n)=>B5(e,n,qe),Ah=(e,n)=>[e].concat(QH(e,n)),Sn=(e,n,o)=>du(e,n,o,YH),eV=e=>n=>e.isBlock(Rn(n)),wn=(e,n,o)=>ps(Ah(ie.fromDom(n.container()),e),eV(o)),L3=(e,n,o,r)=>Sn(e,n.dom,o).forall(i=>wn(n,o,r).fold(()=>!Cl(i,o,n.dom),u=>!Cl(i,o,n.dom)&&xs(u,ie.fromDom(i.container())))),tV=(e,n,o,r)=>wn(n,o,r).fold(()=>Sn(e,n.dom,o).forall(i=>!Cl(i,o,n.dom)),i=>Sn(e,i.dom,o).isNone()),L5=je(tV,!1),I5=je(tV,!0),yY=je(L3,!1),CY=je(L3,!0),nV=e=>cv(e).exists(js),zT=(e,n,o,r)=>{const i=an(Ah(ie.fromDom(o.container()),n),h=>r.isBlock(Rn(h))),u=Ir(i).getOr(n);return wc(e,u.dom,o).filter(nV)},gn=(e,n,o)=>cv(n).exists(js)||zT(!0,e,n,o).isSome(),UT=(e,n,o)=>e3(n).exists(js)||zT(!1,e,n,o).isSome(),F5=je(zT,!1),oV=je(zT,!0),Pv=e=>Le.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),I3=(e,n,o)=>{const r=an(Ah(ie.fromDom(n.container()),e),i=>o.isBlock(Rn(i)));return Ir(r).getOr(e)},$5=(e,n,o)=>Pv(n)?P3(n):P3(n)||ia(I3(e,n,o).dom,n).exists(P3),H5=(e,n,o)=>Pv(n)?M3(n):M3(n)||pa(I3(e,n,o).dom,n).exists(M3),sV=e=>yn(["pre","pre-wrap"],e),WT=e=>cv(e).bind(n=>bs(n,es)).exists(n=>sV(dc(n,"white-space"))),rV=(e,n)=>ia(e.dom,n).isNone(),SY=(e,n)=>pa(e.dom,n).isNone(),wY=(e,n,o)=>rV(e,n)||SY(e,n)||L5(e,n,o)||I5(e,n,o)||UT(e,n,o)||gn(e,n,o),aV=e=>Ee(e)&&ls(e)&&jE(e),V5=(e,n)=>o=>aV(new cr(o,e)[n]()),iV=(e,n)=>{const o=pa(e.dom,n).getOr(n),r=V5(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},cV=(e,n)=>{const o=ia(e.dom,n).getOr(n),r=V5(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},F3=(e,n,o)=>WT(n)?!1:wY(e,n,o)||$5(e,n,o)||H5(e,n,o),hS=(e,n,o)=>WT(n)?!1:L5(e,n,o)||yY(e,n,o)||UT(e,n,o)||$5(e,n,o)||cV(e,n),Mn=e=>{const n=e.container(),o=e.offset();return We(n)&&o<n.data.length?Le(n,o+1):e},Nv=(e,n,o)=>WT(n)?!1:I5(e,n,o)||CY(e,n,o)||gn(e,n,o)||H5(e,n,o)||iV(e,n),Bv=(e,n,o)=>hS(e,n,o)||Nv(e,Mn(n),o),$3=(e,n)=>Sh(e.charAt(n)),H3=(e,n)=>cd(e.charAt(n)),z5=e=>{const n=e.container();return We(n)&&Fr(n.data,br)},U5=e=>{const n=e.split("");return Cn(n,(o,r)=>Sh(o)&&r>0&&r<n.length-1&&Z1(n[r-1])&&Z1(n[r+1])?" ":o).join("")},V3=(e,n,o,r)=>{const i=n.data,u=Le(n,0);return!o&&$3(i,0)&&!Bv(e,u,r)?(n.data=" "+i.slice(1),!0):o&&H3(i,0)&&hS(e,u,r)?(n.data=br+i.slice(1),!0):!1},lV=e=>{const n=e.data,o=U5(n);return o!==n?(e.data=o,!0):!1},z3=(e,n,o,r)=>{const i=n.data,u=Le(n,i.length-1);return!o&&$3(i,i.length-1)&&!Bv(e,u,r)?(n.data=i.slice(0,-1)+" ",!0):o&&H3(i,i.length-1)&&Nv(e,u,r)?(n.data=i.slice(0,-1)+br,!0):!1},uV=(e,n,o)=>{const r=n.container();if(!We(r))return V.none();if(z5(n)){const i=V3(e,r,!1,o)||lV(r)||z3(e,r,!1,o);return Ei(i,n)}else if(Bv(e,n,o)){const i=V3(e,r,!0,o)||z3(e,r,!0,o);return Ei(i,n)}else return V.none()},dV=e=>{const n=ie.fromDom(e.getBody());e.selection.isCollapsed()&&uV(n,Le.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},W5=(e,n,o,r)=>{if(o===0)return;const i=ie.fromDom(e),u=ul(i,k=>r.isBlock(Rn(k))).getOr(i),h=e.data.slice(n,n+o),v=n+o>=e.data.length&&Nv(u,Le(e,e.data.length),r),w=n===0&&hS(u,Le(e,0),r);e.replaceData(n,o,kx(h,4,w,v))},ZT=(e,n,o)=>{const r=e.data.slice(n),i=r.length-Rf(r).length;W5(e,n,i,o)},U3=(e,n,o)=>{const r=e.data.slice(0,n),i=r.length-xi(r).length;W5(e,n-i,i,o)},W3=(e,n,o,r,i=!0)=>{const u=xi(e.data).length,h=i?e:n,v=i?n:e;return i?h.appendData(v.data):h.insertData(0,v.data),ns(ie.fromDom(v)),r&&ZT(h,u,o),h},mV=(e,n)=>{const o=e.container(),r=e.offset();return!Le.isTextPosition(e)&&o===n.parentNode&&r>Le.before(n).offset()},fV=(e,n)=>mV(n,e)?Le(n.container(),n.offset()-1):n,Z3=e=>We(e)?Le(e,0):Le.before(e),q3=e=>We(e)?Le(e,e.data.length):Le.after(e),Z5=e=>fi(e.previousSibling)?V.some(q3(e.previousSibling)):e.previousSibling?xl(e.previousSibling):V.none(),q5=e=>fi(e.nextSibling)?V.some(Z3(e.nextSibling)):e.nextSibling?Sr(e.nextSibling):V.none(),hV=(e,n)=>V.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>ia(e,Le.before(o))).orThunk(()=>pa(e,Le.after(n))),gV=(e,n)=>pa(e,Le.after(n)).orThunk(()=>ia(e,Le.before(n))),pV=(e,n)=>Z5(n).orThunk(()=>q5(n)).orThunk(()=>hV(e,n)),bV=(e,n)=>q5(n).orThunk(()=>Z5(n)).orThunk(()=>gV(e,n)),vV=(e,n,o)=>e?bV(n,o):pV(n,o),yV=(e,n,o)=>vV(e,n,o).map(je(fV,o)),j3=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},CV=e=>n=>n.dom===e,SV=(e,n)=>n&&un(e.schema.getBlockElements(),Rn(n)),Oh=(e,n,o)=>{if(Ws(e,n)){const r=ie.fromHtml('<br data-mce-bogus="1">');return o?ye(Ur(n),i=>{dm(i)||ns(i)}):dl(n),ts(n,r),V.some(Le.before(r.dom))}else return V.none()},wV=(e,n,o,r)=>{const i=Fu(e).filter(kr),u=zf(e).filter(kr);return ns(e),Un(i,u,n,(h,v,w)=>{const k=h.dom,P=v.dom,I=k.data.length;return W3(k,P,o,r),w.container()===P?Le(k,I):w}).orThunk(()=>(r&&(i.each(h=>U3(h.dom,h.dom.length,o)),u.each(h=>ZT(h.dom,0,o))),n))},j5=(e,n)=>un(e.schema.getTextInlineElements(),Rn(n)),tb=(e,n,o,r=!0,i=!1)=>{const u=yV(n,e.getBody(),o.dom),h=ul(o,je(SV,e),CV(e.getBody())),v=wV(o,u,e.schema,j5(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):h.bind(w=>Oh(e.schema,w,i)).fold(()=>{r&&j3(e,n,v)},w=>{r&&j3(e,n,V.some(w))})},xV=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,G5=e=>xV.test(e),Qg=(e,n)=>za(ie.fromDom(n),hi(e))&&!Hm(e.schema,n)&&e.dom.isEditable(n),G3=e=>{var n;return rs.DOM.getStyle(e,"direction",!0)==="rtl"||G5((n=e.textContent)!==null&&n!==void 0?n:"")},K5=(e,n,o)=>an(rs.DOM.getParents(o.container(),"*",n),e),jr=(e,n,o)=>{const r=K5(e,n,o);return V.from(r[r.length-1])},EV=(e,n,o)=>{const r=ad(n,e),i=ad(o,e);return Ee(r)&&r===i},TV=e=>b1(e)||B2(e),fu=(e,n)=>{const o=n.container(),r=n.offset();return e?vl(o)?We(o.nextSibling)?Le(o.nextSibling,0):Le.after(o):b1(n)?Le(o,r+1):n:vl(o)?We(o.previousSibling)?Le(o.previousSibling,o.previousSibling.data.length):Le.before(o):B2(n)?Le(o,r-1):n},X5=je(fu,!0),Y5=je(fu,!1),ep=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},kV=e=>{e.execCommand("delete")},qT=e=>ep(e,"Delete"),Cs=e=>ep(e,"ForwardDelete"),jT=e=>n=>Xl(ai(n),e,oo),gS=e=>P2(e)||Eg(e),GT=(e,n)=>xs(e,n)?bs(n,gS,jT(e)):V.none(),tp=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},kl=(e,n,o)=>Ns(Sr(o),xl(o),(r,i)=>{const u=fu(!0,r),h=fu(!1,i),v=fu(!1,n);return e?pa(o,v).exists(w=>w.isEqual(h)&&n.isEqual(u)):ia(o,v).exists(w=>w.isEqual(u)&&n.isEqual(h))}).getOr(!0),Lv=e=>(Jl(e)?Fu(e):Ra(e)).bind(Lv).orThunk(()=>V.some(e)),To=(e,n,o,r=!0)=>{var i;n.deleteContents();const u=Lv(o).getOr(o),h=ie.fromDom((i=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&i!==void 0?i:o.dom);if(h.dom===e.getBody()?tp(e,r):Ws(e.schema,h,{checkRootAsContent:!1})&&(jm(h),r&&e.selection.setCursorLocation(h.dom,0)),!oo(o,h)){const v=Xl(ai(h),o)?[]:jd(h);ye(v.concat(Ur(o)),w=>{!oo(w,h)&&!xs(w,h)&&Ws(e.schema,w)&&ns(w)})}},pS=e=>n=>oo(e,n),KT=e=>Wa(e,"td,th"),K3=(e,n)=>xh(ie.fromDom(e),n),XT=e=>Ns(e.startTable,e.endTable,(n,o)=>{const r=qp(n,u=>oo(u,o)),i=qp(o,u=>oo(u,n));return!r&&!i?e:{...e,startTable:r?V.none():e.startTable,endTable:i?V.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),X3=e=>XT(e),Y3=(e,n)=>{const o=K3(e.startContainer,n),r=K3(e.endContainer,n),i=o.isSome(),u=r.isSome(),h=Ns(o,r,oo).getOr(!1);return X3({startTable:o,endTable:r,isStartInTable:i,isEndInTable:u,isSameTable:h,isMultiTable:!h&&i&&u})},bS=(e,n)=>({start:e,end:n}),J3=(e,n,o)=>({rng:e,table:n,cells:o}),np=ur.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Iv=(e,n)=>Wt(ie.fromDom(e),"td,th",n),Q3=e=>!oo(e.start,e.end),eO=(e,n)=>xh(e.start,n).bind(o=>xh(e.end,n).bind(r=>Ei(oo(o,r),o))),J5=(e,n)=>!Q3(e)&&eO(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),Q5=(e,n)=>{const o=Iv(e.startContainer,n),r=Iv(e.endContainer,n);return Ns(o,r,bS)},eB=e=>n=>xh(n,e).bind(o=>Si(KT(o)).map(r=>bS(n,r))),Fv=e=>n=>xh(n,e).bind(o=>Ir(KT(o)).map(r=>bS(r,n))),YT=e=>n=>eO(n,e).map(o=>J3(n,o,KT(o))),JT=(e,n,o,r)=>{if(o.collapsed||!e.forall(Q3))return V.none();if(n.isSameTable){const i=e.bind(YT(r));return V.some({start:i,end:i})}else{const i=Iv(o.startContainer,r),u=Iv(o.endContainer,r),h=i.bind(eB(r)).bind(YT(r)),v=u.bind(Fv(r)).bind(YT(r));return V.some({start:h,end:v})}},tB=(e,n)=>Yr(e,o=>oo(o,n)),tO=e=>Ns(tB(e.cells,e.rng.start),tB(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),nB=(e,n,o)=>e.exists(r=>J5(r,o)&&BC(r.start,n)),nO=(e,n)=>{const{startTable:o,endTable:r}=n,i=e.cloneRange();return o.each(u=>i.setStartAfter(u.dom)),r.each(u=>i.setEndBefore(u.dom)),i},oB=(e,n,o,r)=>JT(e,n,o,r).bind(({start:i,end:u})=>i.or(u)).bind(i=>{const{isSameTable:u}=n,h=tO(i).getOr([]);if(u&&i.cells.length===h.length)return V.some(np.fullTable(i.table));if(h.length>0){if(u)return V.some(np.partialTable(h,V.none()));{const v=nO(o,n);return V.some(np.partialTable(h,V.some({...n,rng:v})))}}else return V.none()}),QT=(e,n,o,r)=>JT(e,n,o,r).bind(({start:i,end:u})=>{const h=i.bind(tO).getOr([]),v=u.bind(tO).getOr([]);if(h.length>0&&v.length>0){const w=nO(o,n);return V.some(np.multiTable(h,v,w))}else return V.none()}),sB=(e,n)=>{const o=pS(e),r=Q5(n,o),i=Y3(n,o);return nB(r,n,o)?r.map(u=>np.singleCellTable(n,u.start)):i.isMultiTable?QT(r,i,n,o):oB(r,i,n,o)},oO=e=>ye(e,n=>{cs(n,"contenteditable"),jm(n)}),rB=(e,n)=>V.from(e.dom.getParent(n,e.dom.isBlock)).map(ie.fromDom),aB=(e,n,o)=>{o.each(r=>{n?ns(r):(jm(r),e.selection.setCursorLocation(r.dom,0))})},ek=(e,n,o,r)=>{const i=o.cloneRange();r?(i.setStart(o.startContainer,o.startOffset),i.setEndAfter(n.dom.lastChild)):(i.setStartBefore(n.dom.firstChild),i.setEnd(o.endContainer,o.endOffset)),tk(e,i,n,!1).each(u=>u())},sO=e=>{const n=wh(e),o=ie.fromDom(e.selection.getNode());os(o.dom)&&Ws(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&bo(n,r=>oo(r,o))&&zr(o,"data-mce-selected","1")},rO=(e,n,o)=>V.some(()=>{const r=e.selection.getRng(),i=o.bind(({rng:u,isStartInTable:h})=>{const v=rB(e,h?u.endContainer:u.startContainer);u.deleteContents(),aB(e,h,v.filter(je(Ws,e.schema)));const w=h?n[0]:n[n.length-1];return ek(e,w,r,h),Ws(e.schema,w)?V.none():V.some(h?n.slice(1):n.slice(0,-1))}).getOr(n);oO(i),sO(e)}),iB=(e,n,o,r)=>V.some(()=>{const i=e.selection.getRng(),u=n[0],h=o[o.length-1];ek(e,u,i,!0),ek(e,h,i,!1);const v=Ws(e.schema,u)?n:n.slice(1),w=Ws(e.schema,h)?o:o.slice(0,-1);oO(v.concat(w)),r.deleteContents(),sO(e)}),tk=(e,n,o,r=!0)=>V.some(()=>{To(e,n,o,r)}),cB=(e,n)=>V.some(()=>tb(e,!1,n)),aO=(e,n,o)=>sB(n,o).bind(r=>r.fold(je(tk,e),je(cB,e),je(rO,e),je(iB,e))),lB=(e,n)=>vS(e,n),uB=(e,n,o,r)=>nk(n,r).fold(()=>aO(e,n,o),i=>lB(e,i)),dB=(e,n,o)=>{const r=ie.fromDom(e.getBody()),i=e.selection.getRng();return o.length!==0?rO(e,o,V.none()):uB(e,r,i,n)},iO=(e,n)=>ps(Ah(n,e),Ji),nk=(e,n)=>ps(Ah(n,e),Ql("caption")),mB=(e,n,o,r,i)=>of(o,e.getBody(),i).bind(u=>iO(n,ie.fromDom(u.getNode())).bind(h=>oo(h,r)?V.none():V.some(Ft))),vS=(e,n)=>V.some(()=>{jm(n),e.selection.setCursorLocation(n.dom,0)}),cO=(e,n,o,r)=>Sr(e.dom).bind(i=>xl(e.dom).map(u=>n?o.isEqual(i)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(i))).getOr(!0),ok=(e,n)=>vS(e,n),fB=(e,n,o)=>nk(e,ie.fromDom(o.getNode())).fold(()=>V.some(Ft),r=>Ei(!oo(r,n),Ft)),_V=(e,n,o,r,i)=>of(o,e.getBody(),i).fold(()=>V.some(Ft),u=>cO(r,o,i,u)?ok(e,r):fB(n,r,u)),hB=(e,n,o,r)=>{const i=Le.fromRangeStart(e.selection.getRng());return iO(o,r).bind(u=>Ws(e.schema,u,{checkRootAsContent:!1})?vS(e,u):mB(e,o,n,u,i))},sk=(e,n,o,r)=>{const i=Le.fromRangeStart(e.selection.getRng());return Ws(e.schema,r)?vS(e,r):_V(e,o,n,r,i)},rk=(e,n)=>e?N5(n):B3(n),yS=(e,n)=>{const o=Le.fromRangeStart(e.selection.getRng());return rk(n,o)||wc(n,e.getBody(),o).exists(r=>rk(n,r))},lO=(e,n,o)=>{const r=ie.fromDom(e.getBody());return nk(r,o).fold(()=>hB(e,n,r,o).orThunk(()=>Ei(yS(e,n),Ft)),i=>sk(e,n,r,i))},ak=(e,n)=>{const o=ie.fromDom(e.selection.getStart(!0)),r=wh(e);return e.selection.isCollapsed()&&r.length===0?lO(e,n,o):dB(e,o,r)},md=(e,n)=>{let o=n;for(;o&&o!==e;){if(li(o)||ls(o))return o;o=o.parentNode}return null},uO=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],dO=Xe.each,op=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,h)=>{if(u.nodeName!==h.nodeName||u.nodeType!==h.nodeType)return!1;const v=k=>{const P={};return dO(n.getAttribs(k),I=>{const F=I.nodeName.toLowerCase();F!=="style"&&!i(F)&&(P[F]=n.getAttrib(k,F))}),P},w=(k,P)=>{for(const I in k)if(un(k,I)){const F=P[I];if(rn(F)||k[I]!==F)return!1;delete P[I]}for(const I in P)if(un(P,I))return!1;return!0};return qt(u)&&qt(h)&&(!w(v(u),v(h))||!w(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(h,"style"))))?!1:!ec(u)&&!ec(h)},i=u=>bo(uO,h=>$s(u,h))||o.has(u);return{compare:r,isAttributeInternal:i}},Rh=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),gB=e=>e.name==="summary",AV=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},pB=(e,n,o,r)=>{const i=o.name;for(let u=0,h=e.length;u<h;u++){const v=e[u];if(v.name===i){const w=r.nodes[i];w?w.nodes.push(o):r.nodes[i]={filter:v,nodes:[o]}}}if(o.attributes)for(let u=0,h=n.length;u<h;u++){const v=n[u],w=v.name;if(w in o.attributes.map){const k=r.attributes[w];k?k.nodes.push(o):r.attributes[w]={filter:v,nodes:[o]}}}},bB=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&AV(o,i=>{pB(e,n,i,r)}),r},mO=(e,n)=>{const o=(r,i)=>{Tt(r,u=>{const h=Jr(u.nodes);ye(u.filter.callbacks,v=>{for(let w=h.length-1;w>=0;w--){const k=h[w];(!(i?k.attr(u.filter.name)!==void 0:k.name===u.filter.name)||ln(k.parent))&&h.splice(w,1)}h.length>0&&v(h,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},fO=(e,n,o,r={})=>{const i=bB(e,n,o);mO(i,r)},hO=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new tc("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new tc("#text",3)).value=br},sp=e=>{var n;return rp(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===br},rp=(e,n)=>{const o=e==null?void 0:e.firstChild;return Ee(o)&&o===e.lastChild&&o.name===n},xY=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},Nr=(e,n,o,r)=>r.isEmpty(n,o,i=>xY(e,i)),OV=(e,n)=>Ee(e)&&(n(e)||e.name==="br"),RV=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return V.from(n)},gm=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const i of r)o&&!n.isValidChild(o.name,i.name)&&gm(i,n,o);e.unwrap()}},io=(e,n,o,r=Ft)=>{const i=n.getTextBlockElements(),u=n.getNonEmptyElements(),h=n.getWhitespaceElements(),v=Xe.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),w=new Set,k=P=>P!==o&&!v[P.name];for(let P=0;P<e.length;P++){const I=e[P];let F,W,X;if(!I.parent||w.has(I))continue;if(i[I.name]&&I.parent.name==="li"){let ee=I.next;for(;ee&&i[ee.name];){ee.name="li",w.add(ee),I.parent.insert(ee,I.parent);ee=ee.next}I.unwrap();continue}const G=[I];for(F=I.parent;F&&!n.isValidChild(F.name,I.name)&&k(F);F=F.parent)G.push(F);if(F&&G.length>1)if(gO(n,I,F))gm(I,n);else{G.reverse(),W=G[0].clone(),r(W);let ee=W;for(let ce=0;ce<G.length-1;ce++){n.isValidChild(ee.name,G[ce].name)&&ce>0?(X=G[ce].clone(),r(X),ee.append(X)):X=ee;for(let pe=G[ce].firstChild;pe&&pe!==G[ce+1];){const be=pe.next;X.append(pe),pe=be}ee=X}Nr(n,u,h,W)?F.insert(I,G[0],!0):(F.insert(W,G[0],!0),F.insert(I,W)),F=G[0],(Nr(n,u,h,F)||rp(F,"br"))&&F.empty().remove()}else if(I.parent){if(I.name==="li"){let ee=I.prev;if(ee&&(ee.name==="ul"||ee.name==="ol")){ee.append(I);continue}if(ee=I.next,ee&&(ee.name==="ul"||ee.name==="ol")&&ee.firstChild){ee.insert(I,ee.firstChild,!0);continue}const ce=new tc("ul",1);r(ce),I.wrap(ce);continue}if(n.isValidChild(I.parent.name,"div")&&n.isValidChild("div",I.name)){const ee=new tc("div",1);r(ee),I.wrap(ee)}else gm(I,n)}}},EY=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},gO=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&EY(o,"a")?!0:gB(o)&&Rh(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,DV=(e,n,o,r)=>{const i=document.createRange();return i.setStart(e,n),i.setEnd(o,r),i},zo=e=>{const n=Le.fromRangeStart(e),o=Le.fromRangeEnd(e),r=e.commonAncestorContainer;return wc(!1,r,o).map(i=>!Cl(n,o,r)&&Cl(n,i,r)?DV(n.container(),n.offset(),i.container(),i.offset()):e).getOr(e)},ik=e=>e.collapsed?e:zo(e),CS=e=>Ee(e.firstChild)&&e.firstChild===e.lastChild,SS=e=>e.name==="br"||e.value===br,wS=(e,n)=>e.getBlockElements()[n.name]&&CS(n)&&SS(n.firstChild),xS=(e,n)=>{const o=e.getNonEmptyElements();return Ee(n)&&(n.isEmpty(o)||wS(e,n))},vB=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),xS(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},TY=e=>{var n,o;const r=e.firstChild,i=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),i&&i.id==="mce_marker"&&((o=i.parentNode)===null||o===void 0||o.removeChild(i)),e},kY=(e,n,o)=>{const r=n.serialize(o),i=e.createFragment(r);return TY(i)},_Y=e=>{var n;return an((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},AY=e=>e.data===br||Go(e),MV=e=>Ee(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&AY(e.firstChild),OY=e=>!e.firstChild||MV(e),PV=e=>e.length>0&&OY(e[e.length-1])?e.slice(0,-1):e,pO=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},RY=(e,n)=>!!pO(e,n),NV=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},fs=(e,n)=>{const o=Le.before(e),i=Sc(n).next(o);return i?i.toRange():null},bO=(e,n)=>{const o=Le.after(e),i=Sc(n).prev(o);return i?i.toRange():null},yB=(e,n,o,r)=>{const i=NV(e,r),u=e.parentNode;return u&&(u.insertBefore(i[0],e),Xe.each(n,h=>{u.insertBefore(h,e)}),u.insertBefore(i[1],e),u.removeChild(e)),bO(n[n.length-1],o)},BV=(e,n,o)=>{const r=e.parentNode;return r&&Xe.each(n,i=>{r.insertBefore(i,e)}),fs(e,o)},LV=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),bO(n[0],o)),IV=(e,n,o,r)=>{const i=kY(n,e,r),u=pO(n,o.startContainer),h=PV(_Y(i.firstChild)),v=1,w=2,k=n.getRoot(),P=I=>{const F=Le.fromRangeStart(o),W=Sc(n.getRoot()),X=I===v?W.prev(F):W.next(F),G=X==null?void 0:X.getNode();return G?pO(n,G)!==u:!0};return u?P(v)?BV(u,h,k):P(w)?LV(u,h,k,n):yB(u,h,k,o):null},Kc=["pre"],fd=(e,n,o,r)=>{var i;const u=n.firstChild,h=n.lastChild,v=h.attr("data-mce-type")==="bookmark"?h.prev:h,w=u===v,k=yn(Kc,u.name);if(w&&k){const P=u.attr("contenteditable")!=="false",I=((i=e.getParent(o,e.isBlock))===null||i===void 0?void 0:i.nodeName.toLowerCase())===u.name,F=V.from(md(r,o)).forall(li);return P&&I&&F}else return!1},ck=os,vO=(e,n,o)=>{if(Ee(o)){const r=e.getParent(n.endContainer,ck);return o===r&&BC(ie.fromDom(o),n)}else return!1},yO=(e,n)=>{if(e.isBlock(n)&&e.isEditable(n)){const o=n.childNodes;return o.length===1&&Go(o[0])||o.length===0}else return!1},lk=(e,n,o)=>{var r;o.getAttribute("data-mce-bogus")==="all"?(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o):yO(e.dom,o)?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})},FV=(e,n,o)=>{V.from(e.getParent(n,"td,th")).map(ie.fromDom).each(r=>N2(r,o))},CB=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const i=e.getBody(),u=op(e),h="*[data-mce-fragment]",v=r.select(h);Xe.each(v,w=>{const k=F=>Ee(o[F.nodeName.toLowerCase()]),P=F=>F.childNodes.length===1;if((F=>!(D5(r,F)||GH(r,F)))(w)&&k(w)&&P(w)){const F=Mv(r,w),W=(ce,pe)=>ks(ce,be=>yn(pe,be)),X=ce=>P(w)&&r.is(ce,h)&&k(ce)&&(ce.nodeName===w.nodeName&&W(F,Mv(r,ce))||X(ce.children[0])),G=ce=>Ee(ce)&&ce!==i&&(u.compare(w,ce)||G(ce.parentElement)),ee=ce=>Ee(ce)&&ce!==i&&r.is(ce,h)&&(XH(r,w,ce)||ee(ce.parentElement));(X(w.children[0])||G(w.parentElement)&&!ee(w.parentElement))&&r.remove(w,!0)}})}},ES=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},$V=e=>{Xe.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},uk=e=>!!e.getAttribute("data-mce-fragment"),CO=(e,n)=>Ee(n)&&!e.schema.getVoidElements()[n.nodeName],SB=(e,n)=>{var o,r,i;let u;const h=e.dom,v=e.selection;if(!n)return;v.scrollIntoView(n);const w=md(e.getBody(),n);if(w&&h.getContentEditable(w)==="false"){h.remove(n),v.select(w);return}let k=h.createRng();const P=n.previousSibling;if(We(P)){k.setStart(P,(r=(o=P.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const W=n.nextSibling;We(W)&&(P.appendData(W.data),(i=W.parentNode)===null||i===void 0||i.removeChild(W))}else k.setStartBefore(n),k.setEndBefore(n);const I=W=>{let X=Le.fromRangeStart(W);return X=Sc(e.getBody()).next(X),X==null?void 0:X.toRange()},F=h.getParent(n,h.isBlock);if(h.remove(n),F&&h.isEmpty(F)){const W=ck(F);dl(ie.fromDom(F)),k.setStart(F,0),k.setEnd(F,0),!W&&!uk(F)&&(u=I(k))?(k=u,h.remove(F)):h.add(F,h.create("br",W?{}:{"data-mce-bogus":"1"}))}v.setRng(k)},TS=e=>{const n=e.dom,o=ik(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,ck);vO(n,o,r)?tk(e,o,ie.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&We(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},HV=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return V.some(n);return V.none()},VV=(e,n,o)=>{var r;return bo(o.children(),Rh)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},pm=(e,n,o)=>{var r,i;const u=e.selection,h=e.dom,v=e.parser,w=o.merge,k=Kg({validate:!0},e.schema),P='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=Qi(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,P);let I=u.getRng();const F=I.startContainer,W=e.getBody();F===W&&u.isCollapsed()&&h.isBlock(W.firstChild)&&CO(e,W.firstChild)&&h.isEmpty(W.firstChild)&&(I=h.createRng(),I.setStart(W.firstChild,0),I.setEnd(W.firstChild,0),u.setRng(I)),u.isCollapsed()||TS(e);const X=u.getNode(),G={context:X.nodeName.toLowerCase(),data:o.data,insert:!0},ee=v.parse(n,G);if(o.paste===!0&&vB(e.schema,ee)&&RY(h,X))return I=IV(k,h,u.getRng(),ee),I&&u.setRng(I),n;o.paste===!0&&fd(h,ee,X,e.getBody())&&((r=ee.firstChild)===null||r===void 0||r.unwrap()),ES(ee);let ce=ee.lastChild;if(ce&&ce.attr("id")==="mce_marker"){const pe=ce;for(ce=ce.prev;ce&&ce.name!=="table";ce=ce.walk(!0))if(ce.type===3||!h.isBlock(ce.name)){ce.parent&&e.schema.isValidChild(ce.parent.name,"span")&&ce.parent.insert(pe,ce,ce.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(X),!G.invalid&&!VV(h,X,ee))n=k.serialize(ee),lk(e,n,X);else{e.selection.setContent(P);let pe=u.getNode(),be;const Te=e.getBody();for(Yp(pe)?pe=be=Te:be=pe;be&&be!==Te;)pe=be,be=be.parentNode;n=pe===Te?Te.innerHTML:h.getOuterHTML(pe);const Ue=v.parse(n),dt=HV(Ue),Bt=dt.bind(RV).getOr(Ue);dt.each(kt=>kt.replace(ee));const Fe=ee.children(),Me=(i=ee.parent)!==null&&i!==void 0?i:Ue;ee.unwrap();const Ge=an(Fe,kt=>gO(e.schema,kt,Me));io(Ge,e.schema,Bt),fO(v.getNodeFilters(),v.getAttributeFilters(),Ue),n=k.serialize(Ue),pe===Te?h.setHTML(Te,n):h.setOuterHTML(pe,n)}return CB(e,w),SB(e,h.get("mce_marker")),$V(e.getBody()),FV(h,u.getStart(),e.schema),Ma(e.schema,e.getBody(),u.getStart()),n},$i=e=>e instanceof tc,kS=e=>{it(e)&&Sr(e.getBody()).each(n=>{const o=n.getNode(),r=oa(o)?Sr(o).getOr(n):n;e.selection.setRng(r.toRange())})},nc=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&kS(e)},zV=(e,n,o,r)=>{if(o=Qi(o),o.length===0||/^\s+$/.test(o)){const i='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+i+"</li>");const u=Rr(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=i,o=e.dom.createHTML(u,Cc(e),o)):o||(o=i),nc(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Kg({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const i=qm(ie.fromDom(n))?o:Xe.trim(o);return nc(e,i,r.no_selection),{content:i,html:i}}},Xo=(e,n,o,r)=>{fO(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const i=Kg({validate:!1},e.schema).serialize(o),u=Qi(qm(ie.fromDom(n))?i:Xe.trim(i));return nc(e,u,r.no_selection),{content:o,html:u}},UV=(e,n,o)=>V.from(e.getBody()).map(r=>$i(n)?Xo(e,r,n,o):zV(e,r,n,o)).getOr({content:n,html:$i(o.content)?"":o.content}),ap=e=>le(e)?e:qe,_S=(e,n,o)=>{let r=e.dom;const i=ap(o);for(;r.parentNode;){r=r.parentNode;const u=ie.fromDom(r),h=n(u);if(h.isSome())return h;if(i(u))break}return V.none()},dk=(e,n,o)=>{const r=n(e),i=ap(o);return r.orThunk(()=>i(e)?V.none():_S(e,n,i))},AS=Ec,mk=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let i=0;i<r.length;i++){const u=r[i];if(qc(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},SO=(e,n,o,r,i)=>{const u=e.dom.getRoot();if(n===u)return!1;const h=e.dom.getParent(n,v=>mk(e,v,o)?!0:v.parentNode===u||!!bm(e,v,o,r,!0));return!!bm(e,h,o,r,i)},$v=(e,n,o)=>Dr(o)&&AS(n,o.inline)||ld(o)&&AS(n,o.block)?!0:qc(o)?qt(n)&&e.is(n,o.selector):!1,wB=(e,n,o,r,i,u)=>{const h=o[r],v=r==="attributes";if(le(o.onmatch))return o.onmatch(n,o,r);if(h){if(jh(h)){for(let w=0;w<h.length;w++)if(v?e.getAttrib(n,h[w]):Th(e,n,h[w]))return!0}else for(const w in h)if(un(h,w)){const k=v?e.getAttrib(n,w):Th(e,n,w),P=Gs(h[w],u),I=ln(k)||Os(k);if(I&&ln(P))continue;if(i&&I&&!o.exact||(!i||o.exact)&&!AS(k,vv(P,w)))return!1}}return!0},bm=(e,n,o,r,i)=>{const u=e.formatter.get(o),h=e.dom;if(u&&qt(n))for(let v=0;v<u.length;v++){const w=u[v];if($v(e.dom,n,w)&&wB(h,n,w,"attributes",i,r)&&wB(h,n,w,"styles",i,r)){const k=w.classes;if(k){for(let P=0;P<k.length;P++)if(!e.dom.hasClass(n,Gs(k[P],r)))return}return w}}},fk=(e,n,o,r,i)=>{if(r)return SO(e,r,n,o,i);if(r=e.selection.getNode(),SO(e,r,n,o,i))return!0;const u=e.selection.getStart();return!!(u!==r&&SO(e,u,n,o,i))},wO=(e,n,o)=>{const r=[],i={},u=e.selection.getStart();return e.dom.getParent(u,h=>{for(let v=0;v<n.length;v++){const w=n[v];!i[w]&&bm(e,h,w,o)&&(i[w]=!0,r.push(w))}},e.dom.getRoot()),r},xB=(e,n)=>{const o=i=>oo(i,ie.fromDom(e.getBody())),r=(i,u)=>bm(e,i.dom,u)?V.some(u):V.none();return V.from(e.selection.getStart(!0)).bind(i=>dk(ie.fromDom(i),u=>zl(n,h=>r(u,h)),o)).getOrNull()},hk=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const i=e.selection.getStart(),u=Cv(r,i);for(let h=o.length-1;h>=0;h--){const v=o[h];if(!qc(v))return!0;for(let w=u.length-1;w>=0;w--)if(r.is(u[w],v.selector))return!0}}return!1},WV=(e,n,o)=>as(o,(r,i)=>{const u=vT(e,i);return e.formatter.matchNode(n,i,{},u)?r.concat([i]):r},[]),OS=Is,ZV=(e,n)=>e.importNode(n,!0),EB=e=>{if(e){const n=new cr(e,e);for(let o=n.current();o;o=n.next())if(We(o))return o}return null},xO=e=>{const n=ie.fromTag("span");return ua(n,{id:fv,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&ts(n,ie.fromText(OS)),n},TB=e=>{const n=EB(e);return n&&n.data.charAt(0)===OS&&n.deleteData(0,1),n},EO=(e,n,o)=>{const r=e.dom,i=e.selection;if(ud(n))tb(e,!1,ie.fromDom(n),o,!0);else{const u=i.getRng(),h=r.getParent(n,r.isBlock),v=u.startContainer,w=u.startOffset,k=u.endContainer,P=u.endOffset,I=TB(n);r.remove(n,!0),v===I&&w>0&&u.setStart(I,w-1),k===I&&P>0&&u.setEnd(I,P-1),h&&r.isEmpty(h)&&jm(ie.fromDom(h)),i.setRng(u)}},TO=(e,n,o)=>{const r=e.dom,i=e.selection;if(n)EO(e,n,o);else if(n=Ch(e.getBody(),i.getStart()),!n)for(;n=r.get(fv);)EO(e,n,o)},kB=(e,n,o)=>{var r,i;const u=e.dom,h=u.getParent(o,je($C,e.schema));h&&u.isEmpty(h)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(iA(ie.fromDom(o)),u.isEmpty(o)?(i=o.parentNode)===null||i===void 0||i.replaceChild(n,o):u.insertAfter(n,o))},_B=(e,n)=>(e.appendChild(n),n),kO=(e,n)=>{var o;const r=Bc(e,(u,h)=>_B(u,h.cloneNode(!1)),n),i=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return _B(r,i.createTextNode(OS))},RS=(e,n,o,r,i,u)=>{const h=e.formatter,v=e.dom,w=an(fr(h.get()),I=>I!==r&&!Fr(I,"removeformat")),k=WV(e,o,w);if(an(k,I=>!c3(e,I,r)).length>0){const I=o.cloneNode(!1);return v.add(n,I),h.remove(r,i,I,u),v.remove(I),V.some(I)}else return V.none()},AB=e=>Wx(e,h1(e).replace(new RegExp(`${br}$`)," ")),OB=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&Fu(ie.fromDom(n)).each(r=>{kr(r)?AB(r):Wf(r,i=>kr(i)).each(i=>{kr(i)&&AB(i)})})};e.once("input",r=>{r.data&&!cd(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},RB=(e,n,o)=>{let r;const i=e.selection,u=e.formatter.get(n);if(!u)return;const h=i.getRng();let v=h.startOffset;const k=h.startContainer.nodeValue;r=Ch(e.getBody(),i.getStart());const P=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(k&&v>0&&v<k.length&&P.test(k.charAt(v))&&P.test(k.charAt(v-1))){const I=i.getBookmark();h.collapse(!0);let F=mm(e.dom,h,u);F=uS(F),e.formatter.apply(n,o,F),i.moveToBookmark(I)}else{let I=r?EB(r):null;(!r||(I==null?void 0:I.data)!==OS)&&(r=ZV(e.getDoc(),xO(!0).dom),I=r.firstChild,h.insertNode(r),v=1,OB(e,r)),e.formatter.apply(n,o,r),i.setCursorLocation(I,v)}},DB=(e,n,o,r)=>{const i=e.dom,u=e.selection;let h=!1;const v=e.formatter.get(n);if(!v)return;const w=u.getRng(),k=w.startContainer,P=w.startOffset;let I=k;We(k)&&(P!==k.data.length&&(h=!0),I=I.parentNode);const F=[];let W;for(;I;){if(bm(e,I,n,o,r)){W=I;break}I.nextSibling&&(h=!0),F.push(I),I=I.parentNode}if(W)if(h){const X=u.getBookmark();w.collapse(!0);let G=mm(i,w,v,{includeTrailingSpace:!0});G=uS(G),e.formatter.remove(n,o,G,r),u.moveToBookmark(X)}else{const X=Ch(e.getBody(),W),G=Ee(X)?i.getParents(W.parentNode,Ot,X):[],ee=xO(!1).dom;kB(e,ee,X??W);const ce=RS(e,ee,W,n,o,r),pe=kO([...F,...ce.toArray(),...G],ee);X&&EO(e,X,Ee(X)),u.setCursorLocation(pe,1),OB(e,ee),i.isEmpty(W)&&i.remove(W)}},qV=(e,n,o)=>{const r=e.selection,i=e.getBody();TO(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===OS&&TO(e,Ch(i,r.getStart()),!0),(n===37||n===39)&&TO(e,Ch(i,r.getStart()),!0)},MB=e=>We(e)&&_a(e.data,br),hu=e=>{e.on("mouseup keydown",n=>{qV(e,n.keyCode,MB(e.selection.getRng().endContainer))})},PB=e=>{const n=xO(!1),o=kO(e,n.dom);return{caretContainer:n,caretPosition:Le(o,0)}},_O=(e,n)=>{const{caretContainer:o,caretPosition:r}=PB(n);return Us(ie.fromDom(e),o),ns(ie.fromDom(e)),r},AO=(e,n)=>{const{caretContainer:o,caretPosition:r}=PB(n);return e.insertNode(o.dom),r},gk=(e,n)=>{if(xc(n.dom))return!1;const o=e.schema.getTextInlineElements();return un(o,Rn(n))&&!xc(n.dom)&&!Kf(n.dom)},Hv={},OO=Da(["pre"]),jV=(e,n)=>{Hv[e]||(Hv[e]=[]),Hv[e].push(n)},GV=(e,n)=>{un(Hv,e)&&ye(Hv[e],o=>{o(n)})};jV("pre",e=>{const n=e.selection.getRng(),o=i=>u=>{const h=u.previousSibling;return OO(h)&&yn(i,h)},r=(i,u)=>{const h=ie.fromDom(u),v=eu(h).dom;ns(h),na(ie.fromDom(i),[ie.fromTag("br",v),ie.fromTag("br",v),...Ur(h)])};if(!n.collapsed){const i=e.selection.getSelectedBlocks(),u=an(an(i,OO),o(i));ye(u,h=>{r(h.previousSibling,h)})}});const RO=["fontWeight","fontStyle","color","fontSize","fontFamily"],NB=e=>we(e.styles)&&bo(fr(e.styles),n=>yn(RO,n)),_l=e=>ps(e,n=>Dr(n)&&n.inline==="span"&&NB(n)),BB=(e,n)=>{const o=e.get(n);return lt(o)?_l(o):V.none()},LB=(e,n)=>ia(n,Le.fromRangeStart(e)).isNone(),KV=(e,n)=>pa(n,Le.fromRangeEnd(e)).exists(o=>!Go(o.getNode())||pa(n,o).isSome())===!1,pk=e=>n=>ig(n)&&e.isEditable(n),XV=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return LB(o,n[0])&&KV(o,n[0])?n:[];{const r=Ir(n).filter(h=>LB(o,h)).toArray(),i=Si(n).filter(h=>KV(o,h)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(i)}},DY=e=>an(XV(e),pk(e.dom)),IB=e=>an(e.getSelectedBlocks(),pk(e.dom)),DS=Xe.each,Al=e=>qt(e)&&!ec(e)&&!xc(e)&&!Kf(e),bk=(e,n)=>{for(let o=e;o;o=o[n]){if(We(o)&&Fo(o.data))return e;if(qt(o)&&!ec(o))return o}return e},MS=(e,n,o)=>{const r=op(e),i=zu(n)&&e.dom.isEditable(n),u=zu(o)&&e.dom.isEditable(o);if(i&&u){const h=bk(n,"previousSibling"),v=bk(o,"nextSibling");if(r.compare(h,v)){for(let w=h.nextSibling;w&&w!==v;){const k=w;w=w.nextSibling,h.appendChild(k)}return e.dom.remove(v),Xe.each(Xe.grep(v.childNodes),w=>{h.appendChild(w)}),h}}return o},vk=(e,n,o,r)=>{var i;if(r&&n.merge_siblings!==!1){const u=(i=MS(e,bT(r),r))!==null&&i!==void 0?i:r;MS(e,u,bT(u,!0))}},YV=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";DS(e.select(r,o),i=>{Al(i)&&e.isEditable(i)&&DS(n.styles,(u,h)=>{e.setStyle(i,h,"")})})}},PS=(e,n,o)=>{DS(e.childNodes,r=>{Al(r)&&(n(r)&&o(r),r.hasChildNodes()&&PS(r,n,o))})},JV=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},DO=(e,n)=>o=>!!(o&&Th(e,o,n)),FB=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),JV(e,r)},nb=ur.generate([{keep:[]},{rename:["name"]},{removed:[]}]),MO=/^(src|href|style)$/,PO=Xe.each,NS=Ec,QV=e=>/^(TR|TH|TD)$/.test(e.nodeName),ip=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),NO=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],i=n[o?"startOffset":"endOffset"];if(qt(r)){const u=r.childNodes.length-1;!o&&i&&i--,r=r.childNodes[i>u?u:i]}return We(r)&&o&&i>=r.data.length&&(r=new cr(r,e.getBody()).next()||r),We(r)&&!o&&i===0&&(r=new cr(r,e.getBody()).prev()||r),r},$B=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return QV(e)&&r?e.nodeName==="TR"&&r[o]||r:e},yk=(e,n,o,r)=>{var i;const u=e.create(o,r);return(i=n.parentNode)===null||i===void 0||i.insertBefore(u,n),u.appendChild(n),u},HB=(e,n,o,r,i)=>{const u=ie.fromDom(n),h=ie.fromDom(e.create(r,i)),v=o?Uf(u):ki(u);return na(h,v),o?(Us(u,h),sg(h,u)):(mc(u,h),ts(h,u)),h.dom},ez=(e,n)=>n.links&&e.nodeName==="A",VB=(e,n,o)=>{const r=n.parentNode;let i;const u=e.dom,h=Rr(e);ld(o)&&r===u.getRoot()&&(!o.list_block||!NS(n,o.list_block))&&ye(Jr(n.childNodes),v=>{rf(e,h,v.nodeName.toLowerCase())?i?i.appendChild(v):(i=yk(u,v,h),u.setAttribs(i,Cc(e))):i=null}),!(Sv(o)&&!NS(o.inline,n))&&u.remove(n,!0)},zB=(e,n,o)=>xo(e)?{name:n,value:null}:{name:e,value:Gs(n,o)},UB=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},BO=(e,n,o,r,i)=>{let u=!1;PO(o.styles,(h,v)=>{const{name:w,value:k}=zB(v,h,r),P=vv(k,w);(o.remove_similar||ne(k)||!qt(i)||NS(Th(e,i,w),P))&&e.setStyle(n,w,""),u=!0}),u&&UB(e,n)},tz=(e,n,o)=>{n==="removeformat"?ye(IB(e.selection),r=>{ye(RO,i=>e.dom.setStyle(r,i,"")),UB(e.dom,r)}):BB(e.formatter,n).each(r=>{ye(IB(e.selection),i=>BO(e.dom,i,r,o,null))})},Ck=(e,n,o,r,i)=>{const u=e.dom,h=op(e),v=e.schema;if(Dr(n)&&c2(v,n.inline)&&Hm(v,r)&&r.parentElement===e.getBody())return VB(e,r,n),nb.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!$v(u,r,n)&&!ez(r,n))return nb.keep();const w=r,k=n.preserve_attributes;if(Dr(n)&&n.remove==="all"&&lt(k)){const P=an(u.getAttribs(w),I=>yn(k,I.name.toLowerCase()));if(u.removeAllAttribs(w),ye(P,I=>u.setAttrib(w,I.name,I.value)),P.length>0)return nb.rename("span")}if(n.remove!=="all"){BO(u,w,n,o,i),PO(n.attributes,(I,F)=>{const{name:W,value:X}=zB(F,I,o);if(n.remove_similar||ne(X)||!qt(i)||NS(u.getAttrib(i,W),X)){if(W==="class"){const G=u.getAttrib(w,W);if(G){let ee="";if(ye(G.split(/\s+/),ce=>{/mce\-\w+/.test(ce)&&(ee+=(ee?" ":"")+ce)}),ee){u.setAttrib(w,W,ee);return}}}if(MO.test(W)&&w.removeAttribute("data-mce-"+W),W==="style"&&Da(["li"])(w)&&u.getStyle(w,"list-style-type")==="none"){w.removeAttribute(W),u.setStyle(w,"list-style-type","none");return}W==="class"&&w.removeAttribute("className"),w.removeAttribute(W)}}),PO(n.classes,I=>{I=Gs(I,o),(!qt(i)||u.hasClass(i,I))&&u.removeClass(w,I)});const P=u.getAttribs(w);for(let I=0;I<P.length;I++){const F=P[I].nodeName;if(!h.isAttributeInternal(F))return nb.keep()}}return n.remove!=="none"?(VB(e,w,n),nb.removed()):nb.keep()},cp=(e,n,o,r,i)=>{let u;return n.parentNode&&ye(Cv(e.dom,n.parentNode).reverse(),h=>{if(!u&&qt(h)&&h.id!=="_start"&&h.id!=="_end"){const v=bm(e,h,o,r,i);v&&v.split!==!1&&(u=h)}}),u},nz=(e,n,o,r)=>Ck(e,n,o,r,r).fold(St(r),i=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,i)),St(null)),oz=(e,n,o,r,i,u,h,v)=>{var w,k;let P,I;const F=e.dom;if(o){const W=o.parentNode;for(let X=r.parentNode;X&&X!==W;X=X.parentNode){let G=F.clone(X,!1);for(let ee=0;ee<n.length&&(G=nz(e,n[ee],v,G),G!==null);ee++);G&&(P&&G.appendChild(P),I||(I=G),P=G)}(!h.mixed||!F.isBlock(o))&&(r=(w=F.split(o,r))!==null&&w!==void 0?w:r),P&&I&&((k=i.parentNode)===null||k===void 0||k.insertBefore(P,i),I.appendChild(i),Dr(h)&&vk(e,h,v,P))}return r},Sk=(e,n,o,r,i)=>{const u=e.formatter.get(n),h=u[0],v=e.dom,w=e.selection,k=G=>{const ee=cp(e,G,n,o,i);return oz(e,u,ee,G,G,!0,h,o)},P=G=>ec(G)&&qt(G)&&(G.id==="_start"||G.id==="_end"),I=G=>bo(u,ee=>Vv(e,ee,o,G,G)),F=G=>{const ee=Jr(G.childNodes),pe=I(G)||bo(u,Ue=>$v(v,G,Ue)),be=G.parentNode;if(!pe&&Ee(be)&&zg(h)&&I(be),h.deep&&ee.length)for(let Ue=0;Ue<ee.length;Ue++)F(ee[Ue]);ye(["underline","line-through","overline"],Ue=>{qt(G)&&e.dom.getStyle(G,"text-decoration")===Ue&&G.parentNode&&yv(v,G.parentNode)===Ue&&Vv(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Ue}},void 0,G)})},W=G=>{const ee=v.get(G?"_start":"_end");if(ee){let ce=ee[G?"firstChild":"lastChild"];return P(ce)&&(ce=ce[G?"firstChild":"lastChild"]),We(ce)&&ce.data.length===0&&(ce=G?ee.previousSibling||ee.nextSibling:ee.nextSibling||ee.previousSibling),v.remove(ee,!0),ce}else return null},X=G=>{let ee,ce,pe=mm(v,G,u,{includeTrailingSpace:G.collapsed});if(h.split){if(pe=uS(pe),ee=NO(e,pe,!0),ce=NO(e,pe),ee!==ce){if(ee=$B(ee,!0),ce=$B(ce,!1),ip(v,ee,ce)){const Te=V.from(ee.firstChild).getOr(ee);k(HB(v,Te,!0,"span",{id:"_start","data-mce-type":"bookmark"})),W(!0);return}if(ip(v,ce,ee)){const Te=V.from(ce.lastChild).getOr(ce);k(HB(v,Te,!1,"span",{id:"_end","data-mce-type":"bookmark"})),W(!1);return}ee=yk(v,ee,"span",{id:"_start","data-mce-type":"bookmark"}),ce=yk(v,ce,"span",{id:"_end","data-mce-type":"bookmark"});const be=v.createRng();be.setStartAfter(ee),be.setEndBefore(ce),G1(v,be,Te=>{ye(Te,Ue=>{!ec(Ue)&&!ec(Ue.parentNode)&&k(Ue)})}),k(ee),k(ce),ee=W(!0),ce=W()}else ee=ce=k(ee);pe.startContainer=ee.parentNode?ee.parentNode:ee,pe.startOffset=v.nodeIndex(ee),pe.endContainer=ce.parentNode?ce.parentNode:ce,pe.endOffset=v.nodeIndex(ce)+1}G1(v,pe,be=>{ye(be,F)})};if(r){if(sf(r)){const G=v.createRng();G.setStartBefore(r),G.setEndAfter(r),X(G)}else X(r);eC(e,n,r,o);return}!w.isCollapsed()||!Dr(h)||wh(e).length?(pT(e,()=>IC(e,X),G=>Dr(h)&&fk(e,n,o,G)),e.nodeChanged()):DB(e,n,o,i),tz(e,n,o),eC(e,n,r,o)},LO=(e,n,o,r,i)=>{(r||e.selection.isEditable())&&Sk(e,n,o,r,i)},Vv=(e,n,o,r,i)=>Ck(e,n,o,r,i).fold(qe,u=>(e.dom.rename(r,u),!0),Ot),WB=Xe.each,ZB=(e,n,o,r)=>{const i=u=>{if(zu(u)&&qt(u.parentNode)&&e.isEditable(u)){const h=yv(e,u.parentNode);e.getStyle(u,"color")&&h?e.setStyle(u,"text-decoration",h):e.getStyle(u,"text-decoration")===h&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Xe.walk(r,i,"childNodes"),i(r))},sz=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const i=DO(e,"fontSize");PS(r,u=>i(u)&&e.isEditable(u),FB(e,"backgroundColor",Gs(n.styles.backgroundColor,o)))}},Dh=(e,n,o,r)=>{if(Dr(n)&&(n.inline==="sub"||n.inline==="sup")){const i=DO(e,"fontSize");PS(r,h=>i(h)&&e.isEditable(h),FB(e,"fontSize",""));const u=an(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},qB=(e,n,o,r)=>{WB(n,i=>{Dr(i)&&WB(e.dom.select(i.inline,r),u=>{Al(u)&&Vv(e,i,o,u,i.exact?u:null)}),YV(e.dom,i,r)})},jB=(e,n,o,r,i)=>{const u=i.parentNode;bm(e,u,o,r)&&Vv(e,n,r,i)||n.merge_with_parents&&u&&e.dom.getParent(u,h=>bm(e,h,o,r)?(Vv(e,n,r,i),!0):!1)},BS=Xe.each,wk=(e,n,o,r)=>{if(J0(e)&&Dr(n)&&o.parentNode){const i=C0(e.schema),u=r0(ie.fromDom(o),h=>xc(h.dom));return ea(i,r)&&ru(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},IO=(e,n,o,r)=>{if(BS(o.styles,(i,u)=>{e.setStyle(n,u,Gs(i,r))}),o.styles){const i=e.getAttrib(n,"style");i&&e.setAttrib(n,"data-mce-style",i)}},rz=(e,n,o,r)=>{const i=e.formatter.get(n),u=i[0],h=!r&&e.selection.isCollapsed(),v=e.dom,w=e.selection,k=(X,G=u)=>{le(G.onformat)&&G.onformat(X,G,o,r),IO(v,X,G,o),BS(G.attributes,(ee,ce)=>{v.setAttrib(X,ce,Gs(ee,o))}),BS(G.classes,ee=>{const ce=Gs(ee,o);v.hasClass(X,ce)||v.addClass(X,ce)})},P=(X,G)=>{let ee=!1;return BS(X,ce=>qc(ce)?v.getContentEditable(G)==="false"&&!ce.ceFalseOverride||Ee(ce.collapsed)&&ce.collapsed!==h?!0:v.is(G,ce.selector)&&!xc(G)?(k(G,ce),ee=!0,!1):!0:!1),ee},I=X=>{if(Y(X)){const G=v.create(X);return k(G),G}else return null},F=(X,G,ee)=>{const ce=[];let pe=!0;const be=u.inline||u.block,Te=I(be),Ue=Fe=>l3(u)&&bm(e,Fe,n,o),dt=(Fe,Me,Ge)=>{const kt=zC(u)&&$C(e.schema,Fe)&&rf(e,Me,be);return Ge&&kt},Bt=(Fe,Me,Ge,kt)=>{const Kt=Fe.nodeName.toLowerCase(),Nn=rf(e,be,Kt)&&rf(e,Me,be),Fn=!ee&&We(Fe)&&O0(Fe.data),lo=xc(Fe),ko=!Dr(u)||!X.isBlock(Fe);return(Ge||kt)&&Nn&&!Fn&&!lo&&ko};G1(X,G,Fe=>{let Me;const Ge=kt=>{let Kt=!1,Nn=pe,Fn=!1;const lo=kt.parentNode,ko=lo.nodeName.toLowerCase(),Js=X.getContentEditable(kt);Ee(Js)&&(Nn=pe,pe=Js==="true",Kt=!0,Fn=bv(e,kt));const Qs=pe&&!Kt;if(Go(kt)&&!wk(e,u,kt,ko)){Me=null,ld(u)&&X.remove(kt);return}if(Ue(kt)){Me=null;return}if(dt(kt,ko,Qs)){const wa=X.rename(kt,be);k(wa),ce.push(wa),Me=null;return}if(qc(u)){let wa=P(i,kt);if(!wa&&Ee(lo)&&zg(u)&&(wa=P(i,lo)),!Dr(u)||wa){Me=null;return}}Ee(Te)&&Bt(kt,ko,Qs,Fn)?(Me||(Me=X.clone(Te,!1),lo.insertBefore(Me,kt),ce.push(Me)),Fn&&Kt&&(pe=Nn),Me.appendChild(kt)):(Me=null,ye(Jr(kt.childNodes),Ge),Kt&&(pe=Nn),Me=null)};ye(Fe,Ge)}),u.links===!0&&ye(ce,Fe=>{const Me=Ge=>{Ge.nodeName==="A"&&k(Ge,u),ye(Jr(Ge.childNodes),Me)};Me(Fe)}),ye(ce,Fe=>{const Me=Kt=>{let Nn=0;return ye(Kt.childNodes,Fn=>{!Et(Fn)&&!ec(Fn)&&Nn++}),Nn},Ge=Kt=>ps(Kt.childNodes,FC).filter(Fn=>X.getContentEditable(Fn)!=="false"&&$v(X,Fn,u)).map(Fn=>{const lo=X.clone(Fn,!1);return k(lo),X.replace(lo,Kt,!0),X.remove(Fn,!0),lo}).getOr(Kt),kt=Me(Fe);if((ce.length>1||!X.isBlock(Fe))&&kt===0){X.remove(Fe,!0);return}(Dr(u)||ld(u)&&u.wrapper)&&(!u.exact&&kt===1&&(Fe=Ge(Fe)),qB(e,i,o,Fe),jB(e,u,n,o,Fe),sz(X,u,o,Fe),ZB(X,u,o,Fe),Dh(X,u,o,Fe),vk(e,u,o,Fe))})},W=sf(r)?r:w.getNode();if(v.getContentEditable(W)==="false"&&!bv(e,W)){r=W,P(i,r),Q2(e,n,r,o);return}if(u){if(r)if(sf(r)){if(!P(i,r)){const X=v.createRng();X.setStartBefore(r),X.setEndAfter(r),F(v,mm(v,X,i),!0)}}else F(v,r,!0);else!h||!Dr(u)||wh(e).length?(w.setRng(ik(w.getRng())),pT(e,()=>{IC(e,(X,G)=>{const ee=G?X:mm(v,X,i);F(v,ee,!1)})},Ot),e.nodeChanged()):RB(e,n,o),BB(e.formatter,n).each(X=>{ye(DY(e.selection),G=>IO(v,G,X,o))});GV(n,e)}Q2(e,n,r,o)},FO=(e,n,o,r)=>{(r||e.selection.isEditable())&&rz(e,n,o,r)},GB=e=>un(e,"vars"),az=(e,n)=>{e.set({}),n.on("NodeChange",o=>{KB(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=V.from(o.node).map(i=>sf(i)?i:i.startContainer).bind(i=>qt(i)?V.some(i):V.from(i.parentElement)).getOrThunk(()=>LS(n));KB(n,r,e.get())})},LS=e=>e.selection.getStart(),$O=(e,n,o,r,i)=>_u(n,v=>{const w=e.formatter.matchNode(v,o,i??{},r);return!rn(w)},v=>mk(e,v,o)?!0:r?!1:Ee(e.formatter.matchNode(v,o,i,!0))),IS=(e,n)=>{const o=n??LS(e);return an(Cv(e.dom,o),r=>qt(r)&&!Kf(r))},KB=(e,n,o)=>{const r=IS(e,n);Tt(o,(i,u)=>{const h=v=>{const w=$O(e,r,u,v.similar,GB(v)?v.vars:void 0),k=w.isSome();if(v.state.get()!==k){v.state.set(k);const P=w.getOr(n);GB(v)?v.callback(k,{node:P,format:u,parents:r}):ye(v.callbacks,I=>I(k,{node:P,format:u,parents:r}))}};ye([i.withSimilar,i.withoutSimilar],h),ye(i.withVars,h)})},iz=(e,n,o,r,i,u)=>{const h=n.get();ye(o.split(","),v=>{const w=Po(h,v).getOrThunk(()=>{const P={withSimilar:{state:Ko(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Ko(!1),similar:!1,callbacks:[]},withVars:[]};return h[v]=P,P}),k=()=>{const P=IS(e);return $O(e,P,v,i,u).isSome()};if(rn(u)){const P=i?w.withSimilar:w.withoutSimilar;P.callbacks.push(r),P.callbacks.length===1&&P.state.set(k())}else w.withVars.push({state:Ko(k()),similar:i,vars:u,callback:r})}),n.set(h)},cz=(e,n,o)=>{const r=e.get();ye(n.split(","),i=>Po(r,i).each(u=>{r[i]={withSimilar:{...u.withSimilar,callbacks:an(u.withSimilar.callbacks,h=>h!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:an(u.withoutSimilar.callbacks,h=>h!==o)},withVars:an(u.withVars,h=>h.callback!==o)}})),e.set(r)},XB=(e,n,o,r,i,u)=>(iz(e,n,o,r,i,u),{unbind:()=>cz(n,o,r)}),HO=(e,n,o,r)=>{const i=e.formatter.get(n);i&&(fk(e,n,o,r)&&(!("toggle"in i[0])||i[0].toggle)?LO(e,n,o,r):FO(e,n,o,r))},VO=Xe.explode,YB=()=>{const e={};return{addFilter:(i,u)=>{ye(VO(i),h=>{un(e,h)||(e[h]={name:h,callbacks:[]}),e[h].callbacks.push(u)})},getFilters:()=>Ru(e),removeFilter:(i,u)=>{ye(VO(i),h=>{if(un(e,h))if(Ee(u)){const v=e[h],w=an(v.callbacks,k=>k!==u);w.length>0?v.callbacks=w:delete e[h]}else delete e[h]})}}},lz=(e,n)=>{ye(n,o=>{e.attr(o,null)})},uz=(e,n,o)=>{e.addNodeFilter("font",r=>{ye(r,i=>{const u=n.parse(i.attr("style")),h=i.attr("color"),v=i.attr("face"),w=i.attr("size");h&&(u.color=h),v&&(u["font-family"]=v),w&&jl(w).each(k=>{u["font-size"]=o[k-1]}),i.name="span",i.attr("style",n.serialize(u)),lz(i,["color","face","size"])})})},FS=(e,n,o)=>{e.addNodeFilter("strike",r=>{const i=n.type!=="html4";ye(r,u=>{if(i)u.name="s";else{const h=o.parse(u.attr("style"));h["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(h))}})})},vm=(e,n,o)=>{var r;const i=fg();n.convert_fonts_to_spans&&uz(e,i,Xe.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),FS(e,o,i)},dz=(e,n,o)=>{n.inline_styles&&vm(e,n,o)},zO=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),Ks=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},UO=e=>{try{return decodeURIComponent(e)}catch{return e}},zv=e=>{const[n,...o]=e.split(","),r=o.join(","),i=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(i){const u=i[2]===";base64",h=UO(r),v=u?Ks(h):h;return V.some({type:i[1],data:v,base64Encoded:u})}else return V.none()},lf=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return V.none()}const i=new Uint8Array(r.length);for(let u=0;u<i.length;u++)i[u]=r.charCodeAt(u);return V.some(new Blob([i],{type:e}))},JB=e=>new Promise((n,o)=>{zv(e).bind(({type:r,data:i,base64Encoded:u})=>lf(r,i,u)).fold(()=>o("Invalid data URI"),n)}),WO=e=>$s(e,"blob:")?zO(e):$s(e,"data:")?JB(e):Promise.reject("Unknown URI format"),QB=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var i;o((i=r.error)===null||i===void 0?void 0:i.message)},r.readAsDataURL(e)});let Uv=0;const mz=e=>"blobid"+Uv++,eL=(e,n,o)=>zv(e).bind(({data:r,type:i,base64Encoded:u})=>{if(n&&!u)return V.none();{const h=u?r:btoa(r);return o(h,i)}}),ob=(e,n,o)=>{const r=e.create(mz(),n,o);return e.add(r),r},tL=(e,n,o=!1)=>eL(n,o,(r,i)=>V.from(e.getByData(r,i)).orThunk(()=>lf(i,r).map(u=>ob(e,u,r)))),sb=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if($s(n,"blob:")){const r=e.getByUri(n);return Ee(r)?Promise.resolve(r):WO(n).then(i=>QB(i).then(u=>eL(u,!1,h=>V.some(ob(e,i,h))).getOrThunk(o)))}else return $s(n,"data:")?tL(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},fz=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,lp=e=>V.from(e.match(fz)).bind(n=>Vl(n,1)).map(n=>$s(n,"www.")?n.substring(4):n),nL=(e,n)=>{V.from(e.attr("src")).bind(lp).forall(o=>!yn(n,o))&&e.attr("sandbox","")},Xc=(e,n)=>$s(e,`${n}/`),rb=e=>rn(e)?"iframe":Xc(e,"image")?"img":Xc(e,"video")?"video":Xc(e,"audio")?"audio":"iframe",$S=({type:e,src:n,width:o,height:r}={},i,u)=>{const h=rb(e),v=new tc(h,1);return v.attr(h==="audio"?{src:n}:{src:n,width:o,height:r}),(h==="audio"||h==="video")&&v.attr("controls",""),h==="iframe"&&i&&nL(v,u),v},ZO=e=>Ee(e.attr("data-mce-bogus")),hz=e=>e.attr("src")===zt.transparentSrc||Ee(e.attr("data-mce-placeholder")),Wv=(e,n)=>{const{blob_cache:o}=n;if(o){const r=i=>{const u=i.attr("src");hz(i)||ZO(i)||ln(u)||tL(o,u,!0).each(h=>{i.attr("src",h.blobUri())})};e.addAttributeFilter("src",i=>ye(i,r))}},gz=(e,n)=>{var o,r;const i=e.schema;e.addAttributeFilter("href",w=>{let k=w.length;const P=F=>F.split(" ").filter(X=>X.length>0).concat(["noopener"]).sort().join(" "),I=F=>{const W=F?Xe.trim(F):"";return/\b(noopener)\b/g.test(W)?W:P(W)};if(!n.allow_unsafe_link_target)for(;k--;){const F=w[k];F.name==="a"&&F.attr("target")==="_blank"&&F.attr("rel",I(F.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",w=>{let k=w.length,P,I,F,W;for(;k--;)if(W=w[k],W.name==="a"&&W.firstChild&&!W.attr("href"))for(F=W.parent,P=W.lastChild;P&&F;)I=P.prev,F.insert(P,W),P=I}),n.fix_list_elements&&e.addNodeFilter("ul,ol",w=>{let k=w.length,P,I;for(;k--;)if(P=w[k],I=P.parent,I&&(I.name==="ul"||I.name==="ol"))if(P.prev&&P.prev.name==="li")P.prev.append(P);else{const F=new tc("li",1);F.attr("style","list-style-type: none"),P.wrap(F)}});const u=i.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",w=>{var k;let P=w.length;for(;P--;){const I=w[P],F=(k=I.attr("class"))!==null&&k!==void 0?k:"",W=Xe.explode(F," ");let X="";for(let G=0;G<W.length;G++){const ee=W[G];let ce=!1,pe=u["*"];pe&&pe[ee]&&(ce=!0),pe=u[I.name],!ce&&pe&&pe[ee]&&(ce=!0),ce&&(X&&(X+=" "),X+=ee)}X.length||(X=null),I.attr("class",X)}}),Wv(e,n);const h=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,v=Au((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",w=>ye(w,k=>{k.replace($S({type:k.attr("type"),src:k.name==="object"?k.attr("data"):k.attr("src"),width:k.attr("width"),height:k.attr("height")},h,v))})),h&&e.addNodeFilter("iframe",w=>ye(w,k=>nL(k,v)))};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:gu,setPrototypeOf:HS,isFrozen:oL,getPrototypeOf:qO,getOwnPropertyDescriptor:jO}=Object;let{freeze:La,seal:Ol,create:sL}=Object,{apply:xk,construct:GO}=typeof Reflect<"u"&&Reflect;La||(La=function(n){return n}),Ol||(Ol=function(n){return n}),xk||(xk=function(n,o,r){return n.apply(o,r)}),GO||(GO=function(n,o){return new n(...o)});const Ek=Jc(Array.prototype.forEach),pz=Jc(Array.prototype.lastIndexOf),rL=Jc(Array.prototype.pop),uf=Jc(Array.prototype.push),bz=Jc(Array.prototype.splice),Zv=Jc(String.prototype.toLowerCase),VS=Jc(String.prototype.toString),aL=Jc(String.prototype.match),qv=Jc(String.prototype.replace),Tk=Jc(String.prototype.indexOf),vz=Jc(String.prototype.trim),ym=Jc(Object.prototype.hasOwnProperty),Yc=Jc(RegExp.prototype.test),zS=KO(TypeError);function Jc(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return xk(e,n,r)}}function KO(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return GO(e,o)}}function Yo(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Zv;HS&&HS(e,null);let r=n.length;for(;r--;){let i=n[r];if(typeof i=="string"){const u=o(i);u!==i&&(oL(n)||(n[r]=u),i=u)}e[i]=!0}return e}function yz(e){for(let n=0;n<e.length;n++)ym(e,n)||(e[n]=null);return e}function ab(e){const n=sL(null);for(const[o,r]of gu(e))ym(e,o)&&(Array.isArray(r)?n[o]=yz(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=ab(r):n[o]=r);return n}function US(e,n){for(;e!==null;){const r=jO(e,n);if(r){if(r.get)return Jc(r.get);if(typeof r.value=="function")return Jc(r.value)}e=qO(e)}function o(){return null}return o}const iL=La(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),XO=La(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),YO=La(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Cz=La(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),JO=La(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Sz=La(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),cL=La(["#text"]),lL=La(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),QO=La(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),uL=La(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),WS=La(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),wz=Ol(/\{\{[\w\W]*|[\w\W]*\}\}/gm),up=Ol(/<%[\w\W]*|[\w\W]*%>/gm),xz=Ol(/\$\{[\w\W]*/gm),Ez=Ol(/^data-[\-\w.\u00B7-\uFFFF]+$/),Tz=Ol(/^aria-[\-\w]+$/),dL=Ol(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),eR=Ol(/^(?:\w+script|data):/i),kz=Ol(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),mL=Ol(/^html$/i),_z=Ol(/^[a-z][.\w]*(-[.\w]+)+$/i);var fL=Object.freeze({__proto__:null,ARIA_ATTR:Tz,ATTR_WHITESPACE:kz,CUSTOM_ELEMENT:_z,DATA_ATTR:Ez,DOCTYPE_NAME:mL,ERB_EXPR:up,IS_ALLOWED_URI:dL,IS_SCRIPT_OR_DATA:eR,MUSTACHE_EXPR:wz,TMPLIT_EXPR:xz});const ZS={element:1,text:3,progressingInstruction:7,comment:8,document:9},Az=function(){return typeof window>"u"?null:window},Oz=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";o&&o.hasAttribute(i)&&(r=o.getAttribute(i));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}},hL=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function gL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Az();const n=Gn=>gL(Gn);if(n.version="3.2.4",n.removed=[],!e||!e.document||e.document.nodeType!==ZS.document||!e.Element)return n.isSupported=!1,n;let{document:o}=e;const r=o,i=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:h,Node:v,Element:w,NodeFilter:k,NamedNodeMap:P=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:I,DOMParser:F,trustedTypes:W}=e,X=w.prototype,G=US(X,"cloneNode"),ee=US(X,"remove"),ce=US(X,"nextSibling"),pe=US(X,"childNodes"),be=US(X,"parentNode");if(typeof h=="function"){const Gn=o.createElement("template");Gn.content&&Gn.content.ownerDocument&&(o=Gn.content.ownerDocument)}let Te,Ue="";const{implementation:dt,createNodeIterator:Bt,createDocumentFragment:Fe,getElementsByTagName:Me}=o,{importNode:Ge}=r;let kt=hL();n.isSupported=typeof gu=="function"&&typeof be=="function"&&dt&&dt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Kt,ERB_EXPR:Nn,TMPLIT_EXPR:Fn,DATA_ATTR:lo,ARIA_ATTR:ko,IS_SCRIPT_OR_DATA:Js,ATTR_WHITESPACE:Qs,CUSTOM_ELEMENT:wa}=fL;let{IS_ALLOWED_URI:yt}=fL,Xt=null;const co=Yo({},[...iL,...XO,...YO,...JO,...cL]);let Pt=null;const Qe=Yo({},[...lL,...QO,...uL,...WS]);let _t=Object.seal(sL(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Qt=null,_o=null,jn=!0,Ia=!0,yu=!1,Sf=!0,oc=!1,xd=!0,Pl=!1,vi=!1,sc=!1,Cu=!1,kp=!1,tn=!1,to=!0,er=!1;const Gr="user-content-";let ar=!0,Lr=!1,Ds={},Ms=null;const rc=Yo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Su=null;const wu=Yo({},["audio","video","img","source","image","track"]);let xu=null;const Ny=Yo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Nb="http://www.w3.org/1998/Math/MathML",_p="http://www.w3.org/2000/svg",Ed="http://www.w3.org/1999/xhtml";let Hh=Ed,ox=!1,By=null;const M7=Yo({},[Nb,_p,Ed],VS);let sx=Yo({},["mi","mo","mn","ms","mtext"]),Ly=Yo({},["annotation-xml"]);const RP=Yo({},["title","style","font","a","script"]);let Bb=null;const Vh=["application/xhtml+xml","text/html"],rx="text/html";let xe=null,Ae=null;const bt=o.createElement("form"),ft=function(Re){return Re instanceof RegExp||Re instanceof Function},mn=function(){let Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ae&&Ae===Re)){if((!Re||typeof Re!="object")&&(Re={}),Re=ab(Re),Bb=Vh.indexOf(Re.PARSER_MEDIA_TYPE)===-1?rx:Re.PARSER_MEDIA_TYPE,xe=Bb==="application/xhtml+xml"?VS:Zv,Xt=ym(Re,"ALLOWED_TAGS")?Yo({},Re.ALLOWED_TAGS,xe):co,Pt=ym(Re,"ALLOWED_ATTR")?Yo({},Re.ALLOWED_ATTR,xe):Qe,By=ym(Re,"ALLOWED_NAMESPACES")?Yo({},Re.ALLOWED_NAMESPACES,VS):M7,xu=ym(Re,"ADD_URI_SAFE_ATTR")?Yo(ab(Ny),Re.ADD_URI_SAFE_ATTR,xe):Ny,Su=ym(Re,"ADD_DATA_URI_TAGS")?Yo(ab(wu),Re.ADD_DATA_URI_TAGS,xe):wu,Ms=ym(Re,"FORBID_CONTENTS")?Yo({},Re.FORBID_CONTENTS,xe):rc,Qt=ym(Re,"FORBID_TAGS")?Yo({},Re.FORBID_TAGS,xe):{},_o=ym(Re,"FORBID_ATTR")?Yo({},Re.FORBID_ATTR,xe):{},Ds=ym(Re,"USE_PROFILES")?Re.USE_PROFILES:!1,jn=Re.ALLOW_ARIA_ATTR!==!1,Ia=Re.ALLOW_DATA_ATTR!==!1,yu=Re.ALLOW_UNKNOWN_PROTOCOLS||!1,Sf=Re.ALLOW_SELF_CLOSE_IN_ATTR!==!1,oc=Re.SAFE_FOR_TEMPLATES||!1,xd=Re.SAFE_FOR_XML!==!1,Pl=Re.WHOLE_DOCUMENT||!1,Cu=Re.RETURN_DOM||!1,kp=Re.RETURN_DOM_FRAGMENT||!1,tn=Re.RETURN_TRUSTED_TYPE||!1,sc=Re.FORCE_BODY||!1,to=Re.SANITIZE_DOM!==!1,er=Re.SANITIZE_NAMED_PROPS||!1,ar=Re.KEEP_CONTENT!==!1,Lr=Re.IN_PLACE||!1,yt=Re.ALLOWED_URI_REGEXP||dL,Hh=Re.NAMESPACE||Ed,sx=Re.MATHML_TEXT_INTEGRATION_POINTS||sx,Ly=Re.HTML_INTEGRATION_POINTS||Ly,_t=Re.CUSTOM_ELEMENT_HANDLING||{},Re.CUSTOM_ELEMENT_HANDLING&&ft(Re.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(_t.tagNameCheck=Re.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Re.CUSTOM_ELEMENT_HANDLING&&ft(Re.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(_t.attributeNameCheck=Re.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Re.CUSTOM_ELEMENT_HANDLING&&typeof Re.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(_t.allowCustomizedBuiltInElements=Re.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),oc&&(Ia=!1),kp&&(Cu=!0),Ds&&(Xt=Yo({},cL),Pt=[],Ds.html===!0&&(Yo(Xt,iL),Yo(Pt,lL)),Ds.svg===!0&&(Yo(Xt,XO),Yo(Pt,QO),Yo(Pt,WS)),Ds.svgFilters===!0&&(Yo(Xt,YO),Yo(Pt,QO),Yo(Pt,WS)),Ds.mathMl===!0&&(Yo(Xt,JO),Yo(Pt,uL),Yo(Pt,WS))),Re.ADD_TAGS&&(Xt===co&&(Xt=ab(Xt)),Yo(Xt,Re.ADD_TAGS,xe)),Re.ADD_ATTR&&(Pt===Qe&&(Pt=ab(Pt)),Yo(Pt,Re.ADD_ATTR,xe)),Re.ADD_URI_SAFE_ATTR&&Yo(xu,Re.ADD_URI_SAFE_ATTR,xe),Re.FORBID_CONTENTS&&(Ms===rc&&(Ms=ab(Ms)),Yo(Ms,Re.FORBID_CONTENTS,xe)),ar&&(Xt["#text"]=!0),Pl&&Yo(Xt,["html","head","body"]),Xt.table&&(Yo(Xt,["tbody"]),delete Qt.tbody),Re.TRUSTED_TYPES_POLICY){if(typeof Re.TRUSTED_TYPES_POLICY.createHTML!="function")throw zS('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Re.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw zS('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Te=Re.TRUSTED_TYPES_POLICY,Ue=Te.createHTML("")}else Te===void 0&&(Te=Oz(W,i)),Te!==null&&typeof Ue=="string"&&(Ue=Te.createHTML(""));La&&La(Re),Ae=Re}},so=Yo({},[...XO,...YO,...Cz]),tr=Yo({},[...JO,...Sz]),Td=function(Re){let Yt=be(Re);(!Yt||!Yt.tagName)&&(Yt={namespaceURI:Hh,tagName:"template"});const Bn=Zv(Re.tagName),Kr=Zv(Yt.tagName);return By[Re.namespaceURI]?Re.namespaceURI===_p?Yt.namespaceURI===Ed?Bn==="svg":Yt.namespaceURI===Nb?Bn==="svg"&&(Kr==="annotation-xml"||sx[Kr]):!!so[Bn]:Re.namespaceURI===Nb?Yt.namespaceURI===Ed?Bn==="math":Yt.namespaceURI===_p?Bn==="math"&&Ly[Kr]:!!tr[Bn]:Re.namespaceURI===Ed?Yt.namespaceURI===_p&&!Ly[Kr]||Yt.namespaceURI===Nb&&!sx[Kr]?!1:!tr[Bn]&&(RP[Bn]||!so[Bn]):!!(Bb==="application/xhtml+xml"&&By[Re.namespaceURI]):!1},Eu=function(Re){uf(n.removed,{element:Re});try{be(Re).removeChild(Re)}catch{ee(Re)}},Iy=function(Re,Yt){try{uf(n.removed,{attribute:Yt.getAttributeNode(Re),from:Yt})}catch{uf(n.removed,{attribute:null,from:Yt})}if(Yt.removeAttribute(Re),Re==="is")if(Cu||kp)try{Eu(Yt)}catch{}else try{Yt.setAttribute(Re,"")}catch{}},DP=function(Re){let Yt=null,Bn=null;if(sc)Re="<remove></remove>"+Re;else{const zi=aL(Re,/^[\r\n\t ]+/);Bn=zi&&zi[0]}Bb==="application/xhtml+xml"&&Hh===Ed&&(Re='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Re+"</body></html>");const Kr=Te?Te.createHTML(Re):Re;if(Hh===Ed)try{Yt=new F().parseFromString(Kr,Bb)}catch{}if(!Yt||!Yt.documentElement){Yt=dt.createDocument(Hh,"template",null);try{Yt.documentElement.innerHTML=ox?Ue:Kr}catch{}}const ac=Yt.body||Yt.documentElement;return Re&&Bn&&ac.insertBefore(o.createTextNode(Bn),ac.childNodes[0]||null),Hh===Ed?Me.call(Yt,Pl?"html":"body")[0]:Pl?Yt.documentElement:ac},h_=function(Re){return Bt.call(Re.ownerDocument||Re,Re,k.SHOW_ELEMENT|k.SHOW_COMMENT|k.SHOW_TEXT|k.SHOW_PROCESSING_INSTRUCTION|k.SHOW_CDATA_SECTION,null)},ax=function(Re){return Re instanceof I&&(typeof Re.nodeName!="string"||typeof Re.textContent!="string"||typeof Re.removeChild!="function"||!(Re.attributes instanceof P)||typeof Re.removeAttribute!="function"||typeof Re.setAttribute!="function"||typeof Re.namespaceURI!="string"||typeof Re.insertBefore!="function"||typeof Re.hasChildNodes!="function")},ix=function(Re){return typeof v=="function"&&Re instanceof v};function wf(Gn,Re,Yt){Ek(Gn,Bn=>{Bn.call(n,Re,Yt,Ae)})}const MP=function(Re){let Yt=null;if(wf(kt.beforeSanitizeElements,Re,null),ax(Re))return Eu(Re),!0;const Bn=xe(Re.nodeName);if(wf(kt.uponSanitizeElement,Re,{tagName:Bn,allowedTags:Xt}),Re.hasChildNodes()&&!ix(Re.firstElementChild)&&Yc(/<[/\w]/g,Re.innerHTML)&&Yc(/<[/\w]/g,Re.textContent)||Re.nodeType===ZS.progressingInstruction||xd&&Re.nodeType===ZS.comment&&Yc(/<[/\w]/g,Re.data))return Eu(Re),!0;if(!Xt[Bn]||Qt[Bn]){if(!Qt[Bn]&&g_(Bn)&&(_t.tagNameCheck instanceof RegExp&&Yc(_t.tagNameCheck,Bn)||_t.tagNameCheck instanceof Function&&_t.tagNameCheck(Bn)))return!1;if(ar&&!Ms[Bn]){const Kr=be(Re)||Re.parentNode,ac=pe(Re)||Re.childNodes;if(ac&&Kr){const zi=ac.length;for(let ol=zi-1;ol>=0;--ol){const Tu=G(ac[ol],!0);Tu.__removalCount=(Re.__removalCount||0)+1,Kr.insertBefore(Tu,ce(Re))}}}return Eu(Re),!0}return Re instanceof w&&!Td(Re)||(Bn==="noscript"||Bn==="noembed"||Bn==="noframes")&&Yc(/<\/no(script|embed|frames)/i,Re.innerHTML)?(Eu(Re),!0):(oc&&Re.nodeType===ZS.text&&(Yt=Re.textContent,Ek([Kt,Nn,Fn],Kr=>{Yt=qv(Yt,Kr," ")}),Re.textContent!==Yt&&(uf(n.removed,{element:Re.cloneNode()}),Re.textContent=Yt)),wf(kt.afterSanitizeElements,Re,null),!1)},PP=function(Re,Yt,Bn){if(to&&(Yt==="id"||Yt==="name")&&(Bn in o||Bn in bt))return!1;if(!(Ia&&!_o[Yt]&&Yc(lo,Yt))){if(!(jn&&Yc(ko,Yt))){if(!Pt[Yt]||_o[Yt]){if(!(g_(Re)&&(_t.tagNameCheck instanceof RegExp&&Yc(_t.tagNameCheck,Re)||_t.tagNameCheck instanceof Function&&_t.tagNameCheck(Re))&&(_t.attributeNameCheck instanceof RegExp&&Yc(_t.attributeNameCheck,Yt)||_t.attributeNameCheck instanceof Function&&_t.attributeNameCheck(Yt))||Yt==="is"&&_t.allowCustomizedBuiltInElements&&(_t.tagNameCheck instanceof RegExp&&Yc(_t.tagNameCheck,Bn)||_t.tagNameCheck instanceof Function&&_t.tagNameCheck(Bn))))return!1}else if(!xu[Yt]){if(!Yc(yt,qv(Bn,Qs,""))){if(!((Yt==="src"||Yt==="xlink:href"||Yt==="href")&&Re!=="script"&&Tk(Bn,"data:")===0&&Su[Re])){if(!(yu&&!Yc(Js,qv(Bn,Qs,"")))){if(Bn)return!1}}}}}}return!0},g_=function(Re){return Re!=="annotation-xml"&&aL(Re,wa)},NP=function(Re){wf(kt.beforeSanitizeAttributes,Re,null);const{attributes:Yt}=Re;if(!Yt||ax(Re))return;const Bn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Pt,forceKeepAttr:void 0};let Kr=Yt.length;for(;Kr--;){const ac=Yt[Kr],{name:zi,namespaceURI:ol,value:Tu}=ac,cx=xe(zi);let Ui=zi==="value"?Tu:vz(Tu);const uX=Ui;if(Bn.attrName=cx,Bn.attrValue=Ui,Bn.keepAttr=!0,Bn.forceKeepAttr=void 0,wf(kt.uponSanitizeAttribute,Re,Bn),Ui=Bn.attrValue,er&&(cx==="id"||cx==="name")&&(Iy(zi,Re),Ui=Gr+Ui),xd&&Yc(/((--!?|])>)|<\/(style|title)/i,Ui)){Iy(zi,Re);continue}if(Bn.forceKeepAttr)continue;if(!Bn.keepAttr){Iy(zi,Re);continue}if(!Sf&&Yc(/\/>/i,Ui)){Iy(zi,Re);continue}oc&&Ek([Kt,Nn,Fn],p_=>{Ui=qv(Ui,p_," ")});const BP=xe(Re.nodeName);if(!PP(BP,cx,Ui)){Iy(zi,Re);continue}if(Te&&typeof W=="object"&&typeof W.getAttributeType=="function"&&!ol)switch(W.getAttributeType(BP,cx)){case"TrustedHTML":{Ui=Te.createHTML(Ui);break}case"TrustedScriptURL":{Ui=Te.createScriptURL(Ui);break}}if(Ui!==uX)try{ol?Re.setAttributeNS(ol,zi,Ui):Re.setAttribute(zi,Ui),ax(Re)?Eu(Re):rL(n.removed)}catch{}}wf(kt.afterSanitizeAttributes,Re,null)},P7=function Gn(Re){let Yt=null;const Bn=h_(Re);for(wf(kt.beforeSanitizeShadowDOM,Re,null);Yt=Bn.nextNode();)wf(kt.uponSanitizeShadowNode,Yt,null),MP(Yt),NP(Yt),Yt.content instanceof u&&Gn(Yt.content);wf(kt.afterSanitizeShadowDOM,Re,null)};return n.sanitize=function(Gn){let Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Yt=null,Bn=null,Kr=null,ac=null;if(ox=!Gn,ox&&(Gn="<!-->"),typeof Gn!="string"&&!ix(Gn))if(typeof Gn.toString=="function"){if(Gn=Gn.toString(),typeof Gn!="string")throw zS("dirty is not a string, aborting")}else throw zS("toString is not a function");if(!n.isSupported)return Gn;if(vi||mn(Re),n.removed=[],typeof Gn=="string"&&(Lr=!1),Lr){if(Gn.nodeName){const Tu=xe(Gn.nodeName);if(!Xt[Tu]||Qt[Tu])throw zS("root node is forbidden and cannot be sanitized in-place")}}else if(Gn instanceof v)Yt=DP("<!---->"),Bn=Yt.ownerDocument.importNode(Gn,!0),Bn.nodeType===ZS.element&&Bn.nodeName==="BODY"||Bn.nodeName==="HTML"?Yt=Bn:Yt.appendChild(Bn);else{if(!Cu&&!oc&&!Pl&&Gn.indexOf("<")===-1)return Te&&tn?Te.createHTML(Gn):Gn;if(Yt=DP(Gn),!Yt)return Cu?null:tn?Ue:""}Yt&&sc&&Eu(Yt.firstChild);const zi=h_(Lr?Gn:Yt);for(;Kr=zi.nextNode();)MP(Kr),NP(Kr),Kr.content instanceof u&&P7(Kr.content);if(Lr)return Gn;if(Cu){if(kp)for(ac=Fe.call(Yt.ownerDocument);Yt.firstChild;)ac.appendChild(Yt.firstChild);else ac=Yt;return(Pt.shadowroot||Pt.shadowrootmode)&&(ac=Ge.call(r,ac,!0)),ac}let ol=Pl?Yt.outerHTML:Yt.innerHTML;return Pl&&Xt["!doctype"]&&Yt.ownerDocument&&Yt.ownerDocument.doctype&&Yt.ownerDocument.doctype.name&&Yc(mL,Yt.ownerDocument.doctype.name)&&(ol="<!DOCTYPE "+Yt.ownerDocument.doctype.name+`>
`+ol),oc&&Ek([Kt,Nn,Fn],Tu=>{ol=qv(ol,Tu," ")}),Te&&tn?Te.createHTML(ol):ol},n.setConfig=function(){let Gn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};mn(Gn),vi=!0},n.clearConfig=function(){Ae=null,vi=!1},n.isValidAttribute=function(Gn,Re,Yt){Ae||mn({});const Bn=xe(Gn),Kr=xe(Re);return PP(Bn,Kr,Yt)},n.addHook=function(Gn,Re){typeof Re=="function"&&uf(kt[Gn],Re)},n.removeHook=function(Gn,Re){if(Re!==void 0){const Yt=pz(kt[Gn],Re);return Yt===-1?void 0:bz(kt[Gn],Yt,1)[0]}return rL(kt[Gn])},n.removeHooks=function(Gn){kt[Gn]=[]},n.removeAllHooks=function(){kt=hL()},n}var tR=gL();const pL=Xe.each,Rz=Xe.trim,Dz=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Mz={ftp:21,http:80,https:443,mailto:25},Pz=["img","video"],nR=(e,n)=>Ee(e)?!e:Ee(n)?!yn(Pz,n):!0,bL=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},Nz=(e,n,o)=>{const r=bL(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?nR(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Tc{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),i=/data:([^;]+)/.exec(r[0]);return i&&(o=i[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const i=Yf.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!Nz(r,i,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=Rz(n),this.settings=o;const r=o.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){i.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const v=r?r.path:new Tc(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+i.toAbsPath(v,n);else{const w=/([^#?]*)([#?]?.*)/.exec(n);w&&(n=(r&&r.protocol||"http")+"://mce_host"+i.toAbsPath(v,w[1])+w[2])}}n=n.replace(/@@/g,"(mce_at)");const h=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);h&&pL(Dz,(v,w)=>{let k=h[w];k&&(k=k.replace(/\(mce_at\)/g,"@@")),i[v]=k}),r&&(i.protocol||(i.protocol=r.protocol),i.userInfo||(i.userInfo=r.userInfo),!i.port&&i.host==="mce_host"&&(i.port=r.port),(!i.host||i.host==="mce_host")&&(i.host=r.host),i.source=""),u&&(i.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Tc(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),i=o.getURI();if(r===i||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===i)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Tc(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?Mz[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,i="",u,h;const v=n.substring(0,n.lastIndexOf("/")).split("/"),w=o.split("/");if(v.length>=w.length){for(u=0,h=v.length;u<h;u++)if(u>=w.length||v[u]!==w[u]){r=u+1;break}}if(v.length<w.length){for(u=0,h=w.length;u<h;u++)if(u>=v.length||v[u]!==w[u]){r=u+1;break}}if(r===1)return o;for(u=0,h=v.length-(r-1);u<h;u++)i+="../";for(u=r-1,h=w.length;u<h;u++)u!==r-1?i+="/"+w[u]:i+=w[u];return i}toAbsPath(n,o){let r=0;const i=/\/$/.test(o)?"/":"",u=n.split("/"),h=o.split("/"),v=[];pL(u,I=>{I&&v.push(I)});const w=[];for(let I=h.length-1;I>=0;I--)if(!(h[I].length===0||h[I]===".")){if(h[I]===".."){r++;continue}if(r>0){r--;continue}w.push(h[I])}const k=v.length-r;let P;return k<=0?P=Zo(w).join("/"):P=v.slice(0,k).join("/")+"/"+Zo(w).join("/"),P.indexOf("/")!==0&&(P="/"+P),i&&P.lastIndexOf("/")!==P.length-1&&(P+=i),P}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const Bz=Xe.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),vL="data-mce-type";let Lz=0;const Iz=(e,n,o,r,i)=>{var u,h,v,w;const k=n.validate,P=o.getSpecialElements();e.nodeType===Tr&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const I=(h=i==null?void 0:i.tagName)!==null&&h!==void 0?h:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){Ee(i)&&(i.allowedTags[I]=!0);return}if(e.nodeType!==Lu||I==="body")return;const F=ie.fromDom(e),W=$d(F,vL),X=Oa(F,"data-mce-bogus");if(!W&&Y(X)){X==="all"?ns(F):su(F);return}const G=o.getElementRule(I);if(k&&!G){un(P,I)?ns(F):su(F);return}else Ee(i)&&(i.allowedTags[I]=!0);if(k&&G&&!W){if(ye((v=G.attributesForced)!==null&&v!==void 0?v:[],ee=>{zr(F,ee.name,ee.value==="{$uid}"?`mce_${Lz++}`:ee.value)}),ye((w=G.attributesDefault)!==null&&w!==void 0?w:[],ee=>{$d(F,ee.name)||zr(F,ee.name,ee.value==="{$uid}"?`mce_${Lz++}`:ee.value)}),G.attributesRequired&&!bo(G.attributesRequired,ee=>$d(F,ee))){su(F);return}if(G.removeEmptyAttrs&&If(F)){su(F);return}G.outputName&&G.outputName!==I&&Cg(F,G.outputName)}},MY=(e,n,o,r,i)=>{const u=e.tagName.toLowerCase(),{attrName:h,attrValue:v}=i;i.keepAttr=Rl(n,o,r,u,h,v),i.keepAttr?(i.allowedAttributes[h]=!0,hd(h,o)&&(i.attrValue=h),n.allow_svg_data_urls&&$s(v,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):jv(e,h)&&(i.forceKeepAttr=!0)},Rl=(e,n,o,r,i,u)=>o!=="html"&&!Fm(r)?!0:!(i in Bz&&Nz(e,u,r))&&(!e.validate||n.isValid(r,i)||$s(i,"data-")||$s(i,"aria-")),jv=(e,n)=>e.hasAttribute(vL)&&(n==="id"||n==="class"||n==="style"),hd=(e,n)=>e in n.getBoolAttrs(),dp=(e,n,o,r)=>{const{attributes:i}=e;for(let u=i.length-1;u>=0;u--){const h=i[u],v=h.name,w=h.value;!Rl(n,o,r,e.tagName.toLowerCase(),v,w)&&!jv(e,v)?e.removeAttribute(v):hd(v,o)&&e.setAttribute(v,v)}},oR=(e,n,o)=>{const r=tR();return r.addHook("uponSanitizeElement",(i,u)=>{Iz(i,e,n,o.track(i),u)}),r.addHook("uponSanitizeAttribute",(i,u)=>{MY(i,e,n,o.current(),u)}),r},yL=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},qS=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};tR().sanitize(e,o)},Fz=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=tR(),i=n.allow_mathml_annotation_encodings,u=lt(i)&&i.length>0,h=w=>{const k=w.getAttribute("encoding");return u&&Y(k)&&yn(i,k)},v=(w,k)=>u&&k==="semantics"?V.some(!0):k==="annotation"?V.some(qt(w)&&h(w)):lt(n.extended_mathml_elements)&&n.extended_mathml_elements.includes(k)?V.from(!0):V.none();r.addHook("uponSanitizeElement",(w,k)=>{var P;const I=(P=k.tagName)!==null&&P!==void 0?P:w.nodeName.toLowerCase();v(w,I).each(W=>{k.allowedTags[I]=W,!W&&n.sanitize&&qt(w)&&w.remove()})}),r.addHook("uponSanitizeAttribute",(w,k)=>{lt(n.extended_mathml_attributes)&&n.extended_mathml_attributes.includes(k.attrName)&&(k.forceKeepAttr=!0)}),r.sanitize(e,o)},CL=e=>n=>{const o=$m(n);if(o==="svg")qS(n);else if(o==="math")Fz(n,e);else throw new Error("Not a namespace element")},PY=(e,n)=>{const o=q_();if(e.sanitize){const r=oR(e,n,o);return{sanitizeHtmlElement:(u,h)=>{r.sanitize(u,yL(e,h)),r.removed=[],o.reset()},sanitizeNamespaceElement:CL(e)}}else return{sanitizeHtmlElement:(u,h)=>{const v=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let w;for(;w=v.nextNode();){const k=o.track(w);Iz(w,e,n,k),qt(w)&&dp(w,e,n,k)}o.reset()},sanitizeNamespaceElement:Ft}},SL=Xe.makeMap,Gv=Xe.extend,sR=(e,n,o,r)=>{const i=e.name,u=i in o&&i!=="title"&&i!=="textarea"&&i!=="noscript",h=n.childNodes;for(let v=0,w=h.length;v<w;v++){const k=h[v],P=new tc(k.nodeName.toLowerCase(),k.nodeType);if(qt(k)){const I=k.attributes;for(let F=0,W=I.length;F<W;F++){const X=I[F];P.attr(X.name,X.value)}Fm(P.name)&&(r(k),P.value=k.innerHTML)}else We(k)?(P.value=k.data,u&&(P.raw=!0)):(Kd(k)||Xp(k)||Im(k))&&(P.value=k.data);Fm(P.name)||sR(P,k,o,r),e.append(P)}},rr=(e,n,o)=>{const r=[];for(let i=e,u=i;i;u=i,i=i.walk()){const h=i;ye(n,v=>v(h)),ln(h.parent)&&h!==e?i=u:r.push(h)}for(let i=r.length-1;i>=0;i--){const u=r[i];ye(o,h=>h(u))}},$z=(e,n,o,r)=>{const i=o.validate,u=n.getNonEmptyElements(),h=n.getWhitespaceElements(),v=Gv(SL("script,style,head,html,body,title,meta,param"),n.getBlockElements()),w=C0(n),k=/[ \t\r\n]+/g,P=/^[ \t\r\n]+/,I=/[ \t\r\n]+$/,F=pe=>{let be=pe.parent;for(;Ee(be);){if(be.name in h)return!0;be=be.parent}return!1},W=pe=>{let be=pe;for(;Ee(be);){if(be.name in w)return Nr(n,u,h,be);be=be.parent}return!1},X=pe=>pe.name in v||Zu(n,pe)||Fm(pe.name)&&pe.parent===e,G=(pe,be)=>{const Te=be?pe.prev:pe.next;return Ee(Te)||ln(pe.parent)?!1:X(pe.parent)&&(pe.parent!==e||r.isRootContent===!0)};return[pe=>{var be;if(pe.type===3&&!F(pe)){let Te=(be=pe.value)!==null&&be!==void 0?be:"";Te=Te.replace(k," "),(OV(pe.prev,X)||G(pe,!0))&&(Te=Te.replace(P,"")),Te.length===0||Te===" "&&pe.prev&&pe.prev.type===Tr&&pe.next&&pe.next.type===Tr?pe.remove():pe.value=Te}},pe=>{var be;if(pe.type===1){const Te=n.getElementRule(pe.name);if(i&&Te){const Ue=Nr(n,u,h,pe);Te.paddInEmptyBlock&&Ue&&W(pe)?hO(o,r,X,pe):Te.removeEmpty&&Ue?X(pe)?pe.remove():pe.unwrap():Te.paddEmpty&&(Ue||sp(pe))&&hO(o,r,X,pe)}}else if(pe.type===3&&!F(pe)){let Te=(be=pe.value)!==null&&be!==void 0?be:"";(pe.next&&X(pe.next)||G(pe,!1))&&(Te=Te.replace(I,"")),Te.length===0?pe.remove():pe.value=Te}}]},Hz=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},Cm=(e={},n=Jd())=>{const o=YB(),r=YB(),i={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,h=PY(i,n),v=(be,Te,Ue="html")=>{const dt=Ue==="xhtml"?"application/xhtml+xml":"text/html",Bt=un(n.getSpecialElements(),Te.toLowerCase()),Fe=Bt?`<${Te}>${be}</${Te}>`:be,Me=()=>Ue==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Fe}</body></html>`:/^[\s]*<head/i.test(be)||/^[\s]*<html/i.test(be)||/^[\s]*<!DOCTYPE/i.test(be)?`<html>${Fe}</html>`:`<body>${Fe}</body>`,Ge=u.parseFromString(Me(),dt).body;return h.sanitizeHtmlElement(Ge,dt),Bt?Ge.firstChild:Ge},w=o.addFilter,k=o.getFilters,P=o.removeFilter,I=r.addFilter,F=r.getFilters,W=r.removeFilter,X=(be,Te)=>{gO(n,be)&&Te.push(be)},G=(be,Te)=>{const Ue=Y(Te.attr(vL)),dt=Te.type===1&&!un(be,Te.name)&&!Zu(n,Te)&&!Fm(Te.name);return Te.type===3||dt&&!Ue},ee=(be,Te)=>{const Ue=Gv(SL("script,style,head,html,body,title,meta,param"),n.getBlockElements()),dt=/^[ \t\r\n]+/,Bt=/[ \t\r\n]+$/;let Fe=be.firstChild,Me=null;const Ge=kt=>{var Kt,Nn;kt&&(Fe=kt.firstChild,Fe&&Fe.type===3&&(Fe.value=(Kt=Fe.value)===null||Kt===void 0?void 0:Kt.replace(dt,"")),Fe=kt.lastChild,Fe&&Fe.type===3&&(Fe.value=(Nn=Fe.value)===null||Nn===void 0?void 0:Nn.replace(Bt,"")))};if(n.isValidChild(be.name,Te.toLowerCase())){for(;Fe;){const kt=Fe.next;G(Ue,Fe)?(Me||(Me=new tc(Te,1),Me.attr(i.forced_root_block_attrs),be.insert(Me,Fe)),Me.append(Fe)):(Ge(Me),Me=null),Fe=kt}Ge(Me)}},pe={schema:n,addAttributeFilter:I,getAttributeFilters:F,removeAttributeFilter:W,addNodeFilter:w,getNodeFilters:k,removeNodeFilter:P,parse:(be,Te={})=>{var Ue;const dt=i.validate,Bt=(Ue=Te.context)!==null&&Ue!==void 0?Ue:i.root_name,Fe=v(be,Bt,Te.format);cg(n,Fe);const Me=new tc(Bt,11);sR(Me,Fe,n.getSpecialElements(),h.sanitizeNamespaceElement),Fe.innerHTML="";const[Ge,kt]=$z(Me,n,i,Te),Kt=[],Nn=dt?Js=>X(Js,Kt):Ft,Fn={nodes:{},attributes:{}},lo=Js=>pB(k(),F(),Js,Fn);if(rr(Me,[Ge,lo],[kt,Nn]),Kt.reverse(),dt&&Kt.length>0)if(Te.context){const{pass:Js,fail:Qs}=ir(Kt,wa=>wa.parent===Me);io(Qs,n,Me,lo),Te.invalid=Js.length>0}else io(Kt,n,Me,lo);const ko=Hz(i,Te);return ko&&(Me.name==="body"||Te.isRootContent)&&ee(Me,ko),Te.invalid||mO(Fn,Te),Me}};return gz(pe,i),dz(pe,i,n),pe},ib=e=>$i(e)?Kg({validate:!1}).serialize(e):e,mp=(e,n,o)=>{const r=ib(e),i=n(r);if(i.isDefaultPrevented())return i;if($i(e))if(i.content!==r){const u=Cm({validate:!1,forced_root_block:!1,...o}).parse(i.content,{context:e.name});return{...i,content:u}}else return{...i,content:e};else return i},rR=e=>({sanitize:N1(e),sandbox_iframes:SC(e),sandbox_iframes_exclusions:VE(e)}),wL=(e,n)=>{if(n.no_events)return ja.value(n);{const o=tC(e,n);return o.isDefaultPrevented()?ja.error(nC(e,{content:"",...o}).content):ja.value(o)}},xL=(e,n,o)=>o.no_events?n:mp(n,i=>nC(e,{...o,content:i}),rR(e)).content,jS=(e,n)=>{if(n.no_events)return ja.value(n);{const o=mp(n.content,r=>yE(e,{...n,content:r}),rR(e));return o.isDefaultPrevented()?(W0(e,o),ja.error(void 0)):ja.value(o)}},GS=(e,n,o)=>{o.no_events||W0(e,{...o,content:n})},kk=(e,n,o)=>({element:e,width:n,rows:o}),aR=(e,n)=>({element:e,cells:n}),Vz=(e,n)=>({x:e,y:n}),EL=(e,n)=>Vc(e,n).bind(jl).getOr(1),iR=(e,n,o,r,i)=>{const u=EL(i,"rowspan"),h=EL(i,"colspan"),v=e.rows;for(let w=o;w<o+u;w++){v[w]||(v[w]=aR(Ux(r),[]));for(let k=n;k<n+h;k++){const P=v[w].cells;P[k]=w===o&&k===n?i:Qu(i)}}},zz=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},Uz=(e,n,o)=>{for(;zz(e,n,o);)n++;return n},TL=e=>as(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),kL=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const i=o[r].cells;for(let u=0;u<i.length;u++)if(oo(i[u],n))return V.some(Vz(u,r))}return V.none()},_L=(e,n,o,r,i)=>{const u=[],h=e.rows;for(let v=o;v<=i;v++){const w=h[v].cells,k=n<r?w.slice(n,r+1):w.slice(r,n+1);u.push(aR(h[v].element,k))}return u},cR=(e,n,o)=>{const r=n.x,i=n.y,u=o.x,h=o.y,v=i<h?_L(e,r,i,u,h):_L(e,r,h,u,i);return kk(e.element,TL(v),v)},AL=(e,n)=>{const o=Qu(e.element),r=ie.fromTag("tbody");return na(r,n),ts(o,r),o},Wz=e=>Cn(e.rows,n=>{const o=Cn(n.cells,i=>{const u=Ux(i);return cs(u,"colspan"),cs(u,"rowspan"),u}),r=Qu(n.element);return na(r,o),r}),Zz=e=>{const n=kk(Qu(e),0,[]);return ye(Wa(e,"tr"),(o,r)=>{ye(Wa(o,"td,th"),(i,u)=>{iR(n,Uz(n,u,r),r,o,i)})}),kk(n.element,TL(n.rows),n.rows)},Kv=e=>AL(e,Wz(e)),OL=(e,n,o)=>kL(e,n).bind(r=>kL(e,o).map(i=>cR(e,r,i))),qz=e=>ps(e,n=>Rn(n)==="ul"||Rn(n)==="ol"),RL=(e,n)=>ps(e,o=>Rn(o)==="li"&&BC(o,n)).fold(St([]),o=>qz(e).map(r=>{const i=ie.fromTag(Rn(r)),u=qo(Ua(r),(h,v)=>$s(v,"list-style"));return ou(i,u),[ie.fromTag("li"),i]}).getOr([])),jz=(e,n)=>{const o=as(n,(r,i)=>(ts(i,r),i),e);return n.length>0?iS([o]):o},DL=e=>Eg(e)?ai(e).filter(g1).fold(St([]),n=>[e,n]):g1(e)?[e]:[],Gz=(e,n,o)=>{const r=ie.fromDom(n.commonAncestorContainer),i=Ah(r,e),u=an(i,w=>o.isWrapper(Rn(w))),h=RL(i,n),v=u.concat(h.length?h:DL(r));return Cn(v,Qu)},lR=()=>iS([]),uR=(e,n,o)=>jz(ie.fromDom(n.cloneContents()),Gz(e,n,o)),ML=(e,n)=>Zf(n,"table",je(oo,e)),PL=(e,n)=>ML(e,n[0]).bind(o=>{const r=n[0],i=n[n.length-1],u=Zz(o);return OL(u,r,i).map(h=>iS([Kv(h)]))}).getOrThunk(lR),NL=(e,n,o)=>n.length>0&&n[0].collapsed?lR():uR(e,n[0],o),BL=(e,n,o)=>{const r=hT(n,e);return r.length>0?PL(e,r):NL(e,n,o)},KS=(e,n)=>n>=0&&n<e.length&&cd(e.charAt(n)),LL=e=>Qi(e.innerText),Kz=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),Xz=e=>V.from(e.selection.getRng()).map(n=>{var o;const r=V.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),i=e.getBody(),u=Kz(r),h=ie.fromDom(n.cloneContents());S5(h),w5(h);const v=e.dom.add(i,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},h.dom),w=LL(v),k=Qi((o=v.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(v),KS(k,0)||KS(k,k.length-1)){const P=r.getOr(i),I=LL(P),F=I.indexOf(w);if(F===-1)return w;{const W=KS(I,F-1),X=KS(I,F+w.length);return(W?" ":"")+w+(X?" ":"")}}else return w}).getOr(""),dR=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),i=e.selection.getSel(),u=FT(e,mT(i)),h=n.contextual?BL(ie.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return h&&r.appendChild(h),e.selection.serializer.serialize(r,n)},XS=(e,n)=>{if(n.format==="text")return Xz(e);{const o=dR(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},IL=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),FL=(e,n,o={})=>{const r=IL(o,n);return wL(e,r).fold(Uo,i=>{const u=XS(e,i);return xL(e,u,i)})},Xv=0,$L=1,HL=2,cb=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),i=new Array(o),u=(P,I,F)=>({start:P,end:I,diag:F}),h=(P,I,F,W,X)=>{const G=w(P,I,F,W);if(G===null||G.start===I&&G.diag===I-W||G.end===P&&G.diag===P-F){let ee=P,ce=F;for(;ee<I||ce<W;)ee<I&&ce<W&&e[ee]===n[ce]?(X.push([Xv,e[ee]]),++ee,++ce):I-P>W-F?(X.push([HL,e[ee]]),++ee):(X.push([$L,n[ce]]),++ce)}else{h(P,G.start,F,G.start-G.diag,X);for(let ee=G.start;ee<G.end;++ee)X.push([Xv,e[ee]]);h(G.end,I,G.end-G.diag,W,X)}},v=(P,I,F,W)=>{let X=P;for(;X-I<W&&X<F&&e[X]===n[X-I];)++X;return u(P,X,I)},w=(P,I,F,W)=>{const X=I-P,G=W-F;if(X===0||G===0)return null;const ee=X-G,ce=G+X,pe=(ce%2===0?ce:ce+1)/2;r[1+pe]=P,i[1+pe]=I+1;let be,Te,Ue,dt,Bt;for(be=0;be<=pe;++be){for(Te=-be;Te<=be;Te+=2){for(Ue=Te+pe,Te===-be||Te!==be&&r[Ue-1]<r[Ue+1]?r[Ue]=r[Ue+1]:r[Ue]=r[Ue-1]+1,dt=r[Ue],Bt=dt-P+F-Te;dt<I&&Bt<W&&e[dt]===n[Bt];)r[Ue]=++dt,++Bt;if(ee%2!==0&&ee-be<=Te&&Te<=ee+be&&i[Ue-ee]<=r[Ue])return v(i[Ue-ee],Te+P-F,I,W)}for(Te=ee-be;Te<=ee+be;Te+=2){for(Ue=Te+pe-ee,Te===ee-be||Te!==ee+be&&i[Ue+1]<=i[Ue-1]?i[Ue]=i[Ue+1]-1:i[Ue]=i[Ue-1],dt=i[Ue]-1,Bt=dt-P+F-Te;dt>=P&&Bt>=F&&e[dt]===n[Bt];)i[Ue]=dt--,Bt--;if(ee%2===0&&-be<=Te&&Te<=be&&i[Ue]<=r[Ue+ee])return v(i[Ue],Te+P-F,I,W)}}return null},k=[];return h(0,e.length,0,n.length,k),k},_k=e=>qt(e)?e.outerHTML:We(e)?Yf.encodeRaw(e.data,!1):Kd(e)?"<!--"+e.data+"-->":"",VL=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},YS=(e,n,o)=>{const r=VL(n);if(e.hasChildNodes()&&o<e.childNodes.length){const i=e.childNodes[o];e.insertBefore(r,i)}else e.appendChild(r)},zL=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},mR=(e,n)=>{let o=0;ye(e,r=>{r[0]===Xv?o++:r[0]===$L?(YS(n,r[1],o),o++):r[0]===HL&&zL(n,o)})},UL=(e,n)=>an(Cn(Jr(e.childNodes),R(Qi,_k)),o=>o.length>0),WL=(e,n)=>{const o=Cn(Jr(n.childNodes),_k);return mR(cb(o,e),n),n},Yz=ka(()=>document.implementation.createHTMLDocument("undo")),Jz=e=>e.querySelector("iframe")!==null,Qz=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),fR=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Ak=e=>{const n=e.serializer.getTempAttrs(),o=C5(e.getBody(),n);return Jz(o)?Qz(UL(o)):fR(Qi(o.innerHTML))},Ok=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?WL(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Ee(r)&&iT(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},hR=e=>e.type==="fragmented"?e.fragments.join(""):e.content,ZL=e=>{const n=ie.fromTag("body",Yz());return jf(n,hR(e)),ye(Wa(n,"*[data-mce-bogus]"),su),Xy(n)},e9=(e,n)=>hR(e)===hR(n),t9=(e,n)=>ZL(e)===ZL(n),gR=(e,n)=>!e||!n?!1:e9(e,n)?!0:t9(e,n),pR=e=>e.get()===0,Rk=(e,n,o)=>{pR(o)&&(e.typing=n)},qL=(e,n)=>{e.typing&&(Rk(e,!1,n),e.add())},n9=e=>{e.typing&&(e.typing=!1,e.add())},o9=(e,n,o)=>{pR(n)&&o.set(Vo(e.selection))},s9=(e,n,o,r,i,u,h)=>{const v=Ak(e),w=Xe.extend(u||{},v);if(!pR(r)||e.removed)return null;const k=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:w,lastLevel:k,originalEvent:h}).isDefaultPrevented()||k&&gR(k,w))return null;n.data[o.get()]&&i.get().each(F=>{n.data[o.get()].beforeBookmark=F});const P=fh(e);if(P&&n.data.length>P){for(let F=0;F<n.data.length-1;F++)n.data[F]=n.data[F+1];n.data.length--,o.set(n.data.length)}w.bookmark=Vo(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(w),o.set(n.data.length-1);const I={level:w,lastLevel:k,originalEvent:h};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",I),e.dispatch("change",I)):e.dispatch("AddUndo",I),w},jL=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},r9=(e,n,o,r,i)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,h=n.data[o.get()-1];Ok(e,h,!0),n.transact(i)&&(n.data[o.get()-1].beforeBookmark=u)}},Dk=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],Ok(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},Hi=(e,n,o,r)=>{let i;return n.typing&&(n.add(),n.typing=!1,Rk(n,!1,o)),r.get()>0&&(r.set(r.get()-1),i=n.data[r.get()],Ok(e,i,!0),e.setDirty(!0),e.dispatch("Undo",{level:i})),i},a9=e=>{e.clear(),e.add()},Mk=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!gR(Ak(e),n.data[0]),lb=(e,n)=>n.get()<e.data.length-1&&!e.typing,GL=(e,n,o)=>(qL(e,n),e.beforeChange(),e.ignore(o),e.add()),Qc=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},ub=(e,n)=>{const o=e.dom,r=Ee(n)?n:e.getBody();ye(o.select("table,a",r),i=>{switch(i.nodeName){case"TABLE":const u=pC(e),h=o.getAttrib(i,"border");(!h||h==="0")&&e.hasVisual?o.addClass(i,u):o.removeClass(i,u);break;case"A":if(!o.getAttrib(i,"href")){const v=o.getAttrib(i,"name")||i.id,w=rd(e);v&&e.hasVisual?o.addClass(i,w):o.removeClass(i,w)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},bR=e=>({init:{bindEvents:Ft},undoManager:{beforeChange:(n,o)=>o9(e,n,o),add:(n,o,r,i,u,h)=>s9(e,n,o,r,i,u,h),undo:(n,o,r)=>Hi(e,n,o,r),redo:(n,o)=>Dk(e,n,o),clear:(n,o)=>jL(e,n,o),reset:n=>a9(n),hasUndo:(n,o)=>Mk(e,n,o),hasRedo:(n,o)=>lb(n,o),transact:(n,o,r)=>GL(n,o,r),ignore:(n,o)=>Qc(n,o),extra:(n,o,r,i)=>r9(e,n,o,r,i)},formatter:{match:(n,o,r,i)=>fk(e,n,o,r,i),matchAll:(n,o)=>wO(e,n,o),matchNode:(n,o,r,i)=>bm(e,n,o,r,i),canApply:n=>hk(e,n),closest:n=>xB(e,n),apply:(n,o,r)=>FO(e,n,o,r),remove:(n,o,r,i)=>LO(e,n,o,r,i),toggle:(n,o,r)=>HO(e,n,o,r),formatChanged:(n,o,r,i,u)=>XB(e,n,o,r,i,u)},editor:{getContent:n=>T5(e,n),setContent:(n,o)=>UV(e,n,o),insertContent:(n,o)=>pm(e,n,o),addVisual:n=>ub(e,n)},selection:{getContent:(n,o)=>FL(e,n,o)},autocompleter:{addDecoration:Ft,removeDecoration:Ft},raw:{getModel:()=>V.none()}}),i9=e=>{const n=k=>we(k)?k:{},{init:o,undoManager:r,formatter:i,editor:u,selection:h,autocompleter:v,raw:w}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(k,P,I)=>r.transact(I),ignore:(k,P)=>r.ignore(P),extra:(k,P,I,F)=>r.extra(I,F)},formatter:{match:(k,P,I,F)=>i.match(k,n(P),F),matchAll:i.matchAll,matchNode:i.matchNode,canApply:k=>i.canApply(k),closest:k=>i.closest(k),apply:(k,P,I)=>i.apply(k,n(P)),remove:(k,P,I,F)=>i.remove(k,n(P)),toggle:(k,P,I)=>i.toggle(k,n(P)),formatChanged:(k,P,I,F,W)=>i.formatChanged(P,I,F,W)},editor:{getContent:k=>u.getContent(k),setContent:(k,P)=>({content:u.setContent(k,P),html:""}),insertContent:(k,P)=>(u.insertContent(k),""),addVisual:u.addVisual},selection:{getContent:(k,P)=>h.getContent(P)},autocompleter:{addDecoration:v.addDecoration,removeDecoration:v.removeDecoration},raw:{getModel:()=>V.some(w.getRawModel())}}},KL=()=>{const e=St(null),n=St("");return{init:{bindEvents:Ft},undoManager:{beforeChange:Ft,add:e,undo:e,redo:e,clear:Ft,reset:Ft,hasUndo:qe,hasRedo:qe,transact:e,ignore:Ft,extra:Ft},formatter:{match:qe,matchAll:St([]),matchNode:St(void 0),canApply:qe,closest:n,apply:Ft,remove:Ft,toggle:Ft,formatChanged:St({unbind:Ft})},editor:{getContent:n,setContent:St({content:"",html:""}),insertContent:St(""),addVisual:Ft},selection:{getContent:n},autocompleter:{addDecoration:Ft,removeDecoration:Ft},raw:{getModel:St(V.none())}}},df=e=>un(e.plugins,"rtc"),XL=e=>Po(e.plugins,"rtc").bind(n=>V.from(n.setup)),JS=e=>{const n=e;return XL(e).fold(()=>(n.rtcInstance=bR(e),V.none()),o=>(n.rtcInstance=KL(),V.some(()=>o().then(r=>(n.rtcInstance=i9(r),r.rtc.isRemote)))))},QS=e=>e.rtcInstance?e.rtcInstance:bR(e),ca=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},YL=(e,n,o)=>{ca(e).undoManager.beforeChange(n,o)},c9=(e,n,o,r,i,u,h)=>ca(e).undoManager.add(n,o,r,i,u,h),vR=(e,n,o,r)=>ca(e).undoManager.undo(n,o,r),yR=(e,n,o)=>ca(e).undoManager.redo(n,o),l9=(e,n,o)=>{ca(e).undoManager.clear(n,o)},u9=(e,n)=>{ca(e).undoManager.reset(n)},JL=(e,n,o)=>ca(e).undoManager.hasUndo(n,o),Sm=(e,n,o)=>ca(e).undoManager.hasRedo(n,o),CR=(e,n,o,r)=>ca(e).undoManager.transact(n,o,r),d9=(e,n,o)=>{ca(e).undoManager.ignore(n,o)},Pk=(e,n,o,r,i)=>{ca(e).undoManager.extra(n,o,r,i)},SR=(e,n,o,r,i)=>ca(e).formatter.match(n,o,r,i),QL=(e,n,o)=>ca(e).formatter.matchAll(n,o),eI=(e,n,o,r,i)=>ca(e).formatter.matchNode(n,o,r,i),tI=(e,n)=>ca(e).formatter.canApply(n),m9=(e,n)=>ca(e).formatter.closest(n),f9=(e,n,o,r)=>{ca(e).formatter.apply(n,o,r)},h9=(e,n,o,r,i)=>{ca(e).formatter.remove(n,o,r,i)},g9=(e,n,o,r)=>{ca(e).formatter.toggle(n,o,r)},p9=(e,n,o,r,i,u)=>ca(e).formatter.formatChanged(n,o,r,i,u),nI=(e,n)=>QS(e).editor.getContent(n),b9=(e,n,o)=>QS(e).editor.setContent(n,o),v9=(e,n,o)=>QS(e).editor.insertContent(n,o),y9=(e,n,o)=>ca(e).selection.getContent(n,o),oI=(e,n)=>ca(e).editor.addVisual(n),Nk=e=>ca(e).init.bindEvents(),wR=(e,n={})=>{const o=n.format?n.format:"html";return y9(e,o,n)},xR=e=>e.dom.length===0?(ns(e),V.none()):V.some(e),ER=(e,n)=>e.filter(o=>mu.isBookmarkNode(o.dom)).bind(n?zf:Fu),sI=(e,n,o,r,i)=>{const u=e.dom,h=n.dom,v=r?u.length:h.length;r?(W3(u,h,i,!1,!r),o.setStart(h,v)):(W3(h,u,i,!1,!r),o.setEnd(h,v))},rI=(e,n,o)=>{ai(e).each(r=>{const i=e.dom;n&&hS(r,Le(i,0),o)?ZT(i,0,o):!n&&Nv(r,Le(i,i.length),o)&&U3(i,i.length,o)})},Bk=(e,n,o,r,i)=>{e.bind(u=>((r?U3:ZT)(u.dom,r?u.dom.length:0,i),n.filter(kr).map(v=>sI(u,v,o,r,i)))).orThunk(()=>ER(n,r).or(n).filter(kr).map(h=>rI(h,r,i)))},aI=(e,n,o)=>{const r=V.from(n.firstChild).map(ie.fromDom),i=V.from(n.lastChild).map(ie.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(Fu).filter(kr).bind(xR),h=i.bind(zf).filter(kr).bind(xR);Bk(u,r,e,!0,o),Bk(h,i,e,!1,o),e.collapse(!1)},iI=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),cI=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),i=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...i,...n});return Kg({validate:!1},e.schema).serialize(u)}else return n.content},C9=(e,n,o={})=>{const r=iI(o,n);jS(e,r).each(i=>{const u=cI(e,i),h=e.selection.getRng();aI(h,h.createContextualFragment(u),e.schema),e.selection.setRng(h),Dv(e,h),GS(e,u,i)})},lI=(e,n,o)=>{if(un(e,n)){const r=an(e[n],i=>i!==o);r.length===0?delete e[n]:e[n]=r}};var Lk=(e,n)=>{let o,r;const i=(v,w)=>ps(w,k=>e.is(k,v)),u=v=>e.getParents(v,void 0,e.getRoot()),h=()=>{o={},r={},n.on("NodeChange",v=>{const w=v.element,k=u(w),P={};Tt(o,(I,F)=>{i(F,k).each(W=>{r[F]||(ye(I,X=>{X(!0,{node:W,selector:F,parents:k})}),r[F]=I),P[F]=I})}),Tt(r,(I,F)=>{P[F]||(delete r[F],ye(I,W=>{W(!1,{node:w,selector:F,parents:k})}))})})};return{selectorChangedWithUnbind:(v,w)=>(o||h(),o[v]||(o[v]=[]),o[v].push(w),i(v,u(n.selection.getStart())).each(()=>{r[v]=o[v]}),{unbind:()=>{lI(o,v,w),lI(r,v,w)}})}};const uI=e=>!!(e&&e.ownerDocument)&&xs(ie.fromDom(e.ownerDocument),ie.fromDom(e)),ew=e=>e?uI(e.startContainer)&&uI(e.endContainer):!1,dI=(e,n,o,r)=>{let i,u;const{selectorChangedWithUnbind:h}=Lk(e,r),v=(yt,Xt)=>{const co=e.createRng();Ee(yt)&&Ee(Xt)?(co.setStart(yt,Xt),co.setEnd(yt,Xt),Te(co),ce(!1)):(LC(e,co,r.getBody(),!0),Te(co))},w=yt=>wR(r,yt),k=(yt,Xt)=>C9(r,yt,Xt),P=yt=>i5(r.getBody(),be(),yt),I=yt=>c5(r.getBody(),be(),yt),F=(yt,Xt)=>Qs.getBookmark(yt,Xt),W=yt=>Qs.moveToBookmark(yt),X=(yt,Xt)=>(d5(e,yt,Xt).each(Te),yt),G=()=>{const yt=be(),Xt=pe();return!yt||yt.item?!1:yt.compareEndPoints?yt.compareEndPoints("StartToEnd",yt)===0:!Xt||yt.collapsed},ee=()=>{if(r.mode.isReadOnly())return!1;const yt=be(),Xt=r.getBody().querySelectorAll('[data-mce-selected="1"]');return Xt.length>0?ks(Xt,co=>e.isEditable(co.parentElement)):r5(e,yt)},ce=yt=>{const Xt=be();Xt.collapse(!!yt),Te(Xt)},pe=()=>n.getSelection?n.getSelection():n.document.selection,be=()=>{let yt;const Xt=(Pt,Qe,_t)=>{try{return Qe.compareBoundaryPoints(Pt,_t)}catch{return-1}},co=n.document;if(Ee(r.bookmark)&&!it(r)){const Pt=v3(r);if(Pt.isSome())return Pt.map(Qe=>FT(r,[Qe])[0]).getOr(co.createRange())}try{const Pt=pe();Pt&&!Gp(Pt.anchorNode)&&(Pt.rangeCount>0?yt=Pt.getRangeAt(0):yt=co.createRange(),yt=FT(r,[yt])[0])}catch{}if(yt||(yt=co.createRange()),Yp(yt.startContainer)&&yt.collapsed){const Pt=e.getRoot();yt.setStart(Pt,0),yt.setEnd(Pt,0)}return i&&u&&(Xt(yt.START_TO_START,yt,i)===0&&Xt(yt.END_TO_END,yt,i)===0?yt=u:(i=null,u=null)),yt},Te=(yt,Xt)=>{if(!ew(yt))return;const co=pe();if(yt=r.dispatch("SetSelectionRange",{range:yt,forward:Xt}).range,co){u=yt;try{co.removeAllRanges(),co.addRange(yt)}catch{}Xt===!1&&co.extend&&(co.collapse(yt.endContainer,yt.endOffset),co.extend(yt.startContainer,yt.startOffset)),i=co.rangeCount>0?co.getRangeAt(0):null}if(!yt.collapsed&&yt.startContainer===yt.endContainer&&(co!=null&&co.setBaseAndExtent)&&yt.endOffset-yt.startOffset<2&&yt.startContainer.hasChildNodes()){const Qe=yt.startContainer.childNodes[yt.startOffset];Qe&&Qe.nodeName==="IMG"&&(co.setBaseAndExtent(yt.startContainer,yt.startOffset,yt.endContainer,yt.endOffset),(co.anchorNode!==yt.startContainer||co.focusNode!==yt.endContainer)&&co.setBaseAndExtent(Qe,0,Qe,1))}r.dispatch("AfterSetSelectionRange",{range:yt,forward:Xt})},Ue=yt=>(k(e.getOuterHTML(yt)),yt),dt=()=>l5(r.getBody(),be()),Bt=(yt,Xt)=>u5(e,be(),yt,Xt),Fe=()=>{const yt=pe(),Xt=yt==null?void 0:yt.anchorNode,co=yt==null?void 0:yt.focusNode;if(!yt||!Xt||!co||Gp(Xt)||Gp(co))return!0;const Pt=e.createRng(),Qe=e.createRng();try{Pt.setStart(Xt,yt.anchorOffset),Pt.collapse(!0),Qe.setStart(co,yt.focusOffset),Qe.collapse(!0)}catch{return!0}return Pt.compareBoundaryPoints(Pt.START_TO_START,Qe)<=0},Js={dom:e,win:n,serializer:o,editor:r,expand:(yt={type:"word"})=>Te(Gg(e).expand(be(),yt)),collapse:ce,setCursorLocation:v,getContent:w,setContent:k,getBookmark:F,moveToBookmark:W,select:X,isCollapsed:G,isEditable:ee,isForward:Fe,setNode:Ue,getNode:dt,getSel:pe,setRng:Te,getRng:be,getStart:P,getEnd:I,getSelectedBlocks:Bt,normalize:()=>{const yt=be(),Xt=pe();if(!BN(Xt)&&Vg(r)){const co=lS(e,yt);return co.each(Pt=>{Te(Pt,Fe())}),co.getOr(yt)}return yt},selectorChanged:(yt,Xt)=>(h(yt,Xt),Js),selectorChangedWithUnbind:h,getScrollContainer:()=>{let yt,Xt=e.getRoot();for(;Xt&&Xt.nodeName!=="BODY";){if(Xt.scrollHeight>Xt.clientHeight){yt=Xt;break}Xt=Xt.parentNode}return yt},scrollIntoView:(yt,Xt)=>{Ee(yt)?s5(r,yt,Xt):Dv(r,be(),Xt)},placeCaretAt:(yt,Xt)=>Te(Q1(yt,Xt,r.getDoc())),getBoundingClientRect:()=>{const yt=be();return yt.collapsed?Le.fromRangeStart(yt).getClientRects()[0]:yt.getBoundingClientRect()},destroy:()=>{n=i=u=null,wa.destroy()}},Qs=mu(Js),wa=cf(Js,r);return Js.bookmarkManager=Qs,Js.controlSelection=wa,Js},S9=(e,n,o)=>{n.addNodeFilter("br",(r,i,u)=>{const h=Xe.extend({},o.getBlockElements()),v=o.getNonEmptyElements(),w=o.getWhitespaceElements();h.body=1;const k=P=>P.name in h||Zu(o,P);for(let P=0,I=r.length;P<I;P++){let F=r[P],W=F.parent;if(W&&k(W)&&F===W.lastChild){let X=F.prev;for(;X;){const G=X.name;if(G!=="span"||X.attr("data-mce-type")!=="bookmark"){G==="br"&&(F=null);break}X=X.prev}if(F&&(F.remove(),Nr(o,v,w,W))){const G=o.getElementRule(W.name);G&&(G.removeEmpty?W.remove():G.paddEmpty&&hO(e,u,k,W))}}else{let X=F;for(;W&&W.firstChild===X&&W.lastChild===X&&(X=W,!h[W.name]);)W=W.parent;if(X===W){const G=new tc("#text",3);G.value=br,F.replace(G)}}}})},w9=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,i)=>{let u=r.length;for(;u--;){const h=r[u];h.attr("tabindex",h.attr("data-mce-tabindex")),h.attr(i,null)}}),e.addAttributeFilter("src,href,style",(r,i)=>{const u="data-mce-"+i,h=n.url_converter,v=n.url_converter_scope;let w=r.length;for(;w--;){const k=r[w];let P=k.attr(u);P!==void 0?(k.attr(i,P.length>0?P:null),k.attr(u,null)):(P=k.attr(i),i==="style"?P=o.serializeStyle(o.parseStyle(P),k.name):h&&(P=h.call(v,P,i,k.name)),k.attr(i,P.length>0?P:null))}}),e.addAttributeFilter("class",r=>{let i=r.length;for(;i--;){const u=r[i];let h=u.attr("class");h&&(h=h.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",h.length>0?h:null))}}),e.addAttributeFilter("data-mce-type",(r,i,u)=>{let h=r.length;for(;h--;){const v=r[h];v.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(V.from(v.firstChild).exists(k=>{var P;return!O0((P=k.value)!==null&&P!==void 0?P:"")})?v.unwrap():v.remove())}}),e.addNodeFilter("script,style",(r,i)=>{var u;const h=w=>w.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let v=r.length;for(;v--;){const w=r[v],k=w.firstChild,P=(u=k==null?void 0:k.value)!==null&&u!==void 0?u:"";if(i==="script"){const I=w.attr("type");I&&w.attr("type",I==="mce-no/type"?null:I.replace(/^mce\-/,"")),n.element_format==="xhtml"&&k&&P.length>0&&(k.value=`// <![CDATA[
`+h(P)+`
// ]]>`)}else n.element_format==="xhtml"&&k&&P.length>0&&(k.value=`<!--
`+h(P)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let i=r.length;for(;i--;){const u=r[i],h=u.value;n.preserve_cdata&&(h==null?void 0:h.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(h.replace(/^\[CDATA\[|\]\]$/g,""))):(h==null?void 0:h.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(h).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,i)=>{let u=r.length;for(;u--;){const h=r[u];h.type===7?h.remove():h.type===1&&i==="input"&&!h.attr("type")&&h.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{ye(r,i=>{i.attr("data-mce-type")==="format-caret"&&(i.isEmpty(e.schema.getNonEmptyElements())?i.remove():i.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,i)=>{let u=r.length;for(;u--;)r[u].attr(i,null)}),n.remove_trailing_brs&&S9(n,e,e.schema)},x9=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},mI=(e,n,o)=>{let r;const i=e.dom;let u=n.cloneNode(!0);const h=document.implementation;if(h.createHTMLDocument){const v=h.createHTMLDocument("");Xe.each(u.nodeName==="BODY"?u.childNodes:[u],w=>{v.body.appendChild(v.importNode(w,!0))}),u.nodeName!=="BODY"?u=v.body.firstChild:u=v.body,r=i.doc,i.doc=v}return U0(e,{...o,node:u}),r&&(i.doc=r),u},fI=(e,n)=>Ee(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,E9=(e,n,o)=>fI(e,o)?mI(e,n,o):n,T9=(e,n,o)=>{Xe.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,i)=>{let u=r.length;for(;u--;)r[u].attr(i,null)}),n.push(o))},k9=(e,n,o)=>!n.no_events&&e?X2(e,{...n,content:o}).content:o,_9=(e,n,o)=>{const r=Qi(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||qm(ie.fromDom(n))?r:Xe.trim(r)},A9=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,i=e.parse(n,r);return x9(i),i},hI=(e,n,o)=>Kg(e,n).serialize(o),NY=(e,n,o,r,i)=>{const u=hI(n,o,r);return k9(e,i,u)},O9=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},i=n&&n.dom?n.dom:rs.DOM,u=n&&n.schema?n.schema:Jd(r),h=Cm(r,u);w9(h,r,i);const v=(w,k={})=>{const P={format:"html",...k},I=E9(n,w,P),F=_9(i,I,P),W=A9(h,F,P);return P.format==="tree"?W:NY(n,r,u,W,P)};return{schema:u,addNodeFilter:h.addNodeFilter,addAttributeFilter:h.addAttributeFilter,serialize:v,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:je(T9,h,o),getTempAttrs:St(o),getNodeFilters:h.getNodeFilters,getAttributeFilters:h.getAttributeFilters,removeNodeFilter:h.removeNodeFilter,removeAttributeFilter:h.removeAttributeFilter}},gI=(e,n)=>{const o=O9(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},R9="html",D9=(e,n)=>({...e,format:n,get:!0,getInner:!0}),M9=(e,n={})=>{const o=n.format?n.format:R9,r=D9(n,o);return wL(e,r).fold(Uo,i=>{const u=nI(e,i);return xL(e,u,i)})},P9="html",N9=(e,n)=>({format:P9,...e,set:!0,content:n}),Ik=(e,n,o={})=>{const r=N9(o,n);return jS(e,r).map(i=>{const u=b9(e,i.content,i);return GS(e,u.html,i),u.content}).getOr(n)},B9="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),L9=[],I9="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),pI=[],bI=(e,n)=>{const o=an(n,r=>un(e,r));return Io(o)},BY=e=>{const n=bI(e,B9),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Io(n)},LY=e=>bI(e,L9),vI=(e,n)=>{const o=Xe.makeMap(e.plugins," "),i=an(n,u=>un(o,u));return Io(i)},F9=e=>vI(e,I9),IY=e=>vI(e,pI.map(n=>n.name)),$9=(e,n)=>{const o=BY(e),r=F9(n),i=r.length>0,u=o.length>0,h=n.theme==="mobile";if(i||u||h){const v=`
- `,w=h?`

Themes:${v}mobile`:"",k=i?`

Plugins:${v}${r.join(v)}`:"",P=u?`

Options:${v}${o.join(v)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+w+k+P)}},Xs=e=>ps(pI,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),TR=(e,n)=>{const o=LY(e),r=IY(n),i=r.length>0,u=o.length>0;if(i||u){const h=`
- `,v=i?`

Plugins:${h}${r.map(Xs).join(h)}`:"",w=u?`

Options:${h}${o.join(h)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+v+w)}},FY=(e,n)=>{$9(e,n),TR(e,n)},Fk=rs.DOM,H9=e=>{Fk.setStyle(e.id,"display",e.orgDisplay)},Mh=e=>V.from(e).each(n=>n.destroy()),$Y=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},HY=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),Fk.unbind(n,"submit reset",e.formEventDelegate))},Ja=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),i=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Ee(i==null?void 0:i.nextSibling)&&Fk.remove(i.nextSibling),Y2(e),e.editorManager.remove(e),!e.inline&&r&&H9(e),J2(e),Fk.remove(e.getContainer()),Mh(n),Mh(o),e.destroy()}},yI=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Mh(o),Mh(r)),HY(e),$Y(e),e.destroyed=!0}},tw=(()=>{const e={};return{add:(i,u)=>{e[i]=u},get:i=>e[i]?e[i]:{icons:{}},has:i=>un(e,i)}})(),Yv=ao.ModelManager,CI=(e,n)=>n.dom[e],nw=(e,n)=>parseInt(dc(n,e),10),z9=je(CI,"clientWidth"),kR=je(CI,"clientHeight"),U9=je(nw,"margin-top"),SI=je(nw,"margin-left"),wI=e=>e.dom.getBoundingClientRect(),_R=(e,n,o)=>{const r=z9(e),i=kR(e);return n>=0&&o>=0&&n<=r&&o<=i},xI=(e,n,o,r)=>{const i=wI(n),u=e?i.left+n.dom.clientLeft+SI(n):0,h=e?i.top+n.dom.clientTop+U9(n):0,v=o-u,w=r-h;return{x:v,y:w}},AR=(e,n,o)=>{const r=ie.fromDom(e.getBody()),i=e.inline?r:Jb(r),u=xI(e.inline,i,n,o);return _R(i,u.x,u.y)},W9=e=>V.from(e).map(ie.fromDom),Z9=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return W9(n).map(tu).getOr(!1)};var q9=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const el=e=>{const n=[],o=()=>{const F=e.theme;return F&&F.getNotificationManagerImpl?F.getNotificationManagerImpl():q9()},r=()=>V.from(n[0]),i=(F,W)=>F.type===W.type&&F.text===W.text&&!F.progressBar&&!F.timeout&&!W.progressBar&&!W.timeout,u=()=>{r().each(F=>{F.reposition()})},h=F=>{n.push(F)},v=F=>{Yr(n,W=>W===F).each(W=>{n.splice(W,1)})},w=(F,W=!0)=>e.removed||!Z9(e)?{}:(W&&e.dispatch("BeforeOpenNotification",{notification:F}),ps(n,X=>i(o().getArgs(X),F)).getOrThunk(()=>{e.editorManager.setActive(e);const X=o().open(F,()=>{v(X)},()=>ut(e));return h(X),u(),e.dispatch("OpenNotification",{notification:{...X}}),X})),k=()=>{r().each(F=>{o().close(F),v(F),u()})},P=St(n);return(F=>{F.on("SkinLoaded",()=>{const W=BA(F);W&&w({text:W,type:"warning",timeout:0},!1),u()}),F.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),F.on("remove",()=>{ye(n.slice(),W=>{o().close(W)})}),F.on("keydown",W=>{var X;const G=((X=W.key)===null||X===void 0?void 0:X.toLowerCase())==="f12"||W.keyCode===123;W.altKey&&G&&(W.preventDefault(),r().map(ee=>ie.fromDom(ee.getEl())).each(ee=>GC(ee)))})})(e),{open:w,close:k,getNotifications:P}},Jv=ao.PluginManager,db=ao.ThemeManager;var j9=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const EI=e=>{let n=[];const o=()=>{const G=e.theme;return G&&G.getWindowManagerImpl?G.getWindowManagerImpl():j9()},r=(G,ee)=>(...ce)=>ee?ee.apply(G,ce):void 0,i=G=>{e.dispatch("OpenWindow",{dialog:G})},u=G=>{e.dispatch("CloseWindow",{dialog:G})},h=G=>{n.push(G),i(G)},v=G=>{u(G),n=an(n,ee=>ee!==G),n.length===0&&e.focus()},w=()=>V.from(n[n.length-1]),k=G=>{e.editorManager.setActive(e),Av(e),e.ui.show();const ee=G();return h(ee),ee},P=(G,ee)=>k(()=>o().open(G,ee,v)),I=G=>k(()=>o().openUrl(G,v)),F=(G,ee,ce)=>{const pe=o();pe.alert(G,r(ce||pe,ee))},W=(G,ee,ce)=>{const pe=o();pe.confirm(G,r(ce||pe,ee))},X=()=>{w().each(G=>{o().close(G),v(G)})};return e.on("remove",()=>{ye(n,G=>{o().close(G)})}),{open:P,openUrl:I,alert:F,confirm:W,close:X}},TI=(e,n)=>{e.notificationManager.open({type:"error",text:n})},ow=(e,n)=>{e._skinLoaded?TI(e,n):e.on("SkinLoaded",()=>{TI(e,n)})},G9=(e,n)=>{ow(e,Mi.translate(["Failed to upload image: {0}",n]))},sw=(e,n,o)=>{rm(e,n,{message:o}),console.error(o)},rw=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,$k=(e,n,o)=>{sw(e,"PluginLoadError",rw("plugin",n,o))},K9=(e,n,o)=>{sw(e,"IconsLoadError",rw("icons",n,o))},X9=(e,n,o)=>{sw(e,"LanguageLoadError",rw("language",n,o))},kI=(e,n,o)=>{sw(e,"ThemeLoadError",rw("theme",n,o))},OR=(e,n,o)=>{sw(e,"ModelLoadError",rw("model",n,o))},Y9=(e,n,o)=>{const r=Mi.translate(["Failed to initialize plugin: {0}",n]);rm(e,"PluginLoadError",{message:r}),Hk(r,o),ow(e,r)},Hk=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},VY=e=>{V.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},RR=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},aw=(e,n)=>{RR(e,"StyleWithCSS",n),RR(e,"enableInlineTableEditing",n),RR(e,"enableObjectResizing",n)},_I=e=>{e.selection.setRng(e.selection.getRng())},DR=(e,n,o)=>{Hp(e,n)&&!o?Ff(e,n):o&&Iu(e,n)},AI=e=>{const n=ie.fromDom(e.getBody());DR(n,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),VY(e)},MR=e=>{const n=ie.fromDom(e.getBody());DR(n,"mce-content-readonly",!1),e.hasEditableRoot()&&uo(n,!0),aw(e,!1),ut(e)&&e.focus(),_I(e),e.nodeChanged()},Ph=e=>ef(e),mb="data-mce-contenteditable",J9=e=>{ye(Wa(e,'*[contenteditable="true"]'),n=>{zr(n,mb,"true"),uo(n,!1)})},Q9=e=>{ye(Wa(e,`*[${mb}="true"]`),n=>{cs(n,mb),uo(n,!0)})},PR=(e,n)=>{const o=ie.fromDom(e.getBody());n?(AI(e),uo(o,!1),J9(o)):(Q9(o),MR(e))},eU=e=>{e.serializer?OI(e):e.on("PreInit",()=>{OI(e)})},OI=e=>{e.parser.addAttributeFilter("contenteditable",n=>{Ph(e)&&ye(n,o=>{o.attr(mb,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(mb,n=>{Ph(e)&&ye(n,o=>{o.attr("contenteditable",o.attr(mb))})}),e.serializer.addTempAttr(mb)},iw=e=>e.type==="click",RI=["copy"],DI=e=>yn(RI,e.type),tU=(e,n)=>Wt(n,"a",r=>oo(r,ie.fromDom(e.getBody()))).bind(r=>Vc(r,"href")),nU=(e,n)=>{if(iw(n)&&!ze.metaKeyPressed(n)){const o=ie.fromDom(n.target);tU(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const i=e.dom.select(`${r},[name="${Du(r,"#")}"]`);i.length&&e.selection.scrollIntoView(i[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else DI(n)&&e.dispatch(n.type,n)},oU=e=>{e.on("ShowCaret ObjectSelected",n=>{Ph(e)&&n.preventDefault()}),e.on("DisabledStateChange",n=>{n.isDefaultPrevented()||PR(e,n.state)})},MI=e=>{eU(e),oU(e)},sU=e=>/^[a-z0-9\-]+$/i.test(e),NR=e=>"content/"+e+"/content.css",rU=e=>tinymce.Resource.has(NR(e)),aU=e=>gd(e,_E(e)),zY=e=>gd(e,AE(e)),gd=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",i=`content${e.editorManager.suffix}.css`;return Cn(n,u=>rU(u)?u:sU(u)&&!e.inline?`${o}/${u}/${i}`:e.documentBaseURI.toAbsolute(u))},BR=e=>{e.contentCSS=e.contentCSS.concat(aU(e),zY(e))},iU=e=>e?Jr(e.getElementsByTagName("img")):[],cU=(e,n)=>{const o={};return{findAll:(i,u=Ot)=>{const h=an(iU(i),w=>{const k=w.src;return w.hasAttribute("data-mce-bogus")||w.hasAttribute("data-mce-placeholder")||!k||k===zt.transparentSrc?!1:$s(k,"blob:")?!e.isUploaded(k)&&u(w):$s(k,"data:")?u(w):!1}),v=Cn(h,w=>{const k=w.src;if(un(o,k))return o[k].then(P=>Y(P)?P:{image:w,blobInfo:P.blobInfo});{const P=sb(n,k).then(I=>(delete o[k],{image:w,blobInfo:I})).catch(I=>(delete o[k],I));return o[k]=P,P}});return Promise.all(v)}}},PI=()=>{let o={};const r=(F,W)=>({status:F,resultUri:W}),i=F=>F in o;return{hasBlobUri:i,getResultUri:F=>{const W=o[F];return W?W.resultUri:null},isPending:F=>i(F)?o[F].status===1:!1,isUploaded:F=>i(F)?o[F].status===2:!1,markPending:F=>{o[F]=r(1,null)},markUploaded:(F,W)=>{o[F]=r(2,W)},removeFailed:F=>{delete o[F]},destroy:()=>{o={}}}};let lU=0;const Hn=()=>{const e=()=>Math.round(k0()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},uU=e=>e+lU+++Hn(),cw=()=>{let e=[];const n=I=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[I.toLowerCase()]||"dat",o=(I,F,W,X,G)=>{if(Y(I))return r({id:I,name:X,filename:G,blob:F,base64:W});if(we(I))return r(I);throw new Error("Unknown input type")},r=I=>{if(!I.blob||!I.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const F=I.id||uU("blobid"),W=I.name||F,X=I.blob;return{id:St(F),name:St(W),filename:St(I.filename||W+"."+n(X.type)),blob:St(X),base64:St(I.base64),blobUri:St(I.blobUri||URL.createObjectURL(X)),uri:St(I.uri)}},i=I=>{h(I.id())||e.push(I)},u=I=>ps(e,I).getOrUndefined(),h=I=>u(F=>F.id()===I);return{create:o,add:i,get:h,getByUri:I=>u(F=>F.blobUri()===I),getByData:(I,F)=>u(W=>W.base64()===I&&W.blob().type===F),findFirst:u,removeByUri:I=>{e=an(e,F=>F.blobUri()===I?(URL.revokeObjectURL(F.blobUri()),!1):!0)},destroy:()=>{ye(e,I=>{URL.revokeObjectURL(I.blobUri())}),e=[]}}},dU=(e,n)=>{const o={},r=(G,ee)=>G?G.replace(/\/$/,"")+"/"+ee.replace(/^\//,""):ee,i=(G,ee)=>new Promise((ce,pe)=>{const be=new XMLHttpRequest;be.open("POST",n.url),be.withCredentials=n.credentials,be.upload.onprogress=Ue=>{ee(Ue.loaded/Ue.total*100)},be.onerror=()=>{pe("Image upload failed due to a XHR Transport error. Code: "+be.status)},be.onload=()=>{if(be.status<200||be.status>=300){pe("HTTP Error: "+be.status);return}const Ue=JSON.parse(be.responseText);if(!Ue||!Y(Ue.location)){pe("Invalid JSON: "+be.responseText);return}ce(r(n.basePath,Ue.location))};const Te=new FormData;Te.append("file",G.blob(),G.filename()),be.send(Te)}),u=le(n.handler)?n.handler:i,h=()=>new Promise(G=>{G([])}),v=(G,ee)=>({url:ee,blobInfo:G,status:!0}),w=(G,ee)=>({url:"",blobInfo:G,status:!1,error:ee}),k=(G,ee)=>{Xe.each(o[G],ce=>{ce(ee)}),delete o[G]},P=(G,ee,ce)=>(e.markPending(G.blobUri()),new Promise(pe=>{let be,Te;try{const Ue=()=>{be&&(be.close(),Te=Ft)},dt=Fe=>{Ue(),e.markUploaded(G.blobUri(),Fe),k(G.blobUri(),v(G,Fe)),pe(v(G,Fe))},Bt=Fe=>{Ue(),e.removeFailed(G.blobUri()),k(G.blobUri(),w(G,Fe)),pe(w(G,Fe))};Te=Fe=>{Fe<0||Fe>100||V.from(be).orThunk(()=>V.from(ce).map(gs)).each(Me=>{be=Me,Me.progressBar.value(Fe)})},ee(G,Te).then(dt,Fe=>{Bt(Y(Fe)?{message:Fe}:Fe)})}catch(Ue){pe(w(G,Ue))}})),I=G=>G===i,F=G=>{const ee=G.blobUri();return new Promise(ce=>{o[ee]=o[ee]||[],o[ee].push(ce)})},W=(G,ee)=>(G=Xe.grep(G,ce=>!e.isUploaded(ce.blobUri())),Promise.all(Xe.map(G,ce=>e.isPending(ce.blobUri())?F(ce):P(ce,u,ee))));return{upload:(G,ee)=>!n.url&&I(u)?h():W(G,ee)}},NI=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),BI=(e,n)=>dU(n,{url:DA(e),basePath:MA(e),credentials:iC(e),handler:K0(e)}),LI=e=>{const n=PI(),o=BI(e,n);return{upload:(r,i=!0)=>o.upload(r,i?NI(e):void 0)}},fp=(e,n)=>e.dom.isEmpty(n.dom)&&Ee(e.schema.getTextBlockElements()[Rn(n)]),kc=e=>n=>{fp(e,n)&&ts(n,ie.fromHtml('<br data-mce-bogus="1" />'))},II=e=>{const n=cw();let o,r;const i=PI(),u=[],h=be=>Te=>e.selection?be(Te):[],v=be=>be+(be.indexOf("?")===-1?"?":"&")+new Date().getTime(),w=(be,Te,Ue)=>{let dt=0;do dt=be.indexOf(Te,dt),dt!==-1&&(be=be.substring(0,dt)+Ue+be.substr(dt+Te.length),dt+=Ue.length-Te.length+1);while(dt!==-1);return be},k=(be,Te,Ue)=>{const dt=`src="${Ue}"${Ue===zt.transparentSrc?' data-mce-placeholder="1"':""}`;return be=w(be,`src="${Te}"`,dt),be=w(be,'data-mce-src="'+Te+'"','data-mce-src="'+Ue+'"'),be},P=(be,Te)=>{ye(e.undoManager.data,Ue=>{Ue.type==="fragmented"?Ue.fragments=Cn(Ue.fragments,dt=>k(dt,be,Te)):Ue.content=k(Ue.content,be,Te)})},I=(be,Te)=>{const Ue=e.convertURL(Te,"src");P(be.src,Te),ua(ie.fromDom(be),{src:xE(e)?v(Te):Te,"data-mce-src":Ue})},F=()=>(o||(o=BI(e,i)),ee().then(h(be=>{const Te=Cn(be,Ue=>Ue.blobInfo);return o.upload(Te,NI(e)).then(h(Ue=>{const dt=[];let Bt=!1;const Fe=Cn(Ue,(Me,Ge)=>{const{blobInfo:kt,image:Kt}=be[Ge];let Nn=!1;return Me.status&&EE(e)?(Me.url&&!Fr(Kt.src,Me.url)&&(Bt=!0),n.removeByUri(Kt.src),df(e)||I(Kt,Me.url)):Me.error&&(Me.error.remove&&(P(Kt.src,zt.transparentSrc),dt.push(Kt),Nn=!0),G9(e,Me.error.message)),{element:Kt,status:Me.status,uploadUri:Me.url,blobInfo:kt,removed:Nn}});return dt.length>0&&!df(e)?e.undoManager.transact(()=>{ye(n0(dt),Me=>{const Ge=ai(Me);ns(Me),Ge.each(kc(e)),n.removeByUri(Me.dom.src)})}):Bt&&e.undoManager.dispatchChange(),Fe}))}))),W=()=>G0(e)?F():Promise.resolve([]),X=be=>ks(u,Te=>Te(be)),G=be=>{u.push(be)},ee=()=>(r||(r=cU(i,n)),r.findAll(e.getBody(),X).then(h(be=>{const Te=an(be,Ue=>Y(Ue)?(ow(e,Ue),!1):Ue.uriType!=="blob");return df(e)||ye(Te,Ue=>{P(Ue.image.src,Ue.blobInfo.blobUri()),Ue.image.src=Ue.blobInfo.blobUri(),Ue.image.removeAttribute("data-mce-src")}),Te}))),ce=()=>{n.destroy(),i.destroy(),r=o=null},pe=be=>be.replace(/src="(blob:[^"]+)"/g,(Te,Ue)=>{const dt=i.getResultUri(Ue);if(dt)return'src="'+dt+'"';let Bt=n.getByUri(Ue);return Bt||(Bt=as(e.editorManager.get(),(Fe,Me)=>Fe||Me.editorUpload&&Me.editorUpload.blobCache.getByUri(Ue),void 0)),Bt?'src="data:'+Bt.blob().type+";base64,"+Bt.base64()+'"':Te});return e.on("SetContent",()=>{G0(e)?W():ee()}),e.on("RawSaveContent",be=>{be.content=pe(be.content)}),e.on("GetContent",be=>{be.source_view||be.format==="raw"||be.format==="tree"||(be.content=pe(be.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",be=>{ye(be,Te=>{const Ue=Te.attr("src");if(!Ue||n.getByUri(Ue))return;const dt=i.getResultUri(Ue);dt&&Te.attr("src",dt)})})}),{blobCache:n,addFilter:G,uploadImages:F,uploadImagesAuto:W,scanForImages:ee,destroy:ce}},lw=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const i={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},h={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[h,i,u]:[i,h,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(i,u,h)=>qt(i)&&i.hasAttribute("href"),onformat:(i,u,h)=>{Xe.each(h,(v,w)=>{n.setAttrib(i,w,v)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":i=>{var u;return(u=i==null?void 0:i.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Xe.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),i=>{r[i]={block:i,remove:"all"}}),r},Nh={remove_similar:!0,inherit:!1},tl={selector:"td,th",...Nh},uw={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...tl},tablecellverticalalign:{styles:{"vertical-align":"%value"},...tl},tablecellbordercolor:{styles:{borderColor:"%value"},...tl},tablecellclass:{classes:["%value"],...tl},tableclass:{selector:"table",classes:["%value"],...Nh},tablecellborderstyle:{styles:{borderStyle:"%value"},...tl},tablecellborderwidth:{styles:{borderWidth:"%value"},...tl}},LR=St(uw),IR=e=>{const n={},o=h=>Ee(h)?n[h]:n,r=h=>un(n,h),i=(h,v)=>{h&&(Y(h)?(lt(v)||(v=[v]),ye(v,w=>{rn(w.deep)&&(w.deep=!qc(w)),rn(w.split)&&(w.split=!qc(w)||Dr(w)),rn(w.remove)&&qc(w)&&!Dr(w)&&(w.remove="none"),qc(w)&&Dr(w)&&(w.mixed=!0,w.block_expand=!0),Y(w.classes)&&(w.classes=w.classes.split(/\s+/))}),n[h]=v):Tt(h,(w,k)=>{i(k,w)}))},u=h=>(h&&n[h]&&delete n[h],n);return i(lw(e)),i(LR()),i(FA(e)),{get:o,has:r,register:i,unregister:u}},dw=Xe.each,Dl=rs.DOM,FR=e=>Ee(e)&&we(e),FI=(e,n)=>{const o=n&&n.schema||Jd({}),r=(w,k)=>{k.classes.length>0&&Dl.addClass(w,k.classes.join(" ")),Dl.setAttribs(w,k.attrs)},i=w=>{const k=Y(w)?{name:w,classes:[],attrs:{}}:w,P=Dl.create(k.name);return r(P,k),P},u=(w,k)=>{const P=o.getElementRule(w.nodeName.toLowerCase()),I=P==null?void 0:P.parentsRequired;return I&&I.length?k&&yn(I,k)?k:I[0]:!1},h=(w,k,P)=>{let I;const F=k[0],W=FR(F)?F.name:void 0,X=u(w,W);if(X)W===X?(I=F,k=k.slice(1)):I=X;else if(F)I=F,k=k.slice(1);else if(!P)return w;const G=I?i(I):Dl.create("div");G.appendChild(w),P&&Xe.each(P,ce=>{const pe=i(ce);G.insertBefore(pe,w)});const ee=FR(I)?I.siblings:void 0;return h(G,k,ee)},v=Dl.create("div");if(e.length>0){const w=e[0],k=i(w),P=FR(w)?w.siblings:void 0;v.appendChild(h(k,e.slice(1),P))}return v},$I=e=>{e=Xe.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,i,u,h,v)=>{switch(i){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Xe.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(h==="["){const w=v.match(/([\w\-]+)(?:\=\"([^\"]+))?/);w&&(o.attrs[w[1]]=w[2])}return""})),o.name=n||"div",o},HI=e=>Y(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Xe.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Xe.map(n.split(/(?:~\+|~|\+)/),$I),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],VI=(e,n)=>{let o="",r=$A(e);if(r==="")return"";const i=F=>Y(F)?F.replace(/%(\w+)/g,""):"",u=(F,W)=>Dl.getStyle(W??e.getBody(),F,!0);if(Y(n)){const F=e.formatter.get(n);if(!F)return"";n=F[0]}if("preview"in n){const F=n.preview;if(F===!1)return"";r=F||r}let h=n.block||n.inline||"span",v;const w=HI(n.selector);w.length>0?(w[0].name||(w[0].name=h),h=n.selector,v=FI(w,e)):v=FI([h],e);const k=Dl.select(h,v)[0]||v.firstChild;dw(n.styles,(F,W)=>{const X=i(F);X&&Dl.setStyle(k,W,X)}),dw(n.attributes,(F,W)=>{const X=i(F);X&&Dl.setAttrib(k,W,X)}),dw(n.classes,F=>{const W=i(F);Dl.hasClass(k,W)||Dl.addClass(k,W)}),e.dispatch("PreviewFormats"),Dl.setStyles(v,{position:"absolute",left:-65535}),e.getBody().appendChild(v);const P=u("fontSize"),I=/px$/.test(P)?parseInt(P,10):0;return dw(r.split(" "),F=>{let W=u(F,k);if(!(F==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(W)&&(W=u(F),mg(W).toLowerCase()==="#ffffff"))&&!(F==="color"&&mg(W).toLowerCase()==="#000000")){if(F==="font-size"&&/em|%$/.test(W)){if(I===0)return;W=parseFloat(W)/(/%$/.test(W)?100:1)*I+"px"}F==="border"&&W&&(o+="padding:0 2px;"),o+=F+":"+W+";"}}),e.dispatch("AfterPreviewFormats"),Dl.remove(v),o},zI=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},Vk=e=>{const n=IR(e),o=Ko({});return zI(e),hu(e),df(e)||az(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,i,u)=>{f9(e,r,i,u)},remove:(r,i,u,h)=>{h9(e,r,i,u,h)},toggle:(r,i,u)=>{g9(e,r,i,u)},match:(r,i,u,h)=>SR(e,r,i,u,h),closest:r=>m9(e,r),matchAll:(r,i)=>QL(e,r,i),matchNode:(r,i,u,h)=>eI(e,r,i,u,h),canApply:r=>tI(e,r),formatChanged:(r,i,u,h)=>p9(e,o,r,i,u,h),getCssText:je(VI,e)}},mU=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},fU=(e,n,o)=>{const r=Ko(!1),i=w=>{Rk(n,!1,o),n.add({},w)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",w=>{const k=w.command;mU(k)||(qL(n,o),n.beforeChange())}),e.on("ExecCommand",w=>{const k=w.command;mU(k)||i(w)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",i),e.on("dragend",i),e.on("keyup",w=>{const k=w.keyCode;if(w.isDefaultPrevented())return;const P=zt.os.isMacOS()&&w.key==="Meta";(k>=33&&k<=36||k>=37&&k<=40||k===45||w.ctrlKey||P)&&(i(),e.nodeChanged()),(k===46||k===8)&&e.nodeChanged(),r.get()&&n.typing&&!gR(Ak(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",w=>{const k=w.keyCode;if(w.isDefaultPrevented())return;if(k>=33&&k<=36||k>=37&&k<=40||k===45){n.typing&&i(w);return}const P=w.ctrlKey&&!w.altKey||w.metaKey;if((k<16||k>20)&&k!==224&&k!==91&&!n.typing&&!P){n.beforeChange(),Rk(n,!0,o),n.add({},w),r.set(!0);return}(zt.os.isMacOS()?w.metaKey:w.ctrlKey&&!w.altKey)&&n.beforeChange()}),e.on("mousedown",w=>{n.typing&&i(w)});const u=w=>w.inputType==="insertReplacementText",h=w=>w.inputType==="insertText"&&w.data===null,v=w=>w.inputType==="insertFromPaste"||w.inputType==="insertFromDrop";e.on("input",w=>{w.inputType&&(u(w)||h(w)||v(w))&&i(w)}),e.on("AddUndo Undo Redo ClearUndos",w=>{w.isDefaultPrevented()||e.nodeChanged()})},UY=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},UI=e=>{const n=gc(),o=Ko(0),r=Ko(0),i={data:[],typing:!1,beforeChange:()=>{YL(e,o,n)},add:(u,h)=>c9(e,i,r,o,n,u,h),dispatchChange:()=>{e.setDirty(!0);const u=Ak(e);u.bookmark=Vo(e.selection),e.dispatch("change",{level:u,lastLevel:Vl(i.data,r.get()).getOrUndefined()})},undo:()=>vR(e,i,o,r),redo:()=>yR(e,r,i.data),clear:()=>{l9(e,i,r)},reset:()=>{u9(e,i)},hasUndo:()=>JL(e,i,r),hasRedo:()=>Sm(e,i,r),transact:u=>CR(e,i,o,u),ignore:u=>{d9(e,o,u)},extra:(u,h)=>{Pk(e,i,r,u,h)}};return df(e)||fU(e,i,o),UY(e),i},hU=[9,27,ze.HOME,ze.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ze.DOWN,ze.UP,ze.LEFT,ze.RIGHT].concat(zt.browser.isFirefox()?[224]:[]),wm="data-mce-placeholder",gU=e=>e.type==="keydown"||e.type==="keyup",pU=e=>{const n=e.keyCode;return n===ze.BACKSPACE||n===ze.DELETE},bU=e=>{if(gU(e)){const n=e.keyCode;return!pU(e)&&(ze.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||yn(hU,n))}else return!1},mw=e=>gU(e)&&!(pU(e)||e.type==="keyup"&&e.keyCode===229),vU=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},WI=e=>{var n;const o=e.dom,r=Rr(e),i=(n=cC(e))!==null&&n!==void 0?n:"",u=(h,v)=>{if(bU(h))return;const w=e.getBody(),k=mw(h)?!1:vU(o,w,r);(o.getAttrib(w,wm)!==""!==k||v)&&(o.setAttrib(w,wm,k?i:null),TA(e,k),e.on(k?"keydown":"keyup",u),e.off(k?"keyup":"keydown",u))};Fo(i)&&e.on("init",h=>{u(h,!0),e.on("change SetContent ExecCommand",u),e.on("paste",v=>Nt.setEditorTimeout(e,()=>u(v)))})},ZI=(e,n)=>({block:e,position:n}),qI=(e,n)=>({from:e,to:n}),$R=(e,n)=>{const o=ie.fromDom(e),r=ie.fromDom(n.container());return GT(o,r).map(i=>ZI(i,n))},yU=e=>!(xs(e.to.block,e.from.block)||xs(e.from.block,e.to.block)),hp=e=>!oo(e.from.block,e.to.block),jI=(e,n)=>bs(n,i=>Ji(i)||li(i.dom),i=>oo(i,e)).filter(es).getOr(e),CU=(e,n)=>{const o=ie.fromDom(e);return oo(jI(o,n.from.block),jI(o,n.to.block))},SU=e=>ls(e.from.block.dom)===!1&&ls(e.to.block.dom)===!1,wU=e=>{const n=o=>P2(o)||i2(o.dom)||Eg(o);return n(e.from.block)&&n(e.to.block)},xU=(e,n,o,r)=>Go(r.position.getNode())&&!Ws(e,r.block)?wl(!1,r.block.dom).bind(i=>i.isEqual(r.position)?wc(o,n,i).bind(u=>$R(n,u)):V.some(r)).getOr(r):r,EU=(e,n,o,r)=>{const i=$R(n,Le.fromRangeStart(r)),u=i.bind(h=>wc(o,n,h.position).bind(v=>$R(n,v).map(w=>xU(e,n,o,w))));return Ns(i,u,qI).filter(h=>hp(h)&&CU(n,h)&&SU(h)&&wU(h)&&yU(h))},TU=(e,n,o,r)=>r.collapsed?EU(e,n,o,r):V.none(),kU=(e,n)=>{const o=Ur(e);return Yr(o,r=>n.isBlock(Rn(r))).fold(St(o),r=>o.slice(0,r))},GI=(e,n)=>{const o=kU(e,n);return ye(o,ns),o},fw=(e,n,o)=>{const r=Ah(o,n);return ps(r.reverse(),i=>Ws(e,i)).each(ns)},_U=(e,n)=>an(ki(n),o=>!Ws(e,o)).length===0,AU=(e,n,o,r,i)=>{if(Ws(r,o))return jm(o),Sr(o.dom);_U(r,i)&&Ws(r,n)&&Us(i,ie.fromTag("br"));const u=ia(o.dom,Le.before(i.dom));return ye(GI(n,r),h=>{Us(i,h)}),fw(r,e,n),u},WY=(e,n)=>e.isInline(Rn(n)),hw=(e,n,o,r)=>{if(Ws(r,o)){if(Ws(r,n)){const h=Bc((v=>{const w=(k,P)=>uc(k).fold(()=>P,I=>WY(r,I)?w(I,P.concat(Qu(I))):P);return w(v,[])})(o),(v,w)=>(rg(v,w),w),Tg());dl(n),ts(n,h)}return ns(o),Sr(n.dom)}const i=xl(o.dom);return ye(GI(n,r),u=>{ts(o,u)}),fw(r,e,n),i},OU=(e,n)=>{const o=Ah(n,e);return V.from(o[o.length-1])},HR=(e,n)=>xs(n,e)?OU(n,e):V.none(),KI=(e,n)=>{wl(e,n.dom).bind(o=>V.from(o.getNode())).map(ie.fromDom).filter(js).each(ns)},XI=(e,n,o,r)=>(KI(!0,n),KI(!1,o),HR(n,o).fold(je(hw,e,n,o,r),je(AU,e,n,o,r))),YI=(e,n,o,r,i)=>n?XI(e,r,o,i):XI(e,o,r,i),VR=(e,n)=>{const o=ie.fromDom(e.getBody());return TU(e.schema,o.dom,n,e.selection.getRng()).map(i=>()=>{YI(o,n,i.from.block,i.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},fb=(e,n,o)=>{const r=n.getRng();return Ns(GT(e,ie.fromDom(r.startContainer)),GT(e,ie.fromDom(r.endContainer)),(i,u)=>oo(i,u)?V.none():V.some(()=>{r.deleteContents(),YI(e,!0,i,u,o).each(h=>{n.setRng(h.toRange())})})).getOr(V.none())},gp=(e,n)=>{const o=ie.fromDom(n),r=je(oo,e);return ul(o,Ji,r).isSome()},zk=(e,n)=>gp(e,n.startContainer)||gp(e,n.endContainer),Uk=(e,n)=>{const o=ia(e.dom,Le.fromRangeStart(n)).isNone(),r=pa(e.dom,Le.fromRangeEnd(n)).isNone();return!zk(e,n)&&o&&r},hb=e=>V.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),gb=e=>{const n=ie.fromDom(e.getBody()),o=e.selection.getRng();return Uk(n,o)?hb(e):fb(n,e.selection,e.schema)},Qv=(e,n)=>e.selection.isCollapsed()?V.none():gb(e),pd=(e,n,o,r,i)=>V.from(n._selectionOverrides.showCaret(e,o,r,i)),JI=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},pb=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?V.none():V.some(JI(n)),zR=(e,n,o)=>{const r=KE(1,e.getBody(),n),i=Le.fromRangeStart(r),u=i.getNode();if(I1(u))return pd(1,e,u,!i.isAtEnd(),!1);const h=i.getNode(!0);if(I1(h))return pd(1,e,h,!1,!1);const v=md(e.dom.getRoot(),i.getNode());return I1(v)?pd(1,e,v,!1,o):V.none()},Wk=(e,n,o)=>n.collapsed?zR(e,n,o).getOr(n):n,QI=e=>Yg(e)||eb(e),ey=e=>Jg(e)||fS(e),e6=(e,n)=>{We(n)&&n.data.length===0&&e.remove(n)},UR=(e,n,o,r,i,u)=>{pd(r,e,u.getNode(!i),i,!0).each(h=>{if(n.collapsed){const v=n.cloneRange();i?v.setEnd(h.startContainer,h.startOffset):v.setStart(h.endContainer,h.endOffset),v.deleteContents()}else n.deleteContents();e.selection.setRng(h)}),e6(e.dom,o)},t6=(e,n)=>{const o=e.selection.getRng();if(!We(o.commonAncestorContainer))return V.none();const r=n?1:-1,i=Sc(e.getBody()),u=je(V1,n?i.next:i.prev),h=n?QI:ey,v=H1(r,e.getBody(),o),w=u(v),k=w&&fu(n,w);if(!k||!lv(v,k))return V.none();if(h(k))return V.some(()=>UR(e,o,v.getNode(),r,n,k));const P=u(k);return P&&h(P)&&lv(k,P)?V.some(()=>UR(e,o,v.getNode(),r,n,P)):V.none()},ty=(e,n)=>t6(e,n),Zk=(e,n)=>{const o=e.getBody();return n?Sr(o).filter(Yg):xl(o).filter(Jg)},qk=e=>{const n=e.selection.getRng();return!n.collapsed&&(Zk(e,!0).exists(o=>o.isEqual(Le.fromRangeStart(n)))||Zk(e,!1).exists(o=>o.isEqual(Le.fromRangeEnd(n))))},n6=e=>Ee(e)&&(Ji(ie.fromDom(e))||Eg(ie.fromDom(e))),nl=ur.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Bh=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return qt(o)&&o.getAttribute("data-mce-caret")===r},pp=(e,n,o,r,i)=>{const u=h=>i.isInline(h.nodeName.toLowerCase())&&!Cl(o,r,e);return XE(!n,o).fold(()=>XE(n,r).fold(qe,u),u)},pu=(e,n,o,r,i)=>{const u=i.getNode(!o);return GT(ie.fromDom(n),ie.fromDom(r.getNode())).map(h=>Ws(e,h)?nl.remove(h.dom):nl.moveToElement(u)).orThunk(()=>V.some(nl.moveToElement(u)))},o6=(e,n,o,r)=>wc(n,e,o).bind(i=>n6(i.getNode())||pp(e,n,o,i,r)?V.none():n&&ls(i.getNode())||!n&&ls(i.getNode(!0))?pu(r,e,n,o,i):n&&Jg(o)||!n&&Yg(o)?V.some(nl.moveToPosition(i)):V.none()),RU=(e,n)=>ln(n)?V.none():e&&ls(n.nextSibling)?V.some(nl.moveToElement(n.nextSibling)):!e&&ls(n.previousSibling)?V.some(nl.moveToElement(n.previousSibling)):V.none(),DU=(e,n,o)=>o.fold(r=>V.some(nl.remove(r)),r=>V.some(nl.moveToElement(r)),r=>Cl(n,r,e)?V.none():V.some(nl.moveToPosition(r))),MU=(e,n,o,r)=>Bh(n,o)?RU(n,o.getNode(!n)).orThunk(()=>o6(e,n,o,r)):o6(e,n,o,r).bind(i=>DU(e,o,i)),PU=(e,n,o,r)=>{const i=KE(n?1:-1,e,o),u=Le.fromRangeStart(i),h=ie.fromDom(e);return!n&&Jg(u)?V.some(nl.remove(u.getNode(!0))):n&&Yg(u)?V.some(nl.remove(u.getNode())):!n&&Yg(u)&&UT(h,u,r)?F5(h,u,r).map(v=>nl.remove(v.getNode())):n&&Jg(u)&&gn(h,u,r)?oV(h,u,r).map(v=>nl.remove(v.getNode())):MU(e,n,u,r)},NU=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),tb(e,n,ie.fromDom(o)),!0),BU=(e,n)=>o=>{const r=n?Le.before(o):Le.after(o);return e.selection.setRng(r.toRange()),!0},LU=e=>n=>(e.selection.setRng(n.toRange()),!0),s6=(e,n)=>V.from(md(e.getBody(),n)),IU=(e,n)=>{const o=e.selection.getNode();return s6(e,o).filter(ls).fold(()=>PU(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(NU(e,n),BU(e,n),LU(e))),()=>V.some(Ft))},FU=e=>{ye(Wa(e,".mce-offscreen-selection"),ns)},$U=(e,n)=>{const o=e.selection.getNode();return ls(o)&&!os(o)?s6(e,o.parentNode).filter(ls).fold(()=>V.some(()=>{FU(ie.fromDom(e.getBody())),tb(e,n,ie.fromDom(e.selection.getNode())),tp(e)}),()=>V.some(Ft)):qk(e)?V.some(()=>{To(e,e.selection.getRng(),ie.fromDom(e.getBody()))}):V.none()},jk=e=>{const n=e.dom,o=e.selection,r=md(e.getBody(),o.getNode());if(li(r)&&n.isBlock(r)&&n.isEmpty(r)){const i=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(i),o.setRng(Le.before(i).toRange())}return!0},gw=(e,n)=>e.selection.isCollapsed()?IU(e,n):$U(e,n),WR=e=>e.hasOwnProperty("text"),r6=e=>e.hasOwnProperty("marker"),a6=(e,n)=>{const o=(u,h)=>{if(We(u))return{text:u,offset:h};{const v=n(),w=u.childNodes;return h<w.length?(u.insertBefore(v,w[h]),{marker:v,before:!0}):(u.appendChild(v),{marker:v,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},ZR=e=>{var n,o;const{start:r,end:i}=e,u=new window.Range;return WR(r)?u.setStart(r.text,r.offset):r6(r)&&(r.before?u.setStartBefore(r.marker):u.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),WR(i)?u.setEnd(i.text,i.offset):r6(i)&&(i.before?u.setEndBefore(i.marker):u.setEndAfter(i.marker),(o=i.marker.parentNode)===null||o===void 0||o.removeChild(i.marker)),u},Gk=(e,n)=>{var o;const r=e.dom,i=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),h=e.getBody();if(((o=i==null?void 0:i.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&i&&u&&i===h.firstChild&&u===h.lastChild&&!r.isEmpty(h)){const w=i.cloneNode(!1),k=()=>{if(n?Cs(e):qT(e),h.firstChild!==i){const P=a6(e.selection.getRng(),()=>document.createElement("span"));Array.from(h.childNodes).forEach(I=>w.appendChild(I)),h.appendChild(w),e.selection.setRng(ZR(P))}};return V.some(k)}return V.none()},qR=(e,n)=>{const o=Le.fromRangeStart(e.selection.getRng());return wc(n,e.getBody(),o).filter(r=>n?P5(r):JH(r)).bind(r=>id(n?0:-1,r)).map(r=>()=>e.selection.select(r))},Kk=(e,n)=>e.selection.isCollapsed()?qR(e,n):V.none(),bb=We,Xk=e=>bb(e)&&e.data[0]===Is,i6=e=>bb(e)&&e.data[e.data.length-1]===Is,c6=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Is)},mf=e=>{var n;if(bb(e.previousSibling))return i6(e.previousSibling)||e.previousSibling.appendData(Is),e.previousSibling;if(bb(e))return Xk(e)||e.insertData(0,Is),e;{const o=c6(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},bd=e=>{var n,o;if(bb(e.nextSibling))return Xk(e.nextSibling)||e.nextSibling.insertData(0,Is),e.nextSibling;if(bb(e))return i6(e)||e.appendData(Is),e;{const r=c6(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},vb=(e,n)=>e?mf(n):bd(n),l6=je(vb,!0),Yk=je(vb,!1),jR=(e,n)=>We(e.container())?vb(n,e.container()):vb(n,e.getNode()),GR=(e,n)=>{const o=n.get();return o&&e.container()===o&&vl(o)},Jk=(e,n)=>n.fold(o=>{hh(e.get());const r=l6(o);return e.set(r),V.some(Le(r,r.length-1))},o=>Sr(o).map(r=>{if(GR(r,e)){const i=e.get();return Le(i,1)}else{hh(e.get());const i=jR(r,!0);return e.set(i),Le(i,1)}}),o=>xl(o).map(r=>{if(GR(r,e)){const i=e.get();return Le(i,i.length-1)}else{hh(e.get());const i=jR(r,!1);return e.set(i),Le(i,i.length-1)}}),o=>{hh(e.get());const r=Yk(o);return e.set(r),V.some(Le(r,1))}),KR=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return V.none()},Vi=ur.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),XR=(e,n)=>{const o=ad(n,e);return o||e},Qk=(e,n,o)=>{const r=X5(o),i=XR(n,r.container());return jr(e,i,r).fold(()=>pa(i,r).bind(je(jr,e,i)).map(u=>Vi.before(u)),V.none)},YR=(e,n)=>Ch(e,n)===null,u6=(e,n,o)=>jr(e,n,o).filter(je(YR,n)),HU=(e,n,o)=>{const r=Y5(o);return u6(e,n,r).bind(i=>ia(i,r).isNone()?V.some(Vi.start(i)):V.none())},VU=(e,n,o)=>{const r=X5(o);return u6(e,n,r).bind(i=>pa(i,r).isNone()?V.some(Vi.end(i)):V.none())},zU=(e,n,o)=>{const r=Y5(o),i=XR(n,r.container());return jr(e,i,r).fold(()=>ia(i,r).bind(je(jr,e,i)).map(u=>Vi.after(u)),V.none)},JR=e=>!G3(QR(e)),ff=(e,n,o)=>KR([Qk,HU,VU,zU],[e,n,o]).filter(JR),QR=e=>e.fold(Uo,Uo,Uo,Uo),e4=e=>e.fold(St("before"),St("start"),St("end"),St("after")),t4=e=>e.fold(Vi.before,Vi.before,Vi.after,Vi.after),eD=e=>e.fold(Vi.start,Vi.start,Vi.end,Vi.end),UU=(e,n)=>e4(e)===e4(n)&&QR(e)===QR(n),WU=(e,n,o,r,i,u)=>Ns(jr(n,o,r),jr(n,o,i),(h,v)=>h!==v&&EV(o,h,v)?Vi.after(e?h:v):u).getOr(u),ZU=(e,n)=>e.fold(Ot,o=>!UU(o,n)),qU=(e,n,o,r,i)=>{const u=fu(e,i);return wc(e,o,u).map(je(fu,e)).fold(()=>r.map(t4),w=>ff(n,o,w).map(je(WU,e,n,o,u,w)).filter(je(ZU,r))).filter(JR)},jU=(e,n)=>e?n.fold(R(V.some,Vi.start),V.none,R(V.some,Vi.after),V.none):n.fold(V.none,R(V.some,Vi.before),V.none,R(V.some,Vi.end)),n4=(e,n,o,r)=>{const i=fu(e,r),u=ff(n,o,i);return ff(n,o,i).bind(je(jU,e)).orThunk(()=>qU(e,n,o,u,r))},tD=e=>le(e.selection.getSel().modify),d6=(e,n,o)=>{const r=e?1:-1;return n.setRng(Le(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},GU=(e,n)=>{const o=n.selection.getRng(),r=e?Le.fromRangeEnd(o):Le.fromRangeStart(o);return tD(n)?e&&b1(r)?d6(!0,n.selection,r):!e&&B2(r)?d6(!1,n.selection,r):!1:!1};var hf;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(hf||(hf={}));const o4=(e,n)=>e===-1?Zo(n):n,m6=(e,n,o)=>e===1?n.next(o):n.prev(o),KU=(e,n,o,r)=>Go(r.getNode(n===1))?hf.Br:Cl(o,r)===!1?hf.Block:hf.Wrap,f6=(e,n,o,r)=>{const i=Sc(o);let u=r;const h=[];for(;u;){const v=m6(n,i,u);if(!v)break;if(Go(v.getNode(!1)))return n===1?{positions:o4(n,h).concat([v]),breakType:hf.Br,breakAt:V.some(v)}:{positions:o4(n,h),breakType:hf.Br,breakAt:V.some(v)};if(!v.isVisible()){u=v;continue}if(e(u,v)){const w=KU(o,n,u,v);return{positions:o4(n,h),breakType:w,breakAt:V.some(v)}}h.push(v),u=v}return{positions:o4(n,h),breakType:hf.Eol,breakAt:V.none()}},s4=(e,n,o,r)=>n(o,r).breakAt.map(i=>{const u=n(o,i).positions;return e===-1?u.concat(i):[i].concat(u)}).getOr([]),nD=(e,n)=>as(e,(o,r)=>o.fold(()=>V.some(r),i=>Ns(Ir(i.getClientRects()),Ir(r.getClientRects()),(u,h)=>{const v=Math.abs(n-u.left);return Math.abs(n-h.left)<=v?r:i}).or(o)),V.none()),r4=(e,n)=>Ir(n.getClientRects()).bind(o=>nD(e,o.left)),pw=je(f6,Le.isAbove,-1),bw=je(f6,Le.isBelow,1),h6=je(s4,-1,pw),g6=je(s4,1,bw),p6=(e,n)=>pw(e,n).breakAt.isNone(),vw=(e,n)=>bw(e,n).breakAt.isNone(),a4=e=>Sr(e).map(n=>[n].concat(bw(e,n).positions)).getOr([]),XU=e=>xl(e).map(n=>pw(e,n).positions.concat(n)).getOr([]),YU=(e,n)=>r4(h6(e,n),n),i4=(e,n)=>r4(g6(e,n),n),JU=ls,b6=(e,n)=>Math.abs(e.left-n),v6=(e,n)=>Math.abs(e.right-n),QU=e=>ea(e,"node"),y6=(e,n)=>xr(e,(o,r)=>{const i=Math.min(b6(o,n),v6(o,n)),u=Math.min(b6(r,n),v6(r,n));return u===i&&QU(r)&&JU(r.node)||u<i?r:o}),eW=e=>{const n=o=>Cn(o,r=>{const i=ih(r);return i.node=e,i});if(qt(e))return n(e.getClientRects());if(We(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},C6=e=>ti(e,eW);var yb;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(yb||(yb={}));const tW=(e,n,o,r)=>{let i=r;for(;i=im(i,e,uh,n);)if(o(i))return},S6=(e,n,o,r,i,u)=>{let h=0;const v=[],w=I=>{let F=C6([I]);e===yb.Up&&(F=F.reverse());for(let W=0;W<F.length;W++){const X=F[W];if(!o(X,k)){if(v.length>0&&n(X,ji(v))&&h++,X.line=h,i(X))return!0;v.push(X)}}return!1},k=ji(u.getClientRects());if(!k)return v;const P=u.getNode();return P&&(w(P),tW(e,r,w,P)),v},nW=(e,n)=>n.line>e,ZY=(e,n)=>n.line===e,vd=je(S6,yb.Up,em,qn),oD=je(S6,yb.Down,qn,em),sD=e=>ji(e.getClientRects()),w6=(e,n,o,r)=>{const i=Sc(n);let u,h,v,w;const k=[];let P=0;e===yb.Down?(u=i.next,h=qn,v=em,w=Le.after(r)):(u=i.prev,h=em,v=qn,w=Le.before(r));const I=sD(w);do{if(!w.isVisible())continue;const F=sD(w);if(v(F,I))continue;k.length>0&&h(F,ji(k))&&P++;const W=ih(F);if(W.position=w,W.line=P,o(W))return k;k.push(W)}while(w=u(w));return k},x6=e=>n=>nW(e,n),c4=e=>n=>ZY(e,n),Lh=(e,n)=>{e.selection.setRng(n),Dv(e,e.selection.getRng())},l4=(e,n,o)=>V.some(Wk(e,n,o)),E6=(e,n,o,r,i,u)=>{const h=n===1,v=Sc(e.getBody()),w=je(V1,h?v.next:v.prev),k=h?r:i;if(!o.collapsed){const X=y1(o);if(u(X))return pd(n,e,X,n===-1,!1);if(qk(e)){const G=o.cloneRange();return G.collapse(n===-1),V.from(G)}}const P=H1(n,e.getBody(),o);if(k(P))return pb(e,P.getNode(!h));let I=w(P);const F=M0(o);if(I)I=fu(h,I);else return F?V.some(o):V.none();if(k(I))return pd(n,e,I.getNode(!h),h,!1);const W=w(I);return W&&k(W)&&lv(I,W)?pd(n,e,W.getNode(!h),h,!1):F?l4(e,I.toRange(),!1):V.none()},T6=(e,n,o,r,i,u)=>{const h=H1(n,e.getBody(),o),v=ji(h.getClientRects()),w=n===yb.Down,k=e.getBody();if(!v)return V.none();if(qk(e)){const ee=w?Le.fromRangeEnd(o):Le.fromRangeStart(o);return(w?i4:YU)(k,ee).orThunk(()=>V.from(ee)).map(pe=>pe.toRange())}const I=(w?oD:vd)(k,x6(1),h),F=an(I,c4(1)),W=v.left,X=y6(F,W);if(X&&u(X.node)){const ee=Math.abs(W-X.left),ce=Math.abs(W-X.right);return pd(n,e,X.node,ee<ce,!1)}let G;if(r(h)?G=h.getNode():i(h)?G=h.getNode(!0):G=y1(o),G){const ee=w6(n,k,x6(1),G);let ce=y6(an(ee,c4(1)),W);if(ce||(ce=ji(an(ee,c4(0))),ce))return l4(e,ce.position.toRange(),!1)}return F.length===0?rD(e,w).filter(w?i:r).map(ee=>Wk(e,ee.toRange(),!1)):V.none()},rD=(e,n)=>{const o=e.selection.getRng(),r=n?Le.fromRangeEnd(o):Le.fromRangeStart(o),i=RC(r.container(),e.getBody());if(n){const u=bw(i,r);return Si(u.positions)}else{const u=pw(i,r);return Ir(u.positions)}},Cb=(e,n,o)=>rD(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),yw=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},aD=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},iD=(e,n,o)=>Jk(n,o).map(r=>(yw(e,r),o)),cD=(e,n,o)=>{const r=Le.fromRangeStart(e);if(e.collapsed)return r;{const i=Le.fromRangeEnd(e);return o?ia(n,i).getOr(i):pa(n,r).getOr(r)}},oW=(e,n,o)=>{const r=e.getBody(),i=cD(e.selection.getRng(),r,o),u=je(Qg,e);return n4(o,u,r,i).bind(v=>iD(e,n,v))},sW=(e,n,o)=>{const r=Cn(Wa(ie.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),h=>h.dom),i=an(r,e),u=an(o,e);ye(qi(i,u),je(aD,!1)),ye(qi(u,i),je(aD,!0))},rW=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Le.fromRangeStart(e.selection.getRng());Le.isTextPosition(r)&&!TV(r)&&(yw(e,YA(o,r)),n.set(null))}},aW=(e,n,o,r)=>{if(n.selection.isCollapsed()){const i=an(r,e);ye(i,u=>{const h=Le.fromRangeStart(n.selection.getRng());ff(e,n.getBody(),h).bind(v=>iD(n,o,v))})}},iW=(e,n,o)=>O1(e)?oW(e,n,o).isSome():!1,cW=(e,n,o)=>O1(n)?GU(e,n):!1,qY=e=>{const n=Ko(null),o=je(Qg,e);return e.on("NodeChange",r=>{O1(e)&&(sW(o,e.dom,r.parents),rW(e,n),aW(o,e,n,r.parents))}),n},yd=je(cW,!0),lW=je(cW,!1),u4=(e,n,o)=>{if(O1(e)){const r=rD(e,n).getOrThunk(()=>{const i=e.selection.getRng();return n?Le.fromRangeEnd(i):Le.fromRangeStart(i)});return ff(je(Qg,e),e.getBody(),r).exists(i=>{const u=t4(i);return Jk(o,u).exists(h=>(yw(e,h),!0))})}else return!1},Sb=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},k6=e=>Ns(Sr(e),xl(e),(n,o)=>{const r=fu(!0,n),i=fu(!1,o);return pa(e,r).forall(u=>u.isEqual(i))}).getOr(!0),_6=(e,n)=>o=>Jk(n,o).map(r=>()=>yw(e,r)),Cw=(e,n,o,r)=>{const i=e.getBody(),u=je(Qg,e);e.undoManager.ignore(()=>{e.selection.setRng(Sb(o,r)),qT(e),ff(u,i,Le.fromRangeStart(e.selection.getRng())).map(eD).bind(_6(e,n)).each(Xr)}),e.nodeChanged()},uW=(e,n)=>{const o=ad(n,e);return o||e},dW=(e,n,o,r)=>{const i=uW(e.getBody(),r.container()),u=je(Qg,e),h=ff(u,i,r);return h.bind(w=>o?w.fold(St(V.some(eD(w))),V.none,St(V.some(t4(w))),V.none):w.fold(V.none,St(V.some(t4(w))),V.none,St(V.some(eD(w))))).map(_6(e,n)).getOrThunk(()=>{const w=of(o,i,r),k=w.bind(P=>ff(u,i,P));return Ns(h,k,()=>jr(u,i,r).bind(P=>k6(P)?V.some(()=>{tb(e,o,ie.fromDom(P))}):V.none())).getOrThunk(()=>k.bind(()=>w.map(P=>()=>{o?Cw(e,n,r,P):Cw(e,n,P,r)})))})},lD=(e,n,o)=>{if(e.selection.isCollapsed()&&O1(e)){const r=Le.fromRangeStart(e.selection.getRng());return dW(e,n,o,r)}return V.none()},mW=e=>Gd(e)>1,uD=(e,n)=>{const o=ie.fromDom(e.getBody()),r=ie.fromDom(e.selection.getStart()),i=Ah(r,o);return Yr(i,n).fold(St(i),u=>i.slice(0,u))},fW=e=>Gd(e)===1,Ih=e=>uD(e,n=>e.schema.isBlock(Rn(n))||mW(n)),dD=e=>uD(e,n=>e.schema.isBlock(Rn(n))),A6=(e,n)=>{const o=je(gk,e);return ti(n,r=>o(r)?[r.dom]:[])},O6=e=>{const n=dD(e);return A6(e,n)},hW=(e,n,o,r)=>{const i=A6(n,r);if(i.length===0)tb(n,e,o);else{const u=_O(o.dom,i);n.selection.setRng(u.toRange())}},gW=(e,n)=>{const o=an(Ih(e),fW);return Si(o).bind(r=>{const i=Le.fromRangeStart(e.selection.getRng());return kl(n,i,r.dom)&&!dm(r)?V.some(()=>hW(n,e,r,o)):V.none()})},pW=(e,n)=>{const o=n.parentElement;return Go(n)&&!ne(o)&&e.dom.isEmpty(o)},mD=e=>dm(ie.fromDom(e)),d4=(e,n)=>{const o=e.selection.getStart(),r=pW(e,o)||mD(o)?_O(o,n):AO(e.selection.getRng(),n);e.selection.setRng(r.toRange())},fD=(e,n)=>{const o=qi(n,O6(e));o.length>0&&d4(e,o)},hD=e=>We(e.startContainer),R6=e=>e.startOffset===0&&hD(e),D6=(e,n)=>{const o=n.startContainer.parentElement;return!ne(o)&&gk(e,ie.fromDom(o))},bW=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!ne(n)&&!ne(o)&&n.isEqualNode(o)},Sw=e=>{const n=e.endContainer;return e.endOffset===(We(n)?n.length:n.childNodes.length)},m4=e=>bW(e)&&Sw(e),M6=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),P6=e=>m4(e)||M6(e),N6=e=>{const n=e.selection.getRng();return R6(n)&&D6(e,n)&&P6(n)},B6=e=>{if(N6(e)){const n=O6(e);return V.some(()=>{qT(e),fD(e,n)})}else return V.none()},ny=(e,n)=>e.selection.isCollapsed()?gW(e,n):B6(e),gD=(e,n)=>s0(e,o=>xc(o.dom),o=>n.isBlock(Rn(o))),ww=e=>gD(ie.fromDom(e.selection.getStart()),e.schema),vW=e=>{const n=e.selection.getRng();return n.collapsed&&(hD(n)||e.dom.isEmpty(n.startContainer))&&!ww(e)},oy=e=>(vW(e)&&d4(e,[]),!0),pD=(e,n,o)=>Ee(o)?V.some(()=>{e._selectionOverrides.hideFakeCaret(),tb(e,n,ie.fromDom(o))}):V.none(),yW=(e,n)=>{const o=n?eb:fS,i=H1(n?1:-1,e.getBody(),e.selection.getRng());return o(i)?pD(e,n,i.getNode(!n)):V.from(fu(n,i)).filter(u=>o(u)&&lv(i,u)).bind(u=>pD(e,n,u.getNode(!n)))},L6=(e,n)=>{const o=e.selection.getNode();return lr(o)?pD(e,n,o):V.none()},bD=(e,n)=>e.selection.isCollapsed()?yW(e,n):L6(e,n),I6=e=>bs(e,n=>li(n.dom)||ls(n.dom)).exists(n=>li(n.dom)),F6=e=>jl(e??"").getOr(0),$6=(e,n)=>{const o=e||xg(n)?"margin":"padding",r=dc(n,"direction")==="rtl"?"-right":"-left";return o+r},CW=(e,n,o,r,i,u)=>{const h=$6(o,ie.fromDom(u)),v=F6(e.getStyle(u,h));if(n==="outdent"){const w=Math.max(0,v-r);e.setStyle(u,h,w?w+i:"")}else{const w=v+r+i;e.setStyle(u,h,w)}},SW=(e,n)=>ks(n,o=>{const r=$6(X0(e),o),i=zs(o,r).map(F6).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&i>0}),H6=e=>{const n=z6(e);return!e.mode.isReadOnly()&&(n.length>1||SW(e,n))},V6=e=>g1(e)||Eg(e),wW=e=>ai(e).exists(V6),z6=e=>an(n0(e.selection.getSelectedBlocks()),n=>!V6(n)&&!wW(n)&&I6(n)),f4=(e,n)=>{var o,r;if(e.mode.isReadOnly())return;const{dom:i}=e,u=PA(e),h=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",v=F6(u),w=X0(e);ye(z6(e),k=>{CW(i,n,w,v,h,k.dom)})},xW=e=>f4(e,"indent"),Fh=e=>f4(e,"outdent"),vD=e=>{if(e.selection.isCollapsed()&&H6(e)){const n=e.dom,o=e.selection.getRng(),r=Le.fromRangeStart(o),i=n.getParent(o.startContainer,n.isBlock);if(i!==null&&L5(ie.fromDom(i),r,e.schema))return V.some(()=>Fh(e))}return V.none()},h4=(e,n,o)=>zl([vD,gw,ty,(r,i)=>lD(r,n,i),VR,ak,Kk,bD,Qv,ny,Gk],r=>r(e,o)).filter(r=>e.selection.isEditable()),U6=(e,n)=>{h4(e,n,!1).fold(()=>{e.selection.isEditable()&&(qT(e),tp(e))},Xr)},yD=(e,n)=>{h4(e,n,!0).fold(()=>{e.selection.isEditable()&&Cs(e)},Xr)},bp=(e,n)=>{e.addCommand("delete",()=>{U6(e,n)}),e.addCommand("forwardDelete",()=>{yD(e,n)})},CD=5,bu=400,vp=e=>e.touches===void 0||e.touches.length!==1?V.none():V.some(e.touches[0]),W6=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>CD||r>CD},SD=e=>{const n=gc(),o=Ko(!1),r=Na(i=>{e.dispatch("longpress",{...i,type:"longpress"}),o.set(!0)},bu);e.on("touchstart",i=>{vp(i).each(u=>{r.cancel();const h={x:u.clientX,y:u.clientY,target:i.target};r.throttle(i),o.set(!1),n.set(h)})},!0),e.on("touchmove",i=>{r.cancel(),vp(i).each(u=>{n.on(h=>{W6(u,h)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",i=>{r.cancel(),i.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(i.target)).each(()=>{o.get()?i.preventDefault():e.dispatch("tap",{...i,type:"tap"})})},!0)},wD=(e,n)=>un(e,n.nodeName),Z6=(e,n)=>We(n)?!0:qt(n)?!wD(e.getBlockElements(),n)&&!ec(n)&&!Hm(e,n)&&!Uu(n):!1,EW=(e,n,o)=>bo(QH(ie.fromDom(o),ie.fromDom(n)),r=>wD(e,r.dom)),TW=(e,n)=>{if(We(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||wD(e,n.nextSibling)||Uu(n.nextSibling)}return!1},xD=e=>e.dom.create(Rr(e),Cc(e)),kW=e=>{const n=e.dom,o=e.selection,r=e.schema,i=r.getBlockElements(),u=o.getStart(),h=e.getBody();let v,w,k=null;const P=Rr(e);if(!u||!qt(u))return;const I=h.nodeName.toLowerCase();if(!r.isValidChild(I,P.toLowerCase())||EW(i,h,u))return;if(h.firstChild===h.lastChild&&Go(h.firstChild)){v=xD(e),v.appendChild(Tg().dom),h.replaceChild(v,h.firstChild),e.selection.setCursorLocation(v,0),e.nodeChanged();return}let F=h.firstChild;for(;F;)if(qt(F)&&CN(r,F),Z6(r,F)){if(TW(i,F)){w=F,F=F.nextSibling,n.remove(w);continue}if(!v){if(!k&&e.hasFocus()&&(k=a6(e.selection.getRng(),()=>document.createElement("span"))),!F.parentNode){F=null;break}v=xD(e),h.insertBefore(v,F)}w=F,F=F.nextSibling,v.appendChild(w)}else v=null,F=F.nextSibling;k&&(e.selection.setRng(ZR(k)),e.nodeChanged())},q6=(e,n,o)=>{const r=ie.fromDom(xD(e)),i=Tg();ts(r,i),o(n,r);const u=document.createRange();return u.setStartBefore(i.dom),u.setEndBefore(i.dom),u},j6=e=>{e.on("NodeChange",()=>kW(e))},G6=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,_W=(e,n,o)=>function(r){const i=arguments,u=i[i.length-2],h=u>0?n.charAt(u-1):"";if(h==='"')return r;if(h===">"){const v=n.lastIndexOf("<",u);if(v!==-1&&n.substring(v,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(i[0])+'">'+e.dom.encode(typeof i[1]=="string"?i[1]:i[0])+"</span>"},sy=(e,n,o)=>{let r=n.length,i=o.content;if(o.format!=="raw"){for(;r--;)i=i.replace(n[r],_W(e,i,sv(e)));o.content=i}},g4=(e,n)=>ks(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),K6=e=>{const n="contenteditable",o=" "+Xe.trim(DN(e))+" ",r=" "+Xe.trim(sv(e))+" ",i=G6(o),u=G6(r),h=Mg(e);h.length>0&&e.on("BeforeSetContent",v=>{sy(e,h,v)}),e.parser.addAttributeFilter("class",v=>{let w=v.length;for(;w--;){const k=v[w];i(k)?k.attr(n,"true"):u(k)&&k.attr(n,"false")}}),e.serializer.addAttributeFilter(n,v=>{let w=v.length;for(;w--;){const k=v[w];if(!i(k)&&!u(k))continue;const P=k.attr("data-mce-content");h.length>0&&P?g4(h,P)?(k.name="#text",k.type=3,k.raw=!0,k.value=P):k.remove():k.attr(n,null)}})},X6=e=>_r(ie.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),p4=(e,n)=>{n.hasAttribute("data-mce-caret")&&(D0(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},AW=(e,n)=>{const o=X6(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),p4(e,o);return}p1(o)&&(p4(e,o),e.undoManager.add())}},OW=e=>{e.on("keyup compositionstart",je(AW,e))},Y6=ls,RW=(e,n,o)=>E6(n,e,o,Yg,Jg,Y6),DW=(e,n,o)=>T6(n,e,o,u=>Yg(u)||N5(u),u=>Jg(u)||B3(u),Y6),MW=e=>{const n=e.dom.create(Rr(e));return n.innerHTML='<br data-mce-bogus="1">',n},J6=(e,n,o)=>{const r=Sc(e.getBody()),i=je(V1,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!i(Le.fromRangeStart(o))){const v=ie.fromDom(MW(e));n===1?mc(ie.fromDom(u),v):Us(ie.fromDom(u),v),e.selection.select(v.dom,!0),e.selection.collapse()}}},Q6=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return RW(o,e,r).orThunk(()=>(J6(e,o,r),V.none()))},PW=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return DW(o,e,r).orThunk(()=>(J6(e,o,r),V.none()))},NW=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return G3(o)?!n:n},Ys=(e,n)=>Q6(e,NW(e.selection,n)).exists(o=>(Lh(e,o),!0)),ED=(e,n)=>PW(e,n).exists(o=>(Lh(e,o),!0)),xw=(e,n)=>Cb(e,n,n?Jg:Yg),Ew=(e,n)=>Zk(e,!n).map(o=>{const r=o.toRange(),i=e.selection.getRng();return n?r.setStart(i.startContainer,i.startOffset):r.setEnd(i.endContainer,i.endOffset),r}).exists(o=>(Lh(e,o),!0)),b4=e=>yn(["figcaption"],Rn(e)),BW=(e,n,o)=>{const r=je(oo,n);return bs(ie.fromDom(e.container()),i=>o.isBlock(Rn(i)),r).filter(b4)},eF=(e,n,o)=>n?vw(e.dom,o):p6(e.dom,o),LW=(e,n)=>{const o=ie.fromDom(e.getBody()),r=Le.fromRangeStart(e.selection.getRng());return BW(r,o,e.schema).exists(()=>{if(eF(o,n,r)){const u=q6(e,o,n?ts:sg);return e.selection.setRng(u),!0}else return!1})},tF=(e,n)=>e.selection.isCollapsed()?LW(e,n):!1,IW=(e,n,o)=>{const r=e.selection.getRng(),i=Le.fromRangeStart(r);return e.getBody().firstChild===n&&p6(o,i)?(e.execCommand("InsertNewBlockBefore"),!0):!1},nF=(e,n)=>{const o=e.selection.getRng(),r=Le.fromRangeStart(o);return e.getBody().lastChild===n&&vw(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},FW=(e,n)=>n?V.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>nF(e,o)).getOr(!1):V.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>V.from(e.dom.getParent(o,"details")).map(r=>IW(e,r,o))).getOr(!1),oF=(e,n)=>FW(e,n),ry={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},$h=e=>Cn(e,n=>({...ry,...n})),wb=e=>Cn(e,n=>({...ry,...n})),Tw=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,TD=(e,n)=>ti($h(e),o=>Tw(o,n)?[o]:[]),kD=(e,n)=>ti(wb(e),o=>Tw(o,n)?[o]:[]),xn=(e,...n)=>()=>e.apply(null,n),kw=(e,n)=>ps(TD(e,n),o=>o.action()),_D=(e,n)=>zl(kD(e,n),o=>o.action()),AD=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return E6(e,o,r,eb,fS,lr).exists(i=>(Lh(e,i),!0))},sF=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return T6(e,o,r,eb,fS,lr).exists(i=>(Lh(e,i),!0))},rF=(e,n)=>Cb(e,n,n?fS:eb),aF=ur.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),_w={...aF,none:e=>aF.none(e)},$W=(e,n)=>OD(e,n,Ot),OD=(e,n,o)=>ti(Ur(e),r=>za(r,n)?o(r)?[r]:[]:OD(r,n,o)),iF=(e,n,o=qe)=>{if(o(n))return V.none();if(yn(e,Rn(n)))return V.some(n);const r=i=>za(i,"table")||o(i);return Zf(n,e.join(","),r)},GY=(e,n)=>iF(["td","th"],e,n),KY=e=>$W(e,"th,td"),HW=(e,n)=>Wt(e,"table",n),RD=(e,n,o,r,i=Ot)=>{const u=r===1;if(!u&&o<=0)return _w.first(e[0]);if(u&&o>=e.length-1)return _w.last(e[e.length-1]);{const h=o+r,v=e[h];return i(v)?_w.middle(n,v):RD(e,n,h,r,i)}},VW=(e,n)=>HW(e,n).bind(o=>{const r=KY(o);return Yr(r,u=>oo(e,u)).map(u=>({index:u,all:r}))}),XY=(e,n,o)=>VW(e,o).fold(()=>_w.none(e),i=>RD(i.all,e,i.index,1,n)),zW=(e,n,o)=>VW(e,o).fold(()=>_w.none(),i=>RD(i.all,e,i.index,-1,n)),UW=e=>sA(e).filter(n=>n.trim().length!==0||n.indexOf(br)>-1).isSome(),YY=e=>Pm(e)&&Oa(e,"contenteditable")==="false",WW=["img","br"],_c=e=>UW(e)||yn(WW,Rn(e))||YY(e),cF=e=>Wf(e,_c),Aw=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),ZW=(e,n)=>ti(n,o=>{const r=Aw(ih(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),lF=(e,n,o)=>as(e,(r,i)=>r.fold(()=>V.some(i),u=>{const h=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),v=Math.sqrt(Math.abs(i.x-n)+Math.abs(i.y-o));return V.some(v<h?i:u)}),V.none()),DD=(e,n,o,r,i)=>{const u=Wa(ie.fromDom(o),"td,th,caption").map(v=>v.dom),h=an(ZW(e,u),v=>n(v,i));return lF(h,r,i).map(v=>v.cell)},uF=e=>e.bottom,MD=e=>e.top,dF=(e,n)=>e.y<n,qW=(e,n)=>e.y>n,mF=je(DD,uF,dF),jW=je(DD,MD,qW),GW=(e,n)=>Ir(n.getClientRects()).bind(o=>mF(e,o.left,o.top)).bind(o=>r4(XU(o),n)),KW=(e,n)=>Si(n.getClientRects()).bind(o=>jW(e,o.left,o.top)).bind(o=>r4(a4(o),n)),PD=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),XW=e=>e.breakType===hf.Wrap&&e.positions.length===0,YW=e=>e.breakType===hf.Br&&e.positions.length===1,JW=(e,n,o)=>{const r=e(n,o);return XW(r)||!Go(o.getNode())&&YW(r)?!PD(e,n,r):r.breakAt.isNone()},QW=je(JW,pw),fF=je(JW,bw),JY=(e,n,o)=>{const r=Le.fromRangeStart(n);return wl(!e,o).exists(i=>i.isEqual(r))},eZ=(e,n,o,r)=>{const i=e.selection.getRng(),u=n?1:-1;return ZE()&&JY(n,i,o)?(pd(u,e,o,!n,!1).each(h=>{Lh(e,h)}),!0):!1},tZ=(e,n,o)=>GW(n,o).orThunk(()=>Ir(o.getClientRects()).bind(r=>nD(h6(e,Le.before(n)),r.left))).getOr(Le.before(n)),nZ=(e,n,o)=>KW(n,o).orThunk(()=>Ir(o.getClientRects()).bind(r=>nD(g6(e,Le.after(n)),r.left))).getOr(Le.after(n)),v4=(e,n)=>{const o=n.getNode(e);return oa(o)?V.some(o):V.none()},y4=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?mc:Us,i=q6(n,ie.fromDom(o),r);Lh(n,i)})},ND=(e,n,o)=>{const r=v4(!!n,o),i=n===!1;r.fold(()=>Lh(e,o.toRange()),u=>wl(i,e.getBody()).filter(h=>h.isEqual(o)).fold(()=>Lh(e,o.toRange()),h=>y4(n,e,u)))},hF=(e,n,o,r)=>{const i=e.selection.getRng(),u=Le.fromRangeStart(i),h=e.getBody();if(!n&&QW(r,u)){const v=tZ(h,o,u);return ND(e,n,v),!0}else if(n&&fF(r,u)){const v=nZ(h,o,u);return ND(e,n,v),!0}else return!1},gF=(e,n,o)=>V.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>V.from(e.dom.getParent(r,"table")).map(i=>o(e,n,i,r))).getOr(!1),pF=(e,n)=>gF(e,n,eZ),Ow=(e,n)=>gF(e,n,hF),oZ=e=>{const n=qg.exact(e,0,e,0);return cS(n)},bF=(e,n,o)=>o.fold(V.none,V.none,(r,i)=>cF(i).map(u=>oZ(u)),r=>e.mode.isReadOnly()||!sZ(r)?V.none():(e.execCommand("mceTableInsertRowAfter"),vF(e,n,r))),sZ=e=>bs(e,Ql("table")).exists(nu),vF=(e,n,o)=>bF(e,n,XY(o,BD)),Cd=(e,n,o)=>bF(e,n,zW(o,BD)),BD=e=>nu(e)||qp(e,yF),yF=e=>Pm(e)&&nu(e),rZ=(e,n)=>{const o=["table","li","dl"],r=ie.fromDom(e.getBody()),i=v=>{const w=Rn(v);return oo(v,r)||yn(o,w)},u=e.selection.getRng(),h=ie.fromDom(n?u.endContainer:u.startContainer);return GY(h,i).map(v=>(HW(v,i).each(P=>{e.model.table.clearSelectedCells(P.dom)}),e.selection.collapse(!n),(n?vF:Cd)(e,i,v).each(P=>{e.selection.setRng(P)}),!0)).getOr(!1)},QY=(e,n,o)=>{const r=zt.os.isMacOS()||zt.os.isiOS();kw([{keyCode:ze.RIGHT,action:xn(Ys,e,!0)},{keyCode:ze.LEFT,action:xn(Ys,e,!1)},{keyCode:ze.UP,action:xn(ED,e,!1)},{keyCode:ze.DOWN,action:xn(ED,e,!0)},...r?[{keyCode:ze.UP,action:xn(Ew,e,!1),metaKey:!0,shiftKey:!0},{keyCode:ze.DOWN,action:xn(Ew,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ze.RIGHT,action:xn(pF,e,!0)},{keyCode:ze.LEFT,action:xn(pF,e,!1)},{keyCode:ze.UP,action:xn(Ow,e,!1)},{keyCode:ze.DOWN,action:xn(Ow,e,!0)},{keyCode:ze.UP,action:xn(Ow,e,!1)},{keyCode:ze.UP,action:xn(oF,e,!1)},{keyCode:ze.DOWN,action:xn(oF,e,!0)},{keyCode:ze.RIGHT,action:xn(AD,e,!0)},{keyCode:ze.LEFT,action:xn(AD,e,!1)},{keyCode:ze.UP,action:xn(sF,e,!1)},{keyCode:ze.DOWN,action:xn(sF,e,!0)},{keyCode:ze.RIGHT,action:xn(iW,e,n,!0)},{keyCode:ze.LEFT,action:xn(iW,e,n,!1)},{keyCode:ze.RIGHT,ctrlKey:!r,altKey:r,action:xn(yd,e,n)},{keyCode:ze.LEFT,ctrlKey:!r,altKey:r,action:xn(lW,e,n)},{keyCode:ze.UP,action:xn(tF,e,!1)},{keyCode:ze.DOWN,action:xn(tF,e,!0)}],o).each(i=>{o.preventDefault()})},eJ=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||QY(e,n,o)})},gf=(e,n)=>({container:e,offset:n}),C4=rs.DOM,xb=e=>n=>e===n?-1:0,aZ=e=>n=>e.isBlock(n)||yn(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",Rw=(e,n,o)=>{if(We(e)&&n>=0)return V.some(gf(e,n));{const r=ed(C4);return V.from(r.backwards(e,n,xb(e),o)).map(i=>gf(i.container,i.container.data.length))}},CF=(e,n,o)=>{if(We(e)&&n>=e.length)return V.some(gf(e,n));{const r=ed(C4);return V.from(r.forwards(e,n,xb(e),o)).map(i=>gf(i.container,0))}},S4=(e,n,o)=>{if(!We(e))return V.none();const r=e.data;if(n>=0&&n<=r.length)return V.some(gf(e,n));{const i=ed(C4);return V.from(i.backwards(e,n,xb(e),o)).bind(u=>{const h=u.container.data;return S4(u.container,n+h.length,o)})}},LD=(e,n,o)=>{if(!We(e))return V.none();const r=e.data;if(n<=r.length)return V.some(gf(e,n));{const i=ed(C4);return V.from(i.forwards(e,n,xb(e),o)).bind(u=>LD(u.container,n-r.length,o))}},ID=(e,n,o,r,i)=>{const u=ed(e,aZ(e));return V.from(u.backwards(n,o,r,i))},iZ=e=>e.collapsed&&We(e.startContainer),cZ=e=>Qi(e.toString().replace(/\u00A0/g," ")),SF=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,w4=(e,n)=>e.substring(n.length),lZ=(e,n,o,r=!1)=>{let i;const u=o.charAt(0);for(i=n-1;i>=0;i--){const h=e.charAt(i);if(!r&&SF(h))return V.none();if(u===h&&Fr(e,o,i,n))break}return V.some(i)},FD=(e,n,o,r=!1)=>{if(!iZ(n))return V.none();const i={text:"",offset:0},u=(v,w,k)=>(i.text=k+i.text,i.offset+=w,lZ(i.text,i.offset,o,r).getOr(w)),h=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return ID(e,n.startContainer,n.startOffset,u,h).bind(v=>{const w=n.cloneRange();if(w.setStart(v.container,v.offset),w.setEnd(n.endContainer,n.endOffset),w.collapsed)return V.none();const k=cZ(w);return k.lastIndexOf(o)!==0?V.none():V.some({text:w4(k,o),range:w,trigger:o})})},uZ=e=>e.nodeType===jb,$D=e=>e.nodeType===Lu,wF=e=>{if(uZ(e))return gf(e,e.data.length);{const n=e.childNodes;return n.length>0?wF(n[n.length-1]):gf(e,n.length)}},xF=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?xF(o[n],0):o.length>0&&$D(e)&&o.length===n?wF(o[o.length-1]):gf(e,n)},EF=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return ID(e,n.container,n.offset,(i,u)=>u===0?-1:u,r).filter(i=>{const u=i.container.data.charAt(i.offset-1);return!SF(u)}).isSome()},dZ=e=>n=>{const o=xF(n.startContainer,n.startOffset);return!EF(e,o)},mZ=(e,n,o)=>zl(o.triggers,r=>FD(e,n,r)),fZ=(e,n)=>{const o=n(),r=e.selection.getRng();return mZ(e.dom,r,o).bind(i=>TF(e,n,i))},TF=(e,n,o,r={})=>{var i;const u=n(),v=(i=e.selection.getRng().startContainer.nodeValue)!==null&&i!==void 0?i:"",w=an(u.lookupByTrigger(o.trigger),P=>o.text.length>=P.minChars&&P.matches.getOrThunk(()=>dZ(e.dom))(o.range,v,o.text));if(w.length===0)return V.none();const k=Promise.all(Cn(w,P=>P.fetch(o.text,P.maxResults,r).then(F=>({matchText:o.text,items:F,columns:P.columns,onAction:P.onAction,highlightOn:P.highlightOn}))));return V.some({lookupData:k,context:o})};var vu;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(vu||(vu={}));const HD=(e,n,o)=>e.stype===vu.Error?n(e.serror):o(e.svalue),VD=e=>{const n=[],o=[];return ye(e,r=>{HD(r,i=>o.push(i),i=>n.push(i))}),{values:n,errors:o}},hZ=(e,n)=>e.stype===vu.Error?{stype:vu.Error,serror:n(e.serror)}:e,kF=(e,n)=>e.stype===vu.Value?{stype:vu.Value,svalue:n(e.svalue)}:e,gZ=(e,n)=>e.stype===vu.Value?n(e.svalue):e,pZ=(e,n)=>e.stype===vu.Error?n(e.serror):e,_F=e=>({stype:vu.Value,svalue:e}),AF=e=>({stype:vu.Error,serror:e}),yo={fromResult:e=>e.fold(AF,_F),toResult:e=>HD(e,ja.error,ja.value),svalue:_F,partition:VD,serror:AF,bind:gZ,bindError:pZ,map:kF,mapError:hZ,fold:HD},zD=e=>we(e)&&fr(e).length>100?" removed due to size":JSON.stringify(e,null,2),bZ=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:St("... (only showing first ten failures)")}]):e;return Cn(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},x4=(e,n)=>yo.serror([{path:e,getErrorInfo:n}]),OF=(e,n,o)=>x4(e,()=>'Could not find valid *required* value for "'+n+'" in '+zD(o)),UD=(e,n)=>x4(e,()=>'Choice schema did not contain choice key: "'+n+'"'),RF=(e,n,o)=>x4(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+zD(n)),yp=(e,n)=>x4(e,St(n)),WD=(e,n,o,r)=>Po(o,r).fold(()=>RF(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),DF=(e,n)=>({extract:(i,u)=>Po(u,e).fold(()=>UD(i,e),v=>WD(i,u,n,v)),toString:()=>"chooseOn("+e+"). Possible values: "+fr(n)}),ZD=(e,n)=>n,qD=(e,n)=>gt(e)&&gt(n)?Dw(e,n):n,E4=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const i=n[r];for(const u in i)un(i,u)&&(o[u]=e(o[u],i[u]))}return o},Dw=E4(qD),Mw=E4(ZD),ay=()=>({tag:"required",process:{}}),Pw=e=>({tag:"defaultedThunk",process:e}),iy=e=>Pw(St(e)),Sd=()=>({tag:"option",process:{}}),Nw=(e,n)=>e.length>0?yo.svalue(Dw(n,Mw.apply(void 0,e))):yo.svalue(n),jD=e=>R(yo.serror,Dd)(e),GD={consolidateObj:(e,n)=>{const o=yo.partition(e);return o.errors.length>0?jD(o.errors):Nw(o.values,n)},consolidateArr:e=>{const n=yo.partition(e);return n.errors.length>0?jD(n.errors):yo.svalue(n.values)}},yZ=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),CZ=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),cy=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},KD=e=>{const n=(r,i)=>yo.bindError(e(i),u=>yp(r,u)),o=St("val");return{extract:n,toString:o}},SZ=KD(yo.svalue),wZ=(e,n,o,r)=>Po(n,o).fold(()=>OF(e,o,n),r),MF=(e,n,o,r)=>{const i=Po(e,n).getOrThunk(()=>o(e));return r(i)},xZ=(e,n,o)=>o(Po(e,n)),EZ=(e,n,o,r)=>{const i=Po(e,n).map(u=>u===!0?o(e):u);return r(i)},TZ=(e,n,o,r,i)=>{const u=v=>i.extract(n.concat([r]),v),h=v=>v.fold(()=>yo.svalue(V.none()),w=>{const k=i.extract(n.concat([r]),w);return yo.map(k,V.some)});switch(e.tag){case"required":return wZ(n,o,r,u);case"defaultedThunk":return MF(o,r,e.process,u);case"option":return xZ(o,r,h);case"defaultedOptionThunk":return EZ(o,r,e.process,h);case"mergeWithThunk":return MF(o,r,St({}),v=>{const w=Dw(e.process(o),v);return u(w)})}},kZ=(e,n,o)=>{const r={},i=[];for(const u of o)cy(u,(h,v,w,k)=>{const P=TZ(w,e,n,h,k);yo.fold(P,I=>{i.push(...I)},I=>{r[v]=I})},(h,v)=>{r[h]=v(n)});return i.length>0?yo.serror(i):yo.svalue(r)},Bw=e=>({extract:(r,i)=>kZ(r,i,e),toString:()=>`obj{
`+Cn(e,i=>cy(i,(u,h,v,w)=>u+" -> "+w.toString(),(u,h)=>"state("+u+")")).join(`
`)+"}"}),XD=e=>({extract:(r,i)=>{const u=Cn(i,(h,v)=>e.extract(r.concat(["["+v+"]"]),h));return GD.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),_Z=(e,n)=>{const o=Uo;return{extract:(u,h)=>{const v=[];for(const w of e){const k=w.extract(u,h);if(k.stype===vu.Value)return{stype:vu.Value,svalue:o(k.svalue)};v.push(k)}return GD.consolidateArr(v)},toString:()=>"oneOf("+Cn(e,u=>u.toString()).join(", ")+")"}},AZ=R(XD,Bw),OZ=e=>KD(n=>e(n).fold(yo.serror,yo.svalue)),RZ=(e,n,o)=>{const r=n.extract([e],o);return yo.mapError(r,i=>({input:o,errors:i}))},PF=(e,n,o)=>yo.toResult(RZ(e,n,o)),NF=e=>`Errors: 
`+bZ(e.errors).join(`
`)+`

Input object: `+zD(e.input),T4=(e,n)=>DF(e,Jn(n,Bw)),DZ=St(SZ),k4=(e,n)=>KD(o=>{const r=typeof o;return e(o)?yo.svalue(o):yo.serror(`Expected type: ${n} but got: ${r}`)}),MZ=k4(xo,"number"),ly=k4(Y,"string"),BF=k4(at,"boolean"),YD=k4(le,"function"),Eb=yZ,LF=CZ,JD=e=>OZ(n=>yn(e,n)?ja.value(n):ja.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),_4=(e,n)=>Eb(e,e,ay(),n),IF=e=>_4(e,ly),QD=(e,n)=>Eb(e,e,ay(),JD(n)),FF=e=>_4(e,YD),$F=(e,n)=>Eb(e,e,ay(),XD(n)),Lw=(e,n)=>Eb(e,e,Sd(),n),Tb=e=>Lw(e,ly),PZ=e=>Lw(e,YD),HF=(e,n)=>Lw(e,Bw(n)),NZ=(e,n)=>Eb(e,e,iy(n),DZ()),uy=(e,n,o)=>Eb(e,e,iy(n),o),eM=(e,n)=>uy(e,n,MZ),A4=(e,n)=>uy(e,n,ly),VF=(e,n,o)=>uy(e,n,JD(o)),tM=(e,n)=>uy(e,n,BF),pf=(e,n)=>uy(e,n,YD),zF=(e,n,o)=>uy(e,n,XD(o)),BZ=IF("type"),LZ=FF("fetch"),nM=FF("onAction"),IZ=pf("onSetup",()=>Ft),FZ=Tb("text"),$Z=Tb("icon"),HZ=Tb("tooltip"),VZ=Tb("label"),sJ=tM("active",!1),zZ=tM("enabled",!0),Iw=tM("primary",!1),UF=e=>NZ("columns",e),kb=e=>A4("type",e),UZ=Bw([BZ,IF("trigger"),eM("minChars",1),UF(1),eM("maxResults",10),PZ("matches"),LZ,nM,zF("highlightOn",[],ly)]),WF=e=>PF("Autocompleter",UZ,e),Fw=[zZ,HZ,$Z,FZ,IZ,A4("context","mode:design")],ZF=[sJ].concat(Fw),O4=[pf("predicate",qe),VF("scope","node",["node","editor"]),VF("position","selection",["node","selection","line"])],WZ=Fw.concat([kb("contextformbutton"),A4("align","end"),Iw,nM,LF("original",Uo)]),qF=ZF.concat([kb("contextformbutton"),A4("align","end"),Iw,nM,LF("original",Uo)]),ZZ=Fw.concat([kb("contextformbutton")]),oM=ZF.concat([kb("contextformtogglebutton")]),qZ=T4("type",{contextformbutton:WZ,contextformtogglebutton:qF}),sM=[VZ,$F("commands",qZ),Lw("launch",T4("type",{contextformbutton:ZZ,contextformtogglebutton:oM})),pf("onInput",Ft),pf("onSetup",Ft)],jZ=[...O4,...sM,QD("type",["contextform"]),pf("initValue",St("")),Tb("placeholder")],jF=[...O4,...sM,QD("type",["contextsliderform"]),pf("initValue",St(0)),pf("min",St(0)),pf("max",St(100))],GZ=[...O4,...sM,QD("type",["contextsizeinputform"]),pf("initValue",St({width:"",height:""}))];T4("type",{contextform:jZ,contextsliderform:jF,contextsizeinputform:GZ});const KZ=Fw.concat([kb("contexttoolbarbutton")]);Bw([kb("contexttoolbar"),HF("launch",KZ),_4("items",_Z([ly,AZ([Tb("name"),Tb("label"),$F("items",ly)])]))].concat(O4));const XZ=e=>{const n=e.ui.registry.getAll().popups,o=Jn(n,h=>WF(h).fold(v=>{throw new Error(NF(v))},Uo)),r=Md(ni(o,h=>h.trigger)),i=Ru(o);return{dataset:o,triggers:r,lookupByTrigger:h=>an(i,v=>v.trigger===h)}},YZ=(e,n)=>{const o=Na(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const i=r.which;i===8?o.throttle():i===27?(o.cancel(),n.cancelIfNecessary()):(i===38||i===40)&&o.cancel()},!0),e.on("remove",o.cancel)},JZ=e=>{const n=gc(),o=Ko(!1),r=n.isSet,i=()=>{r()&&(dr(e),o.set(!1),n.clear())},u=I=>{r()||n.set({trigger:I.trigger,matchLength:I.text.length})},h=ka(()=>XZ(e)),v=I=>n.get().map(F=>FD(e.dom,e.selection.getRng(),F.trigger,!0).bind(W=>TF(e,h,W,I))).getOrThunk(()=>fZ(e,h)),w=I=>{v(I).fold(i,F=>{u(F.context),F.lookupData.then(W=>{n.get().map(X=>{const G=F.context;X.trigger===G.trigger&&(n.set({...X,matchLength:G.text.length}),o.get()?(or(e,{range:G.range}),_A(e,{lookupData:W})):(o.set(!0),or(e,{range:G.range}),kA(e,{lookupData:W})))})})})},k=(I,F)=>{const W=I.compareBoundaryPoints(window.Range.START_TO_START,F),X=I.compareBoundaryPoints(window.Range.END_TO_END,F);return W>=0&&X<=0},P=()=>n.get().bind(({trigger:I})=>{const F=e.selection.getRng();return FD(e.dom,F,I,o.get()).filter(({range:W})=>k(F,W)).map(({range:W})=>W)});e.addCommand("mceAutocompleterReload",(I,F)=>{const W=we(F)?F.fetchOptions:{};w(W)}),e.addCommand("mceAutocompleterClose",i),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{P().each(I=>{or(e,{range:I})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>P().isSome()),YZ(e,{cancelIfNecessary:i,load:w})},bf=la().browser.isSafari(),GF=e=>jm(ie.fromDom(e)),QZ=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},R4=(e,n)=>V.from(e.getParent(n.container(),"details")),KF=(e,n)=>R4(e,n).isSome(),eq=(e,n)=>{const o=V.from(e.getParent(n.startContainer,"details")),r=V.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const i=o.bind(u=>V.from(e.select("summary",u)[0]));return V.some({startSummary:i,startDetails:o,endDetails:r})}else return V.none()},tq=(e,n)=>Sr(n).exists(o=>o.isEqual(e)),XF=(e,n)=>xl(n).exists(o=>Go(o.getNode())&&ia(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),dy=(e,n)=>n.startSummary.exists(o=>tq(e,o)),rJ=(e,n)=>n.startSummary.exists(o=>XF(e,o)),nq=(e,n)=>n.startDetails.exists(o=>ia(o,e).forall(r=>n.startSummary.exists(i=>!i.contains(e.container())&&i.contains(r.container())))),oq=(e,n,o)=>o.startDetails.exists(r=>pa(e,n).forall(i=>!r.contains(i.container()))),wd=(e,n)=>{const o=n.getNode();rn(o)||e.selection.setCursorLocation(o,n.offset())},YF=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const i=e.dom.select("summary",r)[0];i&&(o?Sr(i):xl(i)).each(h=>wd(e,h))}else wd(e,n)},sq=(e,n)=>{const o=w=>w.contains(e.startContainer),r=w=>w.contains(e.endContainer),i=n.startSummary.exists(o),u=n.startSummary.exists(r),h=n.startDetails.forall(w=>n.endDetails.forall(k=>w!==k));return(i||u)&&!(i&&u)||h},rM=(e,n,o)=>{const{dom:r,selection:i}=e,u=e.getBody();if(o==="character"){const h=Le.fromRangeStart(i.getRng()),v=r.getParent(h.container(),r.isBlock),w=R4(r,h),k=v&&r.isEmpty(v),P=ne(v==null?void 0:v.previousSibling),I=ne(v==null?void 0:v.nextSibling);return k&&(n?I:P)&&of(!n,u,h).exists(X=>KF(r,X)&&!Ps(w,R4(r,X)))?!0:of(n,u,h).fold(qe,F=>{const W=R4(r,F);if(KF(r,F)&&!Ps(w,W)){if(n||YF(e,F,!1),v&&k){if(n&&P)return!0;if(!n&&I)return!0;YF(e,F,n),e.dom.remove(v)}return!0}else return!1})}else return!1},rq=(e,n,o,r)=>{const u=e.selection.getRng(),h=Le.fromRangeStart(u),v=e.getBody();return r==="selection"?sq(u,n):o?rJ(h,n)||oq(v,h,n):dy(h,n)||nq(h,n)},aM=(e,n,o)=>eq(e.dom,e.selection.getRng()).fold(()=>rM(e,n,o),r=>rq(e,r,n,o)||rM(e,n,o)),vf=(e,n,o)=>{const r=e.selection,i=r.getNode(),u=r.getRng(),h=Le.fromRangeStart(u);return Ax(i)?(o==="selection"&&QZ(u,i)||kl(n,h,i)?GF(i):e.undoManager.transact(()=>{const v=r.getSel();let{anchorNode:w,anchorOffset:k,focusNode:P,focusOffset:I}=v??{};const F=()=>{Ee(w)&&Ee(k)&&Ee(P)&&Ee(I)&&(v==null||v.setBaseAndExtent(w,k,P,I))},W=()=>{w=v==null?void 0:v.anchorNode,k=v==null?void 0:v.anchorOffset,P=v==null?void 0:v.focusNode,I=v==null?void 0:v.focusOffset},X=(ee,ce)=>{ye(ee.childNodes,pe=>{sf(pe)&&ce.appendChild(pe)})},G=e.dom.create("span",{"data-mce-bogus":"1"});X(i,G),i.appendChild(G),F(),(o==="word"||o==="line")&&(v==null||v.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&QZ(r.getRng(),G)?GF(i):(e.execCommand(n?"ForwardDelete":"Delete"),W(),X(G,i),F()),e.dom.remove(G)}),!0):!1},Cp=(e,n,o)=>aM(e,n,o)||bf&&vf(e,n,o)?V.some(Ft):V.none(),iM=e=>(n,o,r={})=>{const i=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:Ft,inputType:o},h=s1(new InputEvent(e));return n.dispatch(e,{...h,...u,...r})},$w=iM("input"),_b=iM("beforeinput"),D4=la(),cM=D4.os,lM=cM.isMacOS()||cM.isiOS(),aq=D4.browser.isFirefox(),iq=(e,n,o)=>{const r=o.keyCode===ze.BACKSPACE?"deleteContentBackward":"deleteContentForward",i=e.selection.isCollapsed(),u=i?"character":"selection",h=v=>i?v?"word":"line":"selection";_D([{keyCode:ze.BACKSPACE,action:xn(vD,e)},{keyCode:ze.BACKSPACE,action:xn(gw,e,!1)},{keyCode:ze.DELETE,action:xn(gw,e,!0)},{keyCode:ze.BACKSPACE,action:xn(ty,e,!1)},{keyCode:ze.DELETE,action:xn(ty,e,!0)},{keyCode:ze.BACKSPACE,action:xn(lD,e,n,!1)},{keyCode:ze.DELETE,action:xn(lD,e,n,!0)},{keyCode:ze.BACKSPACE,action:xn(ak,e,!1)},{keyCode:ze.DELETE,action:xn(ak,e,!0)},{keyCode:ze.BACKSPACE,action:xn(Cp,e,!1,u)},{keyCode:ze.DELETE,action:xn(Cp,e,!0,u)},...lM?[{keyCode:ze.BACKSPACE,altKey:!0,action:xn(Cp,e,!1,h(!0))},{keyCode:ze.DELETE,altKey:!0,action:xn(Cp,e,!0,h(!0))},{keyCode:ze.BACKSPACE,metaKey:!0,action:xn(Cp,e,!1,h(!1))}]:[{keyCode:ze.BACKSPACE,ctrlKey:!0,action:xn(Cp,e,!1,h(!0))},{keyCode:ze.DELETE,ctrlKey:!0,action:xn(Cp,e,!0,h(!0))}],{keyCode:ze.BACKSPACE,action:xn(Kk,e,!1)},{keyCode:ze.DELETE,action:xn(Kk,e,!0)},{keyCode:ze.BACKSPACE,action:xn(bD,e,!1)},{keyCode:ze.DELETE,action:xn(bD,e,!0)},{keyCode:ze.BACKSPACE,action:xn(Qv,e,!1)},{keyCode:ze.DELETE,action:xn(Qv,e,!0)},{keyCode:ze.BACKSPACE,action:xn(VR,e,!1)},{keyCode:ze.DELETE,action:xn(VR,e,!0)},{keyCode:ze.BACKSPACE,action:xn(ny,e,!1)},{keyCode:ze.DELETE,action:xn(ny,e,!0)},{keyCode:ze.BACKSPACE,action:xn(Gk,e,!1)},{keyCode:ze.DELETE,action:xn(Gk,e,!0)}],o).filter(v=>e.selection.isEditable()).each(v=>{o.preventDefault(),_b(e,r).isDefaultPrevented()||(v(),$w(e,r))})},cq=(e,n,o)=>kw([{keyCode:ze.BACKSPACE,action:xn(jk,e)},{keyCode:ze.DELETE,action:xn(jk,e)},...lM?[{keyCode:ze.BACKSPACE,altKey:!0,action:xn(oy,e)},{keyCode:ze.DELETE,altKey:!0,action:xn(oy,e)},...o?[{keyCode:aq?224:91,action:xn(oy,e)}]:[]]:[{keyCode:ze.BACKSPACE,ctrlKey:!0,action:xn(oy,e)},{keyCode:ze.DELETE,ctrlKey:!0,action:xn(oy,e)}]],n),lq=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===ze.BACKSPACE,r.isDefaultPrevented()||iq(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||cq(e,r,o),o=!1})},JF=e=>{for(;e;){if(qt(e)||We(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},my=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=JF(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(br),n.firstChild)}const i=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new cr(n,n);let h=n,v;for(;v=u.current();){if(We(v)){i.setStart(v,0),i.setEnd(v,0);break}if(r[v.nodeName.toLowerCase()]){i.setStartBefore(v),i.setEndBefore(v);break}h=v,v=u.next()}v||(i.setStart(h,0),i.setEnd(h,0))}else Go(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)):(i.setStart(n,0),i.setEnd(n,0));e.selection.setRng(i),Dv(e,i)},Hw=(e,n)=>{const o=e.getRoot();let r,i=n;for(;i!==o&&i&&e.getContentEditable(i)!=="false";){if(e.getContentEditable(i)==="true"){r=i;break}i=i.parentNode}return i!==o?r:o},uM=e=>V.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),uq=e=>uM(e).fold(St(""),n=>n.nodeName.toUpperCase()),dq=e=>uM(e).filter(n=>Eg(ie.fromDom(n))).isSome(),M4=e=>{e.innerHTML='<br data-mce-bogus="1">'},QF=(e,n,o)=>{const r=e.dom;V.from(o.style).map(r.parseStyle).each(w=>{const P={...Ua(ie.fromDom(n)),...w};r.setStyles(n,P)});const i=V.from(o.class).map(w=>w.split(/\s+/)),u=V.from(n.className).map(w=>an(w.split(/\s+/),k=>k!==""));Ns(i,u,(w,k)=>{const P=an(k,F=>!yn(w,F)),I=[...w,...P];r.setAttrib(n,"class",I.join(" "))});const h=["style","class"],v=qo(o,(w,k)=>!yn(h,k));r.setAttribs(n,v)},Vw=(e,n)=>{if(Rr(e).toLowerCase()===n.tagName.toLowerCase()){const r=Cc(e);QF(e,n,r)}},e$=(e,n,o,r,i=!0,u,h)=>{const v=e.dom,w=e.schema,k=Rr(e),P=o?o.nodeName.toUpperCase():"";let I=n;const F=w.getTextInlineElements();let W;u||P==="TABLE"||P==="HR"?W=v.create(u||k,h||{}):W=o.cloneNode(!1);let X=W;if(!i)v.setAttrib(W,"style",null),v.setAttrib(W,"class",null);else do if(F[I.nodeName]){if(xc(I)||ec(I))continue;const G=I.cloneNode(!1);v.setAttrib(G,"id",""),W.hasChildNodes()?(G.appendChild(W.firstChild),W.appendChild(G)):(X=G,W.appendChild(G))}while((I=I.parentNode)&&I!==r);return Vw(e,W),M4(X),W},iJ=(e,n)=>e.dom.getParent(n,Za),dM=(e,n,o)=>{let r=n;for(;r&&r!==e&&ne(r.nextSibling);){const i=r.parentElement;if(!i||!o(i))return Za(i);r=i}return!1},mq=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Rr(e)&&e.dom.isEmpty(o)&&dM(e.getBody(),o,r=>un(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),fq=(e,n,o)=>{var r,i,u;const h=n(Rr(e)),v=iJ(e,o);v&&(e.dom.insertAfter(h,v),my(e,h),((u=(i=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||i===void 0?void 0:i.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},hq=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,t$=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},n$=(e,n)=>{const o=e==null?void 0:e.parentNode;return Ee(o)&&o.nodeName===n},mM=e=>Ee(e)&&/^(OL|UL|LI)$/.test(e.nodeName),fM=e=>Ee(e)&&/^(LI|DT|DD)$/.test(e.nodeName),gq=e=>mM(e)&&mM(e.parentNode),hM=e=>{const n=e.parentNode;return fM(n)?n:e},Sa=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!qt(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},o$=e=>as(ni(Ua(ie.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),pq=(e,n,o,r,i)=>{const u=e.dom,h=e.selection.getRng(),v=o.parentNode;if(o===e.getBody()||!v)return;gq(o)&&(i="LI");const w=fM(r)?o$(r):void 0;let k=fM(r)&&w?n(i,{style:o$(r)}):n(i);if(Sa(o,r,!0)&&Sa(o,r,!1))if(n$(o,"LI")){const P=hM(o);u.insertAfter(k,P),t$(o)?u.remove(P):u.remove(o)}else u.replace(k,o);else if(Sa(o,r,!0))n$(o,"LI")?(u.insertAfter(k,hM(o)),k.appendChild(u.doc.createTextNode(" ")),k.appendChild(o)):v.insertBefore(k,o),u.remove(r);else if(Sa(o,r,!1))u.insertAfter(k,hM(o)),u.remove(r);else{o=hM(o);const P=h.cloneRange();P.setStartAfter(r),P.setEndAfter(o);const I=P.extractContents();if(i==="LI"&&hq(I,"LI")){const F=an(Cn(k.children,ie.fromDom),Mo(Ql("br")));k=I.firstChild,u.insertAfter(I,o),ye(F,W=>sg(ie.fromDom(k),W)),w&&k.setAttribute("style",w)}else u.insertAfter(I,o),u.insertAfter(k,o);u.remove(r)}my(e,k)},bq=e=>{ye(Tx(ie.fromDom(e),kr),n=>{const o=n.dom;o.nodeValue=Qi(o.data)})},vq=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},yq=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),gM=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,Cq=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,fy=(e,n)=>Ee(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",Sq=(e,n,o)=>{var r;const i=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;qt(u)&&!n[u.nodeName.toLowerCase()]&&i.push(u)}let h=i.length;for(;h--;)u=i[h],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||yq(e,u))&&e.remove(u)},pM=(e,n,o)=>We(n)?e?o===1&&n.data.charAt(o-1)===Is?0:o:o===n.data.length-1&&n.data.charAt(o)===Is?n.data.length:o:o,bM=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,pM(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,pM(!1,e.endContainer,e.endOffset)),n},vM=e=>{let n=e;do We(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},wq=(e,n,o,r,i)=>{var u,h;const v=e.dom,w=(u=Hw(v,r))!==null&&u!==void 0?u:v.getRoot();let k=v.getParent(r,v.isBlock);if(!k||!fy(v,k)){if(k=k||w,!k.hasChildNodes()){const W=v.create(n);return Vw(e,W),k.appendChild(W),o.setStart(W,0),o.setEnd(W,0),W}let P=r;for(;P&&P.parentNode!==k;)P=P.parentNode;let I;for(;P&&!v.isBlock(P);)I=P,P=P.previousSibling;const F=(h=I==null?void 0:I.parentElement)===null||h===void 0?void 0:h.nodeName;if(I&&F&&e.schema.isValidChild(F,n.toLowerCase())){const W=I.parentNode,X=v.create(n);for(Vw(e,X),W.insertBefore(X,I),P=I;P&&!v.isBlock(P);){const G=P.nextSibling;X.appendChild(P),P=G}o.setStart(r,i),o.setEnd(r,i)}}return r},cJ=(e,n)=>{n.normalize();const o=n.lastChild;(!o||qt(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},lJ=(e,n)=>{const o=wE(e);return ln(n)?!1:Y(o)?yn(Xe.explode(o),n.nodeName.toLowerCase()):o},s$={insert:(e,n)=>{let o,r,i,u,h=!1;const v=e.dom,w=e.schema,k=w.getNonEmptyElements(),P=e.selection.getRng(),I=Rr(e),F=ie.fromDom(P.startContainer),W=$u(F,P.startOffset),X=W.exists(Ge=>Pm(Ge)&&!nu(Ge)),G=P.collapsed&&X,ee=(Ge,kt)=>e$(e,o,dt,Ue,aC(e),Ge,kt),ce=Ge=>{const kt=pM(Ge,o,r);if(We(o)&&(Ge?kt>0:kt<o.data.length))return!1;if((o.parentNode===dt||o===dt)&&h&&!Ge||Ge&&qt(o)&&o===dt.firstChild)return!0;if(gM(o,"TABLE")||gM(o,"HR"))return Cq(o,"BR")?!Ge:h&&!Ge||!h&&Ge;const Kt=new cr(o,dt);We(o)&&(Ge&&kt===0?Kt.prev():!Ge&&kt===o.data.length&&Kt.next());let Nn;for(;Nn=Kt.current();){if(qt(Nn)){if(!Nn.getAttribute("data-mce-bogus")){const Fn=Nn.nodeName.toLowerCase();if(k[Fn]&&Fn!=="br")return!1}}else if(We(Nn)&&!Vu(Nn.data))return!1;Ge?Kt.prev():Kt.next()}return!0},pe=()=>{let Ge;return/^(H[1-6]|PRE|FIGURE)$/.test(i)&&Bt!=="HGROUP"?Ge=ee(I):Ge=ee(),lJ(e,u)&&fy(v,u)&&v.isEmpty(dt,void 0,{includeZwsp:!0})?Ge=v.split(u,dt):v.insertAfter(Ge,dt),my(e,Ge),Ge};lS(v,P).each(Ge=>{P.setStart(Ge.startContainer,Ge.startOffset),P.setEnd(Ge.endContainer,Ge.endOffset)}),o=P.startContainer,r=P.startOffset;const be=!!(n&&n.shiftKey),Te=!!(n&&n.ctrlKey);qt(o)&&o.hasChildNodes()&&!G&&(h=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,h&&We(o)?r=o.data.length:r=0);const Ue=Hw(v,o);if(!Ue||vq(e,o))return;be||(o=wq(e,I,P,o,r));let dt=v.getParent(o,v.isBlock)||v.getRoot();u=Ee(dt==null?void 0:dt.parentNode)?v.getParent(dt.parentNode,v.isBlock):null,i=dt?dt.nodeName.toUpperCase():"";const Bt=u?u.nodeName.toUpperCase():"";if(Bt==="LI"&&!Te){const Ge=u;dt=Ge,u=Ge.parentNode,i=Bt}if(qt(u)&&mq(e,be,dt))return fq(e,ee,dt);if(/^(LI|DT|DD)$/.test(i)&&qt(u)&&v.isEmpty(dt)){pq(e,ee,u,dt,I);return}if(!G&&(dt===e.getBody()||!fy(v,dt)))return;const Fe=dt.parentNode;let Me;if(G)Me=ee(I),W.fold(()=>{ts(F,ie.fromDom(Me))},Ge=>{Us(Ge,ie.fromDom(Me))}),e.selection.setCursorLocation(Me,0);else if(bl(dt))Me=D0(dt),v.isEmpty(dt)&&M4(dt),Vw(e,Me),my(e,Me);else if(ce(!1))Me=pe();else if(ce(!0)&&Fe){const Ge=Le.fromRangeStart(P),kt=B3(Ge),Kt=ie.fromDom(dt),Fn=UT(Kt,Ge,e.schema)?F5(Kt,Ge,e.schema).bind(ko=>V.from(ko.getNode())):V.none();Me=Fe.insertBefore(ee(),dt);const lo=gM(dt,"HR")||kt?Me:Fn.getOr(dt);my(e,lo)}else{const Ge=bM(P).cloneRange();Ge.setEndAfter(dt);const kt=Ge.extractContents();bq(kt),vM(kt),Me=kt.firstChild,v.insertAfter(kt,dt),Sq(v,k,Me),cJ(v,dt),v.isEmpty(dt)&&M4(dt),Me.normalize(),v.isEmpty(Me)?(v.remove(Me),pe()):(Vw(e,Me),my(e,Me))}v.setAttrib(Me,"id",""),e.dispatch("NewBlock",{newBlock:Me})},fakeEventName:"insertParagraph"},dJ=(e,n,o)=>{const r=new cr(n,o);let i;const u=e.getNonEmptyElements();for(;i=r.next();)if(u[i.nodeName.toLowerCase()]||We(i)&&i.length>0)return!0;return!1},r$=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),Dv(e,r)},xm=(e,n)=>{const o=e.selection,r=e.dom,i=o.getRng();let u,h=!1;lS(r,i).each(W=>{i.setStart(W.startContainer,W.startOffset),i.setEnd(W.endContainer,W.endOffset)});let v=i.startOffset,w=i.startContainer;if(qt(w)&&w.hasChildNodes()){const W=v>w.childNodes.length-1;w=w.childNodes[Math.min(v,w.childNodes.length-1)]||w,W&&We(w)?v=w.data.length:v=0}let k=r.getParent(w,r.isBlock);const P=k&&k.parentNode?r.getParent(k.parentNode,r.isBlock):null,I=P?P.nodeName.toUpperCase():"",F=!!(n&&n.ctrlKey);I==="LI"&&!F&&(k=P),We(w)&&v>=w.data.length&&(dJ(e.schema,w,k||r.getRoot())||(u=r.create("br"),i.insertNode(u),i.setStartAfter(u),i.setEndAfter(u),h=!0)),u=r.create("br"),w1(r,i,u),r$(e,u,h),e.undoManager.add()},xq=(e,n)=>{const o=ie.fromTag("br");Us(ie.fromDom(n),o),e.undoManager.add()},a$=(e,n)=>{Tq(e.getBody(),n)||mc(ie.fromDom(n),ie.fromTag("br"));const o=ie.fromTag("br");mc(ie.fromDom(n),o),r$(e,o.dom,!1),e.undoManager.add()},Eq=e=>Go(e.getNode()),Tq=(e,n)=>Eq(Le.after(n))?!0:pa(e,Le.after(n)).map(o=>Go(o.getNode())).getOr(!1),i$=e=>e&&e.nodeName==="A"&&"href"in e,kq=e=>e.fold(qe,i$,i$,qe),_q=e=>{const n=je(Qg,e),o=Le.fromRangeStart(e.selection.getRng());return ff(n,e.getBody(),o).filter(kq)},Aq=(e,n)=>{n.fold(Ft,je(xq,e),je(a$,e),Ft)},yM={insert:(e,n)=>{const o=_q(e);o.isSome()?o.each(je(Aq,e)):xm(e,n)},fakeEventName:"insertLineBreak"},zw=(e,n)=>uM(e).filter(o=>n.length>0&&za(ie.fromDom(o),n)).isSome(),Oq=e=>zw(e,rC(e)),Rq=e=>zw(e,j0(e)),Ml=ur.generate([{br:[]},{block:[]},{none:[]}]),Dq=(e,n)=>Rq(e),l$=e=>(n,o)=>dq(n)===e,CM=(e,n)=>(o,r)=>uq(o)===e.toUpperCase()===n,Mq=e=>{const n=Hw(e.dom,e.selection.getStart());return ln(n)},hy=e=>CM("pre",e),u$=()=>CM("summary",!0),P4=e=>(n,o)=>sd(n)===e,Pq=(e,n)=>Oq(e),gy=(e,n)=>n,Nq=e=>{const n=Rr(e),o=Hw(e.dom,e.selection.getStart());return Ee(o)&&e.schema.isValidChild(o.nodeName,n)},Bq=e=>{const n=e.selection.getRng(),o=ie.fromDom(n.startContainer),i=$u(o,n.startOffset).map(u=>Pm(u)&&!nu(u));return n.collapsed&&i.getOr(!0)},Ac=(e,n)=>(o,r)=>as(e,(u,h)=>u&&h(o,r),!0)?V.some(n):V.none(),Lq=(e,n)=>KR([Ac([Dq],Ml.none()),Ac([hy(!0),Mq],Ml.none()),Ac([u$()],Ml.br()),Ac([hy(!0),P4(!1),gy],Ml.br()),Ac([hy(!0),P4(!1)],Ml.block()),Ac([hy(!0),P4(!0),gy],Ml.block()),Ac([hy(!0),P4(!0)],Ml.br()),Ac([l$(!0),gy],Ml.br()),Ac([l$(!0)],Ml.block()),Ac([Pq],Ml.br()),Ac([gy],Ml.br()),Ac([Nq],Ml.block()),Ac([Bq],Ml.block())],[e,!!(n&&n.shiftKey)]).getOr(Ml.none()),py=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||kV(n),!(Ee(o)&&_b(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Ee(o)&&$w(n,e.fakeEventName)))},N4=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>py(yM,e,n),r=()=>py(s$,e,n),i=Lq(e,n);switch(Ka(e)){case"linebreak":i.fold(o,o,Ft);break;case"block":i.fold(r,r,Ft);break;case"invert":i.fold(r,o,Ft);break;default:i.fold(o,r,Ft);break}},SM=la(),Iq=SM.os.isiOS()&&SM.browser.isSafari(),Fq=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),n9(e.undoManager),e.undoManager.transact(()=>{N4(e,n)}))},Sp=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(We(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},$q=e=>{let n=V.none();const o=i=>{n=V.some(i.selection.getBookmark()),i.undoManager.add()},r=(i,u)=>{i.undoManager.undo(),n.fold(Ft,h=>i.selection.moveToBookmark(h)),Fq(i,u),n=V.none()};e.on("keydown",i=>{i.keyCode===ze.ENTER&&(Iq&&Sp(e.selection.getRng())?o(e):Fq(e,i))}),e.on("keyup",i=>{i.keyCode===ze.ENTER&&n.each(()=>r(e,i))})},Hq=(e,n,o)=>{const r=zt.os.isMacOS()||zt.os.isiOS();kw([{keyCode:ze.END,action:xn(xw,e,!0)},{keyCode:ze.HOME,action:xn(xw,e,!1)},...r?[]:[{keyCode:ze.HOME,action:xn(Ew,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ze.END,action:xn(Ew,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ze.END,action:xn(rF,e,!0)},{keyCode:ze.HOME,action:xn(rF,e,!1)},{keyCode:ze.END,action:xn(u4,e,!0,n)},{keyCode:ze.HOME,action:xn(u4,e,!1,n)}],o).each(i=>{o.preventDefault()})},Vq=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||Hq(e,n,o)})},B4=e=>{e.on("input",n=>{n.isComposing||dV(e)})},d$=la(),m$=(e,n,o)=>{kw([{keyCode:ze.PAGE_UP,action:xn(u4,e,!1,n)},{keyCode:ze.PAGE_DOWN,action:xn(u4,e,!0,n)}],o)},f$=e=>e.stopImmediatePropagation(),wM=e=>e.keyCode===ze.PAGE_UP||e.keyCode===ze.PAGE_DOWN,h$=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",f$,!0):!o&&e.get()&&n.off("NodeChange",f$),e.set(o)},zq=(e,n)=>{if(d$.os.isMacOS())return;const o=Ko(!1);e.on("keydown",r=>{wM(r)&&h$(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||m$(e,n,r),wM(r)&&o.get()&&(h$(o,e,!1),e.nodeChanged())})},g$=(e,n)=>e===n||e.contains(n),xM=(e,n)=>!g$(e.getBody(),n.startContainer)||!g$(e.getBody(),n.endContainer)?!0:r5(e.dom,n),EM=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||bo(n.getTargetRanges(),o=>!xM(e,o)))&&n.preventDefault()})},p$=(e,n)=>{const o=n.container(),r=n.offset();return We(o)?(o.insertData(r,e),V.some(Le(o,r+e.length))):cv(n).map(i=>{const u=ie.fromText(e);return n.isAtEnd()?mc(i,u):Us(i,u),Le(u.dom,e.length)})},L4=je(p$,br),TM=je(p$," "),I4=(e,n,o)=>F3(e,n,o)?L4(n):TM(n),b$=e=>n=>n.fold(o=>ia(e.dom,Le.before(o)),o=>Sr(o),o=>xl(o),o=>pa(e.dom,Le.after(o))),v$=(e,n,o)=>r=>F3(e,r,o)?L4(n):TM(n),y$=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},Uq=(e,n)=>e.isEditable(e.getParent(n,"summary")),F4=e=>{const n=Le.fromRangeStart(e.selection.getRng()),o=ie.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=je(Qg,e),i=Le.fromRangeStart(e.selection.getRng());return ff(r,e.getBody(),i).bind(b$(o)).map(u=>()=>v$(o,n,e.schema)(u).each(y$(e)))}else return V.none()},C$=e=>{const n=()=>{const o=ie.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Le.fromRangeStart(e.selection.getRng());I4(o,r,e.schema).each(y$(e))};return Ei(zt.browser.isFirefox()&&e.selection.isEditable()&&Uq(e.dom,e.selection.getRng().startContainer),n)},Wq=(e,n)=>{_D([{keyCode:ze.SPACEBAR,action:xn(F4,e)},{keyCode:ze.SPACEBAR,action:xn(C$,e)}],n).each(o=>{n.preventDefault(),_b(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),$w(e,"insertText",{data:" "}))})},Zq=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||Wq(e,n)})},S$=e=>am(e)?[{keyCode:ze.TAB,action:xn(rZ,e,!0)},{keyCode:ze.TAB,shiftKey:!0,action:xn(rZ,e,!1)}]:[],qq=(e,n)=>{kw([...S$(e)],n).each(o=>{n.preventDefault()})},jq=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||qq(e,n)})},Gq=e=>{if(e.addShortcut("Meta+P","","mcePrint"),JZ(e),df(e))return Ko(null);{const n=qY(e);return EM(e),OW(e),eJ(e,n),lq(e,n),$q(e),Zq(e),B4(e),jq(e),Vq(e,n),zq(e,n),n}};class Kq{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",i=>{const u=n.selection.getRng(),h={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(i.type==="nodechange"||!T3(h,o))&&n.dispatch("SelectionChange"),o=h}),n.on("contextmenu",()=>{Av(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const i=n.selection.getStart(!0);i&&Vg(n)&&!r.isSameElementPath(i)&&n.dom.isChildOf(i,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",i=>{!i.isDefaultPrevented()&&Vg(n)&&(n.selection.getNode().nodeName==="IMG"?Nt.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let i;if(o.initialized&&r&&!PE(o)&&!ef(o)){const u=o.getBody();i=r.getStart(!0)||u,(i.ownerDocument!==o.getDoc()||!o.dom.isChildOf(i,u))&&(i=u);const h=[];o.dom.getParent(i,v=>v===u?!0:(h.push(v),!1)),o.dispatch("NodeChange",{...n,element:i,parents:h})}}isSameElementPath(n){let o;const r=this.editor,i=Zo(r.dom.getParents(n,Ot,r.getBody()));if(i.length===this.lastPath.length){for(o=i.length;o>=0&&i[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=i,!0}return this.lastPath=i,!1}}const w$=sh("image"),x$=e=>{const n=e;return V.from(n[w$])},Xq=(e,n)=>{const o=e;o[w$]=n},$4=sh("event"),Yq=e=>{const n=e;return V.from(n[$4])},H4=e=>n=>{const o=n;o[$4]=e},Jq=(e,n)=>H4(n)(e),E$=H4(0),Qq=H4(2),by=H4(1),ej=(e=>n=>{const o=n;return V.from(o[$4]).exists(r=>r===e)})(0),T$=()=>Object.freeze({length:0,item:e=>null}),kM=sh("mode"),tj=e=>{const n=e;return V.from(n[kM])},V4=e=>n=>{const o=n;o[kM]=e},_M=(e,n)=>V4(n)(e),k$=V4(0),AM=V4(2),hJ=V4(1),Uw=e=>n=>{const o=n;return V.from(o[kM]).exists(r=>r===e)},vy=Uw(0),_$=Uw(1),nj=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(vy(e))if(Y(o)){if(!rn(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{vy(e)&&n.remove(o)},clear:()=>{vy(e)&&n.clear()}}),oj=["none","copy","link","move"],sj=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],OM=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(i){yn(oj,i)&&(n=i)},get effectAllowed(){return o},set effectAllowed(i){ej(r)&&yn(sj,i)&&(o=i)},get items(){return nj(r,e.items)},get files(){return _$(r)?T$():e.files},get types(){return e.types},setDragImage:(i,u,h)=>{vy(r)&&(Xq(r,{image:i,x:u,y:h}),e.setDragImage(i,u,h))},getData:i=>_$(r)?"":e.getData(i),setData:(i,u)=>{vy(r)&&e.setData(i,u)},clearData:i=>{vy(r)&&e.clearData(i)}};return k$(r),r},rj=e=>{const n=OM(),o=tj(e);return AM(e),E$(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,x$(e).each(r=>n.setDragImage(r.image,r.x,r.y)),ye(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),ye(e.files,r=>n.items.add(r)),Yq(e).each(r=>{Jq(n,r)}),o.each(r=>{_M(e,r),_M(n,r)}),n},aj=e=>{const n=e.getData("text/html");return n===""?V.none():V.some(n)},A$=(e,n)=>e.setData("text/html",n),O$="x-tinymce/html",z4=St(O$),RM="<!-- "+O$+" -->",ij=e=>RM+e,Jo=e=>e.replace(RM,""),R$=e=>e.indexOf(RM)!==-1,D$=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),cj=(e,n)=>{let o="<"+e;const r=ni(n,(i,u)=>u+'="'+Yf.encodeAllRaw(i)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},DM=(e,n,o)=>{const r=e.split(/\n\n/),i=cj(n,o),u="</"+n+">",h=Cn(r,w=>w.split(/\n/).join("<br />")),v=w=>i+w+u;return h.length===1?h[0]:Cn(h,v).join("")},MM="%MCEPASTEBIN%",lj=(e,n)=>{const{dom:o,selection:r}=e,i=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},MM);zt.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(i,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",h=>{h.stopPropagation()}),u.focus(),r.select(u,!0)},uj=(e,n)=>{const o=e.dom;if(PM(e)){let r;const i=n.get();for(;r=PM(e);)o.remove(r),o.unbind(r);i&&e.selection.setRng(i)}n.set(null)},PM=e=>e.dom.get("mcepastebin"),M$=e=>Ee(e)&&e.id==="mcepastebin",U4=e=>{const n=e.dom,o=(h,v)=>{h.appendChild(v),n.remove(v,!0)},[r,...i]=an(e.getBody().childNodes,M$);ye(i,h=>{o(r,h)});const u=n.select("div[id=mcepastebin]",r);for(let h=u.length-1;h>=0;h--){const v=n.create("div");r.insertBefore(v,u[h]),o(v,u[h])}return r?r.innerHTML:""},P$=e=>e===MM,dj=e=>{const n=Ko(null);return{create:()=>lj(e,n),remove:()=>uj(e,n),getEl:()=>PM(e),getHtml:()=>U4(e),getLastRng:n.get}},W4=(e,n)=>(Xe.each(n,o=>{Oe(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),mj=e=>{const n=Jd(),o=Cm({},n);let r="";const i=n.getVoidElements(),u=Xe.makeMap("script noscript style textarea video audio iframe object"," "),h=n.getBlockElements(),v=w=>{const k=w.name,P=w;if(k==="br"){r+=`
`;return}if(k!=="wbr"){if(i[k]&&(r+=" "),u[k]){r+=" ";return}if(w.type===3&&(r+=w.value),!(w.name in n.getVoidElements())){let I=w.firstChild;if(I)do v(I);while(I=I.next)}h[k]&&P.next&&(r+=`
`,k==="p"&&(r+=`
`))}};return e=W4(e,[/<!\[[^\]]+\]>/g]),v(o.parse(e)),r},N$=e=>(e=W4(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,i)=>!r&&!i?" ":br],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),fj=e=>{let n=0;return()=>e+n++},hj=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Xe.hasOwn(o,n)?"image/"+o[n]:"image/"+n},B$=(e,n)=>{const o=Cm({sanitize:N1(e),sandbox_iframes:SC(e),sandbox_iframes_exclusions:VE(e),convert_unsafe_embeds:MN(e)},e.schema);o.addNodeFilter("meta",i=>{Xe.each(i,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Kg({validate:!0},e.schema).serialize(r)},L$=(e,n)=>({content:e,cancelled:n}),gj=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),i=sr(e,r,o);return L$(i.node.innerHTML,i.isDefaultPrevented())},pj=(e,n,o)=>{const r=aa(e,n,o),i=B$(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?gj(e,i,o):L$(i,r.isDefaultPrevented())},bj=(e,n,o)=>pj(e,n,o),NM=(e,n)=>(e.insertContent(n,{merge:WA(e),paste:!0}),!0),BM=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),vj=(e,n)=>BM(n)&&bo(CC(e),o=>_a(n.toLowerCase(),`.${o.toLowerCase()}`)),Z4=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),I$=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),yj=(e,n,o)=>!e.selection.isCollapsed()&&BM(n)?I$(e,n,o):!1,F$=(e,n,o)=>vj(e,n)?Z4(e,n,o):!1,$$=(e,n)=>{Xe.each([yj,F$,NM],o=>!o(e,n,NM))},LM=(e,n,o)=>{o||!ZA(e)?NM(e,n):$$(e,n)},Cj=fj("mceclip"),H$=e=>{const n=OM();return A$(n,e),AM(n),n},V$=(e,n,o,r,i)=>{const u=bj(e,n,o);if(!u.cancelled){const h=u.content,v=()=>LM(e,h,r);i?_b(e,"insertFromPaste",{dataTransfer:H$(h)}).isDefaultPrevented()||(v(),$w(e,"insertFromPaste")):v()}},yy=(e,n,o,r)=>{const i=o||R$(n);V$(e,Jo(n),i,!1,r)},IM=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),i=kx(r,bC(e)),u=DM(i,Rr(e),Cc(e));V$(e,u,!1,!0,o)},FM=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},wp=(e,n)=>n in e&&e[n].length>0,z$=e=>wp(e,"text/html")||wp(e,"text/plain"),Sj=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Ee(o)?e.dom.encode(o[1]):void 0},U$=(e,n,o,r)=>{const i=Cj(),u=xE(e)&&Ee(o.name),h=u?Sj(e,o.name):i,v=u?o.name:void 0,w=n.create(i,o,r,h,v);return n.add(w),w},wj=(e,n)=>{zv(n.uri).each(({data:o,type:r,base64Encoded:i})=>{const u=i?o:btoa(o),h=n.file,v=e.editorUpload.blobCache,w=v.getByData(u,r),k=w??U$(e,v,h,u);yy(e,`<img src="${k.blobUri()}">`,!1,!0)})},W$=e=>e.type==="paste",q4=e=>Promise.all(Cn(e,n=>QB(n).then(o=>({file:n,uri:o})))),$M=e=>{const n=CC(e);return o=>$s(o.type,"image/")&&bo(n,r=>hj(r)===o.type)},HM=(e,n)=>{const o=n.items?ti(Jr(n.items),i=>i.kind==="file"?[i.getAsFile()]:[]):[],r=n.files?Jr(n.files):[];return an(o.length>0?o:r,$M(e))},Z$=(e,n,o)=>{const r=W$(n)?n.clipboardData:n.dataTransfer;if(D1(e)&&r){const i=HM(e,r);if(i.length>0)return n.preventDefault(),q4(i).then(u=>{o&&e.selection.setRng(o),ye(u,h=>{wj(e,h)})}),!0}return!1},xj=e=>{var n,o;return zt.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},Cy=e=>ze.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,VM=(e,n,o,r,i)=>{let u=N$(o);const h=wp(n,z4())||R$(o),v=!h&&D$(u),w=BM(u);(P$(u)||!u.length||v&&!w)&&(r=!0),(r||w)&&(wp(n,"text/plain")&&v?u=n["text/plain"]:u=mj(u)),!P$(u)&&(r?IM(e,u,i):yy(e,u,h,i))},Sy=(e,n,o)=>{let r;const i=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{Cy(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||xj(u))return;const h=o.get()==="text"||r;r=!1;const v=FM(u.clipboardData);!z$(v)&&Z$(e,u,i())||(wp(v,"text/html")?(u.preventDefault(),VM(e,v,v["text/html"],h,!0)):wp(v,"text/plain")&&wp(v,"text/uri-list")?(u.preventDefault(),VM(e,v,v["text/plain"],h,!0)):(n.create(),Nt.setEditorTimeout(e,()=>{const w=n.getHtml();n.remove(),VM(e,v,w,h,!1)},0)))})},Ww=e=>{const n=i=>$s(i,"webkit-fake-url"),o=i=>$s(i,"data:"),r=i=>{var u;return((u=i.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(i,u,h)=>{if(!D1(e)&&r(h))for(const v of i){const w=v.attr("src");Y(w)&&!v.attr("data-mce-object")&&w!==zt.transparentSrc&&(n(w)||!vC(e)&&o(w))&&v.remove()}})},Ej=(e,n,o)=>{Sy(e,n,o),Ww(e)},Tj=(e,n)=>{n.get()==="text"?(n.set("html"),Or(e,!1)):(n.set("text"),Or(e,!0)),e.focus()},wy=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{Tj(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&yy(e,r.html,r.internal,!1),r.text&&IM(e,r.text,!1)})},kj=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(z4(),n),!0}catch{return!1}else return!1},j4=(e,n,o,r)=>{kj(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},q$=e=>(n,o)=>{const{dom:r,selection:i}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),h=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(h),r.add(e.getBody(),u);const v=i.getRng();h.focus();const w=r.createRng();w.selectNodeContents(h),i.setRng(w),Nt.setEditorTimeout(e,()=>{i.setRng(v),r.remove(u),o()},0)},zM=e=>({html:ij(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),j$=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),G4=e=>!e.selection.isCollapsed()||j$(e),G$=e=>n=>{!n.isDefaultPrevented()&&G4(e)&&e.selection.isEditable()&&j4(n,zM(e),q$(e),()=>{if(zt.browser.isChromium()||zt.browser.isFirefox()){const o=e.selection.getRng();Nt.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},_j=e=>n=>{!n.isDefaultPrevented()&&G4(e)&&j4(n,zM(e),q$(e),Ft)},Aj=e=>{e.on("cut",G$(e)),e.on("copy",_j(e))},UM=(e,n)=>{var o,r;return Gg.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},Oj=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},WM=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},ZM=e=>bo(e.files,n=>/^image\//.test(n.type)),K$=(e,n,o,r)=>{const i=e.getParent(o,h=>Hm(n,h));if(!ne(e.getParent(o,"summary")))return!0;if(i&&un(r,"text/html")){const h=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!ne(h.querySelector(i.nodeName.toLowerCase()))}else return!1},Rj=e=>{e.on("input",n=>{const o=r=>ne(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=an(e.dom.select("details"),o);ye(r,i=>{Go(i.firstChild)&&i.firstChild.remove();const u=e.dom.create("summary");u.appendChild(Tg().dom),i.prepend(u)})}})},Dj=(e,n)=>{VA(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),D1(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&ZM(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=UM(e,o);if(ln(r))return;const i=FM(o.dataTransfer),u=wp(i,z4());if((!z$(i)||Oj(i))&&Z$(e,o,r))return;const h=i[z4()],v=h||i["text/html"]||i["text/plain"],w=K$(e.dom,e.schema,r.startContainer,i),k=n.get();k&&!w||v&&(o.preventDefault(),Nt.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(h||k&&w)&&e.execCommand("Delete"),WM(e,r);const P=N$(v);i["text/html"]?yy(e,P,u,!0):IM(e,P,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{D1(e)&&!n.get()&&(o.preventDefault(),WM(e,UM(e,o))),o.type==="dragend"&&n.set(!1)}),Rj(e)},Mj=e=>{const n=i=>u=>{i(e,u)},o=zA(e);le(o)&&e.on("PastePreProcess",n(o));const r=UA(e);le(r)&&e.on("PastePostProcess",n(r))},X$=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},qM=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,Y$=e=>Xe.trim(e).replace(qM,mg).toLowerCase(),J$=(e,n,o)=>{const r=IE(e);if(o||r==="all"||!ov(e))return n;const i=r?r.split(/[, ]/):[];if(i&&r!=="none"){const u=e.dom,h=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(v,w,k,P)=>{const I=u.parseStyle(u.decode(k)),F={};for(let X=0;X<i.length;X++){const G=I[i[X]];let ee=G,ce=u.getStyle(h,i[X],!0);/color/.test(i[X])&&(ee=Y$(ee),ce=Y$(ce)),ce!==ee&&(F[i[X]]=G)}const W=u.serializeStyle(F,"span");return W?w+' style="'+W+'"'+P:w+P})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,h,v,w)=>h+' style="'+v+'"'+w),n},Q$=e=>{(zt.browser.isChromium()||zt.browser.isSafari())&&X$(e,J$)},Pj=e=>{const n=Ko(!1),o=Ko(M1(e)?"text":"html"),r=dj(e);Q$(e),wy(e,o),Mj(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{Aj(e),Dj(e,n),Ej(e,r,o)})},e8=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},Nj=e=>{e.parser.addNodeFilter("details",n=>{const o=B1(e);ye(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=GA(e);ye(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},Bj=e=>{e8(e),Nj(e)},Lj=Go,t8=We,Ij=e=>ls(e.dom),K4=e=>li(e.dom),n8=e=>n=>oo(ie.fromDom(e),n),o8=(e,n,o)=>bs(ie.fromDom(e),r=>K4(r)||o.isBlock(Rn(r)),n8(n)).getOr(ie.fromDom(n)).dom,s8=(e,n)=>bs(ie.fromDom(e),Ij,n8(n)),r8=(e,n,o)=>{const r=new cr(e,n),i=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let h=o?e:i();h&&!Lj(h);h=i())fi(h)&&(u=h);return u},a8=(e,n,o)=>{const i=Le.fromRangeStart(e).getNode(),u=o8(i,n,o),h=r8(i,u,!1),v=r8(i,u,!0),w=document.createRange();return s8(h,u).fold(()=>{t8(h)?w.setStart(h,0):w.setStartBefore(h)},k=>w.setStartBefore(k.dom)),s8(v,u).fold(()=>{t8(v)?w.setEnd(v,v.data.length):w.setEndAfter(v)},k=>w.setEndAfter(k.dom)),w},i8=e=>{const n=a8(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(ik(n))},Fj=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),i8(e))})};var xy;(function(e){e.Before="before",e.After="after"})(xy||(xy={}));const $j=(e,n)=>Math.abs(e.left-n),Hj=(e,n)=>Math.abs(e.right-n),Vj=(e,n)=>e>=n.top&&e<=n.bottom,c8=(e,n)=>e.top<n.bottom&&e.bottom>n.top,zj=(e,n)=>{const o=us(e,n)/Math.min(e.height,n.height);return c8(e,n)&&o>.5},Uj=(e,n)=>{const o=an(e,r=>Vj(n,r));return ch(o).fold(()=>[[],e],r=>{const{pass:i,fail:u}=ir(e,h=>zj(h,r));return[i,u]})},Wj=(e,n)=>({node:e.node,position:$j(e,n)<Hj(e,n)?xy.Before:xy.After}),Zj=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),jM=(e,n,o,r)=>{const i=I=>fi(I.node)?V.some(I):qt(I.node)?jM(Jr(I.node.childNodes),n,o,!1):V.none(),u=(I,F,W)=>i(F).filter(X=>Math.abs(W(I,n,o)-W(X,n,o))<2&&We(X.node)),h=(I,F)=>{const W=Io(I,(X,G)=>F(X,n,o)-F(G,n,o));return zl(W,i).map(X=>r&&!We(X.node)&&W.length>1?u(X,W[1],F).getOr(X):X)},[v,w]=Uj(C6(e),o),{pass:k,fail:P}=ir(w,I=>I.top<o);return h(v,Zj).orThunk(()=>h(P,P0)).orThunk(()=>h(k,P0))},qj=(e,n,o,r)=>{const i=(u,h)=>{const v=k=>qt(k)&&k.classList.contains("mce-drag-container"),w=an(u.dom.childNodes,Mo(v));return h.fold(()=>jM(w,o,r,!0),k=>{const P=an(w,I=>I!==k.dom);return jM(P,o,r,!0)}).orThunk(()=>(oo(u,e)?V.none():Hf(u)).bind(P=>i(P,V.some(u))))};return i(n,V.none())},jj=(e,n,o)=>{const r=ie.fromDom(e),i=eu(r),h=ie.fromPoint(i,n,o).filter(v=>xs(r,v)).getOr(r);return qj(r,h,n,o)},l8=(e,n,o)=>jj(e,n,o).filter(r=>tf(r.node)).map(r=>Wj(r,n)),GM=e=>{var n,o;const r=e.getBoundingClientRect(),i=e.ownerDocument,u=i.documentElement,h=i.defaultView;return{top:r.top+((n=h==null?void 0:h.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=h==null?void 0:h.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},u8=e=>e.inline?GM(e.getBody()):{left:0,top:0},Gj=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},Kj=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},i={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:i},Xj=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=GM(e.getContentAreaContainer()),r=Kj(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},Zw=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),Yj=(e,n)=>Zw(u8(e),Gj(e),Xj(e,n)),d8=e=>({target:e,srcElement:e}),m8=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...d8(o)}),Jj=(e,n,o)=>{const r=wr("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Ft,stopImmediatePropagation:Ft,stopPropagation:Ft,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...d8(n)}},Qj=(e,n)=>{const o=rj(e);return n==="dragstart"?(E$(o),k$(o)):n==="drop"?(Qq(o),AM(o)):(by(o),hJ(o)),o},eG=(e,n,o,r)=>{const i=Qj(o,e);return rn(r)?Jj(e,n,i):m8(e,r,n,i)},f8=32,tG=100,Ab=8,qw=16,KM=ls,nG=ds(KM,li),oG=(e,n,o)=>KM(o)&&o!==n&&e.isEditable(o.parentElement),sG=(e,n,o)=>ln(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),gJ=(e,n,o,r)=>{const i=e.dom,u=n.cloneNode(!0);i.setStyles(u,{width:o,height:r}),i.setAttrib(u,"data-mce-selected",null);const h=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(h,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),i.setStyles(u,{margin:0,boxSizing:"border-box"}),h.appendChild(u),h},rG=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},X4=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},Y4=X4("left",-32),jw=X4("left",f8),h8=X4("top",-32),g8=X4("top",f8),aG=(e,n,o,r,i,u,h,v,w,k,P,I)=>{let F=0,W=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>i&&(F=n.pageX+o-i),n.pageY+r>u&&(W=n.pageY+r-u),e.style.width=o-F+"px",e.style.height=r-W+"px";const X=w.clientHeight,G=w.clientWidth,ee=h+w.getBoundingClientRect().top,ce=v+w.getBoundingClientRect().left;P.on(pe=>{pe.intervalId.clear(),pe.dragging&&I&&(h+Ab>=X?pe.intervalId.set(g8(k)):h-Ab<=0?pe.intervalId.set(h8(k)):v+Ab>=G?pe.intervalId.set(jw(k)):v-Ab<=0?pe.intervalId.set(Y4(k)):ee+qw>=window.innerHeight?pe.intervalId.set(g8(window)):ee-qw<=0?pe.intervalId.set(h8(window)):ce+qw>=window.innerWidth?pe.intervalId.set(jw(window)):ce-qw<=0&&pe.intervalId.set(Y4(window)))})},XM=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},iG=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);XM(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&jm(ie.fromDom(o))},YM=e=>e.button===0,p8=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),cG=(e,n)=>o=>{if(YM(o)){const r=ps(n.dom.getParents(o.target),nG).getOr(null);if(Ee(r)&&oG(n.dom,n.getBody(),r)){const i=n.dom.getPos(r),u=n.getBody(),h=n.getDoc().documentElement;e.set({element:r,dataTransfer:OM(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:h.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:h.offsetHeight)-2,relX:o.pageX-i.x,relY:o.pageY-i.y,width:r.offsetWidth,height:r.offsetHeight,ghost:gJ(n,r,r.offsetWidth,r.offsetHeight),intervalId:au(tG)})}}},lG=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),l8(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const i=e._selectionOverrides.showCaret(1,r.node,r.position===xy.Before,!1);i?e.selection.setRng(i):e.selection.placeCaretAt(n,o)})},Ey=(e,n,o,r,i)=>{n==="dragstart"&&A$(r,e.dom.getOuterHTML(o));const u=eG(n,o,r,i);return e.dispatch(n,u)},uG=(e,n)=>{const o=c1((i,u)=>lG(n,i,u),0);n.on("remove",o.cancel);const r=e;return i=>e.on(u=>{const h=Math.max(Math.abs(i.screenX-u.screenX),Math.abs(i.screenY-u.screenY));if(!u.dragging&&h>10){const v=Ey(n,"dragstart",u.element,u.dataTransfer,i);if(Ee(v.dataTransfer)&&(u.dataTransfer=v.dataTransfer),v.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const v=i.currentTarget===n.getDoc().documentElement,w=p8(u,Yj(n,i));rG(u.ghost,n.getBody()),aG(u.ghost,w,u.width,u.height,u.maxX,u.maxY,i.clientY,i.clientX,n.getContentAreaContainer(),n.getWin(),r,v),o.throttle(i.clientX,i.clientY)}})},pJ=e=>{const n=e.getSel();if(Ee(n)){const r=n.getRangeAt(0).startContainer;return We(r)?r.parentNode:r}else return null},dG=(e,n)=>o=>{e.on(r=>{var i;if(r.intervalId.clear(),r.dragging){if(sG(n,pJ(n.selection),r.element)){const u=(i=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&i!==void 0?i:n.getBody();Ey(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{iG(n.dom,r.element),aj(r.dataTransfer).each(v=>n.insertContent(v)),n._selectionOverrides.hideFakeCaret()})}Ey(n,"dragend",n.getBody(),r.dataTransfer,o)}}),y8(e)},b8=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>Ey(n,"dragend",r.element,r.dataTransfer),i=>Ey(n,"dragend",r.element,r.dataTransfer,i))}),y8(e)},v8=(e,n)=>o=>b8(e,n,V.some(o)),y8=e=>{e.on(n=>{n.intervalId.clear(),XM(n.ghost)}),e.clear()},C8=e=>{const n=gc(),o=rs.DOM,r=document,i=cG(n,e),u=uG(n,e),h=dG(n,e),v=v8(n,e);e.on("mousedown",i),e.on("mousemove",u),e.on("mouseup",h),o.bind(r,"mousemove",u),o.bind(r,"mouseup",v),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",v)}),e.on("keydown",w=>{w.keyCode===ze.ESC&&b8(n,e,V.none())})},Ty=e=>{const n=i=>{if(!i.isDefaultPrevented()){const u=i.dataTransfer;u&&(yn(u.types,"Files")||u.files.length>0)&&(i.preventDefault(),i.type==="drop"&&ow(e,"Dropped file type is not supported"))}},o=i=>{Ov(e,i.target)&&n(i)},r=()=>{const i=rs.DOM,u=e.dom,h=document,v=e.inline?e.getBody():e.getDoc(),w=["drop","dragover"];ye(w,k=>{i.bind(h,k,o),u.bind(v,k,n)}),e.on("remove",()=>{ye(w,k=>{i.unbind(h,k,o),u.unbind(v,k,n)})})};e.on("init",()=>{Nt.setEditorTimeout(e,r,0)})},S8=e=>{C8(e),ev(e)&&Ty(e)},mG=e=>{const n=c1(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=Wk(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},fG=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(lr(o)){const r=md(e.getBody(),o),i=ls(r)?r:o;e.selection.getNode()!==i&&pb(e,i).each(u=>e.selection.setRng(u))}})})},Gw=ls,w8=(e,n)=>md(e.getBody(),n),x8=e=>{const n=e.selection,o=e.dom,r=e.getBody(),i=WE(e,r,o.isBlock,()=>it(e)),u="sel-"+o.uniqueId(),h="data-mce-selected";let v;const w=Bt=>Ee(Bt)&&o.hasClass(Bt,"mce-offscreen-selection"),k=Bt=>Bt!==r&&(Gw(Bt)||lr(Bt))&&o.isChildOf(Bt,r)&&o.isEditable(Bt.parentNode),P=Bt=>{Bt&&n.setRng(Bt)},I=(Bt,Fe,Me,Ge=!0)=>e.dispatch("ShowCaret",{target:Fe,direction:Bt,before:Me}).isDefaultPrevented()?null:(Ge&&n.scrollIntoView(Fe,Bt===-1),i.show(Me,Fe)),F=Bt=>{Bt.hasAttribute("data-mce-caret")&&(D0(Bt),n.scrollIntoView(Bt))},W=()=>{e.on("click",Fe=>{o.isEditable(Fe.target)||(Fe.preventDefault(),e.focus())}),e.on("blur NewBlock",Te),e.on("ResizeWindow FullscreenStateChanged",i.reposition),e.on("tap",Fe=>{const Me=Fe.target,Ge=w8(e,Me);Gw(Ge)?(Fe.preventDefault(),pb(e,Ge).each(be)):k(Me)&&pb(e,Me).each(be)},!0),e.on("mousedown",Fe=>{const Me=Fe.target;if(Me!==r&&Me.nodeName!=="HTML"&&!o.isChildOf(Me,r)||!AR(e,Fe.clientX,Fe.clientY))return;Te(),dt();const Ge=w8(e,Me);Gw(Ge)?(Fe.preventDefault(),pb(e,Ge).each(be)):l8(r,Fe.clientX,Fe.clientY).each(kt=>{Fe.preventDefault();const Kt=I(1,kt.node,kt.position===xy.Before,!1);P(Kt),zu(Ge)?Ge.focus():e.getBody().focus()})}),e.on("keypress",Fe=>{ze.modifierPressed(Fe)||Gw(n.getNode())&&Fe.preventDefault()}),e.on("GetSelectionRange",Fe=>{let Me=Fe.range;if(v){if(!v.parentNode){v=null;return}Me=Me.cloneRange(),Me.selectNode(v),Fe.range=Me}}),e.on("SetSelectionRange",Fe=>{Fe.range=ee(Fe.range);const Me=be(Fe.range,Fe.forward);Me&&(Fe.range=Me)});const Bt=Fe=>qt(Fe)&&Fe.id==="mcepastebin";e.on("AfterSetSelectionRange",Fe=>{const Me=Fe.range,Ge=Me.startContainer.parentElement;!G(Me)&&!Bt(Ge)&&dt(),w(Ge)||Te()}),S8(e),mG(e),fG(e)},X=Bt=>qa(Bt)||R0(Bt)||td(Bt),G=Bt=>X(Bt.startContainer)||X(Bt.endContainer),ee=Bt=>{const Fe=e.schema.getVoidElements(),Me=o.createRng(),Ge=Bt.startContainer,kt=Bt.startOffset,Kt=Bt.endContainer,Nn=Bt.endOffset;return un(Fe,Ge.nodeName.toLowerCase())?kt===0?Me.setStartBefore(Ge):Me.setStartAfter(Ge):Me.setStart(Ge,kt),un(Fe,Kt.nodeName.toLowerCase())?Nn===0?Me.setEndBefore(Kt):Me.setEndAfter(Kt):Me.setEnd(Kt,Nn),Me},ce=(Bt,Fe)=>{const Me=ie.fromDom(e.getBody()),Ge=e.getDoc(),kt=_r(Me,"#"+u).getOrThunk(()=>{const Fn=ie.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Ge);return zr(Fn,"id",u),ts(Me,Fn),Fn}),Kt=o.createRng();dl(kt),na(kt,[ie.fromText(br,Ge),ie.fromDom(Fe),ie.fromText(br,Ge)]),Kt.setStart(kt.dom.firstChild,1),Kt.setEnd(kt.dom.lastChild,0),ou(kt,{top:o.getPos(Bt,e.getBody()).y+"px"}),GC(kt);const Nn=n.getSel();return Nn&&(Nn.removeAllRanges(),Nn.addRange(Kt)),Kt},pe=Bt=>{const Fe=Bt.cloneNode(!0),Me=e.dispatch("ObjectSelected",{target:Bt,targetClone:Fe});if(Me.isDefaultPrevented())return null;const Ge=ce(Bt,Me.targetClone),kt=ie.fromDom(Bt);return ye(Wa(ie.fromDom(e.getBody()),`*[${h}]`),Kt=>{oo(kt,Kt)||cs(Kt,h)}),o.getAttrib(Bt,h)||Bt.setAttribute(h,"1"),v=Bt,dt(),Ge},be=(Bt,Fe)=>{if(!Bt)return null;if(Bt.collapsed){if(!G(Bt)){const Kt=Fe?1:-1,Nn=H1(Kt,r,Bt),Fn=Nn.getNode(!Fe);if(Ee(Fn)){if(tf(Fn))return I(Kt,Fn,Fe?!Nn.isAtEnd():!1,!1);if(vl(Fn)&&ls(Fn.nextSibling)){const ko=o.createRng();return ko.setStart(Fn,0),ko.setEnd(Fn,0),ko}}const lo=Nn.getNode(Fe);if(Ee(lo)){if(tf(lo))return I(Kt,lo,Fe?!1:!Nn.isAtEnd(),!1);if(vl(lo)&&ls(lo.previousSibling)){const ko=o.createRng();return ko.setStart(lo,1),ko.setEnd(lo,1),ko}}}return null}let Me=Bt.startContainer,Ge=Bt.startOffset;const kt=Bt.endOffset;if(We(Me)&&Ge===0&&Gw(Me.parentNode)&&(Me=Me.parentNode,Ge=o.nodeIndex(Me),Me=Me.parentNode),!qt(Me))return null;if(kt===Ge+1&&Me===Bt.endContainer){const Kt=Me.childNodes[Ge];if(k(Kt))return pe(Kt)}return null},Te=()=>{v&&v.removeAttribute(h),_r(ie.fromDom(e.getBody()),"#"+u).each(ns),v=null},Ue=()=>{i.destroy(),v=null},dt=()=>{i.hide()};return df(e)||W(),{showCaret:I,showBlockCaretContainer:F,hideFakeCaret:dt,destroy:Ue}},hG=(e,n)=>{let o=n;for(let r=e.previousSibling;We(r);r=r.previousSibling)o+=r.data.length;return o},JM=(e,n,o,r,i)=>{if(We(o)&&(r<0||r>o.data.length))return[];const u=i&&We(o)?[hG(o,r)]:[r];let h=o;for(;h!==n&&h.parentNode;)u.push(e.nodeIndex(h,i)),h=h.parentNode;return h===n?u.reverse():[]},QM=(e,n,o,r,i,u,h=!1)=>{const v=JM(e,n,o,r,h),w=JM(e,n,i,u,h);return{start:v,end:w}},E8=(e,n)=>{const o=n.slice(),r=o.pop();return xo(r)?as(o,(u,h)=>u.bind(v=>V.from(v.childNodes[h])),V.some(e)).bind(u=>We(u)&&(r<0||r>u.data.length)?V.none():V.some({node:u,offset:r})):V.none()},J4=(e,n)=>E8(e,n.start).bind(({node:o,offset:r})=>E8(e,n.end).map(({node:i,offset:u})=>{const h=document.createRange();return h.setStart(o,r),h.setEnd(i,u),h})),T8=(e,n,o,r=!1)=>QM(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Kw=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,We(n.firstChild)&&Vu(n.firstChild.data)),Kw(e,r,o)}},Q4=(e,n,o,r=!0)=>{const i=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(We(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),We(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),Kw(e,i,o),i!==u&&Kw(e,u,o))},Xw=(e,n)=>V.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),eP=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Ym(r).concat(e.blockPatterns),inlinePatterns:Wr(r).concat(e.inlinePatterns)}},Yw=(e,n,o,r)=>{const i=e.createRng();return i.setStart(n,0),i.setEnd(o,r),i.toString()},k8=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),e_=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},_8=(e,n,o)=>{const r=J4(e.getRoot(),o).getOrDie("Unable to resolve path range"),i=r.startContainer,u=r.endContainer,h=r.endOffset===0?u:u.splitText(r.endOffset),v=r.startOffset===0?i:i.splitText(r.startOffset),w=v.parentNode,k=h.parentNode;return{prefix:n,end:k.insertBefore(k8(e,n+"-end"),h),start:w.insertBefore(k8(e,n+"-start"),v)}},tP=(e,n,o)=>{Kw(e,e.get(n.prefix+"-end"),o),Kw(e,e.get(n.prefix+"-start"),o)},ky=e=>e.start.length===0,A8=e=>(n,o)=>{const i=n.data.substring(0,o),u=i.lastIndexOf(e.charAt(e.length-1)),h=i.lastIndexOf(e);return h!==-1?h+e.length:u!==-1?u+1:-1},nP=(e,n,o,r)=>{const i=n.start;return ID(e,r.container,r.offset,A8(i),o).bind(h=>{var v,w;const k=(w=(v=o.textContent)===null||v===void 0?void 0:v.indexOf(i))!==null&&w!==void 0?w:-1;if(k!==-1&&h.offset>=k+i.length){const I=e.createRng();return I.setStart(h.container,h.offset-i.length),I.setEnd(h.container,h.offset),V.some(I)}else{const I=h.offset-i.length;return S4(h.container,I,o).map(F=>{const W=e.createRng();return W.setStart(F.container,F.offset),W.setEnd(h.container,h.offset),W}).filter(F=>F.toString()===i).orThunk(()=>nP(e,n,o,gf(h.container,0)))}})},gG=(e,n,o,r,i,u=!1)=>{if(n.start.length===0&&!u){const h=e.createRng();return h.setStart(o,r),h.setEnd(o,r),V.some(h)}return Rw(o,r,i).bind(h=>nP(e,n,i,h).bind(w=>{var k;if(u){if(w.endContainer===h.container&&w.endOffset===h.offset)return V.none();if(h.offset===0&&((k=w.endContainer.textContent)===null||k===void 0?void 0:k.length)===w.endOffset)return V.none()}return V.some(w)}))},pG=(e,n,o,r)=>{const i=e.dom,u=i.getRoot(),h=o.pattern,v=o.position.container,w=o.position.offset;return S4(v,w-o.pattern.end.length,n).bind(k=>{const P=QM(i,u,k.container,k.offset,v,w,r);if(ky(h))return V.some({matches:[{pattern:h,startRng:P,endRng:P}],position:k});{const I=Jw(e,o.remainingPatterns,k.container,k.offset,n,r),F=I.getOr({matches:[],position:k}),W=F.position;return gG(i,h,W.container,W.offset,n,I.isNone()).map(G=>{const ee=T8(i,u,G,r);return{matches:F.matches.concat([{pattern:h,startRng:ee,endRng:P}]),position:gf(G.startContainer,G.startOffset)}})}})},Jw=(e,n,o,r,i,u)=>{const h=e.dom;return Rw(o,r,h.getRoot()).bind(v=>{const w=Yw(h,i,o,r);for(let k=0;k<n.length;k++){const P=n[k];if(!_a(w,P.end))continue;const I=n.slice();I.splice(k,1);const F=pG(e,i,{pattern:P,remainingPatterns:I,position:v},u);if(F.isNone()&&r>0)return Jw(e,n,o,r-1,i,u);if(F.isSome())return F}return V.none()})},O8=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?ye(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},bG=(e,n,o,r)=>{const i=e_(e.dom,o);Q4(e.dom,i,r),O8(e,n,i)},vG=(e,n,o,r,i)=>{const u=e.dom,h=e_(u,r),v=e_(u,o);Q4(u,v,i),Q4(u,h,i);const w={prefix:o.prefix,start:o.end,end:r.start},k=e_(u,w);O8(e,n,k)},oP=(e,n)=>{const o=sh("mce_textpattern"),r=Bc(n,(i,u)=>{const h=_8(e,o+`_end${i.length}`,u.endRng);return i.concat([{...u,endMarker:h}])},[]);return Bc(r,(i,u)=>{const h=r.length-i.length-1,v=ky(u.pattern)?u.endMarker:_8(e,o+`_start${h}`,u.startRng);return i.concat([{...u,startMarker:v}])},[])},yG=e=>Io(e,(n,o)=>o.end.length-n.end.length),CG=(e,n)=>{const o=ks(e,r=>bo(n,i=>r.pattern.start===i.pattern.start&&r.pattern.end===i.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},R8=(e,n,o,r,i,u)=>{const h=Jw(e,i.inlinePatterns,o,r,n,u).fold(()=>[],w=>w.matches),v=Jw(e,yG(i.inlinePatterns),o,r,n,u).fold(()=>[],w=>w.matches);return CG(h,v)},D8=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),i=oP(o,n);ye(i,u=>{const h=o.getParent(u.startMarker.start,o.isBlock),v=w=>w===h;ky(u.pattern)?bG(e,u.pattern,u.endMarker,v):vG(e,u.pattern,u.startMarker,u.endMarker,v),tP(o,u.endMarker,v),tP(o,u.startMarker,v)}),e.selection.moveToBookmark(r)},M8=(e,n,o)=>CF(n,0,n).map(r=>{const i=r.container;return LD(i,o.start.length,n).each(u=>{const h=e.createRng();h.setStart(i,0),h.setEnd(u.container,u.offset),Q4(e,h,v=>v===n)}),i}),P8=e=>(n,o)=>{const r=n.dom,i=o.pattern,u=J4(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),h=(v,w)=>{const k=w.get(v);return lt(k)&&Ir(k).exists(P=>un(P,"block"))};return Xw(n,u).each(v=>{i.type==="block-format"?h(i.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,v,i),n.formatter.apply(i.format)}):i.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,v,i),n.execCommand(i.cmd,!1,i.value)})}),!0},sP=e=>Io(e,(n,o)=>o.start.length-n.start.length),N8=e=>(n,o)=>{const r=sP(n),i=o.replace(br," ");return ps(r,u=>e(u,o,i))},B8=(e,n)=>(o,r,i,u,h)=>{var v;h===void 0&&(h=(v=r.textContent)!==null&&v!==void 0?v:"");const w=o.dom,k=Rr(o);return w.is(r,k)?e(i.blockPatterns,h).map(P=>n&&Xe.trim(h).length===P.start.length?[]:[{pattern:P,range:QM(w,w.getRoot(),r,0,r,0,u)}]).getOr([]):[]},SG=e=>/^\s[^\s]/.test(e),xG=P8((e,n,o)=>{M8(e,n,o).each(r=>{const i=ie.fromDom(r),u=h1(i);SG(u)&&Wx(i,u.slice(1))})}),EG=N8((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),TG=B8(EG,!0),kG=(e,n)=>{const o=e.selection.getRng();return Xw(e,o).map(r=>{var i;const u=Math.max(0,o.startOffset),h=eP(n,r,(i=r.textContent)!==null&&i!==void 0?i:""),v=R8(e,r,o.startContainer,u,h,!0),w=TG(e,r,h,!0);return{inlineMatches:v,blockMatches:w}}).filter(({inlineMatches:r,blockMatches:i})=>i.length>0||r.length>0)},_G=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();ye(n,r=>xG(e,r)),e.selection.moveToBookmark(o)},AG=P8(M8),OG=N8((e,n,o)=>n===e.start||o===e.start),RG=B8(OG,!1),L8=(e,n)=>{const o=e.selection.getRng();return Xw(e,o).map(r=>{const i=Math.max(0,o.startOffset),u=Yw(e.dom,r,o.startContainer,i),h=eP(n,r,u);return RG(e,r,h,!1,u)}).filter(r=>r.length>0)},DG=(e,n)=>{ye(n,o=>AG(e,o))},rP=(e,n)=>kG(e,n).fold(qe,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{cA(e),D8(e,o),_G(e,r);const i=e.selection.getRng(),u=Rw(i.startContainer,i.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(h=>{const v=h.container;v.data.charAt(h.offset-1)===jp&&(v.deleteData(h.offset-1,1),Kw(e.dom,v.parentNode,w=>w===e.dom.getRoot()))})}),!0)),MG=(e,n)=>{const o=e.selection.getRng();Xw(e,o).map(r=>{const i=Math.max(0,o.startOffset-1),u=Yw(e.dom,r,o.startContainer,i),h=eP(n,r,u),v=R8(e,r,o.startContainer,i,h,!1);v.length>0&&e.undoManager.transact(()=>{D8(e,v)})})},PG=(e,n)=>L8(e,n).fold(qe,o=>(e.undoManager.transact(()=>{DG(e,o)}),!0)),I8=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},NG=(e,n)=>I8(e,n,(o,r)=>o===r.keyCode&&!ze.modifierPressed(r)),BG=(e,n)=>I8(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),LG=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>od(FE(e).filter(h=>h.type==="inline-command"||h.type==="block-command"?e.queryCommandSupported(h.cmd):!0),$E(e)),i=()=>qA(e);e.on("keydown",h=>{if(h.keyCode===13&&!ze.modifierPressed(h)&&e.selection.isCollapsed()&&e.selection.isEditable()){const v=Ag(r(),"enter");(v.inlinePatterns.length>0||v.blockPatterns.length>0||i())&&rP(e,v)&&h.preventDefault()}},!0),e.on("keydown",h=>{if(h.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const v=Ag(r(),"space");(v.blockPatterns.length>0||i())&&PG(e,v)&&h.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const h=Ag(r(),"space");(h.inlinePatterns.length>0||i())&&MG(e,h)}};e.on("keyup",h=>{NG(o,h)&&u()}),e.on("keypress",h=>{BG(n,h)&&Nt.setEditorTimeout(e,u)})},t_=e=>{LG(e)},IG=e=>{const n=Xe.each,o=ze.BACKSPACE,r=ze.DELETE,i=e.dom,u=e.selection,h=e.parser,v=zt.browser,w=v.isFirefox(),k=v.isChromium()||v.isSafari(),P=zt.deviceType.isiPhone()||zt.deviceType.isiPad(),I=zt.os.isMacOS()||zt.os.isiOS(),F=(Pt,Qe)=>{try{e.getDoc().execCommand(Pt,!1,String(Qe))}catch{}},W=Pt=>Pt.isDefaultPrevented(),X=()=>{const Pt=_t=>{const Qt=i.create("body"),_o=_t.cloneContents();return Qt.appendChild(_o),u.serializer.serialize(Qt,{format:"html"})},Qe=_t=>{const Qt=Pt(_t),_o=i.createRng();_o.selectNode(e.getBody());const jn=Pt(_o);return Qt===jn};e.on("keydown",_t=>{const Qt=_t.keyCode;if(!W(_t)&&(Qt===r||Qt===o)&&e.selection.isEditable()){const _o=e.selection.isCollapsed(),jn=e.getBody();if(_o&&!ru(e.schema,jn)||!_o&&!Qe(e.selection.getRng()))return;_t.preventDefault(),e.setContent(""),jn.firstChild&&i.isBlock(jn.firstChild)?e.selection.setCursorLocation(jn.firstChild,0):e.selection.setCursorLocation(jn,0),e.nodeChanged()}})},G=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},ee=()=>{e.inline||i.bind(e.getDoc(),"mousedown mouseup",Pt=>{let Qe;if(Pt.target===e.getDoc().documentElement)if(Qe=u.getRng(),e.getBody().focus(),Pt.type==="mousedown"){if(qa(Qe.startContainer))return;u.placeCaretAt(Pt.clientX,Pt.clientY)}else u.setRng(Qe)})},ce=()=>{e.on("keydown",Pt=>{if(!W(Pt)&&Pt.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Qe=u.getNode(),_t=Qe.previousSibling;if(Qe.nodeName==="HR"){i.remove(Qe),Pt.preventDefault();return}_t&&_t.nodeName&&_t.nodeName.toLowerCase()==="hr"&&(i.remove(_t),Pt.preventDefault())}}})},pe=()=>{Range.prototype.getClientRects||e.on("mousedown",Pt=>{if(!W(Pt)&&Pt.target.nodeName==="HTML"){const Qe=e.getBody();Qe.blur(),Nt.setEditorTimeout(e,()=>{Qe.focus()})}})},be=()=>{const Pt=rd(e);e.on("click",Qe=>{const _t=Qe.target;/^(IMG|HR)$/.test(_t.nodeName)&&i.isEditable(_t)&&(Qe.preventDefault(),e.selection.select(_t),e.nodeChanged()),_t.nodeName==="A"&&i.hasClass(_t,Pt)&&_t.childNodes.length===0&&i.isEditable(_t.parentNode)&&(Qe.preventDefault(),u.select(_t))})},Te=()=>{const Pt=()=>{const _t=i.getAttribs(u.getStart().cloneNode(!1));return()=>{const Qt=u.getStart();Qt!==e.getBody()&&(i.setAttrib(Qt,"style",null),n(_t,_o=>{Qt.setAttributeNode(_o.cloneNode(!0))}))}},Qe=()=>!u.isCollapsed()&&i.getParent(u.getStart(),i.isBlock)!==i.getParent(u.getEnd(),i.isBlock);e.on("keypress",_t=>{let Qt;return!W(_t)&&(_t.keyCode===8||_t.keyCode===46)&&Qe()?(Qt=Pt(),e.getDoc().execCommand("delete",!1),Qt(),_t.preventDefault(),!1):!0}),i.bind(e.getDoc(),"cut",_t=>{if(!W(_t)&&Qe()){const Qt=Pt();Nt.setEditorTimeout(e,()=>{Qt()})}})},Ue=()=>{e.on("keydown",Pt=>{if(!W(Pt)&&Pt.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Qe=u.getNode().previousSibling;if(Qe&&Qe.nodeName&&Qe.nodeName.toLowerCase()==="table")return Pt.preventDefault(),!1}return!0})},dt=()=>{e.on("keydown",Pt=>{if(W(Pt)||Pt.keyCode!==ze.BACKSPACE)return;let Qe=u.getRng();const _t=Qe.startContainer,Qt=Qe.startOffset,_o=i.getRoot();let jn=_t;if(!(!Qe.collapsed||Qt!==0)){for(;jn.parentNode&&jn.parentNode.firstChild===jn&&jn.parentNode!==_o;)jn=jn.parentNode;jn.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,jn),Qe=i.createRng(),Qe.setStart(_t,0),Qe.setEnd(_t,0),u.setRng(Qe))}})},Bt=()=>{const Pt=()=>{F("StyleWithCSS",!1),F("enableInlineTableEditing",!1),Y0(e)||F("enableObjectResizing",!1)};hC(e)||e.on("BeforeExecCommand mousedown",Pt)},Fe=()=>{const Pt=()=>{n(i.select("a:not([data-mce-block])"),Qe=>{var _t;let Qt=Qe.parentNode;const _o=i.getRoot();if((Qt==null?void 0:Qt.lastChild)===Qe){for(;Qt&&!i.isBlock(Qt);){if(((_t=Qt.parentNode)===null||_t===void 0?void 0:_t.lastChild)!==Qt||Qt===_o)return;Qt=Qt.parentNode}i.add(Qt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Qe=>{(Qe.type==="setcontent"||Qe.command==="mceInsertLink")&&Pt()})},Me=()=>{e.on("init",()=>{F("DefaultParagraphSeparator",Rr(e))})},Ge=Pt=>{const Qe=Pt.getBody(),_t=Pt.selection.getRng();return _t.startContainer===_t.endContainer&&_t.startContainer===Qe&&_t.startOffset===0&&_t.endOffset===Qe.childNodes.length},kt=()=>{e.on("keyup focusin mouseup",Pt=>{!ze.modifierPressed(Pt)&&!Ge(e)&&u.normalize()},!0)},Kt=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Nn=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Fn=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Pt=>{let Qe;Pt.target.nodeName==="HTML"&&(Qe=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Qe),e.selection.normalize(),e.nodeChanged())}))},lo=()=>{I&&e.on("keydown",Pt=>{ze.metaKeyPressed(Pt)&&!Pt.shiftKey&&(Pt.keyCode===37||Pt.keyCode===39)&&(Pt.preventDefault(),e.selection.getSel().modify("move",Pt.keyCode===37?"backward":"forward","lineboundary"))})},ko=()=>{e.on("click",Pt=>{let Qe=Pt.target;do if(Qe.tagName==="A"){Pt.preventDefault();return}while(Qe=Qe.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Js=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Pt=>{Pt.preventDefault()})})},Qs=()=>{h.addNodeFilter("br",Pt=>{let Qe=Pt.length;for(;Qe--;)Pt[Qe].attr("class")==="Apple-interchange-newline"&&Pt[Qe].remove()})},wa=Ft,yt=()=>{if(!w||e.removed)return!1;const Pt=e.selection.getSel();return!Pt||!Pt.rangeCount||Pt.rangeCount===0},Xt=()=>{k&&(ee(),be(),Js(),G(),P&&(Nn(),Fn(),ko())),w&&(pe(),Bt(),Kt(),lo())},co=()=>{dt(),X(),zt.windowsPhone||kt(),k&&(ee(),be(),Me(),Js(),Ue(),Qs(),P?(Nn(),Fn(),ko()):G()),w&&(ce(),pe(),Te(),Bt(),Fe(),Kt(),lo(),Ue())};return df(e)?Xt():co(),{refreshContentEditable:wa,isHidden:yt}},FG=e=>e.toLowerCase()==="gpl",$G=e=>e.length>=64&&e.length<=255,HG=e=>FG(e)||$G(e)?"VALID":"INVALID",VG=e=>{const n=zE(e);!Y(wC(e))&&(rn(n)||HG(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},aP=rs.DOM,zG=(e,n)=>{const o=ie.fromDom(e.getBody()),r=Bm(ll(o)),i=ie.fromTag("style");zr(i,"type","text/css"),ts(i,ie.fromText(n)),ts(r,i),e.on("remove",()=>{ns(i)})},UG=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,iP=e=>qo(e,n=>rn(n)===!1),cP=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return iP({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),extended_mathml_attributes:n("extended_mathml_attributes"),extended_mathml_elements:n("extended_mathml_elements"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:UG(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:VE(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},F8=e=>{const n=e.options.get;return iP({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},$8=e=>{const n=e.options.get;return{...cP(e),...F8(e),...iP({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},WG=e=>{const n=Cm(cP(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const i=e.dom,u="data-mce-"+r;let h=o.length;for(;h--;){const v=o[h];let w=v.attr(r);if(w&&!v.attr(u)){if(w.indexOf("data:")===0||w.indexOf("blob:")===0)continue;r==="style"?(w=i.serializeStyle(i.parseStyle(w),v.name),w.length||(w=null),v.attr(u,w),v.attr(r,w)):r==="tabindex"?(v.attr(u,w),v.attr(r,null)):v.attr(u,e.convertURL(w,r,v.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const i=o[r],u=i.attr("type")||"no/type";u.indexOf("mce-")!==0&&i.attr("type","mce-"+u)}}),_H(e)&&n.addNodeFilter("#cdata",o=>{var r;let i=o.length;for(;i--;){const u=o[i];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const i=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(i)&&u.getAll("br").length===0&&u.append(new tc("br",1))}}),n},ZG=e=>{const n=pi(e);n&&Nt.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},H8=e=>{const n=e.dom.getRoot();!e.inline&&(!Vg(e)||e.selection.getStart(!0)===n)&&Sr(n).each(o=>{const r=o.getNode(),i=oa(r)?Sr(r).getOr(o):o;e.selection.setRng(i.toRange())})},Qw=e=>{e.bindPendingEventDelegates(),e.initialized=!0,fa(e),e.focus(!0),H8(e),e.nodeChanged({initial:!0});const n=Qm(e);le(n)&&n.call(e,e),ZG(e),Ph(e)&&PR(e,!0)},lP=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,V8=(e,n,o)=>{const{pass:r,fail:i}=ir(n,v=>tinymce.Resource.has(NR(v))),h=[...r.map(v=>{const w=tinymce.Resource.get(NR(v));return Y(w)?Promise.resolve(lP(e).loadRawCss(v,w)):Promise.resolve()}),lP(e).loadAll(i)];return e.inline?h:h.concat([e.ui.styleSheetLoader.loadAll(o)])},z8=e=>{const n=lP(e),o=AE(e),r=e.contentCSS,i=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?i():e.on("remove",i)};if(e.contentStyles.length>0){let w="";Xe.each(e.contentStyles,k=>{w+=k+`\r
`}),e.dom.addStyle(w)}const h=Promise.all(V8(e,r,o)).then(u).catch(u),v=NA(e);return v&&zG(e,v),h},qG=e=>{const n=e.getDoc(),o=e.getBody();vE(e),RN(e)||(n.body.spellcheck=!1,aP.setAttrib(o,"spellcheck","false")),e.quirks=IG(e),EA(e);const r=OE(e);r!==void 0&&(o.dir=r);const i=Dg(e);i&&e.on("BeforeSetContent",u=>{Xe.each(i,h=>{u.content=u.content.replace(h,v=>"<!--mce:protected "+escape(v)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},jG=e=>{df(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},uP=e=>{e.removed!==!0&&(jG(e),Qw(e))},U8=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},W8=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(aP.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=hC(e),e._editableRoot=NE(e),!ef(e)&&e.hasEditableRoot()&&(e.inline&&aP.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=II(e),e.schema=Jd(F8(e)),e.dom=rs(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:kE(e),referrerPolicy:_1(e),onSetAttrib:h=>{e.dispatch("SetAttrib",h)}}),e.parser=WG(e),e.serializer=gI($8(e),e),e.selection=dI(e.dom,e.getWin(),e.serializer,e),e.annotator=Bo(e),e.formatter=Vk(e),e.undoManager=UI(e),e._nodeChangeDispatcher=new Kq(e),e._selectionOverrides=x8(e),SD(e),Bj(e),K6(e),df(e)||(Fj(e),t_(e));const i=Gq(e);bp(e,i),j6(e),WI(e),Pj(e);const u=JS(e);qG(e),VG(e),u.fold(()=>{const h=U8(e);z8(e).then(()=>{uP(e),h()})},h=>{e.setProgressState(!0),z8(e).then(()=>{h().then(v=>{e.setProgressState(!1),uP(e),Nk(e)},v=>{e.notificationManager.open({type:"error",text:String(v)}),uP(e),Nk(e)})})})},Z8=Ot,GG=(e,n,o)=>B(e,n,Z8,o),dP=rs.DOM,KG=(e,n,o,r)=>{const i=ie.fromTag("iframe");return r.each(u=>zr(i,"tabindex",u)),ua(i,o),ua(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Iu(i,"tox-edit-area__iframe"),i},XG=e=>{let n=OA(e)+"<html><head>";Bi(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=q0(e),r=SE(e),i=e.translate(tv(e));return ha(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+ha(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${i}"><br></body></html>`,n},YG=(e,n)=>{const o=zt.browser.isFirefox()?tv(e):"Rich Text Area",r=e.translate(o),i=Vc(ie.fromDom(e.getElement()),"tabindex").bind(jl),u=KG(e.id,r,AA(e),i).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=XG(e),dP.add(n.iframeContainer,u)},JG=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,W8(e)};if(rv(e)||zt.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=GG(ie.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},QG=(e,n)=>{YG(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=dP.isHidden(n.editorContainer)),e.getElement().style.display="none",dP.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,JG(e)},q8=rs.DOM,eK=(e,n,o)=>{const r=Jv.get(o),i=Jv.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Xe.trim(o),r&&Xe.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,i)||{};e.plugins[o]=u,le(u.init)&&(u.init(e,i),n.push(o))}catch(u){Y9(e,o,u)}}},j8=e=>e.replace(/^\-/,""),mP=e=>{const n=[];ye(gi(e),o=>{eK(e,n,j8(o))})},G8=e=>{const n=Xe.trim(TE(e)),o=e.ui.registry.getAll().icons,r={...tw.get("default").icons,...tw.get(n).icons};Tt(r,(i,u)=>{un(o,u)||e.ui.registry.addIcon(u,i)})},K8=e=>{const n=Rg(e);if(Y(n)){const o=db.get(n);e.theme=o(e,db.urls[n])||{},le(e.theme.init)&&e.theme.init(e,db.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},tK=e=>{const n=lC(e),o=Yv.get(n);e.model=o(e,Yv.urls[n])},nK=e=>{const n=e.theme.renderUI;return n?n():Y8(e)},oK=e=>{const n=e.getElement(),r=Rg(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},fP=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),X8=e=>{const n=q8.create("div");return q8.insertAfter(n,e),fP(n,n)},Y8=e=>{const n=e.getElement();return e.inline?fP(null):X8(n)},sK=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,Y(Rg(e))?nK(e):le(Rg(e))?oK(e):Y8(e)},hP=(e,n)=>{const o={show:V.from(n.show).getOr(Ft),hide:V.from(n.hide).getOr(Ft),isEnabled:V.from(n.isEnabled).getOr(Ot),setEnabled:r=>{r&&(e.mode.get()==="readonly"||Ph(e))||V.from(n.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},n_=async e=>{e.dispatch("ScriptsLoaded"),G8(e),K8(e),tK(e),mP(e);const n=await sK(e);hP(e,V.from(n.api).getOr({})),e.editorContainer=n.editorContainer,BR(e),e.inline?W8(e):QG(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},yf=rs.DOM,Cf=e=>e.charAt(0)==="-",o_=(e,n)=>{const o=Og(n),r=Jm(n);if(!Mi.hasCode(o)&&o!=="en"){const i=Fo(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(i).catch(()=>{X9(n,i,o)})}},_y=(e,n)=>{const o=Rg(e);if(Y(o)&&!Cf(o)&&!un(db.urls,o)){const r=LA(e),i=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;db.load(o,i).catch(()=>{kI(e,i,o)})}},J8=(e,n)=>{const o=lC(e);if(o!=="plugin"&&!un(Yv.urls,o)){const r=IA(e),i=Y(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;Yv.load(o,i).catch(()=>{OR(e,i,o)})}},rK=e=>V.from(RA(e)).filter(Fo).map(n=>({url:n,name:V.none()})),Q8=(e,n,o)=>V.from(n).filter(r=>Fo(r)&&!tw.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:V.some(r)})),e7=(e,n,o)=>{const r=Q8(n,"default",o),i=rK(n).orThunk(()=>Q8(n,TE(n),""));ye(Lp([r,i]),u=>{e.add(u.url).catch(()=>{K9(n,u.url,u.name.getOrUndefined())})})},aK=(e,n)=>{const o=(r,i)=>{Jv.load(r,i).catch(()=>{$k(e,i,r)})};Tt(Q0(e),(r,i)=>{o(i,r),e.options.set("plugins",gi(e).concat(i))}),ye(gi(e),r=>{r=Xe.trim(r),r&&!Jv.urls[r]&&!Cf(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},gP=e=>{const n=Rg(e);return!Y(n)||Ee(db.get(n))},s_=e=>{const n=lC(e);return Ee(Yv.get(n))},xp=(e,n)=>{const o=Yi.ScriptLoader,r=()=>{!e.removed&&gP(e)&&s_(e)&&n_(e)};_y(e,n),J8(e,n),o_(o,e),e7(o,e,n),aK(e,n),o.loadQueue().then(r,r)},Ob=(e,n)=>f2.forElement(e,{contentCssCors:BE(n),referrerPolicy:_1(n)}),t7=e=>{const n=e.id;Mi.setCode(Og(e));const o=()=>{yf.unbind(window,"ready",o),e.render()};if(!Ju.Event.domLoaded){yf.bind(window,"ready",o);return}if(!e.getElement())return;const r=ie.fromDom(e.getElement()),i=$p(r);e.on("remove",()=>{ic(r.dom.attributes,h=>cs(r,h.name)),ua(r,i)}),e.ui.styleSheetLoader=Ob(r,e),R1(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||yf.getParent(n,"form");u&&(e.formElement=u,ME(e)&&!ag(e.getElement())&&(yf.insertAfter(yf.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=h=>{e.dispatch(h.type,h)},yf.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),dC(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=EI(e),e.notificationManager=el(e),yC(e)&&e.on("GetContent",h=>{h.save&&(h.content=yf.encode(h.content))}),mC(e)&&e.on("submit",()=>{e.initialized&&e.save()}),fC(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),xp(e,e.suffix)},iK=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,Ph(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),Cr(e,n))},cK=e=>e._editableRoot,lK=(e,n)=>({sections:St(e),options:St(n)}),n7=la().deviceType,o7=n7.isPhone(),uK=n7.isTablet(),Ay=e=>{if(ln(e))return[];{const n=lt(e)?e:e.split(/[ ,]/),o=Cn(n,Hs);return an(o,Fo)}},dK=(e,n)=>{const o=Ul(n,(r,i)=>yn(e,i));return lK(o.t,o.f)},mK=(e,n,o={})=>{const r=e.sections(),i=Po(r,n).getOr({});return Xe.extend({},o,i)},pP=(e,n)=>un(e.sections(),n),bJ=(e,n)=>pP(e,n)?e.sections()[n]:{},fK=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Po(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),bP=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Xe.extend({},e.external_plugins,r):r},hK=(e,n)=>[...Ay(e),...Ay(n)],gK=(e,n,o,r)=>e&&pP(n,"mobile")?r:o,s7=(e,n,o,r)=>{const i=Ay(o.forced_plugins),u=Ay(r.plugins),h=bJ(n,"mobile"),v=h.plugins?Ay(h.plugins):u,w=gK(e,n,u,v),k=hK(i,w);return Xe.extend(r,{forced_plugins:i,plugins:k})},pK=(e,n)=>e&&pP(n,"mobile"),r7=(e,n,o,r,i)=>{var u;const h=e?{mobile:fK((u=i.mobile)!==null&&u!==void 0?u:{},n)}:{},v=dK(["mobile"],Dw(h,i)),w=Xe.extend(o,r,v.options(),pK(e,v)?mK(v,"mobile"):{},{external_plugins:bP(r,v.options())});return s7(e,v,r,w)},bK=(e,n)=>{const o=Mw(n);return r7(o7||uK,o7,o,e,o)},vP=(e,n)=>oI(e,n),vK=e=>{const n=(r,i)=>{e.formatter.toggle(r,i),e.nodeChanged()},o=r=>()=>{ye("left,center,right,justify".split(","),i=>{r!==i&&e.formatter.remove("align"+i)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},yK=e=>{const n=o=>()=>{const r=e.selection,i=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return bo(i,u=>Ee(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},CK=e=>{vK(e),yK(e)},SK=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(zt.os.isMacOS()||zt.os.isiOS())&&(i=i.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:i,type:"error"})}}})},a7=(e,n,o,r)=>{const i=ie.fromDom(e.getRoot());return hS(i,Le.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Nv(i,Le.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},yP=e=>{if(typeof e!="string"){const n=Xe.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},i7=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?a7(r,o.getRng(),n,e.schema):n},Oy=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=yP(n);jS(e,{...r,content:i7(e,o),format:"html",set:!1,selection:!0}).each(i=>{const u=v9(e,i.content,r);GS(e,u,i),e.addVisual()})}},wK=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Oy(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Oy(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{Oy(e,r)},mceInsertContent:(n,o,r)=>{Oy(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(LE(e))}})},vJ={"font-size":"size","font-family":"face"},yJ=Ql("font"),xK=(e,n,o)=>{const r=u=>zs(u,e).orThunk(()=>yJ(u)?Po(vJ,e).bind(h=>Vc(u,h)):V.none()),i=u=>oo(ie.fromDom(n),u);return dk(ie.fromDom(o),u=>r(u),i)},c7=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),EK=(e,n)=>V.from(rs.DOM.getStyle(n,e,!0)),l7=e=>(n,o)=>V.from(o).map(ie.fromDom).filter(es).bind(r=>xK(e,n,r.dom).or(EK(e,r.dom))).getOr(""),TK=l7("font-size"),CJ=R(c7,l7("font-family")),SJ=e=>Sr(e.getBody()).bind(n=>{const o=n.container();return V.from(We(o)?o.parentNode:o)}),u7=e=>V.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?V.none():V.from(e.selection.getStart(!0))}),d7=(e,n)=>u7(e).orThunk(je(SJ,e)).map(ie.fromDom).filter(es).bind(n),CP=(e,n)=>d7(e,Do(V.some,n)),m7=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=HE(e),i=jA(e);return i.length>0?i[o-1]||n:r[o-1]||n}else return n}else return n},kK=e=>{const n=e.split(/\s*,\s*/);return Cn(n,o=>o.indexOf(" ")!==-1&&!($s(o,'"')||$s(o,"'"))?`'${o}'`:o).join(",")},wJ=(e,n)=>{const o=m7(e,n);e.formatter.toggle("fontname",{value:kK(o)}),e.nodeChanged()},xJ=e=>CP(e,n=>CJ(e.getBody(),n.dom)).getOr(""),EJ=(e,n)=>{e.formatter.toggle("fontsize",{value:m7(e,n)}),e.nodeChanged()},_K=e=>CP(e,n=>TK(e.getBody(),n.dom)).getOr(""),TJ=e=>CP(e,n=>{const o=ie.fromDom(e.getBody()),r=dk(n,u=>zs(u,"line-height"),je(oo,o)),i=()=>{const u=parseFloat(dc(n,"line-height")),h=parseFloat(dc(n,"font-size"));return String(u/h)};return r.getOrThunk(i)}).getOr(""),AK=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},Rb=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,i)=>{n(o,{value:i})},BackColor:(o,r,i)=>{n("hilitecolor",{value:i})},FontName:(o,r,i)=>{wJ(e,i)},FontSize:(o,r,i)=>{EJ(e,i)},LineHeight:(o,r,i)=>{AK(e,i)},Lang:(o,r,i)=>{var u;n(o,{value:i.code,customValue:(u=i.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,i)=>{n(Y(i)?i:"p")},mceToggleFormat:(o,r,i)=>{n(i)}})},SP=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>xJ(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>_K(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>TJ(e))},r_=e=>{Rb(e),SP(e)},f7=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},h7=e=>{e.editorCommands.addCommands({Indent:()=>{xW(e)},Outdent:()=>{Fh(e)}}),e.editorCommands.addCommands({Outdent:()=>H6(e)},"state")},g7=e=>{const n=(o,r,i)=>{if(e.mode.isReadOnly())return;const u=Y(i)?{href:i}:i,h=e.dom.getParent(e.selection.getNode(),"a");we(u)&&Y(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!h||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,h))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},OK=(e,n,o,r)=>{const i=e.dom,u=v=>i.isBlock(v)&&v.parentElement===o,h=u(n)?n:i.getParent(r,u,o);return V.from(h).map(ie.fromDom)},p7=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),i=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,h=Hw(o,u);if(!h||!h.isContentEditable)return;const v=n?Us:mc,w=Rr(e);OK(e,i,h,u).each(k=>{const P=e$(e,u,k.dom,h,!1,w);v(k,ie.fromDom(P)),e.selection.setCursorLocation(P,0),e.dispatch("NewBlock",{newBlock:P}),$w(e,"insertParagraph")})},RK=e=>p7(e,!0),DK=e=>p7(e,!1),MK=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{RK(e)},InsertNewBlockAfter:()=>{DK(e)}})},PK=e=>{e.editorCommands.addCommands({insertParagraph:()=>{py(s$,e)},mceInsertNewLine:(n,o,r)=>{N4(e,r)},InsertLineBreak:(n,o,r)=>{py(yM,e)}})},Ep=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let i=0;e.dom.getParent(e.selection.getNode(),u=>qt(u)&&i++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),li);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},NK=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const i=r??e.selection.getNode();if(i!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(i,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{sn(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},b7=e=>{CK(e),SK(e),f7(e),Ep(e),wK(e),g7(e),h7(e),MK(e),PK(e),r_(e),NK(e)},BK=["toggleview"],ex=e=>yn(BK,e.toLowerCase());class v7{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,i){const u=this.editor,h=n.toLowerCase(),v=i==null?void 0:i.skip_focus;if(u.removed||(h!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(h)&&!v?u.focus():VN(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const k=this.commands.exec[h];return le(k)?(k(h,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!ex(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return le(r)?r(o):!1}queryCommandValue(n){if(!ex(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return le(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;Tt(n,(i,u)=>{ye(u.toLowerCase().split(","),h=>{r[o][h]=i})})}addCommand(n,o,r){const i=n.toLowerCase();this.commands.exec[i]=(u,h,v)=>o.call(r??this.editor,h,v)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const LK=Xe.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class wP{static isNative(n){return!!LK[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||qe}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),i=S2(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const u=this.bindings[r];if(u)for(let h=0,v=u.length;h<v;h++){const w=u[h];if(!w.removed){if(w.once&&this.off(r,w.func),i.isImmediatePropagationStopped())return i;if(w.func.call(this.scope,i)===!1)return i.preventDefault(),i}}return i}on(n,o,r,i){if(o===!1&&(o=qe),o){const u={func:o,removed:!1};i&&Xe.extend(u,i);const h=n.toLowerCase().split(" ");let v=h.length;for(;v--;){const w=h[v];let k=this.bindings[w];k||(k=[],this.toggleEvent(w,!0)),r?k=[u,...k]:k=[...k,u],this.bindings[w]=k}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let i=r.length;for(;i--;){const u=r[i];let h=this.bindings[u];if(!u)return Tt(this.bindings,(v,w)=>{this.toggleEvent(w,!1),delete this.bindings[w]}),this;if(h){if(!o)h.length=0;else{const v=ir(h,w=>w.func===o);h=v.fail,this.bindings[u]=h,ye(v.pass,w=>{w.removed=!0})}h.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else Tt(this.bindings,(r,i)=>{this.toggleEvent(i,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const Ry=e=>(e._eventDispatcher||(e._eventDispatcher=new wP({scope:e,toggleEvent:(n,o)=>{wP.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),xP={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return S2(e.toLowerCase(),n??{},r);const i=Ry(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!i.isPropagationStopped();)u.dispatch(e,i,!1),u=u.parent?u.parent():void 0}return i},on(e,n,o){return Ry(this).on(e,n,o)},off(e,n){return Ry(this).off(e,n)},once(e,n){return Ry(this).once(e,n)},hasEventListeners(e){return Ry(this).has(e)}},a_=rs.DOM;let Db;const i_=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=A1(e);return o?(e.eventRoot||(e.eventRoot=a_.select(o)[0]),e.eventRoot):e.getBody()},EP=e=>!e.hidden&&!Ph(e),y7=(e,n,o)=>{EP(e)?e.dispatch(n,o):Ph(e)&&nU(e,o)},C7=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=i_(e,n);if(A1(e)){if(Db||(Db={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Db&&(Tt(Db,(i,u)=>{e.dom.unbind(i_(e,u))}),Db=null)})),Db[n])return;const r=i=>{const u=i.target,h=e.editorManager.get();let v=h.length;for(;v--;){const w=h[v].getBody();(w===u||a_.isChildOf(u,w))&&y7(h[v],n,i)}};Db[n]=r,a_.bind(o,n,r)}else{const r=i=>{y7(e,n,i)};a_.bind(o,n,r),e.delegates[n]=r}},Br={...xP,bindPendingEventDelegates(){const e=this;Xe.each(e._pendingNativeEvents,n=>{C7(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?C7(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(i_(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(Tt(e.delegates,(r,i)=>{e.dom.unbind(i_(e,i),i,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},IK=e=>Y(e)?{value:e.split(/[ ,]/),valid:!0}:On(e,Y)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},FK=e=>{const n=(()=>{switch(e){case"array":return lt;case"boolean":return at;case"function":return le;case"number":return xo;case"object":return we;case"string":return Y;case"string[]":return IK;case"object[]":return o=>On(o,we);case"regexp":return o=>Oe(o,RegExp);default:return Ot}})();return o=>_P(o,n,`The value must be a ${e}.`)},TP=e=>Y(e.processor),kP=(e,n)=>{const o=Os(n.message)?"":`. ${n.message}`;return e+o},c_=e=>e.valid,_P=(e,n,o="")=>{const r=n(e);return at(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},$K=(e,n,o)=>{if(!rn(n)){const r=_P(n,o);if(c_(r))return r.value;console.error(kP(`Invalid default value passed for the "${e}" option`,r))}},HK=(e,n,o=n)=>{const r={},i={},u=(W,X,G)=>{const ee=_P(X,G);return c_(ee)?(i[W]=ee.value,!0):(console.warn(kP(`Invalid value passed for the ${W} option`,ee)),!1)},h=(W,X)=>{const G=TP(X)?FK(X.processor):X.processor,ee=$K(W,X.default,G);r[W]={...X,default:ee,processor:G},Po(i,W).orThunk(()=>Po(n,W)).each(pe=>u(W,pe,G))},v=W=>un(r,W);return{register:h,isRegistered:v,get:W=>Po(i,W).orThunk(()=>Po(r,W).map(X=>X.default)).getOrUndefined(),set:(W,X)=>{if(v(W)){const G=r[W];return G.immutable?(console.error(`"${W}" is an immutable option and cannot be updated`),!1):u(W,X,G.processor)}else return console.warn(`"${W}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:W=>{const X=v(W);return X&&delete i[W],X},isSet:W=>un(i,W),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(W,X)=>at(X)||xo(X)||Y(X)||ne(X)||lt(X)||gt(X)?X:Object.prototype.toString.call(X))))}catch(W){console.error(W)}}}},VK=(e,n)=>{e.dom.contentEditable="true"},zK=(e,n)=>{const o=ie.fromDom(e.getBody());n?(e.readonly=!0,e.hasEditableRoot()&&VK(o),AI(e)):(e.readonly=!1,MR(e))},tx=e=>e.readonly,UK=e=>{e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",n=>{tx(e)&&n.preventDefault()}),e.on("BeforeExecCommand",n=>{(n.command==="Undo"||n.command==="Redo")&&tx(e)&&n.preventDefault()}),e.on("input",n=>{if(!n.isComposing&&tx(e)){const o=e.undoManager.add();Ee(o)&&e.undoManager.undo()}}),e.on("compositionend",()=>{if(tx(e)){const n=e.undoManager.add();Ee(n)&&e.undoManager.undo()}})},WK=["design","readonly"],Mb=(e,n,o,r)=>{const i=o[n.get()],u=o[r];try{u.activate()}catch(h){console.error(`problem while activating editor mode ${r}:`,h);return}i.deactivate(),i.editorReadOnly!==u.editorReadOnly&&zK(e,u.editorReadOnly),n.set(r),gE(e,r)},Em=(e,n,o,r)=>{if(!(r===o.get()||e.initialized&&Ph(e))){if(!un(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?Mb(e,o,n,r):e.on("init",()=>Mb(e,o,n,r))}},ZK=(e,n,o)=>{if(yn(WK,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},qK=e=>{const n=Ko("design"),o=Ko({design:{activate:Ft,deactivate:Ft,editorReadOnly:!1},readonly:{activate:Ft,deactivate:Ft,editorReadOnly:!0}});return UK(e),MI(e),{isReadOnly:()=>tx(e),set:r=>Em(e,o.get(),n,r),get:()=>n.get(),register:(r,i)=>{o.set(ZK(o.get(),r,i))}}},AP=Xe.each,OP=Xe.explode,jK={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},S7=Xe.makeMap("alt,ctrl,shift,meta,access"),GK=e=>e in S7,KK=e=>{const n={},o=zt.os.isMacOS()||zt.os.isiOS();AP(OP(e.toLowerCase(),"+"),u=>{GK(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=jK[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let i;for(i in S7)n[i]?r.push(i):n[i]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class w7{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(AP(o.shortcuts,i=>{o.matchShortcut(r,i)&&(o.pendingPatterns=i.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(i))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,i){const u=this,h=u.normalizeCommandFunc(r);return AP(OP(Xe.trim(n)),v=>{const w=u.createShortcut(v,o,h,i);u.shortcuts[w.id]=w}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Xe.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,i){const u=Xe.map(OP(n,">"),KK);return u[u.length-1]=Xe.extend(u[u.length-1],{func:r,scope:i||this.editor}),Xe.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const kJ=()=>{const e={},n={},o={},r={},i={},u={},h={},v={},w={},k=(W,X)=>(G,ee)=>{W[G.toLowerCase()]={...ee,type:X}},P=(W,X)=>(G,ee)=>{W[G.toLowerCase()]={type:X,...ee}},I=(W,X)=>r[W.toLowerCase()]=X,F=(W,X)=>h[W.toLowerCase()]=X;return{addButton:k(e,"button"),addGroupToolbarButton:k(e,"grouptoolbarbutton"),addToggleButton:k(e,"togglebutton"),addMenuButton:k(e,"menubutton"),addSplitButton:k(e,"splitbutton"),addMenuItem:k(n,"menuitem"),addNestedMenuItem:k(n,"nestedmenuitem"),addToggleMenuItem:k(n,"togglemenuitem"),addAutocompleter:k(o,"autocompleter"),addContextMenu:k(i,"contextmenu"),addContextToolbar:k(u,"contexttoolbar"),addContextForm:P(u,"contextform"),addSidebar:k(v,"sidebar"),addView:k(w,"views"),addIcon:I,addContext:F,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:i,contextToolbars:u,sidebars:v,views:w,contexts:h})}},XK=()=>{const e=kJ();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},Pb=rs.DOM,x7=Xe.extend,YK=Xe.each;class l_{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,x7(this,Br);const i=this;this.id=n,this.hidden=!1;const u=bK(r.defaultOptions,o);this.options=HK(i,u,o),ON(i);const h=this.options.get;h("deprecation_warnings")&&FY(o,u);const v=h("suffix");v&&(r.suffix=v),this.suffix=r.suffix;const w=h("base_url");w&&r._setBaseUrl(w),this.baseUri=r.baseURI;const k=_1(i);k&&(Yi.ScriptLoader._setReferrerPolicy(k),rs.DOM.styleSheetLoader._setReferrerPolicy(k));const P=BE(i);Ee(P)&&rs.DOM.styleSheetLoader._setContentCssCors(P),ao.languageLoad=h("language_load"),ao.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Tc(Bi(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=R1(i),this.hasVisual=gC(i),this.shortcuts=new w7(this),this.editorCommands=new v7(this),b7(this);const I=h("cache_suffix");I&&(zt.cacheSuffix=I.replace(/^[\?\&]+/,"")),this.ui={registry:XK(),styleSheetLoader:void 0,show:Ft,hide:Ft,setEnabled:Ft,isEnabled:Ot},this.mode=qK(i),r.dispatch("SetupEditor",{editor:this});const F=HA(i);le(F)&&F.call(i,i)}render(){t7(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return it(this)}translate(n){return Mi.translate(n)}getParam(n,o,r){const i=this.options;return i.isRegistered(n)||(Ee(r)?i.register(n,{processor:r,default:o}):i.register(n,{processor:Ot,default:o})),!i.isSet(n)&&!rn(o)?o:i.get(n)}hasPlugin(n,o){return yn(gi(this),n)?o?Jv.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,i){this.shortcuts.add(n,o,r,i)}execCommand(n,o,r,i){return this.editorCommands.execCommand(n,o,r,i)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Pb.show(n.getContainer()),Pb.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Pb.hide(n.getContainer()),Pb.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const i={...n,load:!0},u=ag(r)?r.value:r.innerHTML,h=o.setContent(u,i);return i.no_events||o.dispatch("LoadContent",{...i,element:r}),h}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const i={...n,save:!0,element:r};let u=o.getContent(i);const h={...i,content:u};if(h.no_events||o.dispatch("SaveContent",h),h.format==="raw"&&o.dispatch("RawSaveContent",h),u=h.content,ag(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const v=Pb.getParent(o.id,"form");v&&YK(v.elements,w=>w.name===o.id?(w.value=u,!1):!0)}return h.element=i.element=r=null,h.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return Ik(this,n,o)}getContent(n){return M9(this,n)}insertContent(n,o){o&&(n=x7({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?Ik(this,this.startContent,{format:"raw"}):Ik(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||Pb.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Pb.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const i=this,u=i.options.get,h=nv(i);if(le(h))return h.call(i,n,r,!0,o);if(!u("convert_urls")||r==="link"||we(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const v=new Tc(n);return v.protocol!=="http"&&v.protocol!=="https"&&v.protocol!==""?n:u("relative_urls")?i.documentBaseURI.toRelative(n):(n=i.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){vP(this,n)}setEditableRoot(n){iK(this,n)}hasEditableRoot(){return cK(this)}remove(){Ja(this)}destroy(n){yI(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Dy=rs.DOM,u_=Xe.each;let E7=!1,d_,Oc=[];const m_=e=>{const n=e.type;u_(Tp.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},T7=e=>{if(e!==E7){const n=rs.DOM;e?(n.bind(window,"resize",m_),n.bind(window,"scroll",m_)):(n.unbind(window,"resize",m_),n.unbind(window,"scroll",m_)),E7=e}},k7=e=>{const n=Oc;return Oc=an(Oc,o=>e!==o),Tp.activeEditor===e&&(Tp.activeEditor=Oc.length>0?Oc[0]:null),Tp.focusedEditor===e&&(Tp.focusedEditor=null),n.length!==Oc.length},JK=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(k7(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},QK=document.compatMode!=="CSS1Compat",Tp={...xP,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"8.0",releaseDate:"TBD",i18n:Mi,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Tc.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const i=window.tinymce||window.tinyMCEPreInit;if(i)n=i.base||i.baseURL,o=i.suffix;else{const u=document.getElementsByTagName("script");for(let h=0;h<u.length;h++){const v=u[h].src||"";if(v==="")continue;const w=v.substring(v.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(v)){w.indexOf(".min")!==-1&&(o=".min"),n=v.substring(0,v.lastIndexOf("/"));break}}if(!n&&document.currentScript){const h=document.currentScript.src;h.indexOf(".min")!==-1&&(o=".min"),n=h.substring(0,h.lastIndexOf("/"))}}e.baseURL=new Tc(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Tc(e.baseURL),e.suffix=o,b(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&Tt(r,(i,u)=>{ao.PluginManager.urls[u]=i})},init(e){const n=this;let o;const r=Xe.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),i=(P,I)=>P.inline&&I.tagName.toLowerCase()in r,u=P=>{let I=P.id;return I||(I=Po(P,"name").filter(F=>!Dy.get(F)).getOrThunk(Dy.uniqueId),P.setAttribute("id",I)),I},h=P=>{const I=e[P];if(I)return I.apply(n,[])},v=P=>zt.browser.isIE()||zt.browser.isEdge()?(Hk("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):QK?(Hk("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Y(P.selector)?Dy.select(P.selector):Ee(P.target)?[P.target]:[];let w=P=>{o=P};const k=()=>{let P=0;const I=[];let F;const W=(X,G,ee)=>{const ce=new l_(X,G,n);I.push(ce),ce.on("init",()=>{++P===F.length&&w(I)}),ce.targetElm=ce.targetElm||ee,ce.render()};Dy.unbind(window,"ready",k),h("onpageload"),F=Au(v(e)),Xe.each(F,X=>{JK(n.get(X.id))}),F=Xe.grep(F,X=>!n.get(X.id)),F.length===0?w([]):u_(F,X=>{i(e,X)?Hk("Could not initialize inline editor on invalid inline target element",X):W(u(X),e,X)})};return Dy.bind(window,"ready",k),new Promise(P=>{o?P(o):w=I=>{P(I)}})},get(e){return arguments.length===0?Oc.slice(0):Y(e)?ps(Oc,n=>n.id===e).getOr(null):xo(e)&&Oc[e]?Oc[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Oc.push(e),T7(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),d_||(d_=r=>{const i=n.dispatch("BeforeUnload");if(i.returnValue)return r.preventDefault(),r.returnValue=i.returnValue,i.returnValue},window.addEventListener("beforeunload",d_))),e},createEditor(e,n){return this.add(new l_(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Oc.length-1;r>=0;r--)n.remove(Oc[r]);return}if(Y(e)){u_(Dy.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,ne(n.get(o.id))?null:(k7(o)&&n.dispatch("RemoveEditor",{editor:o}),Oc.length===0&&window.removeEventListener("beforeunload",d_),o.remove(),T7(Oc.length>0),o)},execCommand(e,n,o){var r;const i=this,u=we(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!i.get(u)){const h=o.options;new l_(u,h,i).render()}return!0}case"mceRemoveEditor":{const h=i.get(u);return h&&h.remove(),!0}case"mceToggleEditor":{const h=i.get(u);return h?(h.isHidden()?h.show():h.hide(),!0):(i.execCommand("mceAddEditor",!1,o),!0)}}return i.activeEditor?i.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{u_(Oc,e=>{e.save()})},addI18n:(e,n)=>{Mi.add(e,n)},translate:e=>Mi.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Tc(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Tc(this.baseURL)}};Tp.setup();const eX=(()=>{const e=gc(),n=u=>({items:u,types:fr(u),getType:h=>Po(u,h).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),i=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:i}})(),_7=Math.min,My=Math.max,f_=Math.round,A7=(e,n,o)=>{let r=n.x,i=n.y;const u=e.w,h=e.h,v=n.w,w=n.h,k=(o||"").split("");return k[0]==="b"&&(i+=w),k[1]==="r"&&(r+=v),k[0]==="c"&&(i+=f_(w/2)),k[1]==="c"&&(r+=f_(v/2)),k[3]==="b"&&(i-=h),k[4]==="r"&&(r-=u),k[3]==="c"&&(i-=f_(h/2)),k[4]==="c"&&(r-=f_(u/2)),Py(r,i,u,h)},tX=(e,n,o,r)=>{for(let i=0;i<r.length;i++){const u=A7(e,n,r[i]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[i]}return null},O7=(e,n,o)=>Py(e.x-n,e.y-o,e.w+n*2,e.h+o*2),nX=(e,n)=>{const o=My(e.x,n.x),r=My(e.y,n.y),i=_7(e.x+e.w,n.x+n.w),u=_7(e.y+e.h,n.y+n.h);return i-o<0||u-r<0?null:Py(o,r,i-o,u-r)},oX=(e,n,o)=>{let r=e.x,i=e.y,u=e.x+e.w,h=e.y+e.h;const v=n.x+n.w,w=n.y+n.h,k=My(0,n.x-r),P=My(0,n.y-i),I=My(0,u-v),F=My(0,h-w);return r+=k,i+=P,o&&(u+=k,h+=P,r-=I,i-=F),u-=I,h-=F,Py(r,i,u-r,h-i)},Py=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),sX={inflate:O7,relativePosition:A7,findBestRelativePosition:tX,intersect:nX,clamp:oX,create:Py,fromClientRect:e=>Py(e.left,e.top,e.width,e.height)},rX=(e,n,o=1e3)=>{let r=!1,i=null;const u=k=>(...P)=>{r||(r=!0,i!==null&&(window.clearTimeout(i),i=null),k.apply(null,P))},h=u(e),v=u(n);return{start:(...k)=>{!r&&i===null&&(i=window.setTimeout(()=>v.apply(null,k),o))},resolve:h,reject:v}},aX=(()=>{const e={},n={},o={};return{load:(w,k)=>{const P=`Script at URL "${k}" failed to load`,I=`Script at URL "${k}" did not call \`tinymce.Resource.add('${w}', data)\` within 1 second`;if(e[w]!==void 0)return e[w];{const F=new Promise((W,X)=>{const G=rX(W,X);n[w]=G.resolve,Yi.ScriptLoader.loadScript(k).then(()=>G.start(I),()=>G.reject(P))});return e[w]=F,F}},add:(w,k)=>{n[w]!==void 0&&(n[w](k),delete n[w]),e[w]=Promise.resolve(k),o[w]=k},has:w=>w in o,get:w=>o[w],unload:w=>{delete e[w],delete o[w]}}})(),R7=()=>(()=>{let e={},n=[];const o={getItem:r=>{const i=e[r];return i||null},setItem:(r,i)=>{n.push(r),e[r]=String(i)},key:r=>n[r],removeItem:r=>{n=n.filter(i=>i===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let nx;try{const e="__storage_test__";nx=window.localStorage,nx.setItem(e,e),nx.removeItem(e)}catch{nx=R7()}var iX=nx;const cX={geom:{Rect:sX},util:{Delay:Nt,Tools:Xe,VK:ze,URI:Tc,EventDispatcher:wP,Observable:xP,I18n:Mi,LocalStorage:iX,ImageUploader:LI},dom:{EventUtils:Ju,TreeWalker:cr,TextSeeker:ed,DOMUtils:rs,ScriptLoader:Yi,RangeUtils:Gg,Serializer:gI,StyleSheetLoader:f0,ControlSelection:cf,BookmarkManager:mu,Selection:dI,Event:Ju.Event},html:{Styles:fg,Entities:Yf,Node:tc,Schema:Jd,DomParser:Cm,Writer:_5,Serializer:Kg},Env:zt,AddOnManager:ao,Annotator:Bo,Formatter:Vk,UndoManager:UI,EditorCommands:v7,WindowManager:EI,NotificationManager:el,EditorObservable:Br,Shortcuts:w7,Editor:l_,FocusManager:tS,EditorManager:Tp,DOM:rs.DOM,ScriptLoader:Yi.ScriptLoader,PluginManager:Jv,ThemeManager:db,ModelManager:Yv,IconManager:tw,Resource:aX,FakeClipboard:eX,trim:Xe.trim,isArray:Xe.isArray,is:Xe.is,toArray:Xe.toArray,makeMap:Xe.makeMap,each:Xe.each,map:Xe.map,grep:Xe.grep,inArray:Xe.inArray,extend:Xe.extend,walk:Xe.walk,resolve:Xe.resolve,explode:Xe.explode,_addCacheSuffix:Xe._addCacheSuffix},D7=Xe.extend(Tp,cX),lX=e=>{try{C.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(D7),lX(D7)})()}(DX)),DX.exports}var Gre=jre();const Kre=qre(Gre);var DQ={},MQ;function Xre(){return MQ||(MQ=1,function(){const C=Object.getPrototypeOf,f=(t,s,a)=>{var c;return a(t,s.prototype)?!0:((c=t.constructor)===null||c===void 0?void 0:c.name)===s.name},y=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&f(t,String,(a,c)=>c.isPrototypeOf(a))?"string":s},E=t=>s=>y(s)===t,N=t=>s=>typeof s===t,U=t=>s=>t===s,Q=(t,s)=>Ce(t)&&f(t,s,(a,c)=>C(a)===c),te=E("string"),Ce=E("object"),_e=t=>Q(t,Object),Ie=E("array"),nt=U(null),pt=N("boolean"),Ht=U(void 0),ot=t=>t==null,st=t=>!ot(t),Ne=N("function"),Vt=N("number"),Oe=(t,s)=>{if(Ie(t)){for(let a=0,c=t.length;a<c;++a)if(!s(t[a]))return!1;return!0}return!1},Y=()=>{},we=t=>()=>t(),gt=(t,s)=>(...a)=>t(s.apply(null,a)),lt=(t,s)=>a=>t(s(a)),ne=t=>()=>t,at=t=>t,rn=(t,s)=>t===s;function ln(t,...s){return(...a)=>{const c=s.concat(a);return t.apply(null,c)}}const Ee=t=>s=>!t(s),le=t=>()=>{throw new Error(t)},xo=t=>t(),On=ne(!1),Ft=ne(!0);class R{constructor(s,a){this.tag=s,this.value=a}static some(s){return new R(!0,s)}static none(){return R.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?R.some(s(this.value)):R.none()}bind(s){return this.tag?s(this.value):R.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:R.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return st(s)?R.some(s):R.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}R.singletonNone=new R(!1);const Do=Array.prototype.slice,St=Array.prototype.indexOf,Uo=Array.prototype.push,bn=(t,s)=>St.call(t,s),je=(t,s)=>{const a=bn(t,s);return a===-1?R.none():R.some(a)},Mo=(t,s)=>bn(t,s)>-1,wr=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];if(s(d,a))return!0}return!1},gs=(t,s)=>{const a=[];for(let c=0;c<t;c++)a.push(s(c));return a},Xr=(t,s)=>{const a=[];for(let c=0;c<t.length;c+=s){const d=Do.call(t,c,c+s);a.push(d)}return a},qe=(t,s)=>{const a=t.length,c=new Array(a);for(let d=0;d<a;d++){const g=t[d];c[d]=s(g,d)}return c},Ot=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];s(d,a)}},V=(t,s)=>{for(let a=t.length-1;a>=0;a--){const c=t[a];s(c,a)}},Hl=(t,s)=>{const a=[],c=[];for(let d=0,g=t.length;d<g;d++){const p=t[d];(s(p,d)?a:c).push(p)}return{pass:a,fail:c}},Eo=(t,s)=>{const a=[];for(let c=0,d=t.length;c<d;c++){const g=t[c];s(g,c)&&a.push(g)}return a},Fs=(t,s,a)=>(V(t,(c,d)=>{a=s(a,c,d)}),a),Wo=(t,s,a)=>(Ot(t,(c,d)=>{a=s(a,c,d)}),a),Np=(t,s,a)=>{for(let c=0,d=t.length;c<d;c++){const g=t[c];if(s(g,c))return R.some(g);if(a(g,c))break}return R.none()},yn=(t,s)=>Np(t,s,On),bo=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];if(s(d,a))return R.some(a)}return R.none()},Cn=t=>{const s=[];for(let a=0,c=t.length;a<c;++a){if(!Ie(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Uo.apply(s,t[a])}return s},ye=(t,s)=>Cn(qe(t,s)),ic=(t,s)=>{for(let a=0,c=t.length;a<c;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},ir=t=>{const s=Do.call(t,0);return s.reverse(),s},an=(t,s)=>Eo(t,a=>!Mo(s,a)),Bc=(t,s)=>{const a={};for(let c=0,d=t.length;c<d;c++){const g=t[c];a[String(g)]=s(g,c)}return a},as=t=>[t],_u=(t,s)=>{const a=Do.call(t,0);return a.sort(s),a},ps=(t,s)=>s>=0&&s<t.length?R.some(t[s]):R.none(),Yr=t=>ps(t,0),Dd=t=>ps(t,t.length-1),ti=Ne(Array.from)?Array.from:t=>Do.call(t),ks=(t,s)=>{for(let a=0;a<t.length;a++){const c=s(t[a],a);if(c.isSome())return c}return R.none()},Zo=Object.keys,qi=Object.hasOwnProperty,_s=(t,s)=>{const a=Zo(t);for(let c=0,d=a.length;c<d;c++){const g=a[c],p=t[g];s(p,g)}},Io=(t,s)=>Vl(t,(a,c)=>({k:c,v:s(a,c)})),Vl=(t,s)=>{const a={};return _s(t,(c,d)=>{const g=s(c,d);a[g.k]=g.v}),a},Ir=t=>(s,a)=>{t[a]=s},Si=(t,s,a,c)=>{_s(t,(d,g)=>{(s(d,g)?a:c)(d,g)})},Jr=(t,s)=>{const a={},c={};return Si(t,s,Ir(a),Ir(c)),{t:a,f:c}},zl=(t,s)=>{const a={};return Si(t,s,Ir(a),Y),a},Au=(t,s)=>{const a=[];return _s(t,(c,d)=>{a.push(s(c,d))}),a},fr=(t,s)=>{const a=Zo(t);for(let c=0,d=a.length;c<d;c++){const g=a[c],p=t[g];if(s(p,g,t))return R.some(p)}return R.none()},_f=t=>Au(t,at),Tt=(t,s)=>Jn(t,s)?R.from(t[s]):R.none(),Jn=(t,s)=>qi.call(t,s),Ha=(t,s)=>Jn(t,s)&&t[s]!==void 0&&t[s]!==null,Qr=(t,s,a=rn)=>t.exists(c=>a(c,s)),Ou=(t,s,a=rn)=>ni(t,s,a).getOr(t.isNone()&&s.isNone()),Ul=t=>{const s=[],a=c=>{s.push(c)};for(let c=0;c<t.length;c++)t[c].each(a);return s},qo=t=>{const s=[];for(let a=0;a<t.length;a++){const c=t[a];if(c.isSome())s.push(c.getOrDie());else return R.none()}return R.some(s)},ni=(t,s,a)=>t.isSome()&&s.isSome()?R.some(a(t.getOrDie(),s.getOrDie())):R.none(),Ru=(t,s,a,c)=>t.isSome()&&s.isSome()&&a.isSome()?R.some(c(t.getOrDie(),s.getOrDie(),a.getOrDie())):R.none(),Po=(t,s)=>t!=null?R.some(s(t)):R.none(),un=(t,s)=>t?R.some(s):R.none(),ea=(t,s)=>t+s,Lc=(t,s)=>t.substring(s),Md=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,jh=(t,s)=>As(t,s)?Lc(t,s.length):t,Ta=(t,s)=>wi(t,s)?t:ea(t,s),ms=(t,s,a=0,c)=>{const d=t.indexOf(s,a);return d!==-1?Ht(c)?!0:d+s.length<=c:!1},As=(t,s)=>Md(t,s,0),wi=(t,s)=>Md(t,s,t.length-s.length),Ic=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),xr=t=>t.length>0,is=t=>!xr(t),ji=t=>{const s=parseFloat(t);return isNaN(s)?R.none():R.some(s)},ka=t=>t.style!==void 0&&Ne(t.style.getPropertyValue),Af=(t,s)=>{const c=(s||document).createElement("div");if(c.innerHTML=t,!c.hasChildNodes()||c.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Wl(c.childNodes[0])},Gh=(t,s)=>{const c=(s||document).createElement(t);return Wl(c)},Nd=(t,s)=>{const c=(s||document).createTextNode(t);return Wl(c)},Wl=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},ct={fromHtml:Af,fromTag:Gh,fromText:Nd,fromDom:Wl,fromPoint:(t,s,a)=>R.from(t.dom.elementFromPoint(s,a)).map(Wl)},Zl=typeof window<"u"?window:Function("return this;")(),Bp=(t,s)=>{let a=s??Zl;for(let c=0;c<t.length&&a!==void 0&&a!==null;++c)a=a[t[c]];return a},Am=(t,s)=>{const a=t.split(".");return Bp(a,s)},Qo=(t,s)=>Am(t,s),Of=(t,s)=>{const a=Qo(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},Om=Object.getPrototypeOf,ql=t=>Of("HTMLElement",t),Du=t=>{const s=Am("ownerDocument.defaultView",t);return Ce(t)&&(ql(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Om(t).constructor.name))},Fr=9,$s=11,_a=1,Mu=3,Hs=t=>t.dom.nodeName.toLowerCase(),Rf=t=>t.dom.nodeType,xi=t=>s=>Rf(s)===t,Fo=t=>Os(t)&&Du(t.dom),Os=xi(_a),hr=xi(Mu),jl=xi(Fr),Fc=xi($s),Aa=t=>s=>Os(s)&&Hs(s)===t,jo=(t,s)=>{const a=t.dom;if(a.nodeType!==_a)return!1;{const c=a;if(c.matches!==void 0)return c.matches(s);if(c.msMatchesSelector!==void 0)return c.msMatchesSelector(s);if(c.webkitMatchesSelector!==void 0)return c.webkitMatchesSelector(s);if(c.mozMatchesSelector!==void 0)return c.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Kh=t=>t.nodeType!==_a&&t.nodeType!==Fr&&t.nodeType!==$s||t.childElementCount===0,al=(t,s)=>{const a=s===void 0?document:s.dom;return Kh(a)?[]:qe(a.querySelectorAll(t),ct.fromDom)},Df=(t,s)=>{const a=s===void 0?document:s.dom;return Kh(a)?R.none():R.from(a.querySelector(t)).map(ct.fromDom)},Kn=(t,s)=>t.dom===s.dom,il=(t,s)=>{const a=t.dom,c=s.dom;return a===c?!1:a.contains(c)},ws=t=>ct.fromDom(t.dom.ownerDocument),Mf=t=>jl(t)?t:ws(t),cc=t=>ct.fromDom(Mf(t).dom.documentElement),Gl=t=>ct.fromDom(Mf(t).dom.defaultView),Er=t=>R.from(t.dom.parentNode).map(ct.fromDom),Bd=t=>Er(t),$c=t=>R.from(t.dom.parentElement).map(ct.fromDom),Rm=(t,s)=>{const a=Ne(s)?s:On;let c=t.dom;const d=[];for(;c.parentNode!==null&&c.parentNode!==void 0;){const g=c.parentNode,p=ct.fromDom(g);if(d.push(p),a(p)===!0)break;c=g}return d},Xh=t=>R.from(t.dom.offsetParent).map(ct.fromDom),Pf=t=>R.from(t.dom.nextSibling).map(ct.fromDom),$r=t=>qe(t.dom.childNodes,ct.fromDom),cl=(t,s)=>{const a=t.dom.childNodes;return R.from(a[s]).map(ct.fromDom)},Pu=t=>cl(t,0),Ld=(t,s)=>({element:t,offset:s}),Yh=(t,s)=>{const a=$r(t);return a.length>0&&s<a.length?Ld(a[s],0):Ld(t,s)},Hc=t=>Fc(t)&&st(t.dom.host),Hr=t=>ct.fromDom(t.dom.getRootNode()),gr=t=>Hc(t)?t:ct.fromDom(Mf(t).dom.body),lc=t=>Dm(t).isSome(),Dm=t=>{const s=Hr(t);return Hc(s)?R.some(s):R.none()},Nf=t=>ct.fromDom(t.dom.host),la=t=>{if(st(t.target)){const s=ct.fromDom(t.target);if(Os(s)&&Z(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Yr(a)}}return R.from(t.target)},Z=t=>st(t.dom.shadowRoot),se=t=>{const s=hr(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Dm(ct.fromDom(s)).fold(()=>a.body.contains(s),lt(se,Nf))},ge=()=>He(ct.fromDom(document)),He=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return ct.fromDom(s)},mt=(t,s,a)=>{if(te(a)||pt(a)||Vt(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},Ve=(t,s,a)=>{mt(t.dom,s,a)},zt=(t,s)=>{const a=t.dom;_s(s,(c,d)=>{mt(a,d,c)})},Ln=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},_n=(t,s)=>R.from(Ln(t,s)),Vs=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},zn=(t,s)=>{t.dom.removeAttribute(s)},Nu=t=>Wo(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Mm=(t,s,a)=>{if(!te(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);ka(t)&&t.style.setProperty(s,a)},Kl=(t,s)=>{ka(t)&&t.style.removeProperty(s)},En=(t,s,a)=>{const c=t.dom;Mm(c,s,a)},ta=(t,s)=>{const a=t.dom;_s(s,(c,d)=>{Mm(a,d,c)})},Bf=(t,s)=>{const a=t.dom;_s(s,(c,d)=>{c.fold(()=>{Kl(a,d)},g=>{Mm(a,d,g)})})},Xe=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!se(t)?Xl(a,s):d},Xl=(t,s)=>ka(t)?t.style.getPropertyValue(s):"",Ps=(t,s)=>{const a=t.dom,c=Xl(a,s);return R.from(c).filter(d=>d.length>0)},Lp=t=>{const s={},a=t.dom;if(ka(a))for(let c=0;c<a.style.length;c++){const d=a.style.item(c);s[d]=a.style[d]}return s},Ns=(t,s,a)=>{const c=ct.fromTag(t);return En(c,s,a),Ps(c,s).isSome()},Un=(t,s)=>{const a=t.dom;Kl(a,s),Qr(_n(t,"style").map(Ic),"")&&zn(t,"style")},Ei=t=>t.dom.offsetWidth,Vr=(t,s)=>{const a=(x,T)=>{if(!Vt(T)&&!T.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+T);const O=x.dom;ka(O)&&(O.style[t]=T+"px")},c=x=>{const T=s(x);if(T<=0||T===null){const O=Xe(x,t);return parseFloat(O)||0}return T},d=c,g=(x,T)=>Wo(T,(O,D)=>{const L=Xe(x,D),H=L===void 0?0:parseInt(L,10);return isNaN(H)?O:O+H},0);return{set:a,get:c,getOuter:d,aggregate:g,max:(x,T,O)=>{const D=g(x,O);return T>D?T-D:0}}},Lf=Vr("height",t=>{const s=t.dom;return se(t)?s.getBoundingClientRect().height:s.offsetHeight}),nr=t=>Lf.get(t),Bu=t=>Lf.getOuter(t),Ip=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],c=Lf.max(t,s,a);En(t,"max-height",c+"px")},qb=(t,s)=>({left:t,top:s,translate:(c,d)=>qb(t+c,s+d)}),$o=qb,qy=t=>{const s=t.getBoundingClientRect();return $o(s.left,s.top)},Tr=(t,s)=>t!==void 0?t:s!==void 0?s:0,Va=t=>{const s=t.dom.ownerDocument,a=s.body,c=s.defaultView,d=s.documentElement;if(a===t.dom)return $o(a.offsetLeft,a.offsetTop);const g=Tr(c==null?void 0:c.pageYOffset,d.scrollTop),p=Tr(c==null?void 0:c.pageXOffset,d.scrollLeft),x=Tr(d.clientTop,a.clientTop),T=Tr(d.clientLeft,a.clientLeft);return Ti(t).translate(p-T,g-x)},Ti=t=>{const s=t.dom,c=s.ownerDocument.body;return c===s?$o(c.offsetLeft,c.offsetTop):se(t)?qy(s):$o(0,0)},Lu=Vr("width",t=>t.dom.offsetWidth),jb=(t,s)=>Lu.set(t,s),Rn=t=>Lu.get(t),Id=t=>Lu.getOuter(t),Yl=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],c=Lu.max(t,s,a);En(t,"max-width",c+"px")},Jl=t=>{let s=!1,a;return(...c)=>(s||(s=!0,a=t.apply(null,c)),a)},Pm=(t,s,a,c)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,p=t.isiOS()||t.isAndroid(),x=p||c("(pointer:coarse)"),T=d||!g&&p&&c("(min-device-width:768px)"),O=g||p&&!T,D=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,L=!O&&!T&&!D;return{isiPad:ne(d),isiPhone:ne(g),isTablet:ne(T),isPhone:ne(O),isTouch:ne(x),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:ne(D),isDesktop:ne(L)}},es=(t,s)=>{for(let a=0;a<t.length;a++){const c=t[a];if(c.test(s))return c}},kr=(t,s)=>{const a=es(t,s);if(!a)return{major:0,minor:0};const c=d=>Number(s.replace(a,"$"+d));return Ql(c(1),c(2))},Fd=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?Fp():kr(t,a)},Fp=()=>Ql(0,0),Ql=(t,s)=>({major:t,minor:s}),oi={nu:Ql,detect:Fd,unknown:Fp},zr=(t,s)=>ks(s.brands,a=>{const c=a.brand.toLowerCase();return yn(t,d=>{var g;return c===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:oi.nu(parseInt(a.version,10),0)}))}),ua=(t,s)=>{const a=String(s).toLowerCase();return yn(t,c=>c.search(a))},Oa=(t,s)=>ua(t,s).map(a=>{const c=oi.detect(a.versionRegexes,s);return{current:a.name,version:c}}),Vc=(t,s)=>ua(t,s).map(a=>{const c=oi.detect(a.versionRegexes,s);return{current:a.name,version:c}}),$d=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,cs=t=>s=>ms(s,t),If=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>ms(t,"edge/")&&ms(t,"chrome")&&ms(t,"safari")&&ms(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,$d],search:t=>ms(t,"chrome")&&!ms(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>ms(t,"msie")||ms(t,"trident")},{name:"Opera",versionRegexes:[$d,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:cs("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:cs("firefox")},{name:"Safari",versionRegexes:[$d,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(ms(t,"safari")||ms(t,"mobile/"))&&ms(t,"applewebkit")}],$p=[{name:"Windows",search:cs("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>ms(t,"iphone")||ms(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:cs("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:cs("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:cs("linux"),versionRegexes:[]},{name:"Solaris",search:cs("sunos"),versionRegexes:[]},{name:"FreeBSD",search:cs("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:cs("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Hd={browsers:ne(If),oses:ne($p)},Jh="Edge",jy="Chromium",Vd="IE",zd="Opera",Ud="Firefox",si="Safari",Gb=()=>Iu({current:void 0,version:oi.unknown()}),Iu=t=>{const s=t.current,a=t.version,c=d=>()=>s===d;return{current:s,version:a,isEdge:c(Jh),isChromium:c(jy),isIE:c(Vd),isOpera:c(zd),isFirefox:c(Ud),isSafari:c(si)}},Qh={unknown:Gb,nu:Iu},Ff="Windows",Kb="iOS",Hp="Android",$f="Linux",Vp="macOS",Xb="Solaris",Wd="FreeBSD",zp="ChromeOS",ie=()=>Zd({current:void 0,version:oi.unknown()}),Zd=t=>{const s=t.current,a=t.version,c=d=>()=>s===d;return{current:s,version:a,isWindows:c(Ff),isiOS:c(Kb),isAndroid:c(Hp),isMacOS:c(Vp),isLinux:c($f),isSolaris:c(Xb),isFreeBSD:c(Wd),isChromeOS:c(zp)}},za={unknown:ie,nu:Zd},Yb={detect:(t,s,a)=>{const c=Hd.browsers(),d=Hd.oses(),g=s.bind(T=>zr(c,T)).orThunk(()=>Oa(c,t)).fold(Qh.unknown,Qh.nu),p=Vc(d,t).fold(za.unknown,za.nu),x=Pm(p,g,t,a);return{browser:g,os:p,deviceType:x}}},Nm=t=>window.matchMedia(t).matches;let oo=Jl(()=>Yb.detect(window.navigator.userAgent,R.from(window.navigator.userAgentData),Nm));const xs=()=>oo(),ri=(t,s,a,c,d,g,p)=>({target:t,x:s,y:a,stop:c,prevent:d,kill:g,raw:p}),eu=t=>{const s=ct.fromDom(la(t).getOr(t.target)),a=()=>t.stopPropagation(),c=()=>t.preventDefault(),d=gt(c,a);return ri(s,t.clientX,t.clientY,a,c,d,t)},Jb=(t,s)=>a=>{t(a)&&s(eu(a))},qd=(t,s,a,c,d)=>{const g=Jb(a,c);return t.dom.addEventListener(s,g,d),{unbind:ln(Vf,t,s,g,d)}},ai=(t,s,a,c)=>qd(t,s,a,c,!1),Hf=(t,s,a,c)=>qd(t,s,a,c,!0),Vf=(t,s,a,c)=>{t.dom.removeEventListener(s,a,c)},jd=(t,s)=>{Er(t).each(c=>{c.dom.insertBefore(s.dom,t.dom)})},Fu=(t,s)=>{Pf(t).fold(()=>{Er(t).each(d=>{ki(d,s)})},c=>{jd(c,s)})},zf=(t,s)=>{Pu(t).fold(()=>{ki(t,s)},c=>{t.dom.insertBefore(s.dom,c.dom)})},ki=(t,s)=>{t.dom.appendChild(s.dom)},Uf=(t,s,a)=>{cl(t,a).fold(()=>{ki(t,s)},c=>{jd(c,s)})},Ur=(t,s)=>{Ot(s,a=>{ki(t,a)})},$u=t=>{t.dom.textContent="",Ot($r(t),s=>{uc(s)})},uc=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Ra=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,c=s.body.scrollTop||s.documentElement.scrollTop;return $o(a,c)},Gd=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},Ky=t=>{const s=t===void 0?window:t;return xs().browser.isFirefox()?R.none():R.from(s.visualViewport)},eg=(t,s,a,c)=>({x:t,y:s,width:a,height:c,right:t+a,bottom:s+c}),ll=t=>{const s=t===void 0?window:t,a=s.document,c=Ra(ct.fromDom(a));return Ky(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,p=d.clientHeight;return eg(c.left,c.top,g,p)},d=>eg(Math.max(d.pageLeft,c.left),Math.max(d.pageTop,c.top),d.width,d.height))},Bm=()=>ct.fromDom(document),Qb=(t,s)=>t.view(s).fold(ne([]),c=>{const d=t.owner(c),g=Qb(t,d);return[c].concat(g)}),tg=(t,s)=>{const a=s.owner(t),c=Qb(s,a);return R.some(c)};var t0=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?R.none():R.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(ct.fromDom)},owner:t=>ws(t)});const tu=t=>{const s=Bm(),a=Ra(s);return tg(t,t0).fold(ln(Va,t),d=>{const g=Ti(t),p=Fs(d,(x,T)=>{const O=Ti(T);return{left:x.left+O.left,top:x.top+O.top}},{left:0,top:0});return $o(p.left+g.left+a.left,p.top+g.top+a.top)})},Up=(t,s,a)=>({point:t,width:s,height:a}),ul=(t,s,a,c)=>({x:t,y:s,width:a,height:c}),bs=(t,s,a,c)=>({x:t,y:s,width:a,height:c,right:t+a,bottom:s+c}),pr=t=>{const s=Va(t),a=Id(t),c=Bu(t);return bs(s.left,s.top,a,c)},_i=t=>{const s=tu(t),a=Id(t),c=Bu(t);return bs(s.left,s.top,a,c)},Wf=(t,s)=>{const a=Math.max(t.x,s.x),c=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),p=d-a,x=g-c;return bs(a,c,p,x)},Zf=(t,s)=>Wo(s,(a,c)=>Wf(a,c),t),_r=()=>ll(window),Wt=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Wp=t=>{const s=Wt(R.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(R.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:x=>{a(),s.set(R.some(x))}}},nu=()=>Wp(t=>t.destroy()),Ai=()=>Wp(t=>t.unbind()),uo=()=>{const t=Wp(Y);return{...t,on:a=>t.get().each(a)}};var Hu=(t,s,a,c,d)=>t(a,c)?R.some(a):Ne(d)&&d(a)?R.none():s(a,c,d);const qf=(t,s,a)=>{let c=t.dom;const d=Ne(a)?a:On;for(;c.parentNode;){c=c.parentNode;const g=ct.fromDom(c);if(s(g))return R.some(g);if(d(g))break}return R.none()},ng=(t,s,a)=>Hu((d,g)=>g(d),qf,t,s,a),Zp=(t,s)=>{const a=t.dom;return a.parentNode?ou(ct.fromDom(a.parentNode),c=>!Kn(t,c)&&s(c)):R.none()},ou=(t,s)=>{const a=d=>s(ct.fromDom(d));return yn(t.dom.childNodes,a).map(ct.fromDom)},dc=(t,s)=>{const a=c=>{for(let d=0;d<c.childNodes.length;d++){const g=ct.fromDom(c.childNodes[d]);if(s(g))return R.some(g);const p=a(c.childNodes[d]);if(p.isSome())return p}return R.none()};return a(t.dom)},og=t=>Df(t),zs=(t,s,a)=>qf(t,c=>jo(c,s),a),Ua=(t,s)=>Zp(t,a=>jo(a,s)),ii=(t,s)=>ou(t,a=>jo(a,s)),Pn=(t,s)=>Df(s,t),Us=(t,s,a)=>Hu((d,g)=>jo(d,g),zs,t,s,a);var mc=tinymce.util.Tools.resolve("tinymce.ThemeManager");const sg=t=>{const s=g=>g(t),a=ne(t),c=()=>d,d={tag:!0,inner:t,fold:(g,p)=>p(t),isValue:Ft,isError:On,map:g=>In.value(g(t)),mapError:c,bind:s,exists:s,forall:s,getOr:a,or:c,getOrThunk:a,orThunk:c,getOrDie:a,each:g=>{g(t)},toOptional:()=>R.some(t)};return d},ts=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(c,d)=>c(t),isValue:On,isError:Ft,map:s,mapError:c=>In.error(c(t)),bind:s,exists:On,forall:Ft,getOr:at,or:at,getOrThunk:xo,orThunk:xo,getOrDie:le(String(t)),each:Y,toOptional:R.none};return a},In={value:sg,error:ts,fromOption:(t,s)=>t.fold(()=>ts(s),sg)};var na;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(na||(na={}));const dl=(t,s,a)=>t.stype===na.Error?s(t.serror):a(t.svalue),ns=t=>{const s=[],a=[];return Ot(t,c=>{dl(c,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},su=(t,s)=>t.stype===na.Error?{stype:na.Error,serror:s(t.serror)}:t,Ex=(t,s)=>t.stype===na.Value?{stype:na.Value,svalue:s(t.svalue)}:t,n0=(t,s)=>t.stype===na.Value?s(t.svalue):t,Xy=(t,s)=>t.stype===na.Error?s(t.serror):t,jf=t=>({stype:na.Value,svalue:t}),Yy=t=>({stype:na.Error,serror:t}),Bs={fromResult:t=>t.fold(Yy,jf),toResult:t=>dl(t,In.error,In.value),svalue:jf,partition:ns,serror:Yy,bind:n0,bindError:Xy,map:Ex,mapError:su,fold:dl},_=(t,s,a,c)=>({tag:"field",key:t,newKey:s,presence:a,prop:c}),B=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),z=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},ae=(t,s)=>s,me=(t,s)=>_e(t)&&_e(s)?Rt(t,s):s,Ye=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let c=0;c<s.length;c++){const d=s[c];for(const g in d)Jn(d,g)&&(a[g]=t(a[g],d[g]))}return a},Rt=Ye(me),Dn=Ye(ae),pn=()=>({tag:"required",process:{}}),Zt=t=>({tag:"defaultedThunk",process:t}),Ho=t=>Zt(ne(t)),vs=()=>({tag:"option",process:{}}),ci=t=>({tag:"mergeWithThunk",process:t}),Oi=t=>ci(ne(t)),Jy=(t,s)=>t.length>0?Bs.svalue(Rt(s,Dn.apply(void 0,t))):Bs.svalue(s),Qy=t=>gt(Bs.serror,Cn)(t),s0={consolidateObj:(t,s)=>{const a=Bs.partition(t);return a.errors.length>0?Qy(a.errors):Jy(a.values,s)},consolidateArr:t=>{const s=Bs.partition(t);return s.errors.length>0?Qy(s.errors):Bs.svalue(s.values)}},r0=t=>Ce(t)&&Zo(t).length>100?" removed due to size":JSON.stringify(t,null,2),qp=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:ne("... (only showing first ten failures)")}]):t;return qe(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},cr=(t,s)=>Bs.serror([{path:t,getErrorInfo:s}]),jp=(t,s,a)=>cr(t,()=>'Could not find valid *required* value for "'+s+'" in '+r0(a)),br=(t,s)=>cr(t,()=>'Choice schema did not contain choice key: "'+s+'"'),e2=(t,s,a)=>cr(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+r0(s)),a0=(t,s)=>cr(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),yN=(t,s)=>cr(t,ne(s)),Vu=t=>{const s=(c,d)=>Bs.bindError(t(d),g=>yN(c,g)),a=ne("val");return{extract:s,toString:a}},i0=Vu(Bs.svalue),c0=(t,s,a,c)=>Tt(s,a).fold(()=>jp(t,a,s),c),t2=(t,s,a,c)=>{const d=Tt(t,s).getOrThunk(()=>a(t));return c(d)},Z_=(t,s,a)=>a(Tt(t,s)),kx=(t,s,a,c)=>{const d=Tt(t,s).map(g=>g===!0?a(t):g);return c(d)},Gf=(t,s,a,c,d)=>{const g=x=>d.extract(s.concat([c]),x),p=x=>x.fold(()=>Bs.svalue(R.none()),T=>{const O=d.extract(s.concat([c]),T);return Bs.map(O,R.some)});switch(t.tag){case"required":return c0(s,a,c,g);case"defaultedThunk":return t2(a,c,t.process,g);case"option":return Z_(a,c,p);case"defaultedOptionThunk":return kx(a,c,t.process,p);case"mergeWithThunk":return t2(a,c,ne({}),x=>{const T=Rt(t.process(a),x);return g(T)})}},Gp=(t,s,a)=>{const c={},d=[];for(const g of a)z(g,(p,x,T,O)=>{const D=Gf(T,t,s,p,O);Bs.fold(D,L=>{d.push(...L)},L=>{c[x]=L})},(p,x)=>{c[p]=x(s)});return d.length>0?Bs.serror(d):Bs.svalue(c)},qt=t=>({extract:(c,d)=>t().extract(c,d),toString:()=>t().toString()}),zu=t=>Zo(zl(t,st)),fc=t=>{const s=dn(t),a=Fs(t,(d,g)=>z(g,p=>Rt(d,{[p]:!0}),ne(d)),{});return{extract:(d,g)=>{const p=pt(g)?[]:zu(g),x=Eo(p,T=>!Ha(a,T));return x.length===0?s.extract(d,g):a0(d,x)},toString:s.toString}},dn=t=>({extract:(c,d)=>Gp(c,d,t),toString:()=>`obj{
`+qe(t,d=>z(d,(g,p,x,T)=>g+" -> "+T.toString(),(g,p)=>"state("+g+")")).join(`
`)+"}"}),Da=t=>({extract:(c,d)=>{const g=qe(d,(p,x)=>t.extract(c.concat(["["+x+"]"]),p));return s0.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),Lm=(t,s)=>{const a=s!==void 0?s:at;return{extract:(g,p)=>{const x=[];for(const T of t){const O=T.extract(g,p);if(O.stype===na.Value)return{stype:na.Value,svalue:a(O.svalue)};x.push(O)}return s0.consolidateArr(x)},toString:()=>"oneOf("+qe(t,g=>g.toString()).join(", ")+")"}},n2=(t,s)=>{const a=(g,p)=>Da(Vu(t)).extract(g,p);return{extract:(g,p)=>{const x=Zo(p),T=a(g,x);return Bs.bind(T,O=>{const D=qe(O,L=>_(L,L,pn(),s));return dn(D).extract(g,p)})},toString:()=>"setOf("+s.toString()+")"}},Kf=(t,s)=>{const a=Jl(s);return{extract:(g,p)=>a().extract(g,p),toString:()=>a().toString()}},l0=gt(Da,dn),oa=ne(i0),Kp=(t,s)=>Vu(a=>{const c=typeof a;return t(a)?Bs.svalue(a):Bs.serror(`Expected type: ${s} but got: ${c}`)}),ag=Kp(Vt,"number"),We=Kp(te,"string"),Xp=Kp(pt,"boolean"),Im=Kp(Ne,"function"),Kd=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Kd(t[s]));default:return!1}},Yp=Vu(t=>Kd(t)?Bs.svalue(t):Bs.serror("Expected value to be acceptable for sending via postMessage")),u0=(t,s,a,c)=>Tt(a,c).fold(()=>e2(t,a,c),g=>g.extract(t.concat(["branch: "+c]),s)),Go=(t,s)=>({extract:(d,g)=>Tt(g,t).fold(()=>br(d,t),x=>u0(d,g,s,x)),toString:()=>"chooseOn("+t+"). Possible values: "+Zo(s)}),_x=()=>Da(i0),li=t=>Vu(s=>t(s).fold(Bs.serror,Bs.svalue)),ls=(t,s)=>n2(a=>Bs.fromResult(t(a)),s),o2=(t,s,a)=>{const c=s.extract([t],a);return Bs.mapError(c,d=>({input:a,errors:d}))},os=(t,s,a)=>Bs.toResult(o2(t,s,a)),ml=t=>t.fold(s=>{throw new Error(ig(s))},at),lr=(t,s,a)=>ml(os(t,s,a)),ig=t=>`Errors: 
`+qp(t.errors).join(`
`)+`

Input object: `+r0(t.input),Za=(t,s)=>Go(t,Io(s,dn)),Ax=(t,s)=>Kf(t,s),sa=_,ui=B,s2=t=>li(s=>Mo(t,s)?In.value(s):In.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Ze=t=>sa(t,t,pn(),oa()),Ri=(t,s)=>sa(t,t,pn(),s),d0=t=>Ri(t,ag),vr=t=>Ri(t,We),fl=(t,s)=>sa(t,t,pn(),s2(s)),hc=t=>Ri(t,Im),ru=(t,s)=>sa(t,t,vs(),Vu(a=>Bs.serror("The field: "+t+" is forbidden. "+s))),Ws=(t,s)=>sa(t,t,pn(),dn(s)),r2=(t,s)=>sa(t,t,pn(),l0(s)),Ko=(t,s)=>sa(t,t,pn(),Da(s)),no=t=>sa(t,t,vs(),oa()),au=(t,s)=>sa(t,t,vs(),s),gc=t=>au(t,ag),Ls=t=>au(t,We),Fm=(t,s)=>au(t,s2(s)),Uu=t=>au(t,Im),$m=(t,s)=>au(t,Da(s)),Gi=(t,s)=>au(t,dn(s)),q_=(t,s)=>au(t,fc(s)),Se=(t,s)=>sa(t,t,Ho(s),oa()),zc=(t,s,a)=>sa(t,t,Ho(s),a),Jp=(t,s)=>zc(t,s,ag),ys=(t,s)=>zc(t,s,We),hl=(t,s,a)=>zc(t,s,s2(a)),da=(t,s)=>zc(t,s,Xp),ss=(t,s)=>zc(t,s,Im),a2=(t,s)=>zc(t,s,Yp),Wu=(t,s,a)=>zc(t,s,Da(a)),cg=(t,s,a)=>zc(t,s,dn(a)),Ma={generate:t=>{if(!Ie(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return Ot(t,(c,d)=>{const g=Zo(c);if(g.length!==1)throw new Error("one and only one name per case");const p=g[0],x=c[p];if(a[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ie(x))throw new Error("case arguments must be an array");s.push(p),a[p]=(...T)=>{const O=T.length;if(O!==x.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+x.length+" ("+x+"), got "+O);return{fold:(...L)=>{if(L.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+L.length);return L[d].apply(null,T)},match:L=>{const H=Zo(L);if(s.length!==H.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+H.join(","));if(!ic(s,J=>Mo(H,J)))throw new Error("Not all branches were specified when using match. Specified: "+H.join(", ")+`
Required: `+s.join(", "));return L[p].apply(null,T)},log:L=>{console.log(L,{constructors:s,constructor:p,params:T})}}}}),a}};Ma.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const i2=t=>{const s=[],a=[];return Ot(t,c=>{c.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},c2=(t,s)=>{const a={};return _s(t,(c,d)=>{Mo(s,d)||(a[d]=c)}),a},l2=(t,s)=>({[t]:s}),Hm=t=>{const s={};return Ot(t,a=>{s[a.key]=a.value}),s},Ox=(t,s)=>c2(t,s),Zu=(t,s)=>l2(t,s),lg=t=>Hm(t),Rx=(t,s)=>t.length===0?In.value(s):In.value(Rt(s,Dn.apply(void 0,t))),u2=t=>In.error(Cn(t)),m0=(t,s)=>{const a=i2(t);return a.errors.length>0?u2(a.errors):Rx(a.values,s)},d2=t=>Ne(t)?t:On,f0=(t,s,a)=>{let c=t.dom;const d=d2(a);for(;c.parentNode;){c=c.parentNode;const g=ct.fromDom(c),p=s(g);if(p.isSome())return p;if(d(g))break}return R.none()},m2=(t,s,a)=>{const c=s(t),d=d2(a);return c.orThunk(()=>d(t)?R.none():f0(t,s,d))},f2=(t,s)=>Kn(t.element,s.event.target),j_={can:Ft,abort:On,run:Y},Xf=t=>{if(!Ha(t,"can")&&!Ha(t,"abort")&&!Ha(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...j_,...t}},h2=(t,s)=>(...a)=>Wo(t,(c,d)=>c&&s(d).apply(void 0,a),!0),g2=(t,s)=>(...a)=>Wo(t,(c,d)=>c||s(d).apply(void 0,a),!1),G_=t=>Ne(t)?{can:Ft,abort:On,run:t}:t,K_=t=>{const s=h2(t,d=>d.can),a=g2(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{Ot(t,g=>{g.run.apply(void 0,d)})}}},Rs=ne,gl=Rs("touchstart"),ug=Rs("touchmove"),qu=Rs("touchend"),Qp=Rs("touchcancel"),pc=Rs("mousedown"),e1=Rs("mousemove"),h0=Rs("mouseout"),ju=Rs("mouseup"),pl=Rs("mouseover"),Uc=Rs("focusin"),g0=Rs("focusout"),Ki=Rs("keydown"),t1=Rs("keyup"),bc=Rs("input"),iu=Rs("change"),Xd=Rs("click"),X_=Rs("transitioncancel"),p0=Rs("transitionend"),Yf=Rs("transitionstart"),Pa=Rs("selectstart"),Zs=t=>ne("alloy."+t),Y_={tap:Zs("tap")},Vm=Zs("focus"),n1=Zs("blur.post"),b0=Zs("paste.post"),zm=Zs("receive"),Di=Zs("execute"),dg=Zs("focus.item"),Gu=Y_.tap,Dx=Zs("longpress"),Jf=Zs("sandbox.close"),Ku=Zs("typeahead.cancel"),Xu=Zs("system.init"),v0=Zs("system.touchmove"),Mx=Zs("system.touchend"),y0=Zs("system.scroll"),Yd=Zs("system.resize"),Xi=Zs("system.attached"),ma=Zs("system.detached"),Um=Zs("system.dismissRequested"),p2=Zs("system.repositionRequested"),Qf=Zs("focusmanager.shifted"),C0=Zs("slotcontainer.visibility"),S0=Zs("system.external.element.scroll"),Jd=Zs("change.tab"),Px=Zs("dismiss.tab"),w0=Zs("highlight"),o1=Zs("dehighlight"),Wn=(t,s)=>{x0(t,t.element,s,{})},Gt=(t,s,a)=>{x0(t,t.element,s,a)},Qd=t=>{Wn(t,Di())},b2=(t,s,a)=>{x0(t,s,a,{})},x0=(t,s,a,c)=>{const d={target:s,...c};t.getSystem().triggerEvent(a,s,d)},v2=(t,s,a,c)=>{const d={...c,target:s};t.getSystem().triggerEvent(a,s,d)},y2=(t,s,a,c)=>{t.getSystem().triggerEvent(a,s,c.event)},No=t=>lg(t),mg=(t,s)=>({key:t,value:Xf({abort:s})}),fg=(t,s)=>({key:t,value:Xf({can:s})}),J_=t=>({key:t,value:Xf({run:(s,a)=>{a.event.prevent()}})}),$e=(t,s)=>({key:t,value:Xf({run:s})}),C2=(t,s,a)=>({key:t,value:Xf({run:(c,d)=>{s.apply(void 0,[c,d].concat(a))}})}),Q_=t=>s=>$e(t,s),s1=t=>s=>({key:t,value:Xf({run:(a,c)=>{f2(a,c)&&s(a,c)}})}),S2=(t,s)=>$e(t,(a,c)=>{a.getSystem().getByUid(s).each(d=>{y2(d,d.element,t,c)})}),hg=(t,s,a)=>{const c=s.partUids[a];return S2(t,c)},w2=(t,s)=>$e(t,(a,c)=>{const d=c.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>m2(d.target,x=>a.getSystem().getByDom(x).toOptional(),On).getOr(a));s(a,g,c)}),Yu=t=>$e(t,(s,a)=>{a.cut()}),gg=t=>$e(t,(s,a)=>{a.stop()}),pg=(t,s)=>s1(t)(s),vo=s1(Xi()),vc=s1(ma()),Ju=s1(Xu()),cu=Q_(Di()),Nx=(t,s,a)=>{const c=a.toString(),d=c.indexOf(")")+1,g=c.indexOf("("),p=c.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:r1(p.slice(0,1).concat(p.slice(3)))}),t},r1=t=>qe(t,s=>wi(s,"/*")?s.substring(0,s.length-2):s),x2=(t,s)=>{const a=t.toString(),c=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:r1(g)}),t},bg=(t,s)=>{const a=s.toString(),c=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:r1(g.slice(1))}),t},Wc=t=>({classes:Ht(t.classes)?[]:t.classes,attributes:Ht(t.attributes)?{}:t.attributes,styles:Ht(t.styles)?{}:t.styles}),eh=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),Bx=(t,s,a)=>cu(c=>{a(c,t,s)}),E2=(t,s,a)=>Ju((c,d)=>{a(c,t,s)}),a1=(t,s,a,c,d,g)=>{const p=fc(t),x=Gi(s,[q_("config",t)]);return Lx(p,x,s,a,c,d,g)},eA=(t,s,a,c,d,g)=>{const p=t,x=Gi(s,[au("config",t)]);return Lx(p,x,s,a,c,d,g)},rs=(t,s,a)=>Nx((d,...g)=>{const p=[d].concat(g);return d.config({name:ne(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},x=>{const T=Array.prototype.slice.call(p,1);return s.apply(void 0,[d,x.config,x.state].concat(T))})},a,s),T2=t=>({key:t,value:void 0}),Lx=(t,s,a,c,d,g,p)=>{const x=L=>Ha(L,a)?L[a]():R.none(),T=Io(d,(L,H)=>rs(a,L,H)),D={...Io(g,(L,H)=>x2(L,H)),...T,revoke:ln(T2,a),config:L=>{const H=lr(a+"-config",t,L);return{key:a,value:{config:H,me:D,configAsRaw:Jl(()=>lr(a+"-config",t,L)),initialConfig:L,state:p}}},schema:ne(s),exhibit:(L,H)=>ni(x(L),Tt(c,"exhibit"),(q,J)=>J(H,q.config,q.state)).getOrThunk(()=>Wc({})),name:ne(a),handlers:L=>x(L).map(H=>Tt(c,"events").getOr(()=>({}))(H.config,H.state)).getOr({})};return D},Zc={init:()=>di({readState:ne("No State required")})},di=t=>t,rt=t=>lg(t),Yi=fc([Ze("fields"),Ze("name"),Se("active",{}),Se("apis",{}),Se("state",Zc),Se("extra",{})]),yr=t=>{const s=lr("Creating behaviour: "+t.name,Yi,t);return a1(s.fields,s.name,s.active,s.apis,s.extra,s.state)},tA=fc([Ze("branchKey"),Ze("branches"),Ze("name"),Se("active",{}),Se("apis",{}),Se("state",Zc),Se("extra",{})]),Ix=t=>{const s=lr("Creating behaviour: "+t.name,tA,t);return eA(Za(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},i1=ne(void 0),vg=(t,s)=>{const a=Ln(t,s);return a===void 0||a===""?[]:a.split(" ")},Fx=(t,s,a)=>{const d=vg(t,s).concat([a]);return Ve(t,s,d.join(" ")),!0},$x=(t,s,a)=>{const c=Eo(vg(t,s),d=>d!==a);return c.length>0?Ve(t,s,c.join(" ")):zn(t,s),!1},yc=t=>t.dom.classList!==void 0,Hx=t=>vg(t,"class"),nA=(t,s)=>Fx(t,"class",s),oA=(t,s)=>$x(t,"class",s),SN=(t,s)=>Mo(Hx(t),s)?oA(t,s):nA(t,s),qs=(t,s)=>{yc(t)?t.dom.classList.add(s):nA(t,s)},Mi=t=>{(yc(t)?t.dom.classList:Hx(t)).length===0&&zn(t,"class")},ao=(t,s)=>{yc(t)?t.dom.classList.remove(s):oA(t,s),Mi(t)},c1=(t,s)=>{const a=yc(t)?t.dom.classList.toggle(s):SN(t,s);return Mi(t),a},Na=(t,s)=>yc(t)&&t.dom.classList.contains(s),th=(t,s)=>{Ot(s,a=>{qs(t,a)})},Pi=(t,s)=>{Ot(s,a=>{ao(t,a)})},nh=(t,s)=>{Ot(s,a=>{c1(t,a)})},yg=(t,s)=>ic(s,a=>Na(t,a)),Wm=t=>{const s=t.dom.classList,a=new Array(s.length);for(let c=0;c<s.length;c++){const d=s.item(c);d!==null&&(a[c]=d)}return a},oh=t=>yc(t)?Wm(t):Hx(t),mi=(t,s,a,c,d)=>{const g=p=>p+"px";return{position:t,left:s.map(g),top:a.map(g),right:c.map(g),bottom:d.map(g)}},l1=t=>({...t,position:R.some(t.position)}),k2=(t,s)=>{Bf(t,l1(s))},E0=t=>(Qr(Ps(t,"position"),"fixed")?R.none():Xh(t)).orThunk(()=>{const c=ct.fromTag("span");return Er(t).bind(d=>{ki(d,c);const g=Xh(c);return uc(c),g})}),u1=t=>E0(t).map(Va).getOrThunk(()=>$o(0,0)),d1=(t,s)=>{const a=t.element;qs(a,s.transitionClass),ao(a,s.fadeOutClass),qs(a,s.fadeInClass),s.onShow(t)},m1=(t,s)=>{const a=t.element;qs(a,s.transitionClass),ao(a,s.fadeInClass),qs(a,s.fadeOutClass),s.onHide(t)},T0=(t,s)=>t.y<s.bottom&&t.bottom>s.y,Vx=(t,s)=>t.y>=s.y,_2=(t,s)=>t.bottom<=s.bottom,f1=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),k0=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),_0=t=>t.box.x-t.win.x,sh=(t,s,a)=>{const c=s.win,d=s.box,g=_0(s);return ks(t,p=>{switch(p){case"bottom":return _2(d,a.bounds)?R.none():R.some(k0(c,g,a));case"top":return Vx(d,a.bounds)?R.none():R.some(f1(c,g,a));default:return R.none()}}).getOr({location:"no-dock"})},A2=(t,s,a)=>ic(t,c=>{switch(c){case"bottom":return _2(s,a.bounds);case"top":return Vx(s,a.bounds)}}),zx=(t,s)=>{const a=s.optScrollEnv.fold(ne(t.bounds.y),c=>c.scrollElmTop+(t.bounds.y-c.currentScrollTop));return $o(t.bounds.x,a)},O2=(t,s)=>{const a=s.optScrollEnv.fold(ne(t.y),c=>t.y+c.currentScrollTop-c.scrollElmTop);return $o(t.x,a)},Qu=(t,s,a)=>a.getInitialPos().map(c=>{const d=zx(c,s);return{box:bs(d.left,d.top,Rn(t),nr(t)),location:c.location}}),Ux=(t,s,a,c,d)=>{const g=O2(s,a),p=bs(g.left,g.top,s.width,s.height);c.setInitialPos({style:Lp(t),position:Xe(t,"position")||"static",bounds:p,location:d.location})},wN=(t,s,a,c,d)=>{c.getInitialPos().fold(()=>Ux(t,s,a,c,d),()=>Y)},Cg=(t,s,a)=>a.getInitialPos().bind(c=>{var d;switch(a.clearInitialPos(),c.position){case"static":return R.some({morph:"static"});case"absolute":const g=E0(t).getOr(ge()),p=pr(g),x=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return R.some({morph:"absolute",positionCss:mi("absolute",Tt(c.style,"left").map(T=>s.x-p.x),Tt(c.style,"top").map(T=>s.y-p.y+x),Tt(c.style,"right").map(T=>p.right-s.right),Tt(c.style,"bottom").map(T=>p.bottom-s.bottom))});default:return R.none()}}),Sg=(t,s,a)=>Qu(t,s,a).filter(({box:c})=>A2(a.getModes(),c,s)).bind(({box:c})=>Cg(t,c,a)),ed=t=>{switch(t.location){case"top":return R.some({morph:"fixed",positionCss:mi("fixed",R.some(t.leftX),R.some(t.topY),R.none(),R.none())});case"bottom":return R.some({morph:"fixed",positionCss:mi("fixed",R.some(t.leftX),R.none(),R.none(),R.some(t.bottomY))});default:return R.none()}},xN=(t,s,a)=>{const c=pr(t),d=_r(),g=sh(a.getModes(),{win:d,box:c},s);return g.location==="top"||g.location==="bottom"?(Ux(t,c,s,a,g),ed(g)):R.none()},R2=(t,s,a)=>Sg(t,s,a).orThunk(()=>s.optScrollEnv.bind(c=>Qu(t,s,a)).bind(({box:c,location:d})=>{const g=_r(),p=_0({win:g,box:c}),x=d==="top"?f1(g,p,s):k0(g,p,s);return ed(x)})),h1=(t,s,a)=>{const c=t.element;return Qr(Ps(c,"position"),"fixed")?R2(c,s,a):xN(c,s,a)},sA=(t,s,a)=>{const c=t.element;return Qu(c,s,a).bind(({box:d})=>Cg(c,d,a))},Wx=(t,s,a,c)=>{const d=pr(t),g=_r(),p=_0({win:g,box:d}),x=c(g,p,s);return x.location==="bottom"||x.location==="top"?(wN(t,d,s,a,x),ed(x)):R.none()},D2=(t,s,a)=>{a.setDocked(!1),Ot(["left","right","top","bottom","position"],c=>Un(t.element,c)),s.onUndocked(t)},M2=(t,s,a,c)=>{const d=c.position==="fixed";a.setDocked(d),k2(t.element,c),(d?s.onDocked:s.onUndocked)(t)},Zx=(t,s,a,c,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(p=>{const x=T0(p,c.bounds);x!==a.isVisible()&&(a.setVisible(x),d&&!x?(th(t.element,[g.fadeOutClass]),g.onHide(t)):(x?d1:m1)(t,g))})})},wg=(t,s,a,c,d)=>{Zx(t,s,a,c,!0),M2(t,s,a,d.positionCss)},rA=(t,s,a,c,d)=>{switch(d.morph){case"static":return D2(t,s,a);case"absolute":return M2(t,s,a,d.positionCss);case"fixed":return wg(t,s,a,c,d)}},A0=(t,s,a)=>{const c=s.lazyViewport(t);Zx(t,s,a,c),h1(t,c,a).each(d=>{rA(t,s,a,c,d)})},Zm=(t,s,a)=>{const c=t.element;a.setDocked(!1);const d=s.lazyViewport(t);sA(t,d,a).each(g=>{switch(g.morph){case"static":{D2(t,s,a);break}case"absolute":{M2(t,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{Pi(c,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),xg(t,s,a)},xg=(t,s,a)=>{t.getSystem().isConnected()&&A0(t,s,a)},js=(t,s,a)=>{a.isDocked()&&Zm(t,s,a)},P2=t=>(s,a,c)=>{const d=a.lazyViewport(s);Wx(s.element,d,c,t).each(p=>{wg(s,a,c,d,p)})},g1=P2(f1),Eg=P2(k0);var aA=Object.freeze({__proto__:null,refresh:xg,reset:js,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,c)=>a.setModes(c),forceDockToTop:g1,forceDockToBottom:Eg}),Tg=Object.freeze({__proto__:null,events:(t,s)=>No([pg(p0(),(a,c)=>{t.contextual.each(d=>{Na(a.element,d.transitionClass)&&(Pi(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),c.stop()})}),$e(y0(),(a,c)=>{xg(a,t,s)}),$e(S0(),(a,c)=>{xg(a,t,s)}),$e(Yd(),(a,c)=>{js(a,t,s)})])});const jm=(t,s)=>{const c=(s||document).createElement("div");return c.innerHTML=t,$r(ct.fromDom(c))},N2=t=>t.dom.innerHTML,Is=(t,s)=>{const c=ws(t).dom,d=ct.fromDom(c.createDocumentFragment()),g=jm(s,c);Ur(d,g),$u(t),ki(t,d)},O0=t=>{const s=ct.fromTag("div"),a=ct.fromDom(t.dom.cloneNode(!0));return ki(s,a),N2(s)},Qi=(t,s)=>ct.fromDom(t.dom.cloneNode(s)),cA=t=>Qi(t,!1),qx=t=>Qi(t,!0),rh=t=>{if(Hc(t))return"#shadow-root";{const s=cA(t);return O0(s)}},bl=t=>rh(t),vl="unknown";var qa;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(qa||(qa={}));const p1=Wt({}),jx=(t,s)=>{const a=[],c=new Date().getTime();return{logEventCut:(d,g,p)=>{a.push({outcome:"cut",target:g,purpose:p})},logEventStopped:(d,g,p)=>{a.push({outcome:"stopped",target:g,purpose:p})},logNoParent:(d,g,p)=>{a.push({outcome:"no-parent",target:g,purpose:p})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,p)=>{a.push({outcome:"response",purpose:p,target:g})},write:()=>{const d=new Date().getTime();Mo(["mousemove","mouseover","mouseout",Xu()],t)||console.log(t,{event:t,time:d-c,target:s.dom,sequence:qe(a,g=>Mo(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+bl(g.target)+")":g.outcome)})}}},b1=(t,s,a)=>{switch(Tt(p1.get(),t).orThunk(()=>{const d=Zo(p1.get());return ks(d,g=>t.indexOf(g)>-1?R.some(p1.get()[g]):R.none())}).getOr(qa.NORMAL)){case qa.NORMAL:return a(uA());case qa.LOGGING:{const d=jx(t,s),g=a(d);return d.write(),g}case qa.STOP:return!0}},B2=["alloy/data/Fields","alloy/debugging/Debugging"],lA=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return yn(s,a=>a.indexOf("alloy")>0&&!wr(B2,c=>a.indexOf(c)>-1)).getOr(vl)}else return vl},R0={logEventCut:Y,logEventStopped:Y,logNoParent:Y,logEventNoHandlers:Y,logEventResponse:Y,write:Y},td=(t,s,a)=>b1(t,s,a),uA=ne(R0),D0=ne([Ze("menu"),Ze("selectedMenu")]),M0=ne([Ze("item"),Ze("selectedItem")]);ne(dn(M0().concat(D0())));const ah=ne(dn(M0())),ih=Ws("initSize",[Ze("numColumns"),Ze("numRows")]),L2=()=>Ri("markers",ah()),v1=()=>Ws("markers",[Ze("backgroundMenu")].concat(D0()).concat(M0())),Gm=t=>Ws("markers",qe(t,Ze)),em=(t,s,a)=>(lA(),sa(s,s,a,li(c=>In.value((...d)=>c.apply(void 0,d))))),qn=t=>em("onHandler",t,Ho(Y)),Ni=t=>em("onKeyboardHandler",t,Ho(R.none)),ch=t=>em("onHandler",t,pn()),P0=t=>em("onKeyboardHandler",t,pn()),us=(t,s)=>ui(t,ne(s)),y1=t=>ui(t,at),nd=ne(ih);var dA=[Gi("contextual",[vr("fadeInClass"),vr("fadeOutClass"),vr("transitionClass"),hc("lazyContext"),qn("onShow"),qn("onShown"),qn("onHide"),qn("onHidden")]),ss("lazyViewport",()=>({bounds:_r(),optScrollEnv:R.none()})),Wu("modes",["top","bottom"],We),qn("onDocked"),qn("onUndocked")],I2=Object.freeze({__proto__:null,init:t=>{const s=Wt(!1),a=Wt(!0),c=uo(),d=Wt(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return di({isDocked:s.get,setDocked:s.set,getInitialPos:c.get,setInitialPos:c.set,clearInitialPos:c.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const ds=yr({fields:dA,name:"docking",active:Tg,apis:aA,state:I2}),mA=(t,s,a)=>Kn(s,t.element)&&!Kn(s,a),F2=No([fg(Vm(),(t,s)=>{const a=s.event,c=a.originator,d=a.target;return mA(t,c,d)?(console.warn(Vm()+` did not get interpreted by the desired target. 
Originator: `+bl(c)+`
Target: `+bl(d)+`
Check the `+Vm()+" event handlers"),!1):!0})]);var $2=Object.freeze({__proto__:null,events:F2});const lh=(t,s,a,c)=>{const d=t+s;return d>c?a:d<a?c:d},yl=(t,s,a)=>Math.min(Math.max(t,s),a),Gx=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let H2=0;const Mt=t=>{const a=new Date().getTime(),c=Math.floor(Gx()*1e9);return H2++,t+"_"+c+H2+String(a)},kN=ne("alloy-id-"),fi=ne("data-alloy-id"),_N=kN(),tm=fi(),fA=(t,s)=>{const a=Mt(_N+t);return V2(s,a),a},V2=(t,s)=>{Object.defineProperty(t.dom,tm,{value:s,writable:!0})},C1=t=>{const s=Os(t)?t.dom[tm]:null;return R.from(s)},uh=t=>Mt(t),Kx=at,N0=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+bl(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},c=d=>()=>{console.warn(s(d))};return{debugInfo:ne("fake"),triggerEvent:c("triggerEvent"),triggerFocus:c("triggerFocus"),triggerEscape:c("triggerEscape"),broadcast:c("broadcast"),broadcastOn:c("broadcastOn"),broadcastEvent:c("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:On}},Xx=N0(),B0=Mt("alloy-premade"),Km=t=>(Object.defineProperty(t.element.dom,B0,{value:t.uid,writable:!0}),Zu(B0,t)),Yx=t=>Jn(t.dom,B0),dh=t=>Tt(t,B0),kg=t=>bg((s,...a)=>t(s.getApis(),s,...a),t),Jx=(t,s)=>{const a=qe(s,d=>Gi(d.name(),[Ze("config"),Se("state",Zc)])),c=os("component.behaviours",dn(a),t.behaviours).fold(d=>{throw new Error(ig(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},at);return{list:s,data:Io(c,d=>{const g=d.map(p=>({config:p.config,state:p.state.init(p.config)}));return ne(g)})}},nm=t=>t.list,L0=t=>t.data,S1=(t,s)=>{const a={};return _s(t,(c,d)=>{_s(c,(g,p)=>{const x=Tt(a,p).getOr([]);a[p]=x.concat([s(d,g)])})}),a},z2=(t,s,a,c)=>{const d={...s};Ot(a,D=>{d[D.name()]=D.exhibit(t,c)});const g=S1(d,(D,L)=>({name:D,modification:L})),p=D=>Fs(D,(L,H)=>({...H.modification,...L}),{}),x=Fs(g.classes,(D,L)=>L.modification.concat(D),[]),T=p(g.attributes),O=p(g.styles);return Wc({classes:x,attributes:T,styles:O})},U2=(t,s,a,c)=>{try{const d=_u(a,(g,p)=>{const x=g[s],T=p[s],O=c.indexOf(x),D=c.indexOf(T);if(O===-1)throw new Error("The ordering for "+t+" does not have an entry for "+x+`.
Order specified: `+JSON.stringify(c,null,2));if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+T+`.
Order specified: `+JSON.stringify(c,null,2));return O<D?-1:D<O?1:0});return In.value(d)}catch(d){return In.error([d])}},hA=(t,s)=>({handler:t,purpose:s}),gA=(t,s)=>({cHandler:t,purpose:s}),W2=(t,s)=>gA(ln.apply(void 0,[t.handler].concat(s)),t.purpose),om=t=>t.cHandler,ra=(t,s)=>({name:t,handler:s}),pA=(t,s)=>{const a={};return Ot(t,c=>{a[c.name()]=c.handlers(s)}),a},Le=(t,s,a)=>{const c={...a,...pA(s,t)};return S1(c,ra)},I0=(t,s,a,c)=>{const d=Le(t,a,c);return lu(d,s)},bA=t=>{const s=G_(t);return(a,c,...d)=>{const g=[a,c].concat(d);s.abort.apply(void 0,g)?c.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},Z2=(t,s)=>In.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(qe(s,a=>a.name),null,2)]),w1=(t,s,a)=>{const c=s[a];return c?U2("Event: "+a,"name",t,c).map(d=>{const g=qe(d,p=>p.handler);return K_(g)}):Z2(a,t)},lu=(t,s)=>{const a=Au(t,(c,d)=>(c.length===1?In.value(c[0].handler):w1(c,s,d)).map(p=>{const x=bA(p),T=c.length>1?Eo(s[d],O=>wr(c,D=>D.name===O)).join(" > "):c[0].name;return Zu(d,hA(x,T))}));return m0(a,{})},Xm="alloy.base.behaviour",Qx=dn([sa("dom","dom",pn(),dn([Ze("tag"),Se("styles",{}),Se("classes",[]),Se("attributes",{}),no("value"),no("innerHtml")])),Ze("components"),Ze("uid"),Se("events",{}),Se("apis",{}),sa("eventOrder","eventOrder",Oi({[Di()]:["disabling",Xm,"toggling","typeaheadevents"],[Vm()]:[Xm,"focusing","keying"],[Xu()]:[Xm,"disabling","toggling","representing","tooltipping"],[bc()]:[Xm,"representing","streaming","invalidating"],[ma()]:[Xm,"representing","item-events","toolbar-button-events","tooltipping"],[pc()]:["focusing",Xm,"item-type-events"],[gl()]:["focusing",Xm,"item-type-events"],[pl()]:["item-type-events","tooltipping"],[zm()]:["receiving","reflecting","tooltipping"]}),oa()),no("domModification")]),q2=t=>os("custom.definition",Qx,t),F0=t=>({...t.dom,uid:t.uid,domChildren:qe(t.components,s=>s.element)}),$0=t=>t.domModification.fold(()=>Wc({}),Wc),eE=t=>t.events,sm=t=>t.dom.value,Ar=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},H0=(t,s,a)=>cl(t,s).map(d=>{if(a.exists(p=>!Kn(p,d))){const p=a.map(Hs).getOr("span"),x=ct.fromTag(p);return jd(d,x),x}else return d}),j2=(t,s,a)=>{a.fold(()=>ki(t,s),c=>{Kn(c,s)||(jd(c,s),uc(c))})},tE=(t,s,a)=>{const c=qe(s,a),d=$r(t);return Ot(d.slice(c.length),uc),c},nE=(t,s,a,c)=>{const d=cl(t,s),g=c(a,d),p=H0(t,s,d);return j2(t,g.element,p),g},oE=(t,s,a)=>tE(t,s,(c,d)=>nE(t,d,c,a)),V0=(t,s)=>tE(t,s,(a,c)=>{const d=cl(t,c);return j2(t,a,d),a}),sE=(t,s)=>{const a=Zo(t),c=Zo(s),d=an(c,a),g=Jr(t,(p,x)=>!Jn(s,x)||p!==s[x]).t;return{toRemove:d,toSet:g}},rE=(t,s)=>{const{class:a,style:c,...d}=Nu(s),{toSet:g,toRemove:p}=sE(t.attributes,d),x=()=>{Ot(p,he=>zn(s,he)),zt(s,g)},T=Lp(s),{toSet:O,toRemove:D}=sE(t.styles,T),L=()=>{Ot(D,he=>Un(s,he)),ta(s,O)},H=oh(s),q=an(H,t.classes),J=an(t.classes,H),re=()=>{th(s,J),Pi(s,q)},de=he=>{Is(s,he)},oe=()=>{const he=t.domChildren;V0(s,he)},fe=()=>{const he=s,ke=t.value.getOrUndefined();ke!==sm(he)&&Ar(he,ke??"")};return x(),re(),L(),t.innerHtml.fold(oe,de),fe(),s},vA=t=>{const s=ct.fromTag(t.tag);zt(s,t.attributes),th(s,t.classes),ta(s,t.styles),t.innerHtml.each(c=>Is(s,c));const a=t.domChildren;return Ur(s,a),t.value.each(c=>{Ar(s,c)}),s},x1=(t,s)=>{try{const a=rE(t,s);return R.some(a)}catch{return R.none()}},aE=t=>t.innerHtml.isSome()&&t.domChildren.length>0,iE=(t,s)=>{const a=d=>Hs(d)===t.tag&&!aE(t)&&!Yx(d),c=s.filter(a).bind(d=>x1(t,d)).getOrThunk(()=>vA(t));return V2(c,t.uid),c},cE=t=>{const s=Tt(t,"behaviours").getOr({});return ye(Zo(s),a=>{const c=s[a];return st(c)?[c.me]:[]})},yA=(t,s)=>Jx(t,s),lE=t=>{const s=cE(t);return yA(t,s)},CA=(t,s,a)=>{const c=F0(t),d=$0(t),g={"alloy.base.modification":d},p=s.length>0?z2(a,g,s,c):d;return eh(c,p)},SA=(t,s,a)=>{const c={"alloy.base.behaviour":eE(t)};return I0(a,t.eventOrder,s,c).getOrDie()},uE=(t,s)=>{const a=()=>he,c=Wt(Xx),d=ml(q2(t)),g=lE(t),p=nm(g),x=L0(g),T=CA(d,p,x),O=iE(T,s),D=SA(d,p,x),L=Wt(d.components),H=ke=>{c.set(ke)},q=()=>{c.set(N0(a))},J=()=>{const ke=$r(O),Pe=ye(ke,Ct=>c.get().getByDom(Ct).fold(()=>[],as));L.set(Pe)},re=ke=>{const Pe=x;return(Ne(Pe[ke.name()])?Pe[ke.name()]:()=>{throw new Error("Could not find "+ke.name()+" in "+JSON.stringify(t,null,2))})()},de=ke=>Ne(x[ke.name()]),oe=()=>d.apis,fe=ke=>x[ke]().map(Pe=>Pe.state.readState()).getOr("not enabled"),he={uid:t.uid,getSystem:c.get,config:re,hasConfigured:de,spec:t,readState:fe,getApis:oe,connect:H,disconnect:q,element:O,syncComponents:J,components:L.get,events:D};return he},E1=(t,s)=>{const a=Tt(t,"components").getOr([]);return s.fold(()=>qe(a,Ga),c=>qe(a,(d,g)=>ja(d,cl(c,g))))},wA=(t,s)=>{const{events:a,...c}=Kx(t),d=E1(c,s),g={...c,events:{...$2,...a},components:d};return In.value(uE(g,s))},Vo=t=>{const s=ct.fromText(t);return G2({element:s})},G2=t=>{const s=lr("external.component",fc([Ze("element"),no("uid")]),t),a=Wt(N0()),c=x=>{a.set(x)},d=()=>{a.set(N0(()=>p))},g=s.uid.getOrThunk(()=>uh("external"));V2(s.element,g);const p={uid:g,getSystem:a.get,config:R.none,hasConfigured:On,connect:c,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:ne("No state"),syncComponents:Y,components:ne([]),events:{}};return Km(p)},dE=uh,AN=t=>Jn(t,"uid"),ja=(t,s)=>dh(t).getOrThunk(()=>{const a=AN(t)?t:{uid:dE(""),...t};return wA(a,s).getOrDie()}),Ga=t=>ja(t,R.none()),ur=Km,z0=(t,s,a)=>ng(t,s,a).isSome(),_g="aria-controls",mE=t=>ng(t,a=>{if(!Os(a))return!1;const c=Ln(a,"id");return c!==void 0&&c.indexOf(_g)>-1}).bind(a=>{const c=Ln(a,"id"),d=Hr(a);return Pn(d,`[${_g}="${c}"]`)}),K2=()=>{const t=Mt(_g);return{id:t,link:c=>{Ve(c,_g,t)},unlink:c=>{zn(c,_g)}}},fE=(t,s)=>mE(s).exists(a=>Ym(t,a)),Ym=(t,s)=>z0(s,a=>Kn(a,t.element),On)||fE(t,s),Wr=(t,s,a,c,d,g,p,x=!1)=>({x:t,y:s,bubble:a,direction:c,placement:d,restriction:g,label:`${p}-${d}`,alwaysFit:x}),od=Ma.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Ag=(t,s,a,c,d,g,p,x,T)=>t.fold(s,a,c,d,g,p,x,T),hE=(t,s,a,c)=>t.fold(s,s,c,c,s,c,a,a),xA=(t,s,a,c)=>t.fold(s,c,s,c,a,a,s,c),U0=od.southeast,X2=od.southwest,Y2=od.northeast,J2=od.northwest,gE=od.south,pE=od.north,bE=od.east,vE=od.west,EA=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},fa=(t,s)=>Bc(["left","right","top","bottom"],a=>Tt(s,a).map(c=>EA(t,c))),TA=(t,s,a)=>{const c=(T,O)=>s[T].map(D=>{const L=T==="top"||T==="bottom",H=L?a.top:a.left,J=(T==="left"||T==="top"?Math.max:Math.min)(D,O)+H;return L?yl(J,t.y,t.bottom):yl(J,t.x,t.right)}).getOr(O),d=c("left",t.x),g=c("top",t.y),p=c("right",t.right),x=c("bottom",t.bottom);return bs(d,g,p-d,x-g)},rm="layout",Q2=t=>t.x,eC=(t,s)=>t.x+t.width/2-s.width/2,yE=(t,s)=>t.x+t.width-s.width,W0=(t,s)=>t.y-s.height,tC=t=>t.y+t.height,nC=(t,s)=>t.y+t.height/2-s.height/2,kA=t=>t.x+t.width,_A=(t,s)=>t.x-s.width,or=(t,s,a)=>Wr(Q2(t),tC(t),a.southeast(),U0(),"southeast",fa(t,{left:1,top:3}),rm),dr=(t,s,a)=>Wr(yE(t,s),tC(t),a.southwest(),X2(),"southwest",fa(t,{right:0,top:3}),rm),aa=(t,s,a)=>Wr(Q2(t),W0(t,s),a.northeast(),Y2(),"northeast",fa(t,{left:1,bottom:2}),rm),sr=(t,s,a)=>Wr(yE(t,s),W0(t,s),a.northwest(),J2(),"northwest",fa(t,{right:0,bottom:2}),rm),Or=(t,s,a)=>Wr(eC(t,s),W0(t,s),a.north(),pE(),"north",fa(t,{bottom:2}),rm),Cr=(t,s,a)=>Wr(eC(t,s),tC(t),a.south(),gE(),"south",fa(t,{top:3}),rm),oC=(t,s,a)=>Wr(kA(t),nC(t,s),a.east(),bE(),"east",fa(t,{left:0}),rm),T1=(t,s,a)=>Wr(_A(t,s),nC(t,s),a.west(),vE(),"west",fa(t,{right:1}),rm),k1=()=>[or,dr,aa,sr,Cr,Or,oC,T1],Zr=()=>[dr,or,sr,aa,Cr,Or,oC,T1],CE=()=>[aa,sr,or,dr,Or,Cr],Z0=()=>[sr,aa,dr,or,Or,Cr],Lt=()=>[or,dr,aa,sr,Cr,Or],mh=()=>[dr,or,sr,aa,Cr,Or],sC=(t,s)=>s.universal?t:Eo(t,a=>Mo(s.channels,a));var AA=Object.freeze({__proto__:null,events:t=>No([$e(zm(),(s,a)=>{const c=t.channels,d=Zo(c),g=a,p=sC(d,g);Ot(p,x=>{const T=c[x],O=T.schema,D=lr("channel["+x+`] data
Receiver: `+bl(s.element),O,g.data);T.onReceive(s,D)})})])}),OA=[Ri("channels",ls(In.value,fc([ch("onReceive"),Se("schema",oa())])))];const Bi=yr({fields:OA,name:"receiving",active:AA});var SE=Object.freeze({__proto__:null,exhibit:(t,s)=>Wc({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const ha=(t,s=!1)=>t.dom.focus({preventScroll:s}),sd=t=>t.dom.blur(),Rr=t=>{const s=Hr(t).dom;return t.dom===s.activeElement},Cc=(t=Bm())=>R.from(t.dom.activeElement).map(ct.fromDom),Ka=t=>Cc(Hr(t)).filter(s=>t.dom.contains(s.dom)),rC=(t,s)=>{const a=Hr(s),c=Cc(a).bind(g=>{const p=x=>Kn(g,x);return p(s)?R.some(s):dc(s,p)}),d=t(s);return c.each(g=>{Cc(a).filter(p=>Kn(p,g)).fold(()=>{ha(g)},Y)}),d},j0=Ma.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),aC=(t,s,a,c,d,g)=>{const p=s.rect,x=p.x-a,T=p.y-c,O=p.width,D=p.height,L=d-(x+O),H=g-(T+D),q=R.some(x),J=R.some(T),re=R.some(L),de=R.some(H),oe=R.none();return Ag(s.direction,()=>mi(t,q,J,oe,oe),()=>mi(t,oe,J,re,oe),()=>mi(t,q,oe,oe,de),()=>mi(t,oe,oe,re,de),()=>mi(t,q,J,oe,oe),()=>mi(t,q,oe,oe,de),()=>mi(t,q,J,oe,oe),()=>mi(t,oe,J,re,oe))},wE=(t,s)=>t.fold(()=>{const a=s.rect;return mi("absolute",R.some(a.x),R.some(a.y),R.none(),R.none())},(a,c,d,g)=>aC("absolute",s,a,c,d,g),(a,c,d,g)=>aC("fixed",s,a,c,d,g)),G0=(t,s)=>{const a=ln(tu,s),c=t.fold(a,a,()=>{const p=Ra();return tu(s).translate(-p.left,-p.top)}),d=Id(s),g=Bu(s);return bs(c.left,c.top,d,g)},xE=(t,s)=>s.fold(()=>t.fold(_r,_r,bs),a=>t.fold(ne(a),ne(a),()=>{const c=EE(t,a.x,a.y);return bs(c.left,c.top,a.width,a.height)})),EE=(t,s,a)=>{const c=$o(s,a),d=()=>{const g=Ra();return c.translate(-g.left,-g.top)};return t.fold(ne(c),ne(c),d)},TE=(t,s,a,c)=>t.fold(s,a,c);j0.none;const RA=j0.relative,DA=j0.fixed,MA=(t,s)=>({anchorBox:t,origin:s}),iC=(t,s)=>MA(t,s),K0="data-alloy-placement",kE=(t,s)=>{Ve(t,K0,s)},_1=t=>_n(t,K0),Og=t=>zn(t,K0),Jm=Ma.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),X0=(t,s)=>{const{x:a,y:c,right:d,bottom:g}=s,{x:p,y:x,right:T,bottom:O,width:D,height:L}=t,H=p>=a&&p<=d,q=x>=c&&x<=g,J=H&&q,re=T<=d&&T>=a,de=O<=g&&O>=c,oe=re&&de,fe=Math.min(D,p>=a?d-p:T-a),he=Math.min(L,x>=c?g-x:O-c);return{originInBounds:J,sizeInBounds:oe,visibleW:fe,visibleH:he}},PA=(t,s)=>{const{x:a,y:c,right:d,bottom:g}=s,{x:p,y:x,width:T,height:O}=t,D=Math.max(a,d-T),L=Math.max(c,g-O),H=yl(p,a,D),q=yl(x,c,L),J=Math.min(H+T,d)-H,re=Math.min(q+O,g)-q;return bs(H,q,J,re)},_E=(t,s,a)=>{const c=ne(s.bottom-a.y),d=ne(a.bottom-s.y),g=hE(t,d,d,c),p=ne(s.right-a.x),x=ne(a.right-s.x);return{maxWidth:xA(t,x,x,p),maxHeight:g}},NA=(t,s,a,c)=>{const d=t.bubble,g=d.offset,p=TA(c,t.restriction,g),x=t.x+g.left,T=t.y+g.top,O=bs(x,T,s,a),{originInBounds:D,sizeInBounds:L,visibleW:H,visibleH:q}=X0(O,p),J=D&&L,re=J?O:PA(O,p),de=re.width>0&&re.height>0,{maxWidth:oe,maxHeight:fe}=_E(t.direction,re,c),he={rect:re,maxHeight:fe,maxWidth:oe,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:T};return J||t.alwaysFit?Jm.fit(he):Jm.nofit(he,H,q,de)},AE=(t,s,a,c,d,g)=>{const p=c.width,x=c.height,T=(D,L,H,q,J)=>{const re=D(a,c,d,t,g),de=NA(re,p,x,g);return de.fold(ne(de),(oe,fe,he,ke)=>(J===ke?he>q||fe>H:!J&&ke)?de:Jm.nofit(L,H,q,J))};return Wo(s,(D,L)=>{const H=ln(T,L);return D.fold(ne(D),H)},Jm.nofit({rect:a,maxHeight:c.height,maxWidth:c.width,direction:U0(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(at,at)},OE=Ft,hi=(t,s,a)=>ai(t,s,OE,a),Y0=(t,s,a)=>Hf(t,s,OE,a),RE=eu,cC=["top","bottom","right","left"],A1="data-alloy-transition-timer",BA=(t,s)=>yg(t,s.classes),Rg=(t,s,a)=>a.exists(c=>{const d=t.mode;return d==="all"?!0:c[d]!==s[d]}),LA=(t,s)=>{const a=c=>parseFloat(c).toFixed(3);return fr(s,(c,d)=>{const g=t[d].map(a),p=c.map(a);return!Ou(g,p)}).isSome()},lC=t=>{const s=g=>{const x=Xe(t,g).split(/\s*,\s*/);return Eo(x,xr)},a=g=>{if(te(g)&&/^[\d.]+/.test(g)){const p=parseFloat(g);return wi(g,"ms")?p:p*1e3}else return 0},c=s("transition-delay"),d=s("transition-duration");return Wo(d,(g,p,x)=>{const T=a(c[x])+a(p);return Math.max(g,T)},0)},IA=(t,s)=>{const a=Ai(),c=Ai();let d;const g=O=>{var D;const L=(D=O.raw.pseudoElement)!==null&&D!==void 0?D:"";return Kn(O.target,t)&&is(L)&&Mo(cC,O.raw.propertyName)},p=O=>{if(ot(O)||g(O)){a.clear(),c.clear();const D=O==null?void 0:O.raw.type;(ot(D)||D===p0())&&(clearTimeout(d),zn(t,A1),Pi(t,s.classes))}},x=hi(t,Yf(),O=>{g(O)&&(x.unbind(),a.set(hi(t,p0(),p)),c.set(hi(t,X_(),p)))}),T=lC(t);requestAnimationFrame(()=>{d=setTimeout(p,T+17),Ve(t,A1,d)})},O1=(t,s)=>{th(t,s.classes),_n(t,A1).each(a=>{clearTimeout(parseInt(a,10)),zn(t,A1)}),IA(t,s)},FA=(t,s,a,c,d,g)=>{const p=Rg(c,d,g);if(p||BA(t,c)){En(t,"position",a.position);const x=G0(s,t),T=wE(s,{...d,rect:x}),O=Bc(cC,D=>T[D]);LA(a,O)&&(Bf(t,O),p&&O1(t,c),Ei(t))}else Pi(t,c.classes)},$A=t=>({width:Id(t),height:Bu(t)}),J0=(t,s,a,c)=>{Un(s,"max-height"),Un(s,"max-width");const d=$A(s);return AE(s,c.preference,t,d,a,c.bounds)},DE=(t,s)=>{const a=s.classes;Pi(t,a.off),th(t,a.on)},uC=(t,s,a)=>{const c=a.maxHeightFunction;c(t,s.maxHeight)},R1=(t,s,a)=>{const c=a.maxWidthFunction;c(t,s.maxWidth)},ME=(t,s,a)=>{const c=wE(a.origin,s);a.transition.each(d=>{FA(t,a.origin,c,d,s,a.lastPlacement)}),k2(t,c)},dC=(t,s)=>{kE(t,s.placement)},mC=(t,s)=>{Ip(t,Math.floor(s))},fC=ne((t,s)=>{mC(t,s),ta(t,{"overflow-x":"hidden","overflow-y":"auto"})}),fh=ne((t,s)=>{mC(t,s)}),PE=(t,s,a)=>t[s]===void 0?a:t[s],hC=(t,s,a,c,d,g,p,x)=>{const T=PE(p,"maxHeightFunction",fC()),O=PE(p,"maxWidthFunction",Y),D=t.anchorBox,L=t.origin,H={bounds:xE(L,g),origin:L,preference:c,maxHeightFunction:T,maxWidthFunction:O,lastPlacement:d,transition:x};return NE(D,s,a,H)},NE=(t,s,a,c)=>{const d=J0(t,s,a,c);return ME(s,d,c),dC(s,d),DE(s,d),uC(s,d,c),R1(s,d,c),{layout:d.layout,placement:d.placement}},BE=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],gi=(t,s,a,c=1)=>{const d=t*c,g=s*c,p=T=>Tt(a,T).getOr([]),x=(T,O,D)=>{const L=an(BE,D);return{offset:$o(T,O),classesOn:ye(D,p),classesOff:ye(L,p)}};return{southeast:()=>x(-t,s,["top","alignLeft"]),southwest:()=>x(t,s,["top","alignRight"]),south:()=>x(-t/2,s,["top","alignCentre"]),northeast:()=>x(-t,-s,["bottom","alignLeft"]),northwest:()=>x(t,-s,["bottom","alignRight"]),north:()=>x(-t/2,-s,["bottom","alignCentre"]),east:()=>x(t,-s/2,["valignCentre","left"]),west:()=>x(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>x(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>x(-d,g,["top","alignRight","inset"]),insetNorth:()=>x(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>x(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>x(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>x(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>x(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>x(d,-g/2,["valignCentre","left","inset"])}},Q0=()=>gi(0,0,{}),ev=at,gC=(t,s)=>a=>pC(a)==="rtl"?s:t,pC=t=>Xe(t,"direction")==="rtl"?"rtl":"ltr";var rd;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(rd||(rd={}));const tv="data-alloy-vertical-dir",HA=t=>z0(t,s=>Os(s)&&Ln(s,"data-alloy-vertical-dir")===rd.BottomToTop),Qm=()=>Gi("layouts",[Ze("onLtr"),Ze("onRtl"),no("onBottomLtr"),no("onBottomRtl")]),nv=(t,s,a,c,d,g,p)=>{const x=p.map(HA).getOr(!1),T=s.layouts.map(q=>q.onLtr(t)),O=s.layouts.map(q=>q.onRtl(t)),D=x?s.layouts.bind(q=>q.onBottomLtr.map(J=>J(t))).or(T).getOr(d):T.getOr(a),L=x?s.layouts.bind(q=>q.onBottomRtl.map(J=>J(t))).or(O).getOr(g):O.getOr(c);return gC(D,L)(t)},pi=(t,s,a)=>{const c=s.hotspot,d=G0(a,c.element),g=nv(t.element,s,Lt(),mh(),CE(),Z0(),R.some(s.hotspot.element));return R.some(ev({anchorBox:d,bubble:s.bubble.getOr(Q0()),overrides:s.overrides,layouts:g}))};var RN=[Ze("hotspot"),no("bubble"),Se("overrides",{}),Qm(),us("placement",pi)];const Dg=(t,s,a)=>{const c=EE(a,s.x,s.y),d=bs(c.left,c.top,s.width,s.height),g=nv(t.element,s,k1(),Zr(),k1(),Zr(),R.none());return R.some(ev({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var VA=[Ze("x"),Ze("y"),Se("height",0),Se("width",0),Se("bubble",Q0()),Se("overrides",{}),Qm(),us("placement",Dg)];const D1=Ma.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),zA=t=>t.fold(at,(s,a,c)=>s.translate(-a,-c)),UA=t=>t.fold(at,at),LE=t=>Wo(t,(s,a)=>s.translate(a.left,a.top),$o(0,0)),IE=t=>{const s=qe(t,zA);return LE(s)},ov=t=>{const s=qe(t,UA);return LE(s)},WA=D1.screen,ZA=D1.absolute,M1=(t,s,a)=>{const c=Gl(a.root).dom,d=g=>{const p=ws(g),x=ws(t.element);return Kn(p,x)};return R.from(c.frameElement).map(ct.fromDom).filter(d).map(Va)},bC=(t,s,a)=>{const c=ws(t.element),d=Ra(c),g=M1(t,s,a).getOr(d);return ZA(g,d.left,d.top)},vC=(t,s,a,c)=>{const d=WA($o(t,s));return R.some(Up(d,a,c))},FE=(t,s,a,c,d)=>t.map(g=>{const p=[s,g.point],x=TE(c,()=>ov(p),()=>ov(p),()=>IE(p)),T=ul(x.left,x.top,g.width,g.height),O=a.showAbove?CE():Lt(),D=a.showAbove?Z0():mh(),L=nv(d,a,O,D,O,D,R.none());return ev({anchorBox:T,bubble:a.bubble.getOr(Q0()),overrides:a.overrides,layouts:L})}),$E=(t,s,a)=>{const c=bC(t,a,s);return s.node.filter(se).bind(d=>{const g=d.dom.getBoundingClientRect(),p=vC(g.left,g.top,g.width,g.height),x=s.node.getOr(t.element);return FE(p,c,s,a,x)})};var sv=[Ze("node"),Ze("root"),no("bubble"),Qm(),Se("overrides",{}),Se("showAbove",!1),us("placement",$E)];const DN="\uFEFF",Mg=" ",P1={create:(t,s,a,c)=>({start:t,soffset:s,finish:a,foffset:c})},N1=Ma.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),rv=(t,s,a,c)=>t.fold(s,a,c),qA=t=>t.fold(at,at,at),HE=N1.before,jA=N1.on,yC=N1.after,CC={before:HE,on:jA,after:yC,cata:rv,getStart:qA},am=Ma.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),B1=t=>am.exact(t.start,t.soffset,t.finish,t.foffset),GA=t=>t.match({domRange:s=>ct.fromDom(s.startContainer),relative:(s,a)=>CC.getStart(s),exact:(s,a,c,d)=>s}),SC=am.domRange,VE=am.relative,MN=am.exact,zE=t=>{const s=GA(t);return Gl(s)},wC=P1.create,ef={domRange:SC,relative:VE,exact:MN,exactFromRange:B1,getWin:zE,range:wC},KA=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,c)=>{t.setStart(a.dom,c)},a=>{t.setStartAfter(a.dom)})},xC=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,c)=>{t.setEnd(a.dom,c)},a=>{t.setEndAfter(a.dom)})},EC=(t,s,a)=>{const c=t.document.createRange();return KA(c,s),xC(c,a),c},TC=(t,s,a,c,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(c.dom,d),g},av=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),kC=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?R.some(a).map(av):R.none()},iv=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?R.some(s).map(av):R.none()},Pg=Ma.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),_C=(t,s,a)=>s(ct.fromDom(a.startContainer),a.startOffset,ct.fromDom(a.endContainer),a.endOffset),XA=(t,s)=>s.match({domRange:a=>({ltr:ne(a),rtl:R.none}),relative:(a,c)=>({ltr:Jl(()=>EC(t,a,c)),rtl:Jl(()=>R.some(EC(t,c,a)))}),exact:(a,c,d,g)=>({ltr:Jl(()=>TC(t,a,c,d,g)),rtl:Jl(()=>R.some(TC(t,d,g,a,c)))})}),YA=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>Pg.rtl(ct.fromDom(d.endContainer),d.endOffset,ct.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>_C(t,Pg.ltr,a)):_C(t,Pg.ltr,a)},hh=(t,s)=>{const a=XA(t,s);return YA(t,a)},L1=(t,s)=>hh(t,s).match({ltr:(c,d,g,p)=>{const x=t.document.createRange();return x.setStart(c.dom,d),x.setEnd(g.dom,p),x},rtl:(c,d,g,p)=>{const x=t.document.createRange();return x.setStart(g.dom,p),x.setEnd(c.dom,d),x}});Pg.ltr,Pg.rtl;const UE=(t,s,a)=>Eo(Rm(t,a),s),bi=(t,s)=>al(s,t),PN=(t,s,a,c)=>{const g=ws(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,c),g},JA=(t,s,a,c)=>{const d=PN(t,s,a,c),g=Kn(t,a)&&s===c;return d.collapsed&&!g},Ng=t=>R.from(t.getSelection()),WE=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return R.some(P1.create(ct.fromDom(s.startContainer),s.startOffset,ct.fromDom(a.endContainer),a.endOffset))}else return R.none()},ZE=t=>{if(t.anchorNode===null||t.focusNode===null)return WE(t);{const s=ct.fromDom(t.anchorNode),a=ct.fromDom(t.focusNode);return JA(s,t.anchorOffset,a,t.focusOffset)?R.some(P1.create(s,t.anchorOffset,a,t.focusOffset)):WE(t)}},I1=t=>Ng(t).filter(s=>s.rangeCount>0).bind(ZE),tf=(t,s)=>{const a=L1(t,s);return kC(a)},AC=(t,s)=>{const a=L1(t,s);return iv(a)},QA=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return c(g).getOr("")},c=g=>t(g)?R.from(g.dom.nodeValue):R.none();return{get:a,getOption:c,set:(g,p)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=p}}})(hr,"text"),jE=t=>QA.get(t),F1=(t,s)=>({element:t,offset:s}),GE=(t,s)=>{const a=$r(t);if(a.length===0)return F1(t,s);if(s<a.length)return F1(a[s],0);{const c=a[a.length-1],d=hr(c)?jE(c).length:$r(c).length;return F1(c,d)}},$1=(t,s)=>hr(t)?F1(t,s):GE(t,s),Bg=t=>t.foffset!==void 0,OC=(t,s)=>s.getSelection.getOrThunk(()=>()=>I1(t))().map(c=>{if(Bg(c)){const d=$1(c.start,c.soffset),g=$1(c.finish,c.foffset);return ef.range(d.element,d.offset,g.element,g.offset)}else return c}),Lg=(t,s,a)=>{const c=Gl(s.root).dom,d=bC(t,a,s),g=OC(c,s).bind(T=>{if(Bg(T))return AC(c,ef.exactFromRange(T)).orThunk(()=>{const D=ct.fromText(DN);jd(T.start,D);const L=tf(c,ef.exact(D,0,D,1));return uc(D),L}).bind(D=>vC(D.left,D.top,D.width,D.height));{const O=Io(T,L=>L.dom.getBoundingClientRect()),D={left:Math.min(O.firstCell.left,O.lastCell.left),right:Math.max(O.firstCell.right,O.lastCell.right),top:Math.min(O.firstCell.top,O.lastCell.top),bottom:Math.max(O.firstCell.bottom,O.lastCell.bottom)};return vC(D.left,D.top,D.right-D.left,D.bottom-D.top)}}),x=OC(c,s).bind(T=>Bg(T)?Os(T.start)?R.some(T.start):$c(T.start):R.some(T.firstCell)).getOr(t.element);return FE(g,d,s,a,x)};var gh=[no("getSelection"),Ze("root"),no("bubble"),Qm(),Se("overrides",{}),Se("showAbove",!1),us("placement",Lg)];const ph="link-layout",im=t=>t.x+t.width,RC=(t,s)=>t.x-s.width,ad=(t,s)=>t.y-s.height+t.height,Cl=t=>t.y,id=(t,s,a)=>Wr(im(t),Cl(t),a.southeast(),U0(),"southeast",fa(t,{left:0,top:2}),ph),DC=(t,s,a)=>Wr(RC(t,s),Cl(t),a.southwest(),X2(),"southwest",fa(t,{right:1,top:2}),ph),uu=(t,s,a)=>Wr(im(t),ad(t,s),a.northeast(),Y2(),"northeast",fa(t,{left:0,bottom:3}),ph),MC=(t,s,a)=>Wr(RC(t,s),ad(t,s),a.northwest(),J2(),"northwest",fa(t,{right:1,bottom:3}),ph),bh=()=>[id,DC,uu,MC],Ig=()=>[DC,id,MC,uu],KE=(t,s,a)=>{const c=G0(a,s.item.element),d=nv(t.element,s,bh(),Ig(),bh(),Ig(),R.none());return R.some(ev({anchorBox:c,bubble:Q0(),overrides:s.overrides,layouts:d}))};var XE=[Ze("item"),Qm(),Se("overrides",{}),us("placement",KE)],H1=Za("type",{selection:gh,node:sv,hotspot:RN,submenu:XE,makeshift:VA});const cv=[Ko("classes",We),hl("mode","all",["all","layout","placement"])],e3=[Se("useFixed",On),no("getBounds")],V1=[Ri("anchor",H1),Gi("transition",cv)],lv=()=>{const t=document.documentElement;return DA(0,0,t.clientWidth,t.clientHeight)},YE=t=>{const s=Va(t.element),a=t.element.dom.getBoundingClientRect();return RA(s.left,s.top,a.width,a.height)},Sl=(t,s,a,c,d,g)=>{const p=iC(s.anchorBox,t);return hC(p,c.element,s.bubble,s.layouts,d,a,s.overrides,g)},JE=(t,s,a,c,d)=>{const g=R.none();uv(t,s,a,c,d,g)},uv=(t,s,a,c,d,g)=>{const p=lr("placement.info",dn(V1),d),x=p.anchor,T=c.element,O=a.get(c.uid);rC(()=>{En(T,"position","fixed");const D=Ps(T,"visibility");En(T,"visibility","hidden");const L=s.useFixed()?lv():YE(t);x.placement(t,x,L).each(H=>{const q=g.orThunk(()=>s.getBounds.map(xo)),J=Sl(L,H,q,c,O,p.transition);a.set(c.uid,J)}),D.fold(()=>{Un(T,"visibility")},H=>{En(T,"visibility",H)}),Ps(T,"left").isNone()&&Ps(T,"top").isNone()&&Ps(T,"right").isNone()&&Ps(T,"bottom").isNone()&&Qr(Ps(T,"position"),"fixed")&&Un(T,"position")},T)};var z1=Object.freeze({__proto__:null,position:JE,positionWithinBounds:uv,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,c)=>{const d=c.element;Ot(["position","left","right","top","bottom"],g=>Un(d,g)),Og(d),a.clear(c.uid)}}),eT=Object.freeze({__proto__:null,init:()=>{let t={};return di({readState:()=>t,clear:d=>{st(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>Tt(t,d)})}});const ga=yr({fields:e3,name:"positioning",active:SE,apis:z1,state:eT}),dv=t=>t.getSystem().isConnected(),nf=t=>{Wn(t,ma());const s=t.components();Ot(s,nf)},Sc=t=>{const s=t.components();Ot(s,Sc),Wn(t,Xi())},tT=(t,s)=>{t.getSystem().addToWorld(s),se(t.element)&&Sc(s)},mv=t=>{nf(t),t.getSystem().removeFromWorld(t)},U1=(t,s)=>{ki(t.element,s.element)},nT=t=>{Ot(t.components(),s=>uc(s.element)),$u(t.element),t.syncComponents()},W1=(t,s,a)=>{const c=t.components();nT(t);const d=a(s),g=an(c,d);Ot(g,p=>{nf(p),t.getSystem().removeFromWorld(p)}),Ot(d,p=>{dv(p)?U1(t,p):(t.getSystem().addToWorld(p),U1(t,p),se(t.element)&&Sc(p))}),t.syncComponents()},oT=(t,s,a)=>{const c=t.components(),d=ye(s,x=>dh(x).toArray());Ot(c,x=>{Mo(d,x)||mv(x)});const g=a(s),p=an(c,g);Ot(p,x=>{dv(x)&&mv(x)}),Ot(g,x=>{dv(x)||tT(t,x)}),t.syncComponents()},yh=(t,s)=>{wc(t,s,ki)},wc=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),se(t.element)&&Sc(s),t.syncComponents()},of=t=>{nf(t),uc(t.element),t.getSystem().removeFromWorld(t)},du=t=>{const s=Er(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());of(t),s.each(a=>{a.syncComponents()})},wl=t=>{const s=t.components();Ot(s,of),$u(t.element),t.syncComponents()},pa=(t,s)=>{Sr(t,s,ki)},ia=(t,s)=>{Sr(t,s,Fu)},Sr=(t,s,a)=>{a(t,s.element);const c=$r(s.element);Ot(c,d=>{s.getByDom(d).each(Sc)})},xl=t=>{const s=$r(t.element);Ot(s,a=>{t.getByDom(a).each(nf)}),uc(t.element)},fv=(t,s,a,c)=>{a.get().each(p=>{wl(t)});const d=s.getAttachPoint(t);yh(d,t);const g=t.getSystem().build(c);return yh(t,g),a.set(g),g},xc=(t,s,a,c)=>{const d=fv(t,s,a,c);return s.onOpen(t,d),d},Ch=(t,s,a,c)=>a.get().map(()=>fv(t,s,a,c)),hv=(t,s,a,c,d)=>{lT(t,s),xc(t,s,a,c),d(),uT(t,s)},sT=(t,s,a)=>{a.get().each(c=>{wl(t),du(t),s.onClose(t,c),a.clear()})},rT=(t,s,a)=>a.isOpen(),aT=(t,s,a,c)=>rT(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,c)),iT=(t,s,a)=>a.get(),gv=(t,s,a,c)=>{Ps(t.element,s).fold(()=>{zn(t.element,a)},d=>{Ve(t.element,a,d)}),En(t.element,s,c)},cT=(t,s,a)=>{_n(t.element,a).fold(()=>Un(t.element,s),c=>En(t.element,s,c))},lT=(t,s,a)=>{const c=s.getAttachPoint(t);En(t.element,"position",ga.getMode(c)),gv(t,"visibility",s.cloakVisibilityAttr,"hidden")},Fg=t=>wr(["top","left","right","bottom"],s=>Ps(t,s).isSome()),uT=(t,s,a)=>{Fg(t.element)||Un(t.element,"position"),cT(t,"visibility",s.cloakVisibilityAttr)};var t3=Object.freeze({__proto__:null,cloak:lT,decloak:uT,open:xc,openWhileCloaked:hv,close:sT,isOpen:rT,isPartOf:aT,getState:iT,setContent:Ch}),dT=Object.freeze({__proto__:null,events:(t,s)=>No([$e(Jf(),(a,c)=>{sT(a,t,s)})])}),$g=[qn("onOpen"),qn("onClose"),Ze("isPartOf"),Ze("getAttachPoint"),Se("cloakVisibilityAttr","data-precloak-visibility")],s3=Object.freeze({__proto__:null,init:()=>{const t=uo(),s=ne("not-implemented");return di({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const eo=yr({fields:$g,name:"sandboxing",active:dT,apis:t3,state:s3}),cm=ne("dismiss.popups"),lm=ne("reposition.popups"),pv=ne("mouse.released"),PC=fc([Se("isExtraPart",On),Gi("fireEventInstead",[Se("event",Um())])]),ec=t=>{const s=lr("Dismissal",PC,t);return{[cm()]:{schema:fc([Ze("target")]),onReceive:(a,c)=>{eo.isOpen(a)&&(eo.isPartOf(a,c.target)||s.isExtraPart(a,c.target)||s.fireEventInstead.fold(()=>eo.close(a),g=>Wn(a,g.event)))}}}},r3=fc([Gi("fireEventInstead",[Se("event",p2())]),hc("doReposition")]),Sh=t=>{const s=lr("Reposition",r3,t);return{[lm()]:{onReceive:a=>{eo.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),c=>Wn(a,c.event))}}}},cd=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},Z1=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var fT=Object.freeze({__proto__:null,onLoad:cd,onUnload:Z1,setValue:(t,s,a,c)=>{s.store.manager.setValue(t,s,a,c)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),hT=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[vo((c,d)=>{cd(c,t,s)}),vc((c,d)=>{Z1(c,t,s)})]:[E2(t,s,cd)];return No(a)}});const wh=()=>{const t=Wt(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,c=()=>{t.set(null)};return di({set:t.set,get:t.get,isNotSet:a,clear:c,readState:s})},xh=()=>di({readState:Y}),Eh=()=>{const t=Wt({}),s=Wt({});return di({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:p=>Tt(t.get(),p).orThunk(()=>Tt(s.get(),p)),update:p=>{const x=t.get(),T=s.get(),O={},D={};Ot(p,L=>{O[L.value]=L,Tt(L,"meta").each(H=>{Tt(H,"text").each(q=>{D[q]=L})})}),t.set({...x,...O}),s.set({...T,...D})},clear:()=>{t.set({}),s.set({})}})};var NC=Object.freeze({__proto__:null,memory:wh,dataset:Eh,manual:xh,init:t=>t.store.manager.state(t)});const Hg=(t,s,a,c)=>{const d=s.store;a.update([c]),d.setValue(t,c),s.onSetValue(t,c)},BC=(t,s,a)=>{const c=s.store,d=c.getDataKey(t);return a.lookup(d).getOrThunk(()=>c.getFallbackEntry(d))},LC=(t,s,a)=>{s.store.initialValue.each(d=>{Hg(t,s,a,d)})},Vg=(t,s,a)=>{a.clear()};var IC=[no("initialValue"),Ze("getFallbackEntry"),Ze("getDataKey"),Ze("setValue"),us("manager",{setValue:Hg,getValue:BC,onLoad:LC,onUnload:Vg,state:Eh})];const gT=(t,s,a)=>s.store.getValue(t),sf=(t,s,a,c)=>{s.store.setValue(t,c),s.onSetValue(t,c)},FC=(t,s,a)=>{s.store.initialValue.each(c=>{s.store.setValue(t,c)})};var i3=[Ze("getValue"),Se("setValue",Y),no("initialValue"),us("manager",{setValue:sf,getValue:gT,onLoad:FC,onUnload:Y,state:Zc.init})];const pT=(t,s,a,c)=>{a.set(c),s.onSetValue(t,c)},um=(t,s,a)=>a.get(),bT=(t,s,a)=>{s.store.initialValue.each(c=>{a.isNotSet()&&a.set(c)})},$C=(t,s,a)=>{a.clear()};var rf=[no("initialValue"),us("manager",{setValue:pT,getValue:um,onLoad:bT,onUnload:$C,state:wh})],HC=[zc("store",{mode:"memory"},Za("mode",{memory:rf,manual:i3,dataset:IC})),qn("onSetValue"),Se("resetOnDom",!1)];const Et=yr({fields:HC,name:"representing",active:hT,apis:fT,extra:{setValueFrom:(t,s)=>{const a=Et.getValue(s);Et.setValue(t,a)}},state:NC}),qr=(t,s)=>cg(t,{},qe(s,a=>ru(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([ui("dump",at)])),bv=t=>t.dump,Gs=(t,s)=>({...rt(s),...t.dump}),Ec={field:qr,augment:Gs,get:bv},vv="placeholder",Th=Ma.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),yv=t=>Jn(t,"uiType"),Cv=(t,s,a,c)=>t.exists(d=>d!==a.owner)?Th.single(!0,ne(a)):Tt(c,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+Zo(c)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),VC=(t,s,a,c)=>yv(a)&&a.uiType===vv?Cv(t,s,a,c):Th.single(!1,ne(a)),vT=(t,s,a,c)=>VC(t,s,a,c).fold((g,p)=>{const x=yv(a)?p(s,a.config,a.validated):p(s),T=Tt(x,"components").getOr([]),O=ye(T,D=>vT(t,s,D,c));return[{...x,components:O}]},(g,p)=>{if(yv(a)){const x=p(s,a.config,a.validated);return a.validated.preprocess.getOr(at)(x)}else return p(s)}),c3=(t,s,a,c)=>ye(a,d=>vT(t,s,d,c)),ld=(t,s)=>{let a=!1;const c=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((p,x)=>p,(p,x)=>p);return{name:ne(t),required:g,used:c,replace:d}},l3=(t,s,a,c)=>{const d=Io(c,(p,x)=>ld(x,p)),g=c3(t,s,a,d);return _s(d,p=>{if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},zC=Th.single,qc=Th.multiple,Dr=ne(vv),Sv=Ma.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),zg=Se("factory",{sketch:at}),UC=Se("schema",[]),ud=Ze("name"),dm=sa("pname","pname",Zt(t=>"<alloy."+Mt(t.name)+">"),oa()),af=ui("schema",()=>[no("preprocess")]),q1=Se("defaults",ne({})),Li=Se("overrides",ne({})),kh=dn([zg,UC,ud,dm,q1,Li]),u3=dn([zg,UC,ud,q1,Li]),Ug=dn([zg,UC,ud,dm,q1,Li]),yT=dn([zg,af,ud,Ze("unit"),dm,q1,Li]),CT=t=>t.fold(R.some,R.none,R.some,R.some),ST=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},wT=t=>t.fold(at,at,at,at),j1=(t,s)=>a=>{const c=lr("Converting part type",s,a);return t(c)},ba=j1(Sv.required,kh),jc=j1(Sv.external,u3),Ii=j1(Sv.optional,Ug),_h=j1(Sv.group,yT),mm=ne("entirety");var G1=Object.freeze({__proto__:null,required:ba,external:jc,optional:Ii,group:_h,asNamedPart:CT,name:ST,asCommon:wT,original:mm});const WC=(t,s,a,c)=>Rt(s.defaults(t,a,c),a,{uid:t.partUids[s.name]},s.overrides(t,a,c)),d3=(t,s,a)=>{const c={},d={};return Ot(a,g=>{g.fold(p=>{c[p.pname]=zC(!0,(x,T,O)=>p.factory.sketch(WC(x,p,T,O)))},p=>{const x=s.parts[p.name];d[p.name]=ne(p.factory.sketch(WC(s,p,x[mm()]),x))},p=>{c[p.pname]=zC(!1,(x,T,O)=>p.factory.sketch(WC(x,p,T,O)))},p=>{c[p.pname]=qc(!0,(x,T,O)=>{const D=x[p.name];return qe(D,L=>p.factory.sketch(Rt(p.defaults(x,L,O),L,p.overrides(x,L))))})})}),{internals:ne(c),externals:ne(d)}},ZC=(t,s)=>{const a={};return Ot(s,c=>{CT(c).each(d=>{const g=m3(t,d.pname);a[d.name]=p=>{const x=lr("Part: "+d.name+" in "+t,dn(d.schema),p);return{...g,config:p,validated:x}}})}),a},m3=(t,s)=>({uiType:Dr(),owner:t,name:s}),wv=(t,s,a)=>({uiType:Dr(),owner:t,name:s,config:a,validated:{}}),qC=t=>ye(t,s=>s.fold(R.none,R.some,R.none,R.none).map(a=>Ws(a.name,a.schema.concat([y1(mm())]))).toArray()),xT=t=>qe(t,ST),xv=(t,s,a)=>d3(t,s,a),jC=(t,s,a)=>l3(R.some(t),s,s.components,a),Bo=(t,s,a)=>{const c=s.partUids[a];return t.getSystem().getByUid(c).toOptional()},mu=(t,s,a)=>Bo(t,s,a).getOrDie("Could not find part: "+a),ET=(t,s,a)=>{const c={},d=s.partUids,g=t.getSystem();return Ot(a,p=>{c[p]=ne(g.getByUid(d[p]))}),c},TT=(t,s)=>{const a=t.getSystem();return Io(s.partUids,(c,d)=>ne(a.getByUid(c)))},GC=t=>Zo(t.partUids),Ev=(t,s,a)=>{const c={},d=s.partUids,g=t.getSystem();return Ot(a,p=>{c[p]=ne(g.getByUid(d[p]).getOrDie())}),c},KC=(t,s)=>{const a=xT(s);return lg(qe(a,c=>({key:c,value:t+"-"+c})))},Wg=t=>sa("partUids","partUids",ci(s=>KC(s.uid,t)),oa());var FN=Object.freeze({__proto__:null,generate:ZC,generateOne:wv,schemas:qC,names:xT,substitutes:xv,components:jC,defaultUids:KC,defaultUidsSchema:Wg,getAllParts:TT,getAllPartNames:GC,getPart:Bo,getPartOrDie:mu,getParts:ET,getPartsOrDie:Ev});const kT=(t,s)=>(t.length>0?[Ws("parts",t)]:[]).concat([Ze("uid"),Se("dom",{}),Se("components",[]),y1("originalSpec"),Se("debug.sketcher",{})]).concat(s),Tv=(t,s,a,c,d)=>{const g=kT(c,d);return lr(t+" [SpecSchema]",fc(g.concat(s)),a)},f3=(t,s,a,c)=>{const d=XC(c),g=Tv(t,s,d,[],[]);return a(g,d)},K1=(t,s,a,c,d)=>{const g=XC(d),p=qC(a),x=Wg(a),T=Tv(t,s,g,p,[x]),O=xv(t,T,a),D=jC(t,T,O.internals());return c(T,D,g,O.externals())},_T=t=>Jn(t,"uid"),XC=t=>_T(t)?t:{...t,uid:uh("uid")},AT=t=>t.uid!==void 0,fm=fc([Ze("name"),Ze("factory"),Ze("configFields"),Se("apis",{}),Se("extraApis",{})]),kv=fc([Ze("name"),Ze("factory"),Ze("configFields"),Ze("partFields"),Se("apis",{}),Se("extraApis",{})]),Fi=t=>{const s=lr("Sketcher for "+t.name,fm,t),a=g=>f3(s.name,s.configFields,s.factory,g),c=Io(s.apis,kg),d=Io(s.extraApis,(g,p)=>x2(g,p));return{name:s.name,configFields:s.configFields,sketch:a,...c,...d}},Ba=t=>{const s=lr("Sketcher for "+t.name,kv,t),a=p=>K1(s.name,s.configFields,s.partFields,s.factory,p),c=ZC(s.name,s.partFields),d=Io(s.apis,kg),g=Io(s.extraApis,(p,x)=>x2(p,x));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:c,...d,...g}},Zg=t=>Aa("input")(t)&&Ln(t,"type")!=="radio"||Aa("textarea")(t);var h3=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const YC=[Ze("find")],Xn=yr({fields:YC,name:"composing",apis:h3}),qg=["input","button","textarea","select"],JC=(t,s,a)=>{(s.disabled()?_v:eS)(t,s)},QC=(t,s)=>s.useNative===!0&&Mo(qg,Hs(t.element)),OT=t=>Vs(t.element,"disabled"),RT=t=>{Ve(t.element,"disabled","disabled")},g3=t=>{zn(t.element,"disabled")},HN=t=>Ln(t.element,"aria-disabled")==="true",p3=t=>{Ve(t.element,"aria-disabled","true")},b3=t=>{Ve(t.element,"aria-disabled","false")},_v=(t,s,a)=>{s.disableClass.each(d=>{qs(t.element,d)}),(QC(t,s)?RT:p3)(t),s.onDisabled(t)},eS=(t,s,a)=>{s.disableClass.each(d=>{ao(t.element,d)}),(QC(t,s)?g3:b3)(t),s.onEnabled(t)},Av=(t,s)=>QC(t,s)?OT(t):HN(t);var VN=Object.freeze({__proto__:null,enable:eS,disable:_v,isDisabled:Av,onLoad:JC,set:(t,s,a,c)=>{(c?_v:eS)(t,s)}}),y3=Object.freeze({__proto__:null,exhibit:(t,s)=>Wc({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>No([mg(Di(),(a,c)=>Av(a,t)),E2(t,s,JC)])}),C3=[ss("disabled",On),Se("useNative",!0),no("disableClass"),qn("onDisabled"),qn("onEnabled")];const Nt=yr({fields:C3,name:"disabling",active:y3,apis:VN}),DT=(t,s,a,c)=>{const d=bi(t.element,"."+s.highlightClass);Ot(d,g=>{wr(c,x=>Kn(x.element,g))||(ao(g,s.highlightClass),t.getSystem().getByDom(g).each(x=>{s.onDehighlight(t,x),Wn(x,o1())}))})},MT=(t,s,a)=>DT(t,s,a,[]),nS=(t,s,a,c)=>{Y1(t,s,a,c)&&(ao(c.element,s.highlightClass),s.onDehighlight(t,c),Wn(c,o1()))},X1=(t,s,a,c)=>{DT(t,s,a,[c]),Y1(t,s,a,c)||(qs(c.element,s.highlightClass),s.onHighlight(t,c),Wn(c,w0()))},S3=(t,s,a)=>{l(t,s).each(c=>{X1(t,s,a,c)})},jg=(t,s,a)=>{m(t,s).each(c=>{X1(t,s,a,c)})},oS=(t,s,a,c)=>{sS(t,s,a,c).fold(d=>{throw d},d=>{X1(t,s,a,d)})},w3=(t,s,a,c)=>{const d=M(t,s);yn(d,c).each(p=>{X1(t,s,a,p)})},Y1=(t,s,a,c)=>Na(c.element,s.highlightClass),Ov=(t,s,a)=>Pn(t.element,"."+s.highlightClass).bind(c=>t.getSystem().getByDom(c).toOptional()),sS=(t,s,a,c)=>{const d=bi(t.element,"."+s.itemClass);return R.from(d[c]).fold(()=>In.error(new Error("No element found with index "+c)),t.getSystem().getByDom)},l=(t,s,a)=>Pn(t.element,"."+s.itemClass).bind(c=>t.getSystem().getByDom(c).toOptional()),m=(t,s,a)=>{const c=bi(t.element,"."+s.itemClass);return(c.length>0?R.some(c[c.length-1]):R.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},b=(t,s,a,c)=>{const d=bi(t.element,"."+s.itemClass);return bo(d,p=>Na(p,s.highlightClass)).bind(p=>{const x=lh(p,c,0,d.length-1);return t.getSystem().getByDom(d[x]).toOptional()})},S=(t,s,a)=>b(t,s,a,-1),A=(t,s,a)=>b(t,s,a,1),M=(t,s,a)=>{const c=bi(t.element,"."+s.itemClass);return Ul(qe(c,d=>t.getSystem().getByDom(d).toOptional()))};var $=Object.freeze({__proto__:null,dehighlightAll:MT,dehighlight:nS,highlight:X1,highlightFirst:S3,highlightLast:jg,highlightAt:oS,highlightBy:w3,isHighlighted:Y1,getHighlighted:Ov,getFirst:l,getLast:m,getPrevious:S,getNext:A,getCandidates:M}),j=[Ze("highlightClass"),Ze("itemClass"),qn("onHighlight"),qn("onDehighlight")];const K=yr({fields:j,name:"highlighting",apis:$}),ue=[8],ve=[9],Ke=[13],wt=[27],it=[32],ut=[37],It=[38],Je=[39],sn=[40],ze=(t,s,a)=>{const c=ir(t.slice(0,s)),d=ir(t.slice(s+1));return yn(c.concat(d),a)},Dt=(t,s,a)=>{const c=ir(t.slice(0,s));return yn(c,a)},ho=(t,s,a)=>{const c=t.slice(0,s),d=t.slice(s+1);return yn(d.concat(c),a)},go=(t,s,a)=>{const c=t.slice(s+1);return yn(c,a)},Ut=t=>s=>{const a=s.raw;return Mo(t,a.which)},Lo=t=>s=>ic(t,a=>a(s)),Xa=t=>t.raw.shiftKey===!0,cf=t=>t.raw.ctrlKey===!0,El=Ee(Xa),Zn=(t,s)=>({matches:t,classification:s}),Co=(t,s)=>yn(t,c=>c.matches(s)).map(c=>c.classification),va=(t,s,a)=>{s.exists(d=>a.exists(g=>Kn(g,d)))||Gt(t,Qf(),{prevFocus:s,newFocus:a})},Mr=()=>{const t=a=>Ka(a.element);return{get:t,set:(a,c)=>{const d=t(a);a.getSystem().triggerFocus(c,a.element);const g=t(a);va(a,d,g)}}},Gc=()=>{const t=a=>K.getHighlighted(a).map(c=>c.element);return{get:t,set:(a,c)=>{const d=t(a);a.getSystem().getByDom(c).fold(Y,p=>{K.highlight(a,p)});const g=t(a);va(a,d,g)}}};var ya;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(ya||(ya={}));const Tl=(t,s,a,c,d)=>{const g=()=>t.concat([Se("focusManager",Mr()),zc("focusInside","onFocus",li(O=>Mo(["onFocus","onEnterOrSpace","onApi"],O)?In.value(O):In.error("Invalid value for focusInside"))),us("handler",T),us("state",s),us("sendFocusIn",d)]),p=(O,D,L,H,q)=>{const J=L(O,D,H,q);return Co(J,D.event).bind(re=>re(O,D,H,q))},T={schema:g,processKey:p,toEvents:(O,D)=>{const L=O.focusInside!==ya.OnFocusMode?R.none():d(O).map(J=>$e(Vm(),(re,de)=>{J(re,O,D),de.stop()})),H=(J,re)=>{const de=Ut(it.concat(Ke))(re.event);O.focusInside===ya.OnEnterOrSpaceMode&&de&&f2(J,re)&&d(O).each(oe=>{oe(J,O,D),re.stop()})},q=[$e(Ki(),(J,re)=>{p(J,re,a,O,D).fold(()=>{H(J,re)},de=>{re.stop()})}),$e(t1(),(J,re)=>{p(J,re,c,O,D).each(de=>{re.stop()})})];return No(L.toArray().concat(q))}};return T},Ya=t=>{const s=[no("onEscape"),no("onEnter"),Se("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Se("firstTabstop",0),Se("useTabstopAt",Ft),no("visibilitySelector")].concat([t]),a=(oe,fe)=>{const he=oe.visibilitySelector.bind(ke=>Us(fe,ke)).getOr(fe);return nr(he)>0},c=(oe,fe)=>{const he=bi(oe.element,fe.selector),ke=Eo(he,Pe=>a(fe,Pe));return R.from(ke[fe.firstTabstop])},d=(oe,fe)=>fe.focusManager.get(oe).bind(he=>Us(he,fe.selector)),g=(oe,fe)=>a(oe,fe)&&oe.useTabstopAt(fe),p=(oe,fe,he)=>{c(oe,fe).each(ke=>{fe.focusManager.set(oe,ke)})},x=(oe,fe,he,ke,Pe)=>Pe(fe,he,Ct=>g(ke,Ct)).fold(()=>ke.cyclic?R.some(!0):R.none(),Ct=>(ke.focusManager.set(oe,Ct),R.some(!0))),T=(oe,fe,he,ke)=>{const Pe=Eo(bi(oe.element,he.selector),Ct=>a(he,Ct));return d(oe,he).bind(Ct=>bo(Pe,ln(Kn,Ct)).bind(Be=>x(oe,Pe,Be,he,ke)))},O=(oe,fe,he)=>{const ke=he.cyclic?ze:Dt;return T(oe,fe,he,ke)},D=(oe,fe,he)=>{const ke=he.cyclic?ho:go;return T(oe,fe,he,ke)},L=oe=>Bd(oe).bind(Pu).exists(fe=>Kn(fe,oe)),H=(oe,fe,he)=>d(oe,he).filter(ke=>!he.useTabstopAt(ke)).bind(ke=>(L(ke)?O:D)(oe,fe,he)),q=(oe,fe,he)=>he.onEnter.bind(ke=>ke(oe,fe)),J=(oe,fe,he)=>he.onEscape.bind(ke=>ke(oe,fe)),re=ne([Zn(Lo([Xa,Ut(ve)]),O),Zn(Ut(ve),D),Zn(Lo([El,Ut(Ke)]),q)]),de=ne([Zn(Ut(wt),J),Zn(Ut(ve),H)]);return Tl(s,Zc.init,re,de,()=>R.some(p))};var rS=Ya(ui("cyclic",On)),J1=Ya(ui("cyclic",Ft));const dd=(t,s,a)=>(b2(t,a,Di()),R.some(!0)),Pr=(t,s,a)=>Zg(a)&&Ut(it)(s.event)?R.none():dd(t,s,a),hm=(t,s)=>R.some(!0),x3=[Se("execute",Pr),Se("useSpace",!1),Se("useEnter",!0),Se("useControlEnter",!1),Se("useDown",!1)],aS=(t,s,a)=>a.execute(t,s,t.element),E3=(t,s,a,c)=>{const d=a.useSpace&&!Zg(t.element)?it:[],g=a.useEnter?Ke:[],p=a.useDown?sn:[],x=d.concat(g).concat(p);return[Zn(Ut(x),aS)].concat(a.useControlEnter?[Zn(Lo([cf,Ut(Ke)]),aS)]:[])},iS=(t,s,a,c)=>a.useSpace&&!Zg(t.element)?[Zn(Ut(it),hm)]:[];var cS=Tl(x3,Zc.init,E3,iS,()=>R.none());const PT=()=>{const t=uo();return di({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var T3=Object.freeze({__proto__:null,flatgrid:PT,init:t=>t.state(t)});const zN=t=>(s,a,c,d)=>{const g=t(s.element);return A3(g,s,a,c,d)},NT=(t,s)=>{const a=gC(t,s);return zN(a)},k3=(t,s)=>{const a=gC(s,t);return zN(a)},_3=t=>(s,a,c,d)=>A3(t,s,a,c,d),A3=(t,s,a,c,d)=>c.focusManager.get(s).bind(p=>t(s.element,p,c,d)).map(p=>(c.focusManager.set(s,p),!0)),UN=_3,WN=_3,Rv=_3,ZN=t=>t.offsetWidth<=0&&t.offsetHeight<=0,lS=t=>!ZN(t.dom),BT=(t,s)=>bo(t,s).map(a=>({index:a,candidates:t})),uS=(t,s,a)=>{const c=p=>Kn(p,s),d=bi(t,a),g=Eo(d,lS);return BT(g,c)},Gg=(t,s)=>bo(t,a=>Kn(s,a)),AH=(t,s,a,c)=>{const d=Math.floor(s/a),g=s%a;return c(d,g).bind(p=>{const x=p.row*a+p.column;return x>=0&&x<t.length?R.some(t[x]):R.none()})},qN=(t,s,a,c,d)=>AH(t,s,c,(g,p)=>{const T=g===a-1?t.length-g*c:c,O=lh(p,d,0,T-1);return R.some({row:g,column:O})}),jN=(t,s,a,c,d)=>AH(t,s,c,(g,p)=>{const x=lh(g,d,0,a-1),O=x===a-1?t.length-x*c:c,D=yl(p,0,O-1);return R.some({row:x,column:D})}),GN=(t,s,a,c)=>qN(t,s,a,c,1),OH=(t,s,a,c)=>qN(t,s,a,c,-1),bY=(t,s,a,c)=>jN(t,s,a,c,-1),vY=(t,s,a,c)=>jN(t,s,a,c,1),RH=[Ze("selector"),Se("execute",Pr),Ni("onEscape"),Se("captureTab",!1),nd()],DH=(t,s,a)=>{Pn(t.element,s.selector).each(c=>{s.focusManager.set(t,c)})},O3=(t,s)=>s.focusManager.get(t).bind(a=>Us(a,s.selector)),MH=(t,s,a,c)=>O3(t,a).bind(d=>a.execute(t,s,d)),LT=t=>(s,a,c,d)=>uS(s,a,c.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(c.initSize.numRows),d.getNumColumns().getOr(c.initSize.numColumns))),KN=(t,s,a)=>a.captureTab?R.some(!0):R.none(),XN=(t,s,a)=>a.onEscape(t,s),YN=LT(OH),JN=LT(GN),QN=LT(bY),e5=LT(vY),PH=ne([Zn(Ut(ut),NT(YN,JN)),Zn(Ut(Je),k3(YN,JN)),Zn(Ut(It),UN(QN)),Zn(Ut(sn),WN(e5)),Zn(Lo([Xa,Ut(ve)]),KN),Zn(Lo([El,Ut(ve)]),KN),Zn(Ut(it.concat(Ke)),MH)]),t5=ne([Zn(Ut(wt),XN),Zn(Ut(it),hm)]);var NH=Tl(RH,PT,PH,t5,()=>R.some(DH));const IT=(t,s,a,c,d)=>{const g=x=>Hs(x)==="button"&&Ln(x,"disabled")==="disabled",p=(x,T,O)=>d(x,T,c,0,O.length-1,O[T],D=>g(O[D])?p(x,D,O):R.from(O[D]));return uS(t,a,s).bind(x=>{const T=x.index,O=x.candidates;return p(T,T,O)})},R3=(t,s,a,c)=>IT(t,s,a,c,(d,g,p,x,T,O,D)=>{const L=yl(g+p,x,T);return L===d?R.from(O):D(L)}),dS=(t,s,a,c)=>IT(t,s,a,c,(d,g,p,x,T,O,D)=>{const L=lh(g,p,x,T);return L===d?R.none():D(L)}),n5=[Ze("selector"),Se("getInitial",R.none),Se("execute",Pr),Ni("onEscape"),Se("executeOnMove",!1),Se("allowVertical",!0),Se("allowHorizontal",!0),Se("cycles",!0)],BH=(t,s)=>s.focusManager.get(t).bind(a=>Us(a,s.selector)),D3=(t,s,a)=>BH(t,a).bind(c=>a.execute(t,s,c)),LH=(t,s,a)=>{s.getInitial(t).orThunk(()=>Pn(t.element,s.selector)).each(c=>{s.focusManager.set(t,c)})},o5=(t,s,a)=>(a.cycles?dS:R3)(t,a.selector,s,-1),s5=(t,s,a)=>(a.cycles?dS:R3)(t,a.selector,s,1),Dv=t=>(s,a,c,d)=>t(s,a,c,d).bind(()=>c.executeOnMove?D3(s,a,c):R.some(!0)),r5=(t,s,a)=>a.onEscape(t,s),a5=(t,s,a,c)=>{const d=[...a.allowHorizontal?ut:[]].concat(a.allowVertical?It:[]),g=[...a.allowHorizontal?Je:[]].concat(a.allowVertical?sn:[]);return[Zn(Ut(d),Dv(NT(o5,s5))),Zn(Ut(g),Dv(k3(o5,s5))),Zn(Ut(Ke),D3),Zn(Ut(it),D3)]},i5=ne([Zn(Ut(it),hm),Zn(Ut(wt),r5)]);var c5=Tl(n5,Zc.init,a5,i5,()=>R.some(LH));const mS=(t,s,a)=>R.from(t[s]).bind(c=>R.from(c[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),l5=(t,s,a,c)=>{const g=t[s].length,p=lh(a,c,0,g-1);return mS(t,s,p)},u5=(t,s,a,c)=>{const d=lh(a,c,0,t.length-1),g=t[d].length,p=yl(s,0,g-1);return mS(t,d,p)},d5=(t,s,a,c)=>{const g=t[s].length,p=yl(a+c,0,g-1);return mS(t,s,p)},FT=(t,s,a,c)=>{const d=yl(a+c,0,t.length-1),g=t[d].length,p=yl(s,0,g-1);return mS(t,d,p)},IH=(t,s,a)=>l5(t,s,a,1),$T=(t,s,a)=>l5(t,s,a,-1),FH=(t,s,a)=>u5(t,a,s,-1),m5=(t,s,a)=>u5(t,a,s,1),tc=(t,s,a)=>d5(t,s,a,-1),$H=(t,s,a)=>d5(t,s,a,1),f5=(t,s,a)=>FT(t,a,s,-1),h5=(t,s,a)=>FT(t,a,s,1),HH=[Ws("selectors",[Ze("row"),Ze("cell")]),Se("cycles",!0),Se("previousSelector",R.none),Se("execute",Pr)],g5=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return Pn(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},p5=(t,s,a)=>Ka(t.element).bind(c=>a.execute(t,s,c)),VH=(t,s)=>qe(t,a=>bi(a,s.selectors.cell)),HT=(t,s)=>(a,c,d)=>{const g=d.cycles?t:s;return Us(c,d.selectors.row).bind(p=>{const x=bi(p,d.selectors.cell);return Gg(x,c).bind(T=>{const O=bi(a,d.selectors.row);return Gg(O,p).bind(D=>{const L=VH(O,d);return g(L,D,T).map(H=>H.cell)})})})},b5=HT($T,tc),v5=HT(IH,$H),y5=HT(FH,f5),zH=HT(m5,h5),UH=ne([Zn(Ut(ut),NT(b5,v5)),Zn(Ut(Je),k3(b5,v5)),Zn(Ut(It),UN(y5)),Zn(Ut(sn),WN(zH)),Zn(Ut(it.concat(Ke)),p5)]),C5=ne([Zn(Ut(it),hm)]);var S5=Tl(HH,Zc.init,UH,C5,()=>R.some(g5));const w5=[Ze("selector"),Se("execute",Pr),Se("moveOnTab",!1)],x5=(t,s,a)=>a.focusManager.get(t).bind(c=>a.execute(t,s,c)),WH=(t,s,a)=>{Pn(t.element,s.selector).each(c=>{s.focusManager.set(t,c)})},E5=(t,s,a)=>dS(t,a.selector,s,-1),T5=(t,s,a)=>dS(t,a.selector,s,1),k5=(t,s,a,c)=>a.moveOnTab?Rv(E5)(t,s,a,c):R.none(),_5=(t,s,a,c)=>a.moveOnTab?Rv(T5)(t,s,a,c):R.none(),Kg=ne([Zn(Ut(It),Rv(E5)),Zn(Ut(sn),Rv(T5)),Zn(Lo([Xa,Ut(ve)]),k5),Zn(Lo([El,Ut(ve)]),_5),Zn(Ut(Ke),x5),Zn(Ut(it),x5)]),A5=ne([Zn(Ut(it),hm)]);var O5=Tl(w5,Zc.init,Kg,A5,()=>R.some(WH));const R5=[Ni("onSpace"),Ni("onEnter"),Ni("onShiftEnter"),Ni("onLeft"),Ni("onRight"),Ni("onTab"),Ni("onShiftTab"),Ni("onUp"),Ni("onDown"),Ni("onEscape"),Se("stopSpaceKeyup",!1),no("focusIn")],ZH=(t,s,a)=>[Zn(Ut(it),a.onSpace),Zn(Lo([El,Ut(Ke)]),a.onEnter),Zn(Lo([Xa,Ut(Ke)]),a.onShiftEnter),Zn(Lo([Xa,Ut(ve)]),a.onShiftTab),Zn(Lo([El,Ut(ve)]),a.onTab),Zn(Ut(It),a.onUp),Zn(Ut(sn),a.onDown),Zn(Ut(ut),a.onLeft),Zn(Ut(Je),a.onRight),Zn(Ut(it),a.onSpace)],Mv=(t,s,a)=>[...a.stopSpaceKeyup?[Zn(Ut(it),hm)]:[],Zn(Ut(wt),a.onEscape)];var qH=Tl(R5,Zc.init,ZH,Mv,t=>t.focusIn);const jH=rS.schema(),D5=J1.schema(),GH=c5.schema(),KH=NH.schema(),XH=S5.schema(),M5=cS.schema(),M3=O5.schema(),P3=qH.schema();var YH=Object.freeze({__proto__:null,acyclic:jH,cyclic:D5,flow:GH,flatgrid:KH,matrix:XH,execution:M5,menu:M3,special:P3});const Xg=t=>Ha(t,"setGridSize"),jt=Ix({branchKey:"mode",branches:YH,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},c=>{c(t,s,a)})},setGridSize:(t,s,a,c,d)=>{Xg(a)?a.setGridSize(c,d):console.error("Layout does not support setGridSize")}},state:T3}),N3=(t,s)=>{rC(()=>{W1(t,s,()=>qe(s,t.getSystem().build))},t.element)},P5=(t,s)=>{rC(()=>{oT(t,s,()=>oE(t.element,s,t.getSystem().buildOrPatch))},t.element)},JH=(t,s,a,c)=>{mv(s);const d=nE(t.element,a,c,t.getSystem().buildOrPatch);tT(t,d),t.syncComponents()},eb=(t,s,a)=>{const c=t.getSystem().build(a);wc(t,c,s)},fS=(t,s,a,c)=>{du(s),eb(t,(d,g)=>Uf(d,g,a),c)},N5=(t,s,a,c)=>(s.reuseDom?P5:N3)(t,c),B3=(t,s,a,c)=>{eb(t,ki,c)},Yg=(t,s,a,c)=>{eb(t,zf,c)},Jg=(t,s,a,c)=>{const d=VT(t);yn(d,p=>Kn(c.element,p.element)).each(du)},VT=(t,s)=>t.components(),B5=(t,s,a,c,d)=>{const g=VT(t);return R.from(g[c]).map(p=>(d.fold(()=>du(p),x=>{(s.reuseDom?JH:fS)(t,p,c,x)}),p))};var Ah=Object.freeze({__proto__:null,append:B3,prepend:Yg,remove:Jg,replaceAt:B5,replaceBy:(t,s,a,c,d)=>{const g=VT(t);return bo(g,c).bind(p=>B5(t,s,a,p,d))},set:N5,contents:VT});const Sn=yr({fields:[da("reuseDom",!0)],name:"replacing",apis:Ah}),eV=(t,s)=>{const a=No(s);return yr({fields:[Ze("enabled")],name:t,active:{events:ne(a)}})},wn=(t,s)=>{const a=eV(t,s);return{key:t,value:{config:{},me:a,configAsRaw:ne({}),initialConfig:{},state:Zc}}},L3=(t,s)=>{s.ignore||(ha(t.element),s.onFocus(t))};var I5=Object.freeze({__proto__:null,focus:L3,blur:(t,s)=>{s.ignore||sd(t.element)},isFocused:t=>Rr(t.element)}),nV=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Wc(a)},events:t=>No([$e(Vm(),(s,a)=>{L3(s,t),a.stop()})].concat(t.stopMousedown?[$e(pc(),(s,a)=>{a.event.prevent()})]:[]))}),zT=[qn("onFocus"),Se("stopMousedown",!1),Se("ignore",!1)];const gn=yr({fields:zT,name:"focusing",active:nV,apis:I5}),UT=t=>({init:()=>{const a=Wt(t);return{get:()=>a.get(),set:x=>a.set(x),clear:()=>a.set(t),readState:()=>a.get()}}}),F5=(t,s,a)=>{const c=s.aria;c.update(t,c,a.get())},oV=(t,s,a)=>{s.toggleClass.each(c=>{a.get()?qs(t.element,c):ao(t.element,c)})},Pv=(t,s,a,c)=>{const d=a.get();a.set(c),oV(t,s,a),F5(t,s,a),d!==c&&s.onToggled(t,c)},I3=(t,s,a)=>{Pv(t,s,a,!a.get())},$5=(t,s,a)=>{Pv(t,s,a,!0)},H5=(t,s,a)=>{Pv(t,s,a,!1)},sV=(t,s,a)=>a.get(),WT=(t,s,a)=>{Pv(t,s,a,s.selected)};var rV=Object.freeze({__proto__:null,onLoad:WT,toggle:I3,isOn:sV,on:$5,off:H5,set:Pv}),aV=Object.freeze({__proto__:null,exhibit:()=>Wc({}),events:(t,s)=>{const a=Bx(t,s,I3),c=E2(t,s,WT);return No(Cn([t.toggleOnExecute?[a]:[],[c]]))}});const V5=(t,s,a)=>{Ve(t.element,"aria-pressed",a),s.syncWithExpanded&&F3(t,s,a)},iV=(t,s,a)=>{Ve(t.element,"aria-selected",a)},cV=(t,s,a)=>{Ve(t.element,"aria-checked",a)},F3=(t,s,a)=>{Ve(t.element,"aria-expanded",a)};var hS=[Se("selected",!1),no("toggleClass"),Se("toggleOnExecute",!0),qn("onToggled"),zc("aria",{mode:"none"},Za("mode",{pressed:[Se("syncWithExpanded",!1),us("update",V5)],checked:[us("update",cV)],expanded:[us("update",F3)],selected:[us("update",iV)],none:[us("update",Y)]}))];const Mn=yr({fields:hS,name:"toggling",active:aV,apis:rV,state:UT(!1)}),Nv=()=>{const t=(s,a)=>{a.stop(),Qd(s)};return[$e(Xd(),t),$e(Gu(),t),Yu(gl()),Yu(pc())]},Bv=t=>{const s=a=>cu((c,d)=>{a(c),d.stop()});return No(Cn([t.map(s).toArray(),Nv()]))},$3="alloy.item-hover",H3="alloy.item-focus",z5="alloy.item-toggled",U5=t=>{(Ka(t.element).isNone()||gn.isFocused(t))&&(gn.isFocused(t)||gn.focus(t),Gt(t,$3,{item:t}))},V3=t=>{Gt(t,H3,{item:t})},lV=(t,s)=>{Gt(t,z5,{item:t,state:s})},z3=ne($3),uV=ne(H3),dV=ne(z5),W5=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),at),ZT=(t,s)=>({aria:{mode:s?"selected":"checked"},...zl(t,(a,c)=>c!=="exclusive"),onToggled:(a,c)=>{Ne(t.onToggled)&&t.onToggled(a,c),lV(a,c)}}),U3=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:W5(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Ec.augment(t.itemBehaviours,[t.toggling.fold(Mn.revoke,s=>Mn.config(ZT(s,t.role.exists(a=>a==="option")))),gn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{V3(s)}}),jt.config({mode:"execution"}),Et.config({store:{mode:"memory",initialValue:t.data}}),wn("item-type-events",[...Nv(),$e(pl(),U5),$e(dg(),gn.focus)])]),components:t.components,eventOrder:t.eventOrder}),W3=[Ze("data"),Ze("components"),Ze("dom"),Se("hasSubmenu",!1),no("toggling"),no("role"),Ec.field("itemBehaviours",[Mn,gn,jt,Et]),Se("ignoreFocus",!1),Se("domModification",{}),us("builder",U3),Se("eventOrder",{})],mV=t=>({dom:t.dom,components:t.components,events:No([gg(dg())])}),fV=[Ze("dom"),Ze("components"),us("builder",mV)],Z3=ne("item-widget"),q3=ne([ba({name:"widget",overrides:t=>({behaviours:rt([Et.config({store:{mode:"manual",getValue:s=>t.data,setValue:Y}})])})})]),Z5=t=>{const s=xv(Z3(),t,q3()),a=jC(Z3(),t,s.internals()),c=g=>Bo(g,t,"widget").map(p=>(jt.focusIn(p),p)),d=(g,p)=>Zg(p.event.target)?R.none():(t.autofocus&&p.setSource(g.element),R.none());return{dom:t.dom,components:a,domModification:t.domModification,events:No([cu((g,p)=>{c(g).each(x=>{p.stop()})}),$e(pl(),U5),$e(dg(),(g,p)=>{t.autofocus?c(g):gn.focus(g)})]),behaviours:Ec.augment(t.widgetBehaviours,[Et.config({store:{mode:"memory",initialValue:t.data}}),gn.config({ignore:t.ignoreFocus,onFocus:g=>{V3(g)}}),jt.config({mode:"special",focusIn:t.autofocus?g=>{c(g)}:i1(),onLeft:d,onRight:d,onEscape:(g,p)=>!gn.isFocused(g)&&!t.autofocus?(gn.focus(g),R.some(!0)):(t.autofocus&&p.setSource(g.element),R.none())})])}},q5=[Ze("uid"),Ze("data"),Ze("components"),Ze("dom"),Se("autofocus",!1),Se("ignoreFocus",!1),Ec.field("widgetBehaviours",[Et,gn,jt]),Se("domModification",{}),Wg(q3()),us("builder",Z5)],hV=Za("type",{widget:q5,item:W3,separator:fV}),gV=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),pV=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),bV=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),vV=ne([_h({factory:{sketch:t=>{const s=lr("menu.spec item",hV,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>Jn(s,"uid")?s:{...s,uid:uh("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),yV=ne([Ls("role"),Ze("value"),Ze("items"),Ze("dom"),Ze("components"),Se("eventOrder",{}),qr("menuBehaviours",[K,Et,Xn,jt]),zc("movement",{mode:"menu",moveOnTab:!0},Za("mode",{grid:[nd(),us("config",gV)],matrix:[us("config",pV),Ze("rowSelector"),Se("previousSelector",R.none)],menu:[Se("moveOnTab",!0),us("config",bV)]})),L2(),Se("fakeFocus",!1),Se("focusManager",Mr()),qn("onHighlight"),qn("onDehighlight"),Se("showMenuRole",!0)]),j3=ne("alloy.menu-focus"),CV=(t,s)=>{const a=bi(t.element,'[role="menuitemradio"][aria-checked="true"]');Ot(a,c=>{Kn(c,s.element)||t.getSystem().getByDom(c).each(d=>{Mn.off(d)})})},SV=(t,s,a,c)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Gs(t.menuBehaviours,[K.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Et.config({store:{mode:"memory",initialValue:t.value}}),Xn.config({find:R.some}),jt.config(t.movement.config(t,t.movement))]),events:No([$e(uV(),(d,g)=>{const p=g.event;d.getSystem().getByDom(p.target).each(x=>{K.highlight(d,x),g.stop(),Gt(d,j3(),{menu:d,item:x})})}),$e(z3(),(d,g)=>{const p=g.event.item;K.highlight(d,p)}),$e(dV(),(d,g)=>{const{item:p,state:x}=g.event;x&&Ln(p.element,"role")==="menuitemradio"&&CV(d,p)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),Oh=Ba({name:"Menu",configFields:yV(),partFields:vV(),factory:SV}),wV=t=>Vl(t,(s,a)=>({k:s,v:a})),j5=(t,s,a,c)=>Tt(a,c).bind(d=>Tt(t,d).bind(g=>{const p=j5(t,s,a,g);return R.some([g].concat(p))})).getOr([]),tb=(t,s)=>{const a={};_s(t,(p,x)=>{Ot(p,T=>{a[T]=x})});const c=s,d=wV(s),g=Io(d,(p,x)=>[x].concat(j5(a,c,d,x)));return Io(a,p=>Tt(g,p).getOr([p]))},xV=()=>{const t=Wt({}),s=Wt({}),a=Wt({}),c=uo(),d=Wt({}),g=()=>{t.set({}),s.set({}),a.set({}),c.clear()},p=()=>c.get().isNone(),x=(Pe,Ct)=>{s.set({...s.get(),[Pe]:{type:"prepared",menu:Ct}})},T=(Pe,Ct,tt,Be)=>{c.set(Pe),t.set(tt),s.set(Ct),d.set(Be);const At=tb(Be,tt);a.set(At)},O=Pe=>fr(t.get(),(Ct,tt)=>Ct===Pe),D=(Pe,Ct,tt)=>re(Pe).bind(Be=>O(Pe).bind(At=>Ct(At).map(cn=>({triggeredMenu:Be,triggeringItem:cn,triggeringPath:tt})))),L=(Pe,Ct)=>{const tt=Eo(oe(Pe).toArray(),Be=>re(Be).isSome());return Tt(a.get(),Pe).bind(Be=>{const At=ir(tt.concat(Be)),cn=ye(At,(en,$n)=>D(en,Ct,At.slice(0,$n+1)).fold(()=>Qr(c.get(),en)?[]:[R.none()],vn=>[R.some(vn)]));return qo(cn)})},H=Pe=>Tt(t.get(),Pe).map(Ct=>{const tt=Tt(a.get(),Pe).getOr([]);return[Ct].concat(tt)}),q=Pe=>Tt(a.get(),Pe).bind(Ct=>Ct.length>1?R.some(Ct.slice(1)):R.none()),J=Pe=>Tt(a.get(),Pe),re=Pe=>de(Pe).bind(G5),de=Pe=>Tt(s.get(),Pe),oe=Pe=>Tt(t.get(),Pe);return{setMenuBuilt:x,setContents:T,expand:H,refresh:J,collapse:q,lookupMenu:de,lookupItem:oe,otherMenus:Pe=>{const Ct=d.get();return an(Zo(Ct),Pe)},getPrimary:()=>c.get().bind(re),getMenus:()=>s.get(),clear:g,isClear:p,getTriggeringPath:L}},G5=t=>t.type==="prepared"?R.some(t.menu):R.none(),Qg={init:xV,extractPreparedMenu:G5},G3=Mt("tiered-menu-item-highlight"),K5=Mt("tiered-menu-item-dehighlight");var jr;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(jr||(jr={}));const EV=(t,s)=>{const a=uo(),c=(et,vt,fn)=>Io(fn,(An,Jt)=>{const kn=()=>Oh.sketch({...An,value:Jt,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Oo,So)=>{Gt(Oo,G3,{menuComp:Oo,itemComp:So})},onDehighlight:(Oo,So)=>{Gt(Oo,K5,{menuComp:Oo,itemComp:So})},focusManager:t.fakeFocus?Gc():Mr()});return Jt===vt?{type:"prepared",menu:et.getSystem().build(kn())}:{type:"notbuilt",nbMenu:kn}}),d=Qg.init(),g=et=>{const vt=c(et,t.data.primary,t.data.menus),fn=T();return d.setContents(t.data.primary,vt,t.data.expansions,fn),d.getPrimary()},p=et=>Et.getValue(et).value,x=(et,vt,fn)=>ks(vt,An=>{if(!An.getSystem().isConnected())return R.none();const Jt=K.getCandidates(An);return yn(Jt,kn=>p(kn)===fn)}),T=et=>Io(t.data.menus,(vt,fn)=>ye(vt.items,An=>An.type==="separator"?[]:[An.data.value])),O=K.highlight,D=(et,vt)=>{O(et,vt),K.getHighlighted(vt).orThunk(()=>K.getFirst(vt)).each(fn=>{t.fakeFocus?K.highlight(vt,fn):b2(et,fn.element,dg())})},L=(et,vt)=>Ul(qe(vt,fn=>et.lookupMenu(fn).bind(An=>An.type==="prepared"?R.some(An.menu):R.none()))),H=(et,vt,fn)=>{const An=L(vt,vt.otherMenus(fn));Ot(An,Jt=>{Pi(Jt.element,[t.markers.backgroundMenu]),t.stayInDom||Sn.remove(et,Jt)})},q=et=>a.get().getOrThunk(()=>{const vt={},fn=bi(et.element,`.${t.markers.item}`),An=Eo(fn,Jt=>Ln(Jt,"aria-haspopup")==="true");return Ot(An,Jt=>{et.getSystem().getByDom(Jt).each(kn=>{const Oo=p(kn);vt[Oo]=kn})}),a.set(vt),vt}),J=(et,vt)=>{const fn=q(et);_s(fn,(An,Jt)=>{const kn=Mo(vt,Jt);Ve(An.element,"aria-expanded",kn)})},re=(et,vt,fn)=>R.from(fn[0]).bind(An=>vt.lookupMenu(An).bind(Jt=>{if(Jt.type==="notbuilt")return R.none();{const kn=Jt.menu,Oo=L(vt,fn.slice(1));return Ot(Oo,So=>{qs(So.element,t.markers.backgroundMenu)}),se(kn.element)||Sn.append(et,ur(kn)),Pi(kn.element,[t.markers.backgroundMenu]),D(et,kn),H(et,vt,fn),R.some(kn)}}));let de;(function(et){et[et.HighlightSubmenu=0]="HighlightSubmenu",et[et.HighlightParent=1]="HighlightParent"})(de||(de={}));const oe=(et,vt,fn)=>{if(fn.type==="notbuilt"){const An=et.getSystem().build(fn.nbMenu());return d.setMenuBuilt(vt,An),An}else return fn.menu},fe=(et,vt,fn=de.HighlightSubmenu)=>{if(vt.hasConfigured(Nt)&&Nt.isDisabled(vt))return R.some(vt);{const An=p(vt);return d.expand(An).bind(Jt=>(J(et,Jt),R.from(Jt[0]).bind(kn=>d.lookupMenu(kn).bind(Oo=>{const So=oe(et,kn,Oo);return se(So.element)||Sn.append(et,ur(So)),t.onOpenSubmenu(et,vt,So,ir(Jt)),fn===de.HighlightSubmenu?(K.highlightFirst(So),re(et,d,Jt)):(K.dehighlightAll(So),R.some(vt))}))))}},he=(et,vt)=>{const fn=p(vt);return d.collapse(fn).bind(An=>(J(et,An),re(et,d,An).map(Jt=>(t.onCollapseMenu(et,vt,Jt),Jt))))},ke=(et,vt)=>{const fn=p(vt);return d.refresh(fn).bind(An=>(J(et,An),re(et,d,An)))},Pe=(et,vt)=>Zg(vt.element)?R.none():fe(et,vt,de.HighlightSubmenu),Ct=(et,vt)=>Zg(vt.element)?R.none():he(et,vt),tt=(et,vt)=>he(et,vt).orThunk(()=>t.onEscape(et,vt).map(()=>et)),Be=et=>(vt,fn)=>Us(fn.getSource(),`.${t.markers.item}`).bind(An=>vt.getSystem().getByDom(An).toOptional().bind(Jt=>et(vt,Jt).map(Ft))),At=No([$e(j3(),(et,vt)=>{const fn=vt.event.item;d.lookupItem(p(fn)).each(()=>{const An=vt.event.menu;K.highlight(et,An);const Jt=p(vt.event.item);d.refresh(Jt).each(kn=>H(et,d,kn))})}),cu((et,vt)=>{const fn=vt.event.target;et.getSystem().getByDom(fn).each(An=>{p(An).indexOf("collapse-item")===0&&he(et,An),fe(et,An,de.HighlightSubmenu).fold(()=>{t.onExecute(et,An)},Y)})}),vo((et,vt)=>{g(et).each(fn=>{Sn.append(et,ur(fn)),t.onOpenMenu(et,fn),t.highlightOnOpen===jr.HighlightMenuAndItem?D(et,fn):t.highlightOnOpen===jr.HighlightJustMenu&&O(et,fn)})}),$e(G3,(et,vt)=>{t.onHighlightItem(et,vt.event.menuComp,vt.event.itemComp)}),$e(K5,(et,vt)=>{t.onDehighlightItem(et,vt.event.menuComp,vt.event.itemComp)}),...t.navigateOnHover?[$e(z3(),(et,vt)=>{const fn=vt.event.item;ke(et,fn),fe(et,fn,de.HighlightParent),t.onHover(et,fn)})]:[]]),cn=et=>K.getHighlighted(et).bind(K.getHighlighted),en=et=>{cn(et).each(vt=>{he(et,vt)})},$n=et=>{d.getPrimary().each(vt=>{D(et,vt)})},vn=et=>R.from(et.components()[0]).filter(vt=>Ln(vt.element,"role")==="menu"),$t={collapseMenu:en,highlightPrimary:$n,repositionMenus:et=>{d.getPrimary().bind(fn=>cn(et).bind(An=>{const Jt=p(An),kn=_f(d.getMenus()),Oo=Ul(qe(kn,Qg.extractPreparedMenu));return d.getTriggeringPath(Jt,So=>x(et,Oo,So))}).map(An=>({primary:fn,triggeringPath:An}))).fold(()=>{vn(et).each(fn=>{t.onRepositionMenu(et,fn,[])})},({primary:fn,triggeringPath:An})=>{t.onRepositionMenu(et,fn,An)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Gs(t.tmenuBehaviours,[jt.config({mode:"special",onRight:Be(Pe),onLeft:Be(Ct),onEscape:Be(tt),focusIn:(et,vt)=>{d.getPrimary().each(fn=>{b2(et,fn.element,dg())})}}),K.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Xn.config({find:et=>K.getHighlighted(et)}),Sn.config({})]),eventOrder:t.eventOrder,apis:$t,events:At}},TV=ne("collapse-item"),fu=(t,s,a)=>({primary:t,menus:s,expansions:a}),X5=(t,s)=>({primary:t,menus:Zu(t,s),expansions:{}}),Y5=t=>({value:Mt(TV()),meta:{text:t}}),ep=Fi({name:"TieredMenu",configFields:[P0("onExecute"),P0("onEscape"),ch("onOpenMenu"),ch("onOpenSubmenu"),qn("onRepositionMenu"),qn("onCollapseMenu"),Se("highlightOnOpen",jr.HighlightMenuAndItem),Ws("data",[Ze("primary"),Ze("menus"),Ze("expansions")]),Se("fakeFocus",!1),qn("onHighlightItem"),qn("onDehighlightItem"),qn("onHover"),v1(),Ze("dom"),Se("navigateOnHover",!0),Se("stayInDom",!1),qr("tmenuBehaviours",[jt,K,Xn,Sn]),Se("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:EV,extraApis:{tieredData:fu,singleData:X5,collapseItem:Y5}}),kV=(t,s,a,c,d)=>{const g=()=>t.lazySink(s),p=c.type==="horizontal"?{layouts:{onLtr:()=>Lt(),onRtl:()=>mh()}}:{},x=O=>O.length===2,T=O=>x(O)?p:{};return ep.sketch({dom:{tag:"div"},data:c.data,markers:c.menu.markers,highlightOnOpen:c.menu.highlightOnOpen,fakeFocus:c.menu.fakeFocus,onEscape:()=>(eo.close(s),t.onEscape.map(O=>O(s)),R.some(!0)),onExecute:()=>R.some(!0),onOpenMenu:(O,D)=>{ga.positionWithinBounds(g().getOrDie(),D,a,d())},onOpenSubmenu:(O,D,L,H)=>{const q=g().getOrDie();ga.position(q,L,{anchor:{type:"submenu",item:D,...T(H)}})},onRepositionMenu:(O,D,L)=>{const H=g().getOrDie();ga.positionWithinBounds(H,D,a,d()),Ot(L,q=>{const J=T(q.triggeringPath);ga.position(H,q.triggeredMenu,{anchor:{type:"submenu",item:q.triggeringItem,...J}})})}})},qT=(t,s)=>{const a=(H,q)=>t.getRelated(H).exists(re=>Ym(re,q)),c=(H,q)=>{eo.setContent(H,q)},d=(H,q,J)=>{const re=R.none;g(H,q,J,re)},g=(H,q,J,re)=>{const de=t.lazySink(H).getOrDie();eo.openWhileCloaked(H,q,()=>ga.positionWithinBounds(de,H,J,re())),Et.setValue(H,R.some({mode:"position",config:J,getBounds:re}))},p=(H,q,J)=>{x(H,q,J,R.none)},x=(H,q,J,re)=>{const de=kV(t,H,q,J,re);eo.open(H,de),Et.setValue(H,R.some({mode:"menu",menu:de}))},T=H=>{eo.isOpen(H)&&(Et.setValue(H,R.none()),eo.close(H))},O=H=>eo.getState(H),D=H=>{eo.isOpen(H)&&Et.getValue(H).each(q=>{switch(q.mode){case"menu":eo.getState(H).each(ep.repositionMenus);break;case"position":const J=t.lazySink(H).getOrDie();ga.positionWithinBounds(J,H,q.config,q.getBounds());break}})},L={setContent:c,showAt:d,showWithinBounds:g,showMenuAt:p,showMenuWithinBounds:x,hide:T,getContent:O,reposition:D,isOpen:eo.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Gs(t.inlineBehaviours,[eo.config({isPartOf:(H,q,J)=>Ym(q,J)||a(H,J),getAttachPoint:H=>t.lazySink(H).getOrDie(),onOpen:H=>{t.onShow(H)},onClose:H=>{t.onHide(H)}}),Et.config({store:{mode:"memory",initialValue:R.none()}}),Bi.config({channels:{...ec({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(H=>({fireEventInstead:{event:H.event}})).getOr({})}),...Sh({...t.fireRepositionEventInstead.map(H=>({fireEventInstead:{event:H.event}})).getOr({}),doReposition:D})}})]),eventOrder:t.eventOrder,apis:L}},Cs=Fi({name:"InlineView",configFields:[Ze("lazySink"),qn("onShow"),qn("onHide"),Uu("onEscape"),qr("inlineBehaviours",[eo,Et,Bi]),Gi("fireDismissalEventInstead",[Se("event",Um())]),Gi("fireRepositionEventInstead",[Se("event",p2())]),Se("getRelated",R.none),Se("isExtraPart",On),Se("eventOrder",R.none)],factory:qT,apis:{showAt:(t,s,a,c)=>{t.showAt(s,a,c)},showWithinBounds:(t,s,a,c,d)=>{t.showWithinBounds(s,a,c,d)},showMenuAt:(t,s,a,c)=>{t.showMenuAt(s,a,c)},showMenuWithinBounds:(t,s,a,c,d)=>{t.showMenuWithinBounds(s,a,c,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var jT=tinymce.util.Tools.resolve("tinymce.util.Delay"),gS=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),GT=tinymce.util.Tools.resolve("tinymce.EditorManager"),tp=tinymce.util.Tools.resolve("tinymce.Env"),kl;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(kl||(kl={}));var Lv;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Lv||(Lv={}));const To=t=>s=>s.options.get(t),pS=t=>s=>R.from(t(s)),KT=t=>{const s=tp.deviceType.isPhone(),a=tp.deviceType.isTablet()||s,c=t.options.register,d=p=>te(p)||p===!1,g=p=>te(p)||Vt(p);c("skin",{processor:p=>te(p)||p===!1,default:"oxide"}),c("skin_url",{processor:"string"}),c("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),c("width",{processor:g,default:gS.DOM.getStyle(t.getElement(),"width")}),c("min_height",{processor:"number",default:100}),c("min_width",{processor:"number"}),c("max_height",{processor:"number"}),c("max_width",{processor:"number"}),c("style_formats",{processor:"object[]"}),c("style_formats_merge",{processor:"boolean",default:!1}),c("style_formats_autohide",{processor:"boolean",default:!1}),c("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),c("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),c("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),c("font_size_input_default_unit",{processor:"string",default:"pt"}),c("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),c("content_langs",{processor:"object[]"}),c("removed_menuitems",{processor:"string",default:""}),c("menubar",{processor:p=>te(p)||pt(p),default:!s}),c("menu",{processor:"object",default:{}}),c("toolbar",{processor:p=>pt(p)||te(p)||Ie(p)?{value:p,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),gs(9,p=>{c("toolbar"+(p+1),{processor:"string"})}),c("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),c("toolbar_groups",{processor:"object",default:{}}),c("toolbar_location",{processor:"string",default:Lv.auto}),c("toolbar_persist",{processor:"boolean",default:!1}),c("toolbar_sticky",{processor:"boolean",default:t.inline}),c("toolbar_sticky_offset",{processor:"number",default:0}),c("fixed_toolbar_container",{processor:"string",default:""}),c("fixed_toolbar_container_target",{processor:"object"}),c("ui_mode",{processor:"string",default:"combined"}),c("file_picker_callback",{processor:"function"}),c("file_picker_validator_handler",{processor:"function"}),c("file_picker_types",{processor:"string"}),c("typeahead_urls",{processor:"boolean",default:!0}),c("anchor_top",{processor:d,default:"#top"}),c("anchor_bottom",{processor:d,default:"#bottom"}),c("draggable_modal",{processor:"boolean",default:!1}),c("statusbar",{processor:"boolean",default:!0}),c("elementpath",{processor:"boolean",default:!0}),c("branding",{processor:"boolean",default:!0}),c("promotion",{processor:"boolean",default:!0}),c("resize",{processor:p=>p==="both"||pt(p),default:!tp.deviceType.isTouch()}),c("sidebar_show",{processor:"string"}),c("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),c("default_font_stack",{processor:"string[]",default:[]})},K3=To("readonly"),XT=To("disabled"),X3=To("height"),Y3=To("width"),bS=pS(To("min_width")),J3=pS(To("min_height")),np=pS(To("max_width")),Iv=pS(To("max_height")),Q3=pS(To("style_formats")),eO=To("style_formats_merge"),J5=To("style_formats_autohide"),Q5=To("content_langs"),eB=To("removed_menuitems"),Fv=To("toolbar_mode"),YT=To("toolbar_groups"),JT=To("toolbar_location"),tB=To("fixed_toolbar_container"),tO=To("fixed_toolbar_container_target"),nB=To("toolbar_persist"),nO=To("toolbar_sticky_offset"),oB=To("menubar"),QT=To("toolbar"),sB=To("file_picker_callback"),oO=To("file_picker_validator_handler"),rB=To("font_size_input_default_unit"),aB=To("file_picker_types"),ek=To("typeahead_urls"),sO=To("anchor_top"),rO=To("anchor_bottom"),iB=To("draggable_modal"),tk=To("statusbar"),cB=To("elementpath"),aO=To("branding"),lB=To("resize"),uB=To("paste_as_text"),dB=To("sidebar_show"),iO=To("promotion"),nk=To("help_accessibility"),mB=To("default_font_stack"),vS=To("skin"),cO=t=>t.options.get("skin")===!1,ok=t=>t.options.get("menubar")!==!1,fB=t=>{const s=t.options.get("skin_url");if(cO(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return GT.baseURL+"/skins/ui/"+a}},_V=t=>R.from(t.options.get("skin_url")),hB=t=>t.options.get("line_height_formats").split(" "),sk=t=>{const s=QT(t),a=te(s),c=Ie(s)&&s.length>0;return!yS(t)&&(c||a||s===!0)},rk=t=>{const s=gs(9,c=>t.options.get("toolbar"+(c+1))),a=Eo(s,te);return un(a.length>0,a)},yS=t=>rk(t).fold(()=>{const s=QT(t);return Oe(s,te)&&s.length>0},Ft),lO=t=>JT(t)===Lv.bottom,ak=t=>{var s;if(!t.inline)return R.none();const a=(s=tB(t))!==null&&s!==void 0?s:"";if(a.length>0)return Pn(ge(),a);const c=tO(t);return st(c)?R.some(ct.fromDom(c)):R.none()},md=t=>t.inline&&ak(t).isSome(),uO=t=>ak(t).getOrThunk(()=>gr(Hr(ct.fromDom(t.getElement())))),dO=t=>t.inline&&!ok(t)&&!sk(t)&&!yS(t),op=t=>(t.options.get("toolbar_sticky")||t.inline)&&!md(t)&&!dO(t),Rh=t=>!md(t)&&t.options.get("ui_mode")==="split",gB=t=>{const s=t.options.get("menu");return Io(s,a=>({...a,items:a.items}))};var AV=Object.freeze({__proto__:null,get ToolbarMode(){return kl},get ToolbarLocation(){return Lv},register:KT,getSkinUrl:fB,getSkinUrlOption:_V,isReadOnly:K3,isDisabled:XT,getSkin:vS,isSkinDisabled:cO,getHeightOption:X3,getWidthOption:Y3,getMinWidthOption:bS,getMinHeightOption:J3,getMaxWidthOption:np,getMaxHeightOption:Iv,getUserStyleFormats:Q3,shouldMergeStyleFormats:eO,shouldAutoHideStyleFormats:J5,getLineHeightFormats:hB,getContentLanguages:Q5,getRemovedMenuItems:eB,isMenubarEnabled:ok,isMultipleToolbars:yS,isToolbarEnabled:sk,isToolbarPersist:nB,getMultipleToolbarsOption:rk,getUiContainer:uO,useFixedContainer:md,isSplitUiMode:Rh,getToolbarMode:Fv,isDraggableModal:iB,isDistractionFree:dO,isStickyToolbar:op,getStickyToolbarOffset:nO,getToolbarLocation:JT,isToolbarLocationBottom:lO,getToolbarGroups:YT,getMenus:gB,getMenubar:oB,getToolbar:QT,getFilePickerCallback:sB,getFilePickerTypes:aB,useTypeaheadUrls:ek,getAnchorTop:sO,getAnchorBottom:rO,getFilePickerValidatorHandler:oO,getFontSizeInputDefaultUnit:rB,useStatusBar:tk,useElementPath:cB,promotionEnabled:iO,useBranding:aO,getResize:lB,getPasteAsText:uB,getSidebarShow:dB,useHelpAccessibility:nk,getDefaultFontStack:mB});const pB=["visible","hidden","clip"],bB=t=>Ic(t).length>0&&!Mo(pB,t),mO=t=>{if(Fo(t)){const s=Xe(t,"overflow-x"),a=Xe(t,"overflow-y");return bB(s)||bB(a)}else return!1},fO=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),hO=(t,s)=>{const a=UE(s,mO),c=a.length===0?Dm(s).map(Nf).map(d=>UE(d,mO)).getOr([]):a;return Yr(c).map(d=>({element:d,others:c.slice(1),isFullscreen:()=>fO(t)}))},sp=(t,s)=>Rh(t)?hO(t,s):R.none(),rp=t=>{const s=[...qe(t.others,pr),_r()];return t.isFullscreen()?_r():Zf(pr(t.element),s)},Nr=Fi({name:"Button",factory:t=>{const s=Bv(t.action),a=t.dom.tag,c=g=>Tt(t.dom,"attributes").bind(p=>Tt(p,g)),d=()=>{if(a==="button"){const g=c("type").getOr("button"),p=c("role").map(x=>({role:x})).getOr({});return{type:g,...p}}else return{role:t.role.getOr(c("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:Ec.augment(t.buttonBehaviours,[gn.config({}),jt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[Se("uid",void 0),Ze("dom"),Se("components",[]),Ec.field("buttonBehaviours",[gn,jt]),no("action"),no("role"),Se("eventOrder",{})]}),OV=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return Wo(s,(a,c)=>c.name==="class"?a:{...a,[c.name]:c.value},{})},RV=t=>Array.prototype.slice.call(t.dom.classList,0),gm=t=>{const s=ct.fromHtml(t),a=$r(s),c=OV(s),d=RV(s),g=a.length===0?{}:{innerHtml:N2(s)};return{tag:Hs(s),classes:d,attributes:c,...g}},io=t=>{const s=AT(t)&&Ha(t,"uid")?t.uid:uh("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var gO=Object.freeze({__proto__:null,exhibit:(t,s)=>Wc({attributes:lg([{key:s.tabAttr,value:"true"}])})}),DV=[Se("tabAttr","data-alloy-tabstop")];const zo=yr({fields:DV,name:"tabstopping",active:gO}),ik=Mt("tooltip.exclusive"),CS=Mt("tooltip.show"),SS=Mt("tooltip.hide"),wS=Mt("tooltip.immediateHide"),xS=Mt("tooltip.immediateShow"),vB=(t,s,a)=>{t.getSystem().broadcastOn([ik],{})};var MV=Object.freeze({__proto__:null,hideAllExclusive:vB,immediateOpenClose:(t,s,a,c)=>Wn(t,c?xS:wS),isEnabled:(t,s,a)=>a.isEnabled(),setComponents:(t,s,a,c)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&Sn.set(d,c)})},setEnabled:(t,s,a,c)=>a.setEnabled(c)}),PV=Object.freeze({__proto__:null,events:(t,s)=>{const a=p=>{s.getTooltip().each(x=>{x.getSystem().isConnected()&&(du(x),t.onHide(p,x),s.clearTooltip())}),s.clearTimer()},c=p=>{if(!s.isShowing()&&s.isEnabled()){vB(p);const x=t.lazySink(p).getOrDie(),T=p.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:No(t.mode==="normal"?[$e(pl(),O=>{Wn(p,CS)}),$e(h0(),O=>{Wn(p,SS)})]:[]),behaviours:rt([Sn.config({})])});s.setTooltip(T),yh(x,T),t.onShow(p,T),ga.position(x,T,{anchor:t.anchor(p)})}},d=p=>{s.getTooltip().each(x=>{const T=t.lazySink(p).getOrDie();ga.position(T,x,{anchor:t.anchor(p)})})},g=()=>{switch(t.mode){case"normal":return[$e(Uc(),p=>{Wn(p,xS)}),$e(n1(),p=>{Wn(p,wS)}),$e(pl(),p=>{Wn(p,CS)}),$e(h0(),p=>{Wn(p,SS)})];case"follow-highlight":return[$e(w0(),(p,x)=>{Wn(p,CS)}),$e(o1(),p=>{Wn(p,SS)})];case"children-normal":return[$e(Uc(),(p,x)=>{Ka(p.element).each(T=>{jo(x.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Wn(p,xS)},O=>{s.isShowing()&&(t.onShow(p,O),d(p))})})}),$e(n1(),p=>{Ka(p.element).fold(()=>{Wn(p,wS)},Y)}),$e(pl(),p=>{Pn(p.element,"[data-mce-tooltip]:hover").each(x=>{s.getTooltip().fold(()=>{Wn(p,CS)},T=>{s.isShowing()&&(t.onShow(p,T),d(p))})})}),$e(h0(),p=>{Pn(p.element,"[data-mce-tooltip]:hover").fold(()=>{Wn(p,SS)},Y)})];default:return[$e(Uc(),(p,x)=>{Ka(p.element).each(T=>{jo(x.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Wn(p,xS)},O=>{s.isShowing()&&(t.onShow(p,O),d(p))})})}),$e(n1(),p=>{Ka(p.element).fold(()=>{Wn(p,wS)},Y)})]}};return No(Cn([[Ju(p=>{t.onSetup(p)}),$e(CS,p=>{s.resetTimer(()=>{c(p)},t.delayForShow())}),$e(SS,p=>{s.resetTimer(()=>{a(p)},t.delayForHide())}),$e(xS,p=>{s.resetTimer(()=>{c(p)},0)}),$e(wS,p=>{s.resetTimer(()=>{a(p)},0)}),$e(zm(),(p,x)=>{const T=x;T.universal||Mo(T.channels,ik)&&a(p)}),vc(p=>{a(p)})],g()]))}}),pO=[Ze("lazySink"),Ze("tooltipDom"),Se("exclusive",!0),Se("tooltipComponents",[]),ss("delayForShow",ne(300)),ss("delayForHide",ne(100)),ss("onSetup",Y),hl("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),Se("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:ne([Cr,Or,or,aa,dr,sr]),onRtl:ne([Cr,Or,or,aa,dr,sr])},bubble:gi(0,-2,{})})),qn("onHide"),qn("onShow")],NV=Object.freeze({__proto__:null,init:()=>{const t=Wt(!0),s=uo(),a=uo(),c=()=>{s.on(clearTimeout)},d=(p,x)=>{c(),s.set(setTimeout(p,x))},g=ne("not-implemented");return di({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:c,resetTimer:d,readState:g,isEnabled:()=>t.get(),setEnabled:p=>t.set(p)})}});const fs=yr({fields:pO,name:"tooltipping",active:PV,state:NV,apis:MV});/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:bO,setPrototypeOf:yB,isFrozen:BV,getPrototypeOf:LV,getOwnPropertyDescriptor:IV}=Object;let{freeze:Kc,seal:fd,create:ck}=Object,{apply:vO,construct:yO}=typeof Reflect<"u"&&Reflect;Kc||(Kc=function(s){return s}),fd||(fd=function(s){return s}),vO||(vO=function(s,a,c){return s.apply(a,c)}),yO||(yO=function(s,a){return new s(...a)});const lk=nc(Array.prototype.forEach),FV=nc(Array.prototype.lastIndexOf),CB=nc(Array.prototype.pop),ES=nc(Array.prototype.push),$V=nc(Array.prototype.splice),uk=nc(String.prototype.toLowerCase),CO=nc(String.prototype.toString),SB=nc(String.prototype.match),TS=nc(String.prototype.replace),HV=nc(String.prototype.indexOf),VV=nc(String.prototype.trim),pm=nc(Object.prototype.hasOwnProperty),$i=nc(RegExp.prototype.test),kS=zV(TypeError);function nc(t){return function(s){for(var a=arguments.length,c=new Array(a>1?a-1:0),d=1;d<a;d++)c[d-1]=arguments[d];return vO(t,s,c)}}function zV(t){return function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return yO(t,a)}}function Xo(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:uk;yB&&yB(t,null);let c=s.length;for(;c--;){let d=s[c];if(typeof d=="string"){const g=a(d);g!==d&&(BV(s)||(s[c]=g),d=g)}t[d]=!0}return t}function UV(t){for(let s=0;s<t.length;s++)pm(t,s)||(t[s]=null);return t}function ap(t){const s=ck(null);for(const[a,c]of bO(t))pm(t,a)&&(Array.isArray(c)?s[a]=UV(c):c&&typeof c=="object"&&c.constructor===Object?s[a]=ap(c):s[a]=c);return s}function _S(t,s){for(;t!==null;){const c=IV(t,s);if(c){if(c.get)return nc(c.get);if(typeof c.value=="function")return nc(c.value)}t=LV(t)}function a(){return null}return a}const dk=Kc(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),AS=Kc(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),mk=Kc(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),SO=Kc(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$v=Kc(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),wB=Kc(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),bm=Kc(["#text"]),fk=Kc(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),wO=Kc(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),xB=Kc(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),hk=Kc(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),WV=fd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),OS=fd(/<%[\w\W]*|[\w\W]*%>/gm),ZV=fd(/\$\{[\w\W]*/gm),EB=fd(/^data-[\-\w.\u00B7-\uFFFF]+$/),xO=fd(/^aria-[\-\w]+$/),TB=fd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),EO=fd(/^(?:\w+script|data):/i),TO=fd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),kB=fd(/^html$/i),_B=fd(/^[a-z][.\w]*(-[.\w]+)+$/i);var kO=Object.freeze({__proto__:null,ARIA_ATTR:xO,ATTR_WHITESPACE:TO,CUSTOM_ELEMENT:_B,DATA_ATTR:EB,DOCTYPE_NAME:kB,ERB_EXPR:OS,IS_ALLOWED_URI:TB,IS_SCRIPT_OR_DATA:EO,MUSTACHE_EXPR:WV,TMPLIT_EXPR:ZV});const RS={element:1,text:3,progressingInstruction:7,comment:8,document:9},AB=function(){return typeof window>"u"?null:window},OB=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let c=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(c=a.getAttribute(d));const g="dompurify"+(c?"#"+c:"");try{return s.createPolicy(g,{createHTML(p){return p},createScriptURL(p){return p}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}},RB=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function DB(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:AB();const s=Yn=>DB(Yn);if(s.version="3.2.4",s.removed=[],!t||!t.document||t.document.nodeType!==RS.document||!t.Element)return s.isSupported=!1,s;let{document:a}=t;const c=a,d=c.currentScript,{DocumentFragment:g,HTMLTemplateElement:p,Node:x,Element:T,NodeFilter:O,NamedNodeMap:D=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:L,DOMParser:H,trustedTypes:q}=t,J=T.prototype,re=_S(J,"cloneNode"),de=_S(J,"remove"),oe=_S(J,"nextSibling"),fe=_S(J,"childNodes"),he=_S(J,"parentNode");if(typeof p=="function"){const Yn=a.createElement("template");Yn.content&&Yn.content.ownerDocument&&(a=Yn.content.ownerDocument)}let ke,Pe="";const{implementation:Ct,createNodeIterator:tt,createDocumentFragment:Be,getElementsByTagName:At}=a,{importNode:cn}=c;let en=RB();s.isSupported=typeof bO=="function"&&typeof he=="function"&&Ct&&Ct.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:$n,ERB_EXPR:vn,TMPLIT_EXPR:Tn,DATA_ATTR:$t,ARIA_ATTR:et,IS_SCRIPT_OR_DATA:vt,ATTR_WHITESPACE:fn,CUSTOM_ELEMENT:An}=kO;let{IS_ALLOWED_URI:Jt}=kO,kn=null;const Oo=Xo({},[...dk,...AS,...mk,...$v,...bm]);let So=null;const Rc=Xo({},[...fk,...wO,...xB,...hk]);let Es=Object.seal(ck(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Nl=null,Qa=null,Bl=!0,Ll=!0,kd=!1,lx=!0,xf=!1,LP=!0,Lb=!1,IP=!1,dX=!1,b_=!1,N7=!1,B7=!1,NJ=!0,BJ=!1;const Lte="user-content-";let mX=!0,FP=!1,v_={},y_=null;const LJ=Xo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let IJ=null;const FJ=Xo({},["audio","video","img","source","image","track"]);let fX=null;const $J=Xo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),L7="http://www.w3.org/1998/Math/MathML",I7="http://www.w3.org/2000/svg",Ib="http://www.w3.org/1999/xhtml";let C_=Ib,hX=!1,gX=null;const Ite=Xo({},[L7,I7,Ib],CO);let F7=Xo({},["mi","mo","mn","ms","mtext"]),$7=Xo({},["annotation-xml"]);const Fte=Xo({},["title","style","font","a","script"]);let $P=null;const $te=["application/xhtml+xml","text/html"],Hte="text/html";let Dc=null,S_=null;const Vte=a.createElement("form"),HJ=function(De){return De instanceof RegExp||De instanceof Function},pX=function(){let De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(S_&&S_===De)){if((!De||typeof De!="object")&&(De={}),De=ap(De),$P=$te.indexOf(De.PARSER_MEDIA_TYPE)===-1?Hte:De.PARSER_MEDIA_TYPE,Dc=$P==="application/xhtml+xml"?CO:uk,kn=pm(De,"ALLOWED_TAGS")?Xo({},De.ALLOWED_TAGS,Dc):Oo,So=pm(De,"ALLOWED_ATTR")?Xo({},De.ALLOWED_ATTR,Dc):Rc,gX=pm(De,"ALLOWED_NAMESPACES")?Xo({},De.ALLOWED_NAMESPACES,CO):Ite,fX=pm(De,"ADD_URI_SAFE_ATTR")?Xo(ap($J),De.ADD_URI_SAFE_ATTR,Dc):$J,IJ=pm(De,"ADD_DATA_URI_TAGS")?Xo(ap(FJ),De.ADD_DATA_URI_TAGS,Dc):FJ,y_=pm(De,"FORBID_CONTENTS")?Xo({},De.FORBID_CONTENTS,Dc):LJ,Nl=pm(De,"FORBID_TAGS")?Xo({},De.FORBID_TAGS,Dc):{},Qa=pm(De,"FORBID_ATTR")?Xo({},De.FORBID_ATTR,Dc):{},v_=pm(De,"USE_PROFILES")?De.USE_PROFILES:!1,Bl=De.ALLOW_ARIA_ATTR!==!1,Ll=De.ALLOW_DATA_ATTR!==!1,kd=De.ALLOW_UNKNOWN_PROTOCOLS||!1,lx=De.ALLOW_SELF_CLOSE_IN_ATTR!==!1,xf=De.SAFE_FOR_TEMPLATES||!1,LP=De.SAFE_FOR_XML!==!1,Lb=De.WHOLE_DOCUMENT||!1,b_=De.RETURN_DOM||!1,N7=De.RETURN_DOM_FRAGMENT||!1,B7=De.RETURN_TRUSTED_TYPE||!1,dX=De.FORCE_BODY||!1,NJ=De.SANITIZE_DOM!==!1,BJ=De.SANITIZE_NAMED_PROPS||!1,mX=De.KEEP_CONTENT!==!1,FP=De.IN_PLACE||!1,Jt=De.ALLOWED_URI_REGEXP||TB,C_=De.NAMESPACE||Ib,F7=De.MATHML_TEXT_INTEGRATION_POINTS||F7,$7=De.HTML_INTEGRATION_POINTS||$7,Es=De.CUSTOM_ELEMENT_HANDLING||{},De.CUSTOM_ELEMENT_HANDLING&&HJ(De.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Es.tagNameCheck=De.CUSTOM_ELEMENT_HANDLING.tagNameCheck),De.CUSTOM_ELEMENT_HANDLING&&HJ(De.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Es.attributeNameCheck=De.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),De.CUSTOM_ELEMENT_HANDLING&&typeof De.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Es.allowCustomizedBuiltInElements=De.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),xf&&(Ll=!1),N7&&(b_=!0),v_&&(kn=Xo({},bm),So=[],v_.html===!0&&(Xo(kn,dk),Xo(So,fk)),v_.svg===!0&&(Xo(kn,AS),Xo(So,wO),Xo(So,hk)),v_.svgFilters===!0&&(Xo(kn,mk),Xo(So,wO),Xo(So,hk)),v_.mathMl===!0&&(Xo(kn,$v),Xo(So,xB),Xo(So,hk))),De.ADD_TAGS&&(kn===Oo&&(kn=ap(kn)),Xo(kn,De.ADD_TAGS,Dc)),De.ADD_ATTR&&(So===Rc&&(So=ap(So)),Xo(So,De.ADD_ATTR,Dc)),De.ADD_URI_SAFE_ATTR&&Xo(fX,De.ADD_URI_SAFE_ATTR,Dc),De.FORBID_CONTENTS&&(y_===LJ&&(y_=ap(y_)),Xo(y_,De.FORBID_CONTENTS,Dc)),mX&&(kn["#text"]=!0),Lb&&Xo(kn,["html","head","body"]),kn.table&&(Xo(kn,["tbody"]),delete Nl.tbody),De.TRUSTED_TYPES_POLICY){if(typeof De.TRUSTED_TYPES_POLICY.createHTML!="function")throw kS('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof De.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw kS('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ke=De.TRUSTED_TYPES_POLICY,Pe=ke.createHTML("")}else ke===void 0&&(ke=OB(q,d)),ke!==null&&typeof Pe=="string"&&(Pe=ke.createHTML(""));Kc&&Kc(De),S_=De}},VJ=Xo({},[...AS,...mk,...SO]),zJ=Xo({},[...$v,...wB]),zte=function(De){let nn=he(De);(!nn||!nn.tagName)&&(nn={namespaceURI:C_,tagName:"template"});const Vn=uk(De.tagName),xa=uk(nn.tagName);return gX[De.namespaceURI]?De.namespaceURI===I7?nn.namespaceURI===Ib?Vn==="svg":nn.namespaceURI===L7?Vn==="svg"&&(xa==="annotation-xml"||F7[xa]):!!VJ[Vn]:De.namespaceURI===L7?nn.namespaceURI===Ib?Vn==="math":nn.namespaceURI===I7?Vn==="math"&&$7[xa]:!!zJ[Vn]:De.namespaceURI===Ib?nn.namespaceURI===I7&&!$7[xa]||nn.namespaceURI===L7&&!F7[xa]?!1:!zJ[Vn]&&(Fte[Vn]||!VJ[Vn]):!!($P==="application/xhtml+xml"&&gX[De.namespaceURI]):!1},Ap=function(De){ES(s.removed,{element:De});try{he(De).removeChild(De)}catch{de(De)}},HP=function(De,nn){try{ES(s.removed,{attribute:nn.getAttributeNode(De),from:nn})}catch{ES(s.removed,{attribute:null,from:nn})}if(nn.removeAttribute(De),De==="is")if(b_||N7)try{Ap(nn)}catch{}else try{nn.setAttribute(De,"")}catch{}},UJ=function(De){let nn=null,Vn=null;if(dX)De="<remove></remove>"+De;else{const Mc=SB(De,/^[\r\n\t ]+/);Vn=Mc&&Mc[0]}$P==="application/xhtml+xml"&&C_===Ib&&(De='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+De+"</body></html>");const xa=ke?ke.createHTML(De):De;if(C_===Ib)try{nn=new H().parseFromString(xa,$P)}catch{}if(!nn||!nn.documentElement){nn=Ct.createDocument(C_,"template",null);try{nn.documentElement.innerHTML=hX?Pe:xa}catch{}}const Il=nn.body||nn.documentElement;return De&&Vn&&Il.insertBefore(a.createTextNode(Vn),Il.childNodes[0]||null),C_===Ib?At.call(nn,Lb?"html":"body")[0]:Lb?nn.documentElement:Il},WJ=function(De){return tt.call(De.ownerDocument||De,De,O.SHOW_ELEMENT|O.SHOW_COMMENT|O.SHOW_TEXT|O.SHOW_PROCESSING_INSTRUCTION|O.SHOW_CDATA_SECTION,null)},bX=function(De){return De instanceof L&&(typeof De.nodeName!="string"||typeof De.textContent!="string"||typeof De.removeChild!="function"||!(De.attributes instanceof D)||typeof De.removeAttribute!="function"||typeof De.setAttribute!="function"||typeof De.namespaceURI!="string"||typeof De.insertBefore!="function"||typeof De.hasChildNodes!="function")},ZJ=function(De){return typeof x=="function"&&De instanceof x};function Fb(Yn,De,nn){lk(Yn,Vn=>{Vn.call(s,De,nn,S_)})}const qJ=function(De){let nn=null;if(Fb(en.beforeSanitizeElements,De,null),bX(De))return Ap(De),!0;const Vn=Dc(De.nodeName);if(Fb(en.uponSanitizeElement,De,{tagName:Vn,allowedTags:kn}),De.hasChildNodes()&&!ZJ(De.firstElementChild)&&$i(/<[/\w]/g,De.innerHTML)&&$i(/<[/\w]/g,De.textContent)||De.nodeType===RS.progressingInstruction||LP&&De.nodeType===RS.comment&&$i(/<[/\w]/g,De.data))return Ap(De),!0;if(!kn[Vn]||Nl[Vn]){if(!Nl[Vn]&&GJ(Vn)&&(Es.tagNameCheck instanceof RegExp&&$i(Es.tagNameCheck,Vn)||Es.tagNameCheck instanceof Function&&Es.tagNameCheck(Vn)))return!1;if(mX&&!y_[Vn]){const xa=he(De)||De.parentNode,Il=fe(De)||De.childNodes;if(Il&&xa){const Mc=Il.length;for(let _d=Mc-1;_d>=0;--_d){const Op=re(Il[_d],!0);Op.__removalCount=(De.__removalCount||0)+1,xa.insertBefore(Op,oe(De))}}}return Ap(De),!0}return De instanceof T&&!zte(De)||(Vn==="noscript"||Vn==="noembed"||Vn==="noframes")&&$i(/<\/no(script|embed|frames)/i,De.innerHTML)?(Ap(De),!0):(xf&&De.nodeType===RS.text&&(nn=De.textContent,lk([$n,vn,Tn],xa=>{nn=TS(nn,xa," ")}),De.textContent!==nn&&(ES(s.removed,{element:De.cloneNode()}),De.textContent=nn)),Fb(en.afterSanitizeElements,De,null),!1)},jJ=function(De,nn,Vn){if(NJ&&(nn==="id"||nn==="name")&&(Vn in a||Vn in Vte))return!1;if(!(Ll&&!Qa[nn]&&$i($t,nn))){if(!(Bl&&$i(et,nn))){if(!So[nn]||Qa[nn]){if(!(GJ(De)&&(Es.tagNameCheck instanceof RegExp&&$i(Es.tagNameCheck,De)||Es.tagNameCheck instanceof Function&&Es.tagNameCheck(De))&&(Es.attributeNameCheck instanceof RegExp&&$i(Es.attributeNameCheck,nn)||Es.attributeNameCheck instanceof Function&&Es.attributeNameCheck(nn))||nn==="is"&&Es.allowCustomizedBuiltInElements&&(Es.tagNameCheck instanceof RegExp&&$i(Es.tagNameCheck,Vn)||Es.tagNameCheck instanceof Function&&Es.tagNameCheck(Vn))))return!1}else if(!fX[nn]){if(!$i(Jt,TS(Vn,fn,""))){if(!((nn==="src"||nn==="xlink:href"||nn==="href")&&De!=="script"&&HV(Vn,"data:")===0&&IJ[De])){if(!(kd&&!$i(vt,TS(Vn,fn,"")))){if(Vn)return!1}}}}}}return!0},GJ=function(De){return De!=="annotation-xml"&&SB(De,An)},KJ=function(De){Fb(en.beforeSanitizeAttributes,De,null);const{attributes:nn}=De;if(!nn||bX(De))return;const Vn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:So,forceKeepAttr:void 0};let xa=nn.length;for(;xa--;){const Il=nn[xa],{name:Mc,namespaceURI:_d,value:Op}=Il,VP=Dc(Mc);let sl=Mc==="value"?Op:VV(Op);const Wte=sl;if(Vn.attrName=VP,Vn.attrValue=sl,Vn.keepAttr=!0,Vn.forceKeepAttr=void 0,Fb(en.uponSanitizeAttribute,De,Vn),sl=Vn.attrValue,BJ&&(VP==="id"||VP==="name")&&(HP(Mc,De),sl=Lte+sl),LP&&$i(/((--!?|])>)|<\/(style|title)/i,sl)){HP(Mc,De);continue}if(Vn.forceKeepAttr)continue;if(!Vn.keepAttr){HP(Mc,De);continue}if(!lx&&$i(/\/>/i,sl)){HP(Mc,De);continue}xf&&lk([$n,vn,Tn],YJ=>{sl=TS(sl,YJ," ")});const XJ=Dc(De.nodeName);if(!jJ(XJ,VP,sl)){HP(Mc,De);continue}if(ke&&typeof q=="object"&&typeof q.getAttributeType=="function"&&!_d)switch(q.getAttributeType(XJ,VP)){case"TrustedHTML":{sl=ke.createHTML(sl);break}case"TrustedScriptURL":{sl=ke.createScriptURL(sl);break}}if(sl!==Wte)try{_d?De.setAttributeNS(_d,Mc,sl):De.setAttribute(Mc,sl),bX(De)?Ap(De):CB(s.removed)}catch{}}Fb(en.afterSanitizeAttributes,De,null)},Ute=function Yn(De){let nn=null;const Vn=WJ(De);for(Fb(en.beforeSanitizeShadowDOM,De,null);nn=Vn.nextNode();)Fb(en.uponSanitizeShadowNode,nn,null),qJ(nn),KJ(nn),nn.content instanceof g&&Yn(nn.content);Fb(en.afterSanitizeShadowDOM,De,null)};return s.sanitize=function(Yn){let De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nn=null,Vn=null,xa=null,Il=null;if(hX=!Yn,hX&&(Yn="<!-->"),typeof Yn!="string"&&!ZJ(Yn))if(typeof Yn.toString=="function"){if(Yn=Yn.toString(),typeof Yn!="string")throw kS("dirty is not a string, aborting")}else throw kS("toString is not a function");if(!s.isSupported)return Yn;if(IP||pX(De),s.removed=[],typeof Yn=="string"&&(FP=!1),FP){if(Yn.nodeName){const Op=Dc(Yn.nodeName);if(!kn[Op]||Nl[Op])throw kS("root node is forbidden and cannot be sanitized in-place")}}else if(Yn instanceof x)nn=UJ("<!---->"),Vn=nn.ownerDocument.importNode(Yn,!0),Vn.nodeType===RS.element&&Vn.nodeName==="BODY"||Vn.nodeName==="HTML"?nn=Vn:nn.appendChild(Vn);else{if(!b_&&!xf&&!Lb&&Yn.indexOf("<")===-1)return ke&&B7?ke.createHTML(Yn):Yn;if(nn=UJ(Yn),!nn)return b_?null:B7?Pe:""}nn&&dX&&Ap(nn.firstChild);const Mc=WJ(FP?Yn:nn);for(;xa=Mc.nextNode();)qJ(xa),KJ(xa),xa.content instanceof g&&Ute(xa.content);if(FP)return Yn;if(b_){if(N7)for(Il=Be.call(nn.ownerDocument);nn.firstChild;)Il.appendChild(nn.firstChild);else Il=nn;return(So.shadowroot||So.shadowrootmode)&&(Il=cn.call(c,Il,!0)),Il}let _d=Lb?nn.outerHTML:nn.innerHTML;return Lb&&kn["!doctype"]&&nn.ownerDocument&&nn.ownerDocument.doctype&&nn.ownerDocument.doctype.name&&$i(kB,nn.ownerDocument.doctype.name)&&(_d="<!DOCTYPE "+nn.ownerDocument.doctype.name+`>
`+_d),xf&&lk([$n,vn,Tn],Op=>{_d=TS(_d,Op," ")}),ke&&B7?ke.createHTML(_d):_d},s.setConfig=function(){let Yn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};pX(Yn),IP=!0},s.clearConfig=function(){S_=null,IP=!1},s.isValidAttribute=function(Yn,De,nn){S_||pX({});const Vn=Dc(Yn),xa=Dc(De);return jJ(Vn,xa,nn)},s.addHook=function(Yn,De){typeof De=="function"&&ES(en[Yn],De)},s.removeHook=function(Yn,De){if(De!==void 0){const nn=FV(en[Yn],De);return nn===-1?void 0:$V(en[Yn],nn,1)[0]}return CB(en[Yn])},s.removeHooks=function(Yn){en[Yn]=[]},s.removeAllHooks=function(){en=RB()},s}var qV=DB();const MB=t=>qV().sanitize(t);var hu=tinymce.util.Tools.resolve("tinymce.util.I18n");const PB={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},_O="temporary-placeholder",AO=t=>()=>Tt(t,_O).getOr("!not found!"),gk=(t,s)=>{const a=t.toLowerCase();if(hu.isRtl()){const c=Ta(a,"-rtl");return Jn(s,c)?c:a}else return a},Hv=(t,s)=>Tt(s,gk(t,s)),OO=(t,s)=>{const a=s();return Hv(t,a).getOrThunk(AO(a))},jV=(t,s,a)=>{const c=s();return Hv(t,c).or(a).getOrThunk(AO(c))},GV=t=>hu.isRtl()?Jn(PB,t):!1,RO=()=>wn("add-focusable",[vo(t=>{ii(t.element,"svg").each(s=>Ve(s,"focusable","false"))})]),NB=(t,s,a,c)=>{var d,g;const p=GV(s)?["tox-icon--flip"]:[],x=Tt(a,gk(s,a)).or(c).getOrThunk(AO(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(p),innerHtml:x},behaviours:rt([...(g=t.behaviours)!==null&&g!==void 0?g:[],RO()])}},_l=(t,s,a,c=R.none())=>NB(s,t,a(),c),BB=(t,s,a)=>{const c=a(),d=yn(t,g=>Jn(c,gk(g,c)));return NB(s,d.getOr(_O),c,R.none())},LB={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},pk=Fi({name:"Notification",factory:t=>{const s=Mt("notification-text"),a=io({dom:gm(`<p id=${s}>${MB(t.backstageProvider.translate(t.text))}</p>`),behaviours:rt([Sn.config({})])}),c=J=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${J}%`}}}),d=J=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${J}%`}}),g=io({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(0)]},d(0)],behaviours:rt([Sn.config({})])}),T={updateProgress:(J,re)=>{J.getSystem().isConnected()&&g.getOpt(J).each(de=>{Sn.set(de,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(re)]},d(re)])})},updateText:(J,re)=>{if(J.getSystem().isConnected()){const de=a.get(J);Sn.set(de,[Vo(re)])}}},O=Cn([t.icon.toArray(),[t.level],R.from(LB[t.level]).toArray()]),D=io(Nr.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[_l("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:rt([zo.config({}),fs.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:J=>{t.onAction(J)}})),L=BB(O,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),H={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:rt([Sn.config({})])},q=[L,H];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},behaviours:rt([zo.config({}),gn.config({}),jt.config({mode:"special",onEscape:J=>(t.onAction(J),R.some(!0))})]),components:q.concat(t.progress?[g.asSpec()]:[]).concat([D.asSpec()]),apis:T}},configFields:[hl("level","info",["success","error","warning","warn","info"]),Ze("progress"),no("icon"),Ze("onAction"),Ze("text"),Ze("iconProvider"),Ze("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var XV=(t,s,a,c)=>{const d=s.backstage.shared,g=()=>ct.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),p=()=>{const L=pr(g());return R.some(L)},x=L=>{p().each(H=>{Ot(L,q=>{Un(q.element,"width"),Rn(q.element)>H.width&&En(q.element,"width",H.width+"px")})})};return{open:(L,H,q)=>{const J=()=>{const he=tt=>{Sn.remove(tt,de),oe()},ke=(tt,Be)=>{$r(tt.element).length===0?Pe(tt,Be):Ct(tt,Be)},Pe=(tt,Be)=>{Cs.hide(tt),c.clear(),Be&&t.focus()},Ct=(tt,Be)=>{Be&&jt.focusIn(tt)};c.on(tt=>{H();const Be=q();he(tt),ke(tt,Be)})},re=()=>!op(t)||!d.header.isPositionedAtTop(),de=Ga(pk.sketch({text:L.text,level:Mo(["success","error","warning","warn","info"],L.type)?L.type:void 0,progress:L.progressBar===!0,icon:L.icon,onAction:J,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(c.isSet()){const he=ur(de);c.on(ke=>{Sn.append(ke,he),Cs.reposition(ke),de.hasConfigured(ds)&&ds.refresh(ke),x(ke.components())})}else{const he=Ga(Cs.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:rt([jt.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Sn.config({}),...re()?[ds.config({contextual:{lazyContext:()=>R.some(pr(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:tt=>sp(t,tt.element).map(At=>({bounds:rp(At),optScrollEnv:R.some({currentScrollTop:At.element.dom.scrollTop,scrollElmTop:Va(At.element).top})})).getOrThunk(()=>({bounds:_r(),optScrollEnv:R.none()}))})]:[]])})),ke=ur(de),Pe={maxHeightFunction:fh()},Ct={...d.anchors.banner(),overrides:Pe};c.set(he),a.add(he),Cs.showWithinBounds(he,ke,{anchor:Ct},p)}Vt(L.timeout)&&L.timeout>0&&jT.setEditorTimeout(t,()=>{J()},L.timeout);const oe=()=>{c.on(he=>{Cs.reposition(he),he.hasConfigured(ds)&&ds.refresh(he),x(he.components())})};return{close:J,reposition:oe,text:he=>{pk.updateText(de,he)},settings:L,getEl:()=>de.element.dom,progressBar:{value:he=>{pk.updateProgress(de,he)}}}},close:L=>{L.close()},getArgs:L=>L.settings}};const IB={setup:(t,s)=>{const a=(d,g)=>{Gt(d,Ki(),{raw:g})},c=()=>t.getMenu().bind(K.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(c().each(Qd),d.preventDefault()):g===40?(c().fold(()=>{t.getMenu().each(K.highlightFirst)},p=>{a(p,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&c().each(p=>{a(p,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var DS;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(DS||(DS={}));var Al=DS;const bk="tox-menu-nav__js",MS="tox-collection__item",vk="tox-swatch",YV={normal:bk,color:vk},PS="tox-collection__item--enabled",JV="tox-collection__group-heading",DO="tox-collection__item-icon",FB="tox-collection__item-image",nb="tox-collection__item-image-selector",MO="tox-collection__item-label",PO="tox-collection__item-accessory",NS="tox-collection__item-caret",QV="tox-collection__item-checkmark",ip="tox-collection__item--active",NO="tox-collection__item-container",$B="tox-collection__item-container--column",yk="tox-collection__item-container--row",HB="tox-collection__item-container--align-right",ez="tox-collection__item-container--align-left",VB="tox-collection__item-container--valign-top",zB="tox-collection__item-container--valign-middle",UB="tox-collection__item-container--valign-bottom",BO=t=>Tt(YV,t).getOr(bk),tz=t=>t==="color"?"tox-swatches":"tox-menu",Ck=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:tz(t),tieredMenu:"tox-tiered-menu"}),cp=t=>{const s=Ck(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:BO(t)}},nz=(t,s,a)=>{const c=Ck(a);return{tag:"div",classes:Cn([[c.menu,`tox-menu-${s}-column`],t?[c.hasIcons]:[]])}},oz=[Oh.parts.items({})],Sk=(t,s,a)=>{const c=Ck(a);return{dom:{tag:"div",classes:Cn([[c.tieredMenu]])},markers:cp(a)}},LO=ne([ys("type","text"),no("data"),Se("inputAttributes",{}),Se("inputStyles",{}),Se("tag","input"),Se("inputClasses",[]),qn("onSetValue"),ss("fromInputValue",at),ss("toInputValue",at),Se("styles",{}),Se("eventOrder",{}),qr("inputBehaviours",[Et,gn]),Se("selectOnFocus",!0)]),Vv=t=>rt([gn.config({onFocus:t.selectOnFocus?s=>{const a=s.element,c=sm(a);t.type!=="range"&&a.dom.setSelectionRange(0,c.length)}:Y})]),WB=t=>({...Vv(t),...Gs(t.inputBehaviours,[Et.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>t.fromInputValue(sm(s.element)),setValue:(s,a)=>{sm(s.element)!==a&&Ar(s.element,t.toInputValue(a))}},onSetValue:t.onSetValue})])}),ZB=t=>({tag:t.tag,attributes:{type:t.type,...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),sz=(t,s)=>({uid:t.uid,dom:ZB(t),components:[],behaviours:WB(t),eventOrder:t.eventOrder}),Dh=Fi({name:"Input",configFields:LO(),factory:sz}),qB=Mt("refetch-trigger-event"),jB=Mt("redirect-menu-item-interaction"),BS="tox-menu__searcher",wk=t=>Pn(t.element,`.${BS}`).bind(s=>t.getSystem().getByDom(s).toOptional()),IO=wk,rz=(t,s)=>{Et.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},FO=t=>{const s=Et.getValue(t),a=t.element.dom.selectionStart,c=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:c}},GB=(t,s)=>{_n(s.element,"id").each(a=>Ve(t.element,"aria-activedescendant",a))},az=t=>{const s=(d,g)=>(g.cut(),R.none()),a=(d,g)=>{const p={interactionEvent:g.event,eventType:g.event.raw.type};return Gt(d,jB,p),R.some(!0)},c="searcher-events";return{dom:{tag:"div",classes:[MS]},components:[Dh.sketch({inputClasses:[BS,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:rt([wn(c,[$e(bc(),d=>{Wn(d,qB)}),$e(Ki(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),jt.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[c,jt.name()]}})]}},LS="tox-collection--results__js",$O=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Mt("aria-item-search-result-id"),"aria-selected":"false"}}}:t},IS=(t,s)=>a=>{const c=Xr(a,s);return qe(c,d=>({dom:t,components:d}))},KB=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Oh.parts.items({preprocess:t!=="auto"?IS({tag:"div",classes:["tox-swatches__row"]},t):at})]}]}),iz=t=>({dom:{tag:"div",classes:["tox-menu","tox-image-selector-menu"]},components:[{dom:{tag:"div",classes:["tox-image-selector"]},components:[Oh.parts.items({preprocess:t!=="auto"?IS({tag:"div",classes:["tox-image-selector__row"]},t):at})]}]}),cz=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Oh.parts.items({preprocess:IS({tag:"div",classes:["tox-collection__group"]},t)})]}),XB=(t,s)=>{const a=[];let c=[];return Ot(t,(d,g)=>{s(d,g)?(c.length>0&&a.push(c),c=[],(Jn(d.dom,"innerHtml")||d.components&&d.components.length>0)&&c.push(d)):c.push(d)}),c.length>0&&a.push(c),qe(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},HO=(t,s,a)=>Oh.parts.items({preprocess:c=>{const d=qe(c,a);return t!=="auto"&&t>1?IS({tag:"div",classes:["tox-collection__group"]},t)(d):XB(d,(g,p)=>s[p].type==="separator")}}),VO=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[HO(t,s,at)]}),YB=(t,s,a=!0)=>{const c=Mt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",LS].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:c}},components:[HO(t,s,$O)]}},lz=(t,s,a)=>{const c=Mt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[az({i18n:hu.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],LS],attributes:{id:c}},components:[HO(t,s,$O)]}]}},uz=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Oh.parts.items({preprocess:a=>XB(a,(c,d)=>t[d].type==="separator")})]}),FS=t=>wr(t,s=>"icon"in s&&s.icon!==void 0),vm=t=>(console.error(ig(t)),console.log(t),R.none()),dz=(t,s,a,c,d)=>{const g=uz(a);return{value:t,dom:g.dom,components:g.components,items:a}},zO=(t,s,a,c,d)=>{const g=()=>d.menuType!=="searchable"?VO(c,a):d.searchMode.searchMode==="search-with-field"?lz(c,a,d.searchMode):YB(c,a);if(d.menuType==="color"){const p=KB(c);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="imageselector"&&c!=="auto"){const p=iz(c);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"&&c==="auto"){const p=VO(c,a);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const p=g();return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="listpreview"&&c!=="auto"){const p=cz(c);return{value:t,dom:p.dom,components:p.components,items:a}}else return{value:t,dom:nz(s,c,d.menuType),components:oz,items:a}},Ks=vr("type"),UO=vr("name"),zv=vr("label"),lf=vr("text"),JB=vr("title"),WO=vr("icon"),QB=vr("url"),Uv=vr("value"),mz=hc("fetch"),eL=hc("getSubmenuItems"),ob=hc("onAction"),tL=hc("onItemAction"),sb=ss("onSetup",()=>Y),fz=Ls("name"),lp=Ls("text"),nL=Ls("role"),Xc=Ls("icon"),rb=Ls("tooltip"),$S=Ls("label"),ZO=Ls("shortcut"),hz=Uu("select"),Wv=da("active",!1),gz=da("borderless",!1),gu=da("enabled",!0),HS=da("primary",!1),oL=t=>Se("columns",t),qO=Se("meta",{}),jO=ss("onAction",Y),La=t=>ys("type",t),Ol=t=>sa("name","name",Zt(()=>Mt(`${t}-name`)),We),sL=t=>sa("value","value",Zt(()=>Mt(`${t}-value`)),oa()),xk=dn([Ks,lp]),GO=t=>os("separatormenuitem",xk,t),Ek=dn([La("autocompleteitem"),Wv,gu,qO,Uv,lp,Xc]),pz=t=>os("Autocompleter.Separator",xk,t),rL=t=>os("Autocompleter.Item",Ek,t),uf=[gu,rb,Xc,lp,sb,ys("context","mode:design")],bz=dn([Ks,ob,ZO].concat(uf)),Zv=t=>os("toolbarbutton",bz,t),VS=[Wv].concat(uf),aL=dn(VS.concat([Ks,ob,ZO])),qv=t=>os("ToggleButton",aL,t),Tk=[ss("predicate",On),hl("scope","node",["node","editor"]),hl("position","selection",["node","selection","line"])],vz=uf.concat([La("contextformbutton"),ys("align","end"),HS,ob,ui("original",at)]),ym=VS.concat([La("contextformbutton"),ys("align","end"),HS,ob,ui("original",at)]),Yc=uf.concat([La("contextformbutton")]),zS=VS.concat([La("contextformtogglebutton")]),Jc=Za("type",{contextformbutton:vz,contextformtogglebutton:ym}),KO=[$S,Ko("commands",Jc),au("launch",Za("type",{contextformbutton:Yc,contextformtogglebutton:zS})),ss("onInput",Y),ss("onSetup",Y)],Yo=[...Tk,...KO,fl("type",["contextform"]),ss("initValue",ne("")),Ls("placeholder")],yz=[...Tk,...KO,fl("type",["contextsliderform"]),ss("initValue",ne(0)),ss("min",ne(0)),ss("max",ne(100))],ab=[...Tk,...KO,fl("type",["contextsizeinputform"]),ss("initValue",ne({width:"",height:""}))],US=Za("type",{contextform:Yo,contextsliderform:yz,contextsizeinputform:ab}),iL=t=>os("ContextForm",US,t),XO=uf.concat([La("contexttoolbarbutton")]),YO=dn([La("contexttoolbar"),Gi("launch",XO),Ri("items",Lm([We,l0([Ls("name"),Ls("label"),Ko("items",We)])]))].concat(Tk)),Cz=t=>({name:t.name.getOrUndefined(),label:t.label.getOrUndefined(),items:t.items}),JO=t=>({...t,launch:t.launch.getOrUndefined(),items:te(t.items)?t.items:qe(t.items,Cz)}),Sz=t=>os("ContextToolbar",YO,t),cL=[Ks,vr("src"),Ls("alt"),Wu("classes",[],We)],lL=dn(cL),QO=[Ks,lf,fz,Wu("classes",["tox-collection__item-label"],We)],uL=dn(QO),WS=qt(()=>Go("type",{cardimage:lL,cardtext:uL,cardcontainer:wz})),wz=dn([Ks,ys("direction","horizontal"),ys("align","left"),ys("valign","middle"),Ko("items",WS)]),up=[gu,lp,nL,ZO,sL("menuitem"),qO,ys("context","mode:design")],xz=dn([Ks,$S,Ko("items",WS),sb,jO].concat(up)),Ez=t=>os("cardmenuitem",xz,t),Tz=dn([Ks,Wv,Xc,$S].concat(up)),dL=t=>os("choicemenuitem",Tz,t),eR=[Ks,vr("fancytype"),jO],kz=[Se("initData",{})].concat(eR),mL=[Uu("select"),cg("initData",{},[da("allowCustomColors",!0),ys("storageKey","default"),$m("colors",oa())])].concat(eR),_z=[Uu("select"),Ws("initData",[d0("columns"),Wu("items",[],oa())])].concat(eR),fL=Za("fancytype",{inserttable:kz,colorswatch:mL,imageselect:_z}),ZS=t=>os("fancymenuitem",fL,t),Az=dn([Ks,Wv,QB,$S,rb].concat(up)),Oz=dn([Ks,Wv,WO,zv,rb,Uv].concat(up)),hL=t=>os("imagemenuitem",Az,t),gL=t=>os("resetimageitem",Oz,t),tR=dn([Ks,sb,jO,Xc].concat(up)),pL=t=>os("menuitem",tR,t),Rz=dn([Ks,eL,sb,Xc].concat(up)),Dz=t=>os("nestedmenuitem",Rz,t),Mz=dn([Ks,Xc,Wv,sb,ob].concat(up)),Pz=t=>os("togglemenuitem",Mz,t),nR=(t,s,a)=>{const c=bi(t.element,"."+a);if(c.length>0){const d=bo(c,g=>{const p=g.dom.getBoundingClientRect().top,x=c[0].dom.getBoundingClientRect().top;return Math.abs(p-x)>s}).getOr(c.length);return R.some({numColumns:d,numRows:Math.ceil(c.length/d)})}else return R.none()},bL=(t,s)=>rt([wn(t,s)]),Tc={namedEvents:bL,unnamedEvents:t=>bL(Mt("unnamed-events"),t)},Bz=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Rl={item:t=>Nt.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Nt.config({disabled:t}),splitButton:t=>Nt.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Nt.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},jv=(t,s)=>{const a=t.getApi(s);return c=>{c(a)}},hd=(t,s)=>vo(a=>{Ne(t.onBeforeSetup)&&t.onBeforeSetup(a),jv(t,a)(d=>{const g=t.onSetup(d);Ne(g)&&s.set(g)})}),dp=(t,s)=>vc(a=>jv(t,a)(s.get())),oR=(t,s,a)=>vc(c=>(a.set(Et.getValue(c)),jv(t,c)(s.get()))),yL="silver.uistate",qS="setDisabled",Fz="setEnabled",CL="init",SL=["switchmode",CL],Gv=(t,s)=>{const a=t.mainUi.outerContainer,c=[t.mainUi.mothership,...t.uiMotherships];s===qS&&Ot(c,d=>{d.broadcastOn([cm()],{target:a.element})}),Ot(c,d=>{d.broadcastOn([yL],s)})},sR=(t,s)=>{t.on("init SwitchMode",a=>{Gv(s,a.type)}),t.on("DisabledStateChange",a=>{if(!a.isDefaultPrevented()){const c=a.state?qS:CL;Gv(s,c),a.state||t.nodeChanged()}}),t.on("NodeChange",a=>{const c=t.ui.isEnabled()?a.type:qS;Gv(s,c)}),K3(t)&&t.mode.set("readonly")},rr=t=>Bi.config({channels:{[yL]:{onReceive:(s,a)=>{if(a===qS||a===Fz){Nt.set(s,a===qS);return}const{contextType:c,shouldDisable:d}=t();c==="mode"&&!Mo(SL,a)||Nt.set(s,d)}}}}),$z=(t,s)=>cu((a,c)=>{jv(t,a)(t.onAction),!t.triggersSubmenu&&s===Al.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&Wn(a,Jf()),c.stop())}),Hz={[Di()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Cm=Ul,ib=(t,s,a,c)=>{const d=Wt(Y);return{type:"item",dom:s.dom,components:Cm(s.optComponents),data:t.data,eventOrder:Hz,hasSubmenu:t.triggersSubmenu,itemBehaviours:rt([wn("item-events",[$z(t,a),hd(t,d),dp(t,d)]),Rl.item(()=>!t.enabled||c.checkUiComponentContext(t.context).shouldDisable),rr(()=>c.checkUiComponentContext(t.context)),Sn.config({})].concat(t.itemBehaviours))}},mp=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),rR=t=>new Promise((s,a)=>{const c=()=>{g(),s(t)},d=[hi(t,"load",c),hi(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>Ot(d,p=>p.unbind());t.dom.complete&&c()}),wL=(t,s)=>{var a,c;const d=ct.fromTag("div");qs(d,"tox-image-selector-loading-spinner");const g=x=>{qs(x,"tox-image-selector-loading-spinner-wrapper"),ki(x,d)},p=x=>{ao(x,"tox-image-selector-loading-spinner-wrapper"),uc(d)};return{dom:{tag:t.tag,attributes:(a=t.attributes)!==null&&a!==void 0?a:{},classes:t.classes},components:[{dom:{tag:"div",classes:["tox-image-selector-image-wrapper"]},components:[{dom:{tag:"img",attributes:{src:s},classes:["tox-image-selector-image-img"]}}]},...t.checkMark.toArray()],behaviours:rt([...(c=t.behaviours)!==null&&c!==void 0?c:[],wn("render-image-events",[vo(x=>{g(x.element),Pn(x.element,"img").each(T=>{rR(T).catch(O=>{console.error(O)}).finally(()=>{p(x.element)})})})])])}},xL=(t,s)=>wL(s,t),jS=t=>{const s=tp.os.isMacOS()||tp.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),p=qe(g,x=>{const T=x.toLowerCase().trim();return Jn(d,T)?d[T]:x});return s?p.join(""):p.join("+")},GS=(t,s,a=[DO])=>_l(t,{tag:"div",classes:a},s),kk=t=>({dom:{tag:"div",classes:[MO]},components:[Vo(hu.translate(t))]}),aR=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),Vz=(t,s)=>({dom:{tag:"div",classes:[MO]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Vo(hu.translate(s))]}]}),EL=t=>({dom:{tag:"div",classes:[PO]},components:[Vo(jS(t))]}),iR=t=>GS("checkmark",t,[QV]),zz=t=>GS("chevron-right",t,[NS]),Uz=t=>GS("chevron-down",t,[NS]),TL=(t,s)=>{const a=t.direction==="vertical"?$B:yk,c=t.align==="left"?ez:HB;return{dom:{tag:"div",classes:[NO,a,c,(()=>{switch(t.valign){case"top":return VB;case"middle":return zB;case"bottom":return UB}})()]},components:s}},kL=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),_L=(t,s,a)=>{const c="custom",d="remove",g=t.value,p=t.iconContent.map(O=>jV(O,s.icons,a)),x=t.ariaLabel.map(O=>({"aria-label":s.translate(O),"data-mce-name":O})).getOr({});return{dom:(()=>{const O=vk,D=p.getOr(""),L={tag:"div",attributes:x,classes:[O]};return g===c?{...L,tag:"button",classes:[...L.classes,"tox-swatches__picker-btn"],innerHtml:D}:g===d?{...L,classes:[...L.classes,"tox-swatch--remove"],innerHtml:D}:st(g)?{...L,attributes:{...L.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:D}:L})(),optComponents:[]}},cR=(t,s)=>{const a=t.map(c=>({attributes:{id:Mt("menu-item"),"aria-label":hu.translate(c)}})).getOr({});return{tag:"div",classes:[bk,MS].concat(s),...a}},AL=t=>({dom:{tag:"label"},components:[Vo(t)]}),Wz=(t,s,a,c)=>{const d={tag:"div",classes:[DO]},g=H=>_l(H,d,s.icons,c),p=()=>R.some({dom:d}),x=a?t.iconContent.map(g).orThunk(p):R.none(),T=t.checkMark,O=R.from(t.meta).fold(()=>kk,H=>Jn(H,"style")?ln(Vz,H.style):kk),D=t.htmlContent.fold(()=>t.textContent.map(O),H=>R.some(aR(H,[MO])));return{dom:cR(t.ariaLabel,[]),optComponents:[x,D,t.shortcutContent.map(EL),T,t.caret,t.labelContent.map(AL)]}},Zz=t=>({dom:cR(t.ariaLabel,[nb]),optComponents:[R.some(xL(t.iconContent.getOrDie(),{tag:"div",classes:[FB],checkMark:t.checkMark})),t.labelContent.map(AL)]}),Kv=(t,s,a,c=R.none())=>t.presets==="color"?_L(t,s,c):t.presets==="img"?Zz(t):Wz(t,s,a,c),OL=(t,s,a)=>Tt(t,"tooltipWorker").map(c=>[fs.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:fh}}),mode:"follow-highlight",onShow:(d,g)=>{c(p=>{fs.setComponents(d,[G2({element:ct.fromDom(p)})])})}})]).getOrThunk(()=>a.map(c=>[fs.config({...s.providers.tooltips.getConfig({tooltipText:c}),mode:"follow-highlight"})]).getOr([])),qz=t=>gS.DOM.encode(t),RL=(t,s)=>{const a=hu.translate(t),c=qz(a);if(s.length>0){const d=new RegExp(Bz(s),"gi");return c.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return c},jz=(t,s,a,c,d,g,p,x=!0)=>{const T=Kv({presets:c,textContent:R.none(),htmlContent:a?t.text.map(D=>RL(D,s)):R.none(),ariaLabel:t.text,labelContent:R.none(),iconContent:t.icon,shortcutContent:R.none(),checkMark:R.none(),caret:R.none(),value:t.value},p.providers,x,t.icon),O=t.text.filter(D=>!a&&D!=="");return ib({context:"mode:design",data:mp(t),enabled:t.enabled,getApi:ne({}),onAction:D=>d(t.value,t.meta),onSetup:ne(Y),triggersSubmenu:!1,itemBehaviours:OL(t,p,O)},T,g,p.providers)},DL=(t,s)=>qe(t,a=>{switch(a.type){case"cardcontainer":return TL(a,DL(a.items,s));case"cardimage":return kL(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>Mo(s.cardText.highlightOn,g))?R.from(s.cardText.matchText).getOr(""):"";return aR(RL(a.text,d),a.classes)}}),Gz=(t,s,a,c)=>{const d=p=>({isEnabled:()=>!Nt.isDisabled(p),setEnabled:x=>{Nt.set(p,!x),Ot(bi(p.element,"*"),T=>{p.getSystem().getByDom(T).each(O=>{O.hasConfigured(Nt)&&Nt.set(O,!x)})})}}),g={dom:cR(t.label,[]),optComponents:[R.some({dom:{tag:"div",classes:[NO,yk]},components:DL(t.items,c)})]};return ib({context:"mode:design",data:mp({text:R.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:R.from(c.itemBehaviours).getOr([])},g,s,a.providers)},lR=(t,s,a,c,d,g,p,x=!0)=>{const T=L=>({setActive:H=>{Mn.set(L,H)},isActive:()=>Mn.isOn(L),isEnabled:()=>!Nt.isDisabled(L),setEnabled:H=>Nt.set(L,!H)}),O=Kv({presets:a,textContent:s?t.text:R.none(),htmlContent:R.none(),labelContent:t.label,ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:R.none(),checkMark:s?R.some(iR(p.icons)):R.none(),caret:R.none(),value:t.value},p,x),D=t.text.filter(ne(!s)).map(L=>fs.config(p.tooltips.getConfig({tooltipText:p.translate(L)})));return Rt(ib({context:t.context,data:mp(t),enabled:t.enabled,getApi:T,onAction:L=>c(t.value),onSetup:L=>(L.setActive(d),Y),triggersSubmenu:!1,itemBehaviours:[...D.toArray()]},O,g,p),{toggling:{toggleClass:PS,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},uR=ZC(Z3(),q3()),ML=t=>({value:KS(t)}),PL=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,NL=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,BL=t=>PL.test(t)||NL.test(t),KS=t=>jh(t,"#").toUpperCase(),LL=t=>BL(t)?R.some({value:KS(t)}):R.none(),Kz=t=>({value:t.value.replace(PL,(a,c,d,g)=>c+c+d+d+g+g)}),Xz=t=>{const s=Kz(t),a=NL.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},dR=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},XS=t=>{const s=dR(t.red)+dR(t.green)+dR(t.blue);return ML(s)},IL=Math.min,FL=Math.max,Xv=Math.round,$L=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,HL=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,cb=(t,s,a,c)=>({red:t,green:s,blue:a,alpha:c}),_k=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},VL=t=>{let s,a,c;const d=(t.hue||0)%360;let g=t.saturation/100,p=t.value/100;if(g=FL(0,IL(g,1)),p=FL(0,IL(p,1)),g===0)return s=a=c=Xv(255*p),cb(s,a,c,1);const x=d/60,T=p*g,O=T*(1-Math.abs(x%2-1)),D=p-T;switch(Math.floor(x)){case 0:s=T,a=O,c=0;break;case 1:s=O,a=T,c=0;break;case 2:s=0,a=T,c=O;break;case 3:s=0,a=O,c=T;break;case 4:s=O,a=0,c=T;break;case 5:s=T,a=0,c=O;break;default:s=a=c=0}return s=Xv(255*(s+D)),a=Xv(255*(a+D)),c=Xv(255*(c+D)),cb(s,a,c,1)},YS=t=>{const s=Xz(t),a=parseInt(s[1],16),c=parseInt(s[2],16),d=parseInt(s[3],16);return cb(a,c,d,1)},zL=(t,s,a,c)=>{const d=parseInt(t,10),g=parseInt(s,10),p=parseInt(a,10),x=parseFloat(c);return cb(d,g,p,x)},mR=t=>{const s=$L.exec(t);if(s!==null)return R.some(zL(s[1],s[2],s[3],"1"));const a=HL.exec(t);return a!==null?R.some(zL(a[1],a[2],a[3],a[4])):R.none()},UL=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,WL=cb(255,0,0,1),Yz=t=>{t.dispatch("SkinLoaded")},Jz=(t,s)=>{t.dispatch("SkinLoadError",s)},Qz=t=>{t.dispatch("ResizeEditor")},fR=(t,s)=>{t.dispatch("ResizeContent",s)},Ak=(t,s)=>{t.dispatch("ScrollContent",s)},Ok=(t,s)=>{t.dispatch("TextColorChange",s)},hR=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},ZL=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),e9=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},t9=(t,s)=>{t.dispatch("StylesTextUpdate",s)},gR=(t,s)=>{t.dispatch("AlignTextUpdate",s)},pR=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},Rk=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},qL=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},n9=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},o9=t=>{t.dispatch("ToggleSidebar")},s9=t=>{t.dispatch("ToggleView")},jL=t=>{t.dispatch("ContextToolbarClose")},r9=t=>{t.dispatch("ContextFormSlideBack")},Dk=(t,s)=>()=>{t(),s()},Hi=t=>lb(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),a9=(t,s)=>a=>{const c=Ai(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);c.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),c.clear()}},Mk=(t,s)=>a=>{const c=Hi(t)(a),d=a9(t,s)(a);return()=>{c(),d()}},lb=(t,s,a)=>c=>{const d=()=>a(c),g=()=>{a(c),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},GL=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Qc=(t,s)=>()=>t.execCommand(s);var ub=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const bR={},i9=(t,s=10)=>{const a=ub.getItem(t),c=te(a)?JSON.parse(a):[],g=(O=>s-O.length<0?O.slice(0,s):O)(c),p=O=>{je(g,O).each(x),g.unshift(O),g.length>s&&g.pop(),ub.setItem(t,JSON.stringify(g))},x=O=>{g.splice(O,1)};return{add:p,state:()=>g.slice(0)}},KL=t=>Tt(bR,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=ub.getItem(s);if(ot(a)){const d=ub.getItem("tinymce-custom-colors");ub.setItem(s,st(d)?d:"[]")}const c=i9(s,10);return bR[t]=c,c}),df=t=>qe(KL(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),XL=(t,s)=>{KL(t).add(s)},JS=(t,s,a)=>({hue:t,saturation:s,value:a}),QS=t=>{let s=0,a=0,c=0;const d=t.red/255,g=t.green/255,p=t.blue/255,x=Math.min(d,Math.min(g,p)),T=Math.max(d,Math.max(g,p));if(x===T)return c=x,JS(0,0,c*100);const O=d===x?g-p:p===x?d-g:p-d;return s=d===x?3:p===x?1:5,s=60*(s-O/(T-x)),a=(T-x)/T,c=T,JS(Math.round(s),Math.round(a*100),Math.round(c*100))},ca=t=>QS(YS(t)),YL=t=>XS(VL(t)),c9=t=>LL(t).orThunk(()=>mR(t).map(XS)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const c=a.getImageData(0,0,1,1).data,d=c[0],g=c[1],p=c[2],x=c[3];return XS(cb(d,g,p,x))}),vR="forecolor",yR="hilitecolor",l9=5,u9=t=>JL(t.map((s,a)=>a%2===0?"#"+c9(s).value:s)),JL=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:t[a],icon:"checkmark",type:"choiceitem"});return s},Sm=t=>s=>s.options.get(t),CR="#000000",d9=t=>{const s=t.options.register,a=g=>Oe(g,te)?{value:u9(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},c=g=>Oe(g,te)?{value:JL(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},d=g=>Vt(g)&&g>0?{value:g,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:c}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:d,default:SR(t)}),s("color_cols_foreground",{processor:d,default:QL(t,vR)}),s("color_cols_background",{processor:d,default:QL(t,yR)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:CR}),s("color_default_background",{processor:"string",default:CR})},Pk=(t,s)=>s===vR&&t.options.isSet("color_map_foreground")?Sm("color_map_foreground")(t):s===yR&&t.options.isSet("color_map_background")?Sm("color_map_background")(t):t.options.isSet("color_map_raw")?Sm("color_map_raw")(t):Sm("color_map")(t),SR=(t,s="default")=>Math.max(l9,Math.ceil(Math.sqrt(Pk(t,s).length))),QL=(t,s)=>{const a=Sm("color_cols")(t),c=SR(t,s);return a===SR(t)?c:a},eI=(t,s="default")=>Math.round(s===vR?Sm("color_cols_foreground")(t):s===yR?Sm("color_cols_background")(t):Sm("color_cols")(t)),tI=Sm("custom_colors"),m9=Sm("color_default_foreground"),f9=Sm("color_default_background"),h9="rgba(0, 0, 0, 0)",g9=t=>mR(t).exists(s=>s.alpha!==0),p9=t=>m2(t,s=>{if(Os(s)){const a=Xe(s,"background-color");return un(g9(a),a)}else return R.none()}).getOr(h9),nI=(t,s)=>{const a=ct.fromDom(t.selection.getStart()),c=s==="hilitecolor"?p9(a):Xe(a,"color");return mR(c).map(d=>"#"+XS(d).value)},b9=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},v9=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},y9=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{b9(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{v9(t,s)})},oI=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},Nk=(t,s,a,c)=>{a==="custom"?cI(t)(g=>{g.each(p=>{XL(s,p),t.execCommand("mceApplyTextcolor",s,p),c(p)})},nI(t,s).getOr(CR)):a==="remove"?(c(""),t.execCommand("mceRemoveTextcolor",s)):(c(a),t.execCommand("mceApplyTextcolor",s,a))},wR=(t,s,a)=>t.concat(df(s).concat(oI(a))),xR=(t,s,a)=>c=>{c(wR(t,s,a))},ER=(t,s,a)=>{const c=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(c,a)},sI=(t,s)=>{t.setTooltip(s)},rI=(t,s)=>a=>{const c=nI(t,s);return Qr(c,a.toUpperCase())},Bk=(t,s,a)=>{if(is(a))return s==="forecolor"?"Text color":"Background color";const c=s==="forecolor"?"Text color {0}":"Background color {0}",d=wR(Pk(t,s),s,!1),g=yn(d,p=>p.value===a).getOr({text:""}).text;return t.translate([c,t.translate(g)])},aI=(t,s,a,c)=>{t.ui.registry.addSplitButton(s,{tooltip:Bk(t,a,c.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:rI(t,a),columns:eI(t,a),fetch:xR(Pk(t,a),a,tI(t)),onAction:d=>{Nk(t,a,c.get(),Y)},onItemAction:(d,g)=>{Nk(t,a,g,p=>{c.set(p),Ok(t,{name:s,color:p})})},onSetup:d=>{ER(d,s,c.get());const g=p=>{p.name===s&&(ER(d,p.name,p.color),sI(d,Bk(t,a,p.color)))};return t.on("TextColorChange",g),Dk(Hi(t)(d),()=>{t.off("TextColorChange",g)})}})},iI=(t,s,a,c,d)=>{t.ui.registry.addNestedMenuItem(s,{text:c,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(sI(g,Bk(t,a,d.get())),ER(g,s,d.get()),Hi(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:rI(t,a),initData:{storageKey:a},onAction:g=>{Nk(t,a,g.value,p=>{d.set(p),Ok(t,{name:s,color:p})})}}]})},cI=t=>(s,a)=>{let c=!1;const d=x=>{const O=x.getData().colorpicker;c?(s(R.from(O)),x.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",O]))},g=(x,T)=>{T.name==="hex-valid"&&(c=T.value)},p={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:g,onSubmit:d,onClose:Y,onCancel:()=>{s(R.none())}})},C9=t=>{y9(t);const s=m9(t),a=f9(t),c=Wt(s),d=Wt(a);aI(t,"forecolor","forecolor",c),aI(t,"backcolor","hilitecolor",d),iI(t,"forecolor","forecolor","Text color",c),iI(t,"backcolor","hilitecolor","Background color",d)},lI=(t,s,a,c,d)=>{const g=T=>({setActive:O=>{Mn.set(T,O)},isActive:()=>Mn.isOn(T),isEnabled:()=>!Nt.isDisabled(T),setEnabled:O=>Nt.set(T,!O)}),p=Kv({presets:"img",textContent:R.none(),htmlContent:R.none(),ariaLabel:t.tooltip,iconContent:R.some(t.url),labelContent:t.label,shortcutContent:R.none(),checkMark:R.some(iR(d.icons)),caret:R.none(),value:t.value},d,!0),x=t.tooltip.map(T=>fs.config(d.tooltips.getConfig({tooltipText:d.translate(T)})));return Rt(ib({context:t.context,data:mp(t),enabled:t.enabled,getApi:g,onAction:T=>{s(t.value),T.setActive(!0)},onSetup:T=>(T.setActive(a),Y),triggersSubmenu:!1,itemBehaviours:[...x.toArray()]},p,c,d),{toggling:{toggleClass:PS,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},Lk=(t,s,a,c,d,g,p,x)=>{const T=FS(s),D=uI(s,a,c,d!=="color"?"normal":"color",g,p,x);return zO(t,T,D,c,{menuType:d})},uI=(t,s,a,c,d,g,p)=>Ul(qe(t,x=>x.type==="choiceitem"?dL(x).fold(vm,T=>R.some(lR(T,a===1,c,s,g(T.value),d,p,FS(t)))):x.type==="imageitem"?hL(x).fold(vm,T=>R.some(lI(T,s,g(T.value),d,p))):x.type==="resetimage"?gL(x).fold(vm,T=>R.some(lR({...T,text:T.tooltip,icon:R.some(T.icon),label:R.some(T.label)},a===1,c,s,g(T.value),d,p,FS(t)))):R.none())),ew=(t,s)=>{const a=cp(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+{color:"tox-swatches__row",imageselector:"tox-image-selector__row",listpreview:"tox-collection__group",normal:"tox-collection__group"}[s],previousSelector:d=>s==="color"?Pn(d.element,"[aria-checked=true]"):R.none()}},dI=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${vk}`:`.${MS}`}},S9=(t,s)=>{const a=w9(t,s),c=s.colorinput.getColorCols(t.initData.storageKey),d="color",p={...Lk(Mt("menu-value"),a,x=>{t.onAction({value:x})},c,d,Al.CLOSE_ON_EXECUTE,t.select.getOr(On),s.shared.providers),markers:cp(d),movement:ew(c,d),showMenuRole:!1};return{type:"widget",data:{value:Mt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[uR.widget(Oh.sketch(p))]}},w9=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>wR(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),c=>c.concat(oI(a)))},x9=(t,s)=>{const a="imageselector",c=t.initData.columns,g={...Lk(Mt("menu-value"),t.initData.items,p=>{t.onAction({value:p})},c,a,Al.CLOSE_ON_EXECUTE,t.select.getOr(On),s.shared.providers),markers:cp(a),movement:ew(c,a),showMenuRole:!1};return{type:"widget",data:{value:Mt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem","tox-collection--toolbar"]},autofocus:!0,components:[uR.widget(Oh.sketch(g))]}},mI=Mt("cell-over"),fI=Mt("cell-execute"),E9=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),T9=(t,s,a)=>{const c=p=>Gt(p,mI,{row:t,col:s}),d=p=>Gt(p,fI,{row:t,col:s}),g=(p,x)=>{x.stop(),d(p)};return Ga({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:rt([wn("insert-table-picker-cell",[$e(pl(),gn.focus),$e(Di(),d),$e(Xd(),g),$e(Gu(),g)]),Mn.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),gn.config({onFocus:c})])})},k9=(t,s,a)=>{const c=[];for(let d=0;d<s;d++){const g=[];for(let p=0;p<a;p++){const x=t(d+1,p+1);g.push(T9(d,p,x))}c.push(g)}return c},_9=(t,s,a,c,d)=>{for(let g=0;g<c;g++)for(let p=0;p<d;p++)Mn.set(t[g][p],g<=s&&p<=a)},A9=t=>ye(t,s=>qe(s,ur)),hI=(t,s)=>Vo(`${s}x${t}`),O9={inserttable:(t,s)=>{const d=E9(s),g=k9(d,10,10),p=hI(0,0),x=io({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[p],behaviours:rt([Sn.config({})])});return{type:"widget",data:{value:Mt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[uR.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:A9(g).concat(x.asSpec()),behaviours:rt([wn("insert-table-picker",[vo(T=>{Sn.set(x.get(T),[p])}),w2(mI,(T,O,D)=>{const{row:L,col:H}=D.event;_9(g,L,H,10,10),Sn.set(x.get(T),[hI(L+1,H+1)])}),w2(fI,(T,O,D)=>{const{row:L,col:H}=D.event;Wn(T,Jf()),t.onAction({numRows:L+1,numColumns:H+1})})]),jt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:S9,imageselect:x9},gI=(t,s)=>Tt(O9,t.fancytype).map(a=>a(t,s)),R9=(t,s,a,c=!0,d=!1)=>{const g=d?Uz(a.icons):zz(a.icons),p=T=>({isEnabled:()=>!Nt.isDisabled(T),setEnabled:O=>Nt.set(T,!O),setIconFill:(O,D)=>{Pn(T.element,`svg path[class="${O}"], rect[class="${O}"]`).each(L=>{Ve(L,"fill",D)})},setTooltip:O=>{const D=a.translate(O);Ve(T.element,"aria-label",D)}}),x=Kv({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:R.none(),ariaLabel:t.text,labelContent:R.none(),caret:R.some(g),checkMark:R.none(),shortcutContent:t.shortcut},a,c);return ib({context:t.context,data:mp(t),getApi:p,enabled:t.enabled,onAction:Y,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},x,s,a)},D9=(t,s,a,c=!0)=>{const d=p=>({isEnabled:()=>!Nt.isDisabled(p),setEnabled:x=>Nt.set(p,!x)}),g=Kv({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:R.none(),labelContent:R.none(),ariaLabel:t.text,caret:R.none(),checkMark:R.none(),shortcutContent:t.shortcut},a,c);return ib({context:t.context,data:mp(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},M9=t=>({type:"separator",dom:{tag:"div",classes:[MS,JV]},components:t.text.map(Vo).toArray()}),P9=(t,s,a,c=!0)=>{const d=p=>({setActive:x=>{Mn.set(p,x)},isActive:()=>Mn.isOn(p),isEnabled:()=>!Nt.isDisabled(p),setEnabled:x=>Nt.set(p,!x)}),g=Kv({iconContent:t.icon,textContent:t.text,htmlContent:R.none(),labelContent:R.none(),ariaLabel:t.text,checkMark:R.some(iR(a.icons)),caret:R.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,c);return Rt(ib({context:t.context,data:mp(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:PS,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},N9=jz,Ik=M9,B9=D9,L9=R9,I9=P9,pI=gI,bI=Gz;var vI=Object.freeze({__proto__:null,getCoupled:(t,s,a,c)=>a.getOrCreate(t,s,c),getExistingCoupled:(t,s,a,c)=>a.getExisting(t,s,c)}),F9=[Ri("others",ls(In.value,oa()))],$9=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,p)=>{if(Zo(g.others).length===0)throw new Error("Cannot find any known coupled components");return Tt(t,p)},a=(g,p,x)=>s(p,x).getOrThunk(()=>{const O=Tt(p.others,x).getOrDie("No information found for coupled component: "+x)(g),D=g.getSystem().build(O);return t[x]=D,D}),c=(g,p,x)=>s(p,x).orThunk(()=>(Tt(p.others,x).getOrDie("No information found for coupled component: "+x),R.none())),d=ne({});return di({readState:d,getExisting:c,getOrCreate:a})}});const Xs=yr({fields:F9,name:"coupling",apis:vI,state:$9}),TR=t=>{let s=R.none(),a=[];const c=O=>TR(D=>{d(L=>{D(O(L))})}),d=O=>{p()?T(O):a.push(O)},g=O=>{p()||(s=R.some(O),x(a),a=[])},p=()=>s.isSome(),x=O=>{Ot(O,T)},T=O=>{s.each(D=>{setTimeout(()=>{O(D)},0)})};return t(g),{get:d,map:c,isReady:p}},Fk={nu:TR,pure:t=>TR(s=>{s(t)})},H9=t=>{setTimeout(()=>{throw t},0)},Mh=t=>{const s=T=>{t().then(T,H9)};return{map:T=>Mh(()=>t().then(T)),bind:T=>Mh(()=>t().then(O=>T(O).toPromise())),anonBind:T=>Mh(()=>t().then(()=>T.toPromise())),toLazy:()=>Fk.nu(s),toCached:()=>{let T=null;return Mh(()=>(T===null&&(T=t()),T))},toPromise:t,get:s}},Ja={nu:t=>Mh(()=>new Promise(t)),pure:t=>Mh(()=>Promise.resolve(t))},yI=ne("sink"),V9=ne(Ii({name:yI(),overrides:ne({dom:{tag:"div"},behaviours:rt([ga.config({useFixed:Ft})]),events:No([Yu(Ki()),Yu(pc()),Yu(Xd())])})})),tw=(t,s)=>{const a=t.getHotspot(s).getOr(s),c="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:c,hotspot:a,overrides:d}),g=>({type:c,hotspot:a,overrides:d,layouts:g}))},Yv=(t,s,a)=>{const c=t.fetch;return c(a).map(s)},CI=(t,s,a,c,d,g,p)=>{const x=Yv(t,s,c),T=SI(c,t);return x.map(O=>O.bind(D=>{const L=D.menus[D.primary];return R.from(L).each(H=>{t.listRole.each(q=>{H.role=q})}),R.from(ep.sketch({...g.menu(),uid:uh(""),data:D,highlightOnOpen:p,onOpenMenu:(H,q)=>{const J=T().getOrDie();ga.position(J,q,{anchor:a}),eo.decloak(d)},onOpenSubmenu:(H,q,J)=>{const re=T().getOrDie();ga.position(re,J,{anchor:{type:"submenu",item:q}}),eo.decloak(d)},onRepositionMenu:(H,q,J)=>{const re=T().getOrDie();ga.position(re,q,{anchor:a}),Ot(J,de=>{ga.position(re,de.triggeredMenu,{anchor:{type:"submenu",item:de.triggeringItem}})})},onEscape:()=>(gn.focus(c),eo.close(d),R.some(!0))}))}))},nw=(t,s,a,c,d,g,p)=>{const x=tw(t,a);return CI(t,s,x,a,c,d,p).map(O=>(O.fold(()=>{eo.isOpen(c)&&eo.close(c)},D=>{eo.cloak(c),eo.open(c,D),g(c)}),c))},z9=(t,s,a,c,d,g,p)=>(eo.close(c),Ja.pure(c)),kR=(t,s,a,c,d,g)=>{const p=Xs.getCoupled(a,"sandbox");return(eo.isOpen(p)?z9:nw)(t,s,a,p,c,d,g)},U9=(t,s,a)=>{const c=Xn.getCurrent(s).getOr(s),d=Rn(t.element);a?En(c.element,"min-width",d+"px"):jb(c.element,d)},SI=(t,s)=>t.getSystem().getByUid(s.uid+"-"+yI()).map(a=>()=>In.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>In.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),wI=t=>{eo.getState(t).each(s=>{ep.repositionMenus(s)})},_R=(t,s,a)=>{const c=K2(),d=(x,T)=>{const O=tw(t,s);c.link(s.element),t.matchWidth&&U9(O.hotspot,T,t.useMinWidth),t.onOpen(O,x,T),a!==void 0&&a.onOpen!==void 0&&a.onOpen(x,T)},g=(x,T)=>{c.unlink(s.element),p().getOr(T).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(x,T)},p=SI(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:c.id}},behaviours:Ec.augment(t.sandboxBehaviours,[Et.config({store:{mode:"memory",initialValue:s}}),eo.config({onOpen:d,onClose:g,isPartOf:(x,T,O)=>Ym(T,O)||Ym(s,O),getAttachPoint:()=>p().getOrDie()}),Xn.config({find:x=>eo.getState(x).bind(T=>Xn.getCurrent(T))}),Bi.config({channels:{...ec({isExtraPart:On}),...Sh({doReposition:wI})}})])}},xI=t=>{const s=Xs.getCoupled(t,"sandbox");wI(s)},AR=()=>[Se("sandboxClasses",[]),Ec.field("sandboxBehaviours",[Xn,Bi,eo,Et])],W9=ne([Ze("dom"),Ze("fetch"),qn("onOpen"),Ni("onExecute"),Se("getHotspot",R.some),Se("getAnchorOverrides",ne({})),Qm(),qr("dropdownBehaviours",[Mn,Xs,jt,gn]),Ze("toggleClass"),Se("eventOrder",{}),no("lazySink"),Se("matchWidth",!1),Se("useMinWidth",!1),no("role"),no("listRole")].concat(AR())),Z9=ne([jc({schema:[v1(),Se("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),V9()]),q9=(t,s,a,c)=>{const d=D=>Tt(t.dom,"attributes").bind(L=>Tt(L,D)),g=D=>{eo.getState(D).each(L=>{ep.highlightPrimary(L)})},p=(D,L,H)=>kR(t,at,D,c,L,H),x=D=>{p(D,g,jr.HighlightMenuAndItem).get(Y)},T={expand:D=>{Mn.isOn(D)||p(D,Y,jr.HighlightNone).get(Y)},open:D=>{Mn.isOn(D)||p(D,Y,jr.HighlightMenuAndItem).get(Y)},refetch:D=>Xs.getExistingCoupled(D,"sandbox").fold(()=>p(D,Y,jr.HighlightMenuAndItem).map(Y),H=>nw(t,at,D,H,c,Y,jr.HighlightMenuAndItem).map(Y)),isOpen:Mn.isOn,close:D=>{Mn.isOn(D)&&p(D,Y,jr.HighlightMenuAndItem).get(Y)},repositionMenus:D=>{Mn.isOn(D)&&xI(D)}},O=(D,L)=>(Qd(D),R.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:Gs(t.dropdownBehaviours,[Mn.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Xs.config({others:{sandbox:D=>_R(t,D,{onOpen:()=>Mn.on(D),onClose:()=>Mn.off(D)})}}),jt.config({mode:"special",onSpace:O,onEnter:O,onDown:(D,L)=>{if(el.isOpen(D)){const H=Xs.getCoupled(D,"sandbox");g(H)}else el.open(D);return R.some(!0)},onEscape:(D,L)=>el.isOpen(D)?(el.close(D),R.some(!0)):R.none()}),gn.config({})]),events:Bv(R.some(x)),eventOrder:{...t.eventOrder,[Di()]:["disabling","toggling","alloy.base.behaviour"]},apis:T,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),D=>({role:D})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},el=Ba({name:"Dropdown",configFields:W9(),partFields:Z9(),factory:q9,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),Jv=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},db=t=>{const s=Et.getValue(t),a=wk(t).map(FO);el.refetch(s).get(()=>{const c=Xs.getCoupled(s,"sandbox");a.each(d=>wk(c).each(g=>rz(g,d)))})},j9=(t,s)=>{EI(t).each(a=>{v2(t,a.element,s.event.eventType,s.event.interactionEvent)})},EI=t=>eo.getState(t).bind(K.getHighlighted).bind(K.getHighlighted),TI=t=>Na(t.element,LS)?R.some(t.element):Pn(t.element,"."+LS),ow=(t,s,a)=>{IO(t).each(c=>{GB(c,a),TI(s).each(g=>{_n(g,"id").each(p=>Ve(c.element,"aria-controls",p))})}),Ve(a.element,"aria-selected","true")},G9=(t,s,a)=>{Ve(a.element,"aria-selected","false")},sw=t=>{IO(t).each(s=>gn.focus(s))},rw=t=>Xs.getExistingCoupled(t,"sandbox").bind(wk).map(FO).map(a=>a.fetchPattern).getOr("");var $k;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})($k||($k={}));const K9=(t,s,a,c,d)=>{const g=a.shared.providers,p=x=>d?{...x,shortcut:R.none(),icon:x.text.isSome()?R.none():x.icon}:x;switch(t.type){case"menuitem":return pL(t).fold(vm,x=>R.some(B9(p(x),s,g,c)));case"nestedmenuitem":return Dz(t).fold(vm,x=>R.some(L9(p(x),s,g,c,d)));case"togglemenuitem":return Pz(t).fold(vm,x=>R.some(I9(p(x),s,g,c)));case"separator":return GO(t).fold(vm,x=>R.some(Ik(x)));case"fancymenuitem":return ZS(t).fold(vm,x=>pI(x,a));default:return console.error("Unknown item in general menu",t),R.none()}},X9=(t,s,a,c,d,g,p)=>{const x=c===1,T=!x||FS(t);return Ul(qe(t,O=>{switch(O.type){case"separator":return pz(O).fold(vm,D=>R.some(Ik(D)));case"cardmenuitem":return Ez(O).fold(vm,D=>R.some(bI({...D,onAction:L=>{D.onAction(L),a(D.value,D.meta)}},d,g,{itemBehaviours:OL(D.meta,g,R.none()),cardText:{matchText:s,highlightOn:p}})));case"autocompleteitem":default:return rL(O).fold(vm,D=>R.some(N9(D,s,x,"normal",a,d,g,T)))}}))},kI=(t,s,a,c,d,g)=>{const p=FS(s),x=Ul(qe(s,D=>{const L=q=>d?!Jn(q,"text"):p,H=q=>K9(q,a,c,L(q),d);return D.type==="nestedmenuitem"&&D.getSubmenuItems().length<=0?H({...D,enabled:!1}):H(D)})),T=Jv(g);return(d?dz:zO)(t,p,x,1,T)},OR=t=>ep.singleData(t.value,t),Y9=(t,s,a,c)=>{const d=ew(s,c),g=cp(c);return{data:OR({...t,movement:d,menuBehaviours:Tc.unnamedEvents(s!=="auto"?[]:[vo((p,x)=>{nR(p,4,g.item).each(({numColumns:T,numRows:O})=>{jt.setGridSize(p,O,T)})})])}),menu:{markers:cp(c),fakeFocus:a===$k.ContentFocus}}},Hk=t=>P1.create(ct.fromDom(t.startContainer),t.startOffset,ct.fromDom(t.endContainer),t.endOffset),RR={register:(t,s)=>{const a=Mt("autocompleter"),c=Wt(!1),d=Wt(!1),g=uo(),p=Ga(Cs.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:rt([wn("dismissAutocompleter",[$e(Um(),()=>L()),$e(w0(),(oe,fe)=>{_n(fe.event.target,"id").each(he=>Ve(ct.fromDom(t.getBody()),"aria-activedescendant",he))})])]),lazySink:s.getSink})),x=()=>Cs.isOpen(p),T=d.get,O=()=>{if(x()){Cs.hide(p),t.dom.remove(a,!1);const oe=ct.fromDom(t.getBody());_n(oe,"aria-owns").filter(fe=>fe===a).each(()=>{zn(oe,"aria-owns"),zn(oe,"aria-activedescendant")})}},D=()=>Cs.getContent(p).bind(oe=>ps(oe.components(),0)),L=()=>t.execCommand("mceAutocompleterClose"),H=oe=>{const fe=ks(oe,he=>R.from(he.columns)).getOr(1);return ye(oe,he=>{const ke=he.items;return X9(ke,he.matchText,(Pe,Ct)=>{const tt={hide:()=>L(),reload:Be=>{O(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Be})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(Be=>{c.set(!0),he.onAction(tt,Be,Pe,Ct),c.set(!1)})},fe,Al.BUBBLE_TO_SANDBOX,s,he.highlightOn)})},q=(oe,fe)=>{const he=ks(oe,ke=>R.from(ke.columns)).getOr(1);Cs.showMenuAt(p,{anchor:{type:"selection",getSelection:()=>g.get().map(Hk),root:ct.fromDom(t.getBody())}},Y9(zO("autocompleter-value",!0,fe,he,{menuType:"normal"}),he,$k.ContentFocus,"normal")),D().each(K.highlightFirst)},J=oe=>{const fe=H(oe);fe.length>0?(q(oe,fe),Ve(ct.fromDom(t.getBody()),"aria-owns",a),t.inline||re()):O()},re=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const oe=t.getDoc().documentElement,fe=t.selection.getNode(),he=qx(p.element);ta(he,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${fe.offsetTop}px`,left:`${fe.offsetLeft}px`}),t.dom.add(oe,he.dom),Pn(he,'[role="menu"]').each(ke=>{Un(ke,"position"),Un(ke,"max-height")})};t.on("AutocompleterStart",({lookupData:oe})=>{d.set(!0),c.set(!1),J(oe)}),t.on("AutocompleterUpdate",({lookupData:oe})=>J(oe)),t.on("AutocompleterUpdateActiveRange",({range:oe})=>g.set(oe)),t.on("AutocompleterEnd",()=>{O(),d.set(!1),c.set(!1),g.clear()});const de={cancelIfNecessary:L,isMenuOpen:x,isActive:T,isProcessingAction:c.get,getMenu:D};IB.setup(de,t)}},aw=(t,s,a)=>Us(t,s,a).isSome(),_I=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},DR=5,AI=400,MR=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?R.none():R.some(s.touches[0])},Ph=(t,s)=>{const a=Math.abs(t.clientX-s.x),c=Math.abs(t.clientY-s.y);return a>DR||c>DR},mb=t=>{const s=uo(),a=Wt(!1),c=_I(O=>{t.triggerEvent(Dx(),O),a.set(!0)},AI),d=O=>(MR(O).each(D=>{c.cancel();const L={x:D.clientX,y:D.clientY,target:O.target};c.schedule(O),a.set(!1),s.set(L)}),R.none()),g=O=>(c.cancel(),MR(O).each(D=>{s.on(L=>{Ph(D,L)&&s.clear()})}),R.none()),p=O=>{c.cancel();const D=L=>Kn(L.target,O.target);return s.get().filter(D).map(L=>a.get()?(O.prevent(),!1):t.triggerEvent(Gu(),O))},x=lg([{key:gl(),value:d},{key:ug(),value:g},{key:qu(),value:p}]);return{fireIfReady:(O,D)=>Tt(x,D).bind(L=>L(O))}},J9=t=>t.raw.which===ue[0]&&!Mo(["input","textarea"],Hs(t.target))&&!aw(t.target,'[contenteditable="true"]'),Q9=(t,s)=>{const a={stopBackspace:!0,...s},c=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=mb(a),g=qe(c.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),q=>hi(t,q,J=>{d.fireIfReady(J,q).each(de=>{de&&J.kill()}),a.triggerEvent(q,J)&&J.kill()})),p=uo(),x=hi(t,"paste",q=>{d.fireIfReady(q,"paste").each(re=>{re&&q.kill()}),a.triggerEvent("paste",q)&&q.kill(),p.set(setTimeout(()=>{a.triggerEvent(b0(),q)},0))}),T=hi(t,"keydown",q=>{a.triggerEvent("keydown",q)?q.kill():a.stopBackspace&&J9(q)&&q.prevent()}),O=hi(t,"focusin",q=>{a.triggerEvent("focusin",q)&&q.kill()}),D=uo(),L=hi(t,"focusout",q=>{a.triggerEvent("focusout",q)&&q.kill(),D.set(setTimeout(()=>{a.triggerEvent(n1(),q)},0))});return{unbind:()=>{Ot(g,q=>{q.unbind()}),T.unbind(),O.unbind(),L.unbind(),x.unbind(),p.on(clearTimeout),D.on(clearTimeout)}}},PR=(t,s)=>{const a=Tt(t,"target").getOr(s);return Wt(a)},eU=(t,s)=>{const a=Wt(!1),c=Wt(!1);return{stop:()=>{a.set(!0)},cut:()=>{c.set(!0)},isStopped:a.get,isCut:c.get,event:t,setSource:s.set,getSource:s.get}},OI=t=>{const s=Wt(!1);return{stop:()=>{s.set(!0)},cut:Y,isStopped:s.get,isCut:On,event:t,setSource:le("Cannot set source of a broadcasted event"),getSource:le("Cannot get source of a broadcasted event")}},iw=Ma.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),RI=(t,s,a,c,d,g)=>{const p=t(s,c),x=eU(a,d);return p.fold(()=>(g.logEventNoHandlers(s,c),iw.complete()),T=>{const O=T.descHandler;return om(O)(x),x.isStopped()?(g.logEventStopped(s,T.element,O.purpose),iw.stopped()):x.isCut()?(g.logEventCut(s,T.element,O.purpose),iw.complete()):Er(T.element).fold(()=>(g.logNoParent(s,T.element,O.purpose),iw.complete()),L=>(g.logEventResponse(s,T.element,O.purpose),iw.resume(L)))})},DI=(t,s,a,c,d,g)=>RI(t,s,a,c,d,g).fold(Ft,p=>DI(t,s,a,p,d,g),On),tU=(t,s,a,c,d)=>{const g=PR(a,c);return RI(t,s,a,c,g,d)},nU=(t,s,a)=>{const c=OI(s);return Ot(t,d=>{const g=d.descHandler;om(g)(c)}),c.isStopped()},oU=(t,s,a,c)=>MI(t,s,a,a.target,c),MI=(t,s,a,c,d)=>{const g=PR(a,c);return DI(t,s,a,c,g,d)},sU=(t,s)=>({element:t,descHandler:s}),NR=(t,s)=>({id:t,descHandler:s}),rU=()=>{const t={},s=(p,x,T)=>{_s(T,(O,D)=>{const L=t[D]!==void 0?t[D]:{};L[x]=W2(O,p),t[D]=L})},a=(p,x)=>C1(x).bind(T=>Tt(p,T)).map(T=>sU(x,T));return{registerId:s,unregisterId:p=>{_s(t,(x,T)=>{Jn(x,p)&&delete x[p]})},filterByType:p=>Tt(t,p).map(x=>Au(x,(T,O)=>NR(O,T))).getOr([]),find:(p,x,T)=>Tt(t,x).bind(O=>m2(T,D=>a(O,D),p))}},aU=()=>{const t=rU(),s={},a=O=>{const D=O.element;return C1(D).getOrThunk(()=>fA("uid-",O.element))},c=(O,D)=>{const L=s[D];if(L===O)g(O);else throw new Error('The tagId "'+D+'" is already used by: '+bl(L.element)+`
Cannot use it for: `+bl(O.element)+`
The conflicting element is`+(se(L.element)?" ":" not ")+"already in the DOM")},d=O=>{const D=a(O);Ha(s,D)&&c(O,D);const L=[O];t.registerId(L,D,O.events),s[D]=O},g=O=>{C1(O.element).each(D=>{delete s[D],t.unregisterId(D)})};return{find:(O,D,L)=>t.find(O,D,L),filter:O=>t.filterByType(O),register:d,unregister:g,getById:O=>Tt(s,O)}},gd=Fi({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:bv(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Se("components",[]),qr("containerBehaviours",[]),Se("events",{}),Se("domModification",{}),Se("eventOrder",{})]}),BR=t=>{const s=oe=>Er(t.element).fold(Ft,fe=>Kn(oe,fe)),a=aU(),c=(oe,fe)=>a.find(s,oe,fe),d=Q9(t.element,{triggerEvent:(oe,fe)=>td(oe,fe.target,he=>oU(c,oe,fe,he))}),g={debugInfo:ne("real"),triggerEvent:(oe,fe,he)=>{td(oe,fe,ke=>MI(c,oe,he,fe,ke))},triggerFocus:(oe,fe)=>{C1(oe).fold(()=>{ha(oe)},he=>{td(Vm(),oe,ke=>(tU(c,Vm(),{originator:fe,kill:Y,prevent:Y,target:oe},oe,ke),!1))})},triggerEscape:(oe,fe)=>{g.triggerEvent("keydown",oe.element,fe.event)},getByUid:oe=>re(oe),getByDom:oe=>de(oe),build:Ga,buildOrPatch:ja,addToGui:oe=>{T(oe)},removeFromGui:oe=>{O(oe)},addToWorld:oe=>{p(oe)},removeFromWorld:oe=>{x(oe)},broadcast:oe=>{H(oe)},broadcastOn:(oe,fe)=>{q(oe,fe)},broadcastEvent:(oe,fe)=>{J(oe,fe)},isConnected:Ft},p=oe=>{oe.connect(g),hr(oe.element)||(a.register(oe),Ot(oe.components(),p),g.triggerEvent(Xu(),oe.element,{target:oe.element}))},x=oe=>{hr(oe.element)||(Ot(oe.components(),x),a.unregister(oe)),oe.disconnect()},T=oe=>{yh(t,oe)},O=oe=>{du(oe)},D=()=>{d.unbind(),uc(t.element)},L=oe=>{const fe=a.filter(zm());Ot(fe,he=>{const ke=he.descHandler;om(ke)(oe)})},H=oe=>{L({universal:!0,data:oe})},q=(oe,fe)=>{L({universal:!1,channels:oe,data:fe})},J=(oe,fe)=>{const he=a.filter(oe);return nU(he,fe)},re=oe=>a.getById(oe).fold(()=>In.error(new Error('Could not find component with uid: "'+oe+'" in system.')),In.value),de=oe=>{const fe=C1(oe).getOr("not found");return re(fe)};return p(t),{root:t,element:t.element,destroy:D,add:T,remove:O,getByUid:re,getByDom:de,addToWorld:p,removeFromWorld:x,broadcast:H,broadcastOn:q,broadcastEvent:J}},iU=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:qe(t.items,s.interpreter)}),cU=ne([Se("prefix","form-field"),qr("fieldBehaviours",[Xn,Et])]),PI=ne([Ii({schema:[Ze("dom")],name:"label"}),Ii({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ze("text")],name:"aria-descriptor"}),ba({factory:{sketch:t=>{const s=Ox(t,["factory"]);return t.factory.sketch(s)}},schema:[Ze("factory")],name:"field"})]),lU=(t,s,a,c)=>{const d=Gs(t.fieldBehaviours,[Xn.config({find:x=>Bo(x,t,"field")}),Et.config({store:{mode:"manual",getValue:x=>Xn.getCurrent(x).bind(Et.getValue),setValue:(x,T)=>{Xn.getCurrent(x).each(O=>{Et.setValue(O,T)})}}})]),g=No([vo((x,T)=>{const O=ET(x,t,["label","field","aria-descriptor"]);O.field().each(D=>{const L=Mt(t.prefix);O.label().each(H=>{Ve(H.element,"for",L),Ve(D.element,"id",L)}),O["aria-descriptor"]().each(H=>{const q=Mt(t.prefix);Ve(H.element,"id",q),Ve(D.element,"aria-describedby",q)})})})]),p={getField:x=>Bo(x,t,"field"),getLabel:x=>Bo(x,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:p}},Hn=Ba({name:"FormField",configFields:cU(),partFields:PI(),factory:lU,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var uU=tinymce.util.Tools.resolve("tinymce.html.Entities");const cw=(t,s,a,c)=>{const d=NI(t,s,a,c);return Hn.sketch(d)},dU=(t,s)=>cw(t,s,[],[]),NI=(t,s,a,c)=>({dom:LI(a),components:t.toArray().concat([s]),fieldBehaviours:rt(c)}),BI=()=>LI([]),LI=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),fp=(t,s)=>Hn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Vo(s.translate(t))]}),kc=Mt("form-component-change"),II=Mt("form-component-input"),lw=Mt("form-close"),Nh=Mt("form-cancel"),tl=Mt("form-action"),uw=Mt("form-submit"),LR=Mt("form-block"),IR=Mt("form-unblock"),dw=Mt("form-tabchange"),Dl=Mt("form-resize"),FR=(t,s,a)=>{const c=t.label.map(q=>fp(q,s)),d=s.icons(),g=q=>{var J;return(J=d[q])!==null&&J!==void 0?J:q},p=q=>(J,re)=>{Us(re.event.target,"[data-collection-item-value]").each(de=>{q(J,re,de,Ln(de,"data-collection-item-value"))})},x=(q,J)=>{const de=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",oe=qe(J,ke=>{const Pe=hu.translate(ke.text),Ct=t.columns===1?`<div class="tox-collection__item-label">${Pe}</div>`:"",tt=`<div class="tox-collection__item-icon">${g(ke.icon)}</div>`,Be={_:" "," - ":" ","-":" "},At=Pe.replace(/\_| \- |\-/g,cn=>Be[cn]);return`<div data-mce-tooltip="${At}" class="tox-collection__item${de}" tabindex="-1" data-collection-item-value="${uU.encodeAllRaw(ke.value)}" aria-label="${At}">${tt}${Ct}</div>`}),fe=t.columns!=="auto"&&t.columns>1?Xr(oe,t.columns):[oe],he=qe(fe,ke=>`<div class="tox-collection__group">${ke.join("")}</div>`);Is(q.element,he.join(""))},T=p((q,J,re,de)=>{J.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||Gt(q,tl,{name:t.name,value:de})}),O=[$e(pl(),p((q,J,re)=>{ha(re,!0)})),$e(Xd(),T),$e(Gu(),T),$e(Uc(),p((q,J,re)=>{Pn(q.element,"."+ip).each(de=>{ao(de,ip)}),qs(re,ip)})),$e(g0(),p(q=>{Pn(q.element,"."+ip).each(J=>{ao(J,ip),sd(J)})})),cu(p((q,J,re,de)=>{Gt(q,tl,{name:t.name,value:de})}))],D=(q,J)=>qe(bi(q.element,".tox-collection__item"),J),L=Hn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:at},behaviours:rt([Nt.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:q=>{D(q,J=>{qs(J,"tox-collection__item--state-disabled"),Ve(J,"aria-disabled",!0)})},onEnabled:q=>{D(q,J=>{ao(J,"tox-collection__item--state-disabled"),zn(J,"aria-disabled")})}}),rr(()=>s.checkUiComponentContext(t.context)),Sn.config({}),fs.config({...s.tooltips.getConfig({tooltipText:"",onShow:q=>{Pn(q.element,"."+ip+"[data-mce-tooltip]").each(J=>{_n(J,"data-mce-tooltip").each(re=>{fs.setComponents(q,s.tooltips.getComponents({tooltipText:re}))})})}}),mode:"children-keyboard-focus",anchor:q=>({type:"node",node:Pn(q.element,"."+ip).orThunk(()=>og(".tox-collection__item")),root:q.element,layouts:{onLtr:ne([Cr,Or,or,aa,dr,sr]),onRtl:ne([Cr,Or,or,aa,dr,sr])},bubble:gi(0,-2,{})})}),Et.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(q,J)=>{x(q,J),t.columns==="auto"&&nR(q,5,"tox-collection__item").each(({numRows:re,numColumns:de})=>{jt.setGridSize(q,re,de)}),Wn(q,Dl)}}),zo.config({}),jt.config(dI(t.columns,"normal")),wn("collection-events",O)]),eventOrder:{[Di()]:["disabling","alloy.base.behaviour","collection-events"],[Uc()]:["collection-events","tooltipping"]}});return cw(c,L,["tox-form__group--collection"],[])},FI=["input","textarea"],$I=t=>{const s=Hs(t);return Mo(FI,s)},HI=(t,s)=>{const a=s.getRoot(t).getOr(t.element);ao(a,s.invalidClass),s.notify.each(c=>{$I(t.element)&&Ve(t.element,"aria-invalid",!1),c.getContainer(t).each(d=>{Is(d,c.validHtml)}),c.onValid(t)})},VI=(t,s,a,c)=>{const d=s.getRoot(t).getOr(t.element);qs(d,s.invalidClass),s.notify.each(g=>{$I(t.element)&&Ve(t.element,"aria-invalid",!0),g.getContainer(t).each(p=>{Is(p,c)}),g.onInvalid(t,c)})},zI=(t,s,a)=>s.validator.fold(()=>Ja.pure(In.value(!0)),c=>c.validate(t)),Vk=(t,s,a)=>(s.notify.each(c=>{c.onValidate(t)}),zI(t,s).map(c=>t.getSystem().isConnected()?c.fold(d=>(VI(t,s,a,d),In.error(d)),d=>(HI(t,s),In.value(d))):In.error("No longer in system")));var fU=Object.freeze({__proto__:null,markValid:HI,markInvalid:VI,query:zI,run:Vk,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Na(a,s.invalidClass)}}),UI=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>No([$e(a.onEvent,c=>{Vk(c,t,s).get(at)})].concat(a.validateOnLoad?[vo(c=>{Vk(c,t,s).get(Y)})]:[]))).getOr({})}),hU=[Ze("invalidClass"),Se("getRoot",R.none),Gi("notify",[Se("aria","alert"),Se("getContainer",R.none),Se("validHtml",""),qn("onValid"),qn("onInvalid"),qn("onValidate")]),Gi("validator",[Ze("validate"),Se("onEvent","input"),Se("validateOnLoad",!0)])];const wm=yr({fields:hU,name:"invalidating",active:UI,apis:fU,extra:{validation:t=>s=>{const a=Et.getValue(s);return Ja.pure(t(a))}}});var bU=Object.freeze({__proto__:null,events:()=>No([mg(Pa(),Ft)]),exhibit:()=>Wc({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const mw=yr({fields:[],name:"unselecting",active:bU}),vU=(t,s)=>el.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:rt([Rl.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),rr(()=>s.providers.checkUiComponentContext(t.context)),mw.config({}),zo.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>Ja.nu(c=>t.fetch(c)).map(c=>R.from(OR(Rt(Lk(Mt("menu-value"),c,d=>{t.onItemAction(a,d)},t.columns,t.presets,Al.CLOSE_ON_EXECUTE,On,s.providers),{movement:ew(t.columns,t.presets)})))),parts:{menu:Sk(!1,1,t.presets)}}),WI=Mt("color-input-change"),ZI=Mt("color-swatch-change"),qI=Mt("color-picker-cancel"),$R=(t,s,a,c)=>{const d=Hn.parts.field({factory:Dh,inputClasses:["tox-textfield"],data:c,onSetValue:O=>wm.run(O).get(Y),inputBehaviours:rt([Nt.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),rr(()=>s.providers.checkUiComponentContext(t.context)),zo.config({}),wm.config({invalidClass:"tox-textbox-field-invalid",getRoot:O=>$c(O.element),notify:{onValid:O=>{const D=Et.getValue(O);Gt(O,WI,{color:D})}},validator:{validateOnLoad:!1,validate:O=>{const D=Et.getValue(O);if(D.length===0)return Ja.pure(In.value(!0));{const L=ct.fromTag("span");En(L,"background-color",D);const H=Ps(L,"background-color").fold(()=>In.error("blah"),q=>In.value(D));return Ja.pure(H)}}}})]),selectOnFocus:!1}),g=t.label.map(O=>fp(O,s.providers)),p=(O,D)=>{Gt(O,ZI,{value:D})},x=(O,D)=>{T.getOpt(O).each(L=>{D==="custom"?a.colorPicker(H=>{H.fold(()=>Wn(L,qI),q=>{p(L,q),XL(t.storageKey,q)})},"#ffffff"):D==="remove"?p(L,""):p(L,D)})},T=io(vU({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[dr,or,Cr],onLtr:()=>[or,dr,Cr]},components:[],fetch:xR(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:x,context:t.context},s));return Hn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,T.asSpec()]}]),fieldBehaviours:rt([wn("form-field-events",[$e(WI,(O,D)=>{T.getOpt(O).each(L=>{En(L.element,"background-color",D.event.color)}),Gt(O,kc,{name:t.name})}),$e(ZI,(O,D)=>{Hn.getField(O).each(L=>{Et.setValue(L,D.event.value),Xn.getCurrent(O).each(gn.focus)})}),$e(qI,(O,D)=>{Hn.getField(O).each(L=>{Xn.getCurrent(O).each(gn.focus)})})])])})},yU=Ii({schema:[Ze("dom")],name:"label"}),hp=t=>Ii({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),c=>({events:No([C2(gl(),(d,g,p)=>c(d,p),[s]),C2(pc(),(d,g,p)=>c(d,p),[s]),C2(e1(),(d,g,p)=>{p.mouseIsDown.get()&&c(d,p)},[s])])}))}),jI=hp("top-left"),CU=hp("top"),SU=hp("top-right"),wU=hp("right"),xU=hp("bottom-right"),EU=hp("bottom"),TU=hp("bottom-left"),kU=hp("left"),GI=ba({name:"thumb",defaults:ne({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:No([hg(gl(),t,"spectrum"),hg(ug(),t,"spectrum"),hg(qu(),t,"spectrum"),hg(pc(),t,"spectrum"),hg(e1(),t,"spectrum"),hg(ju(),t,"spectrum")])})}),fw=t=>Xa(t.event),_U=ba({schema:[ui("mouseIsDown",()=>Wt(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,c=(d,g)=>a.getValueFromEvent(g).map(p=>a.setValueFrom(d,t,p));return{behaviours:rt([jt.config({mode:"special",onLeft:(d,g)=>a.onLeft(d,t,fw(g)),onRight:(d,g)=>a.onRight(d,t,fw(g)),onUp:(d,g)=>a.onUp(d,t,fw(g)),onDown:(d,g)=>a.onDown(d,t,fw(g))}),zo.config({}),gn.config({})]),events:No([$e(gl(),c),$e(ug(),c),$e(pc(),c),$e(e1(),(d,g)=>{t.mouseIsDown.get()&&c(d,g)})])}}});var AU=[yU,kU,wU,CU,EU,jI,SU,TU,xU,GI,_U];const hw=ne("slider.change.value"),OU=t=>t.type.indexOf("touch")!==-1,HR=t=>{const s=t.event.raw;if(OU(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?R.some(a.touches[0]).map(c=>$o(c.clientX,c.clientY)):R.none()}else{const a=s;return a.clientX!==void 0?R.some(a).map(c=>$o(c.clientX,c.clientY)):R.none()}},KI="top",XI="right",YI="bottom",VR="left",fb=t=>t.model.minX,gp=t=>t.model.minY,zk=t=>t.model.minX-1,Uk=t=>t.model.minY-1,hb=t=>t.model.maxX,gb=t=>t.model.maxY,Qv=t=>t.model.maxX+1,pd=t=>t.model.maxY+1,JI=(t,s,a)=>s(t)-a(t),pb=t=>JI(t,hb,fb),zR=t=>JI(t,gb,gp),Wk=t=>pb(t)/2,QI=t=>zR(t)/2,ey=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,e6=t=>t.snapToGrid,UR=t=>t.snapStart,t6=t=>t.rounded,ty=(t,s)=>t[s+"-edge"]!==void 0,Zk=t=>ty(t,VR),qk=t=>ty(t,XI),n6=t=>ty(t,KI),nl=t=>ty(t,YI),Bh=t=>t.model.value.get(),pp=(t,s)=>({x:t,y:s}),pu=(t,s)=>{Gt(t,hw(),{value:s})},o6=(t,s)=>{pu(t,pp(zk(s),Uk(s)))},RU=(t,s)=>{pu(t,Uk(s))},DU=(t,s)=>{pu(t,pp(Wk(s),Uk(s)))},MU=(t,s)=>{pu(t,pp(Qv(s),Uk(s)))},PU=(t,s)=>{pu(t,Qv(s))},NU=(t,s)=>{pu(t,pp(Qv(s),QI(s)))},BU=(t,s)=>{pu(t,pp(Qv(s),pd(s)))},LU=(t,s)=>{pu(t,pd(s))},s6=(t,s)=>{pu(t,pp(Wk(s),pd(s)))},IU=(t,s)=>{pu(t,pp(zk(s),pd(s)))},FU=(t,s)=>{pu(t,zk(s))},$U=(t,s)=>{pu(t,pp(zk(s),QI(s)))},jk=(t,s,a,c)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-c),gw=(t,s,a,c)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+c),WR=(t,s,a)=>Math.max(s,Math.min(a,t)),r6=(t,s,a,c,d)=>d.fold(()=>{const g=t-s,p=Math.round(g/c)*c;return WR(s+p,s-1,a+1)},g=>{const p=(t-g)%c,x=Math.round(p/c),T=Math.floor((t-g)/c),O=Math.floor((a-g)/c),D=Math.min(O,T+x),L=g+D*c;return Math.max(g,L)}),a6=(t,s,a)=>Math.min(a,Math.max(t,s))-s,ZR=t=>{const{min:s,max:a,range:c,value:d,step:g,snap:p,snapStart:x,rounded:T,hasMinEdge:O,hasMaxEdge:D,minBound:L,maxBound:H,screenRange:q}=t,J=O?s-1:s,re=D?a+1:a;if(d<L)return J;if(d>H)return re;{const de=a6(d,L,H),oe=WR(de/q*c+s,J,re);return p&&oe>=s&&oe<=a?r6(oe,s,a,g,x):T?Math.round(oe):oe}},Gk=t=>{const{min:s,max:a,range:c,value:d,hasMinEdge:g,hasMaxEdge:p,maxBound:x,maxOffset:T,centerMinEdge:O,centerMaxEdge:D}=t;return d<s?g?0:O:d>a?p?x:D:(d-s)/c*T},qR="top",Kk="right",bb="bottom",Xk="left",i6="width",c6="height",mf=t=>t.element.dom.getBoundingClientRect(),bd=(t,s)=>t[s],vb=t=>{const s=mf(t);return bd(s,Xk)},l6=t=>{const s=mf(t);return bd(s,Kk)},Yk=t=>{const s=mf(t);return bd(s,qR)},jR=t=>{const s=mf(t);return bd(s,bb)},GR=t=>{const s=mf(t);return bd(s,i6)},Jk=t=>{const s=mf(t);return bd(s,c6)},KR=(t,s,a)=>(t+s)/2-a,Vi=(t,s)=>{const a=mf(t),c=mf(s),d=bd(a,Xk),g=bd(a,Kk),p=bd(c,Xk);return KR(d,g,p)},XR=(t,s)=>{const a=mf(t),c=mf(s),d=bd(a,qR),g=bd(a,bb),p=bd(c,qR);return KR(d,g,p)},Qk=(t,s)=>{Gt(t,hw(),{value:s})},YR=(t,s,a)=>{const c={min:fb(s),max:hb(s),range:pb(s),value:a,step:ey(s),snap:e6(s),snapStart:UR(s),rounded:t6(s),hasMinEdge:Zk(s),hasMaxEdge:qk(s),minBound:vb(t),maxBound:l6(t),screenRange:GR(t)};return ZR(c)},u6=(t,s,a)=>{const c=YR(t,s,a);return Qk(t,c),c},HU=(t,s)=>{const a=fb(s);Qk(t,a)},VU=(t,s)=>{const a=hb(s);Qk(t,a)},zU=(t,s,a,c)=>{const g=(t>0?gw:jk)(Bh(a),fb(a),hb(a),ey(a,c));return Qk(s,g),R.some(g)},JR=t=>(s,a,c)=>zU(t,s,a,c).map(Ft),ff=t=>HR(t).map(a=>a.left),QR=(t,s,a,c,d)=>{const p=GR(t),x=c.bind(D=>R.some(Vi(D,t))).getOr(0),T=d.bind(D=>R.some(Vi(D,t))).getOr(p),O={min:fb(s),max:hb(s),range:pb(s),value:a,hasMinEdge:Zk(s),hasMaxEdge:qk(s),minBound:vb(t),maxBound:l6(t),maxOffset:p,centerMinEdge:x,centerMaxEdge:T};return Gk(O)},e4=(t,s,a,c,d,g)=>{const p=QR(s,g,a,c,d);return vb(s)-vb(t)+p},t4=(t,s,a,c)=>{const d=Bh(a),g=e4(t,c.getSpectrum(t),d,c.getLeftEdge(t),c.getRightEdge(t),a),p=Rn(s.element)/2;En(s.element,"left",g-p+"px")},eD=JR(-1),UU=JR(1),WU=R.none,ZU=R.none,qU={"top-left":R.none(),top:R.none(),"top-right":R.none(),right:R.some(PU),"bottom-right":R.none(),bottom:R.none(),"bottom-left":R.none(),left:R.some(FU)};var jU=Object.freeze({__proto__:null,setValueFrom:u6,setToMin:HU,setToMax:VU,findValueOfOffset:YR,getValueFromEvent:ff,findPositionOfValue:e4,setPositionFromValue:t4,onLeft:eD,onRight:UU,onUp:WU,onDown:ZU,edgeActions:qU});const n4=(t,s)=>{Gt(t,hw(),{value:s})},tD=(t,s,a)=>{const c={min:gp(s),max:gb(s),range:zR(s),value:a,step:ey(s),snap:e6(s),snapStart:UR(s),rounded:t6(s),hasMinEdge:n6(s),hasMaxEdge:nl(s),minBound:Yk(t),maxBound:jR(t),screenRange:Jk(t)};return ZR(c)},d6=(t,s,a)=>{const c=tD(t,s,a);return n4(t,c),c},GU=(t,s)=>{const a=gp(s);n4(t,a)},hf=(t,s)=>{const a=gb(s);n4(t,a)},o4=(t,s,a,c)=>{const g=(t>0?gw:jk)(Bh(a),gp(a),gb(a),ey(a,c));return n4(s,g),R.some(g)},m6=t=>(s,a,c)=>o4(t,s,a,c).map(Ft),KU=t=>HR(t).map(a=>a.top),f6=(t,s,a,c,d)=>{const p=Jk(t),x=c.bind(D=>R.some(XR(D,t))).getOr(0),T=d.bind(D=>R.some(XR(D,t))).getOr(p),O={min:gp(s),max:gb(s),range:zR(s),value:a,hasMinEdge:n6(s),hasMaxEdge:nl(s),minBound:Yk(t),maxBound:jR(t),maxOffset:p,centerMinEdge:x,centerMaxEdge:T};return Gk(O)},s4=(t,s,a,c,d,g)=>{const p=f6(s,g,a,c,d);return Yk(s)-Yk(t)+p},nD=(t,s,a,c)=>{const d=Bh(a),g=s4(t,c.getSpectrum(t),d,c.getTopEdge(t),c.getBottomEdge(t),a),p=nr(s.element)/2;En(s.element,"top",g-p+"px")},r4=R.none,pw=R.none,bw=m6(-1),h6=m6(1),g6={"top-left":R.none(),top:R.some(RU),"top-right":R.none(),right:R.none(),"bottom-right":R.none(),bottom:R.some(LU),"bottom-left":R.none(),left:R.none()};var p6=Object.freeze({__proto__:null,setValueFrom:d6,setToMin:GU,setToMax:hf,findValueOfOffset:tD,getValueFromEvent:KU,findPositionOfValue:s4,setPositionFromValue:nD,onLeft:r4,onRight:pw,onUp:bw,onDown:h6,edgeActions:g6});const vw=(t,s)=>{Gt(t,hw(),{value:s})},a4=(t,s)=>({x:t,y:s}),XU=(t,s,a)=>{const c=YR(t,s,a.left),d=tD(t,s,a.top),g=a4(c,d);return vw(t,g),g},YU=(t,s,a,c,d)=>{const g=t>0?gw:jk,p=s?Bh(c).x:g(Bh(c).x,fb(c),hb(c),ey(c,d)),x=s?g(Bh(c).y,gp(c),gb(c),ey(c,d)):Bh(c).y;return vw(a,a4(p,x)),R.some(p)},i4=(t,s)=>(a,c,d)=>YU(t,s,a,c,d).map(Ft),JU=(t,s)=>{const a=fb(s),c=gp(s);vw(t,a4(a,c))},b6=(t,s)=>{const a=hb(s),c=gb(s);vw(t,a4(a,c))},v6=t=>HR(t),QU=(t,s,a,c)=>{const d=Bh(a),g=e4(t,c.getSpectrum(t),d.x,c.getLeftEdge(t),c.getRightEdge(t),a),p=s4(t,c.getSpectrum(t),d.y,c.getTopEdge(t),c.getBottomEdge(t),a),x=Rn(s.element)/2,T=nr(s.element)/2;En(s.element,"left",g-x+"px"),En(s.element,"top",p-T+"px")},y6=i4(-1,!1),eW=i4(1,!1),C6=i4(-1,!0),yb=i4(1,!0),tW={"top-left":R.some(o6),top:R.some(DU),"top-right":R.some(MU),right:R.some(NU),"bottom-right":R.some(BU),bottom:R.some(s6),"bottom-left":R.some(IU),left:R.some($U)};var S6=Object.freeze({__proto__:null,setValueFrom:XU,setToMin:JU,setToMax:b6,getValueFromEvent:v6,setPositionFromValue:QU,onLeft:y6,onRight:eW,onUp:C6,onDown:yb,edgeActions:tW});const nW=[Se("stepSize",1),Se("speedMultiplier",10),Se("onChange",Y),Se("onChoose",Y),Se("onInit",Y),Se("onDragStart",Y),Se("onDragEnd",Y),Se("snapToGrid",!1),Se("rounded",!0),no("snapStart"),Ri("model",Za("mode",{x:[Se("minX",0),Se("maxX",100),ui("value",t=>Wt(t.mode.minX)),Ze("getInitialValue"),us("manager",jU)],y:[Se("minY",0),Se("maxY",100),ui("value",t=>Wt(t.mode.minY)),Ze("getInitialValue"),us("manager",p6)],xy:[Se("minX",0),Se("maxX",100),Se("minY",0),Se("maxY",100),ui("value",t=>Wt({x:t.mode.minX,y:t.mode.minY})),Ze("getInitialValue"),us("manager",S6)]})),qr("sliderBehaviours",[jt,Et]),ui("mouseIsDown",()=>Wt(!1))],vd=Ba({name:"Slider",configFields:nW,partFields:AU,factory:(t,s,a,c)=>{const d=Pe=>mu(Pe,t,"thumb"),g=Pe=>mu(Pe,t,"spectrum"),p=Pe=>Bo(Pe,t,"left-edge"),x=Pe=>Bo(Pe,t,"right-edge"),T=Pe=>Bo(Pe,t,"top-edge"),O=Pe=>Bo(Pe,t,"bottom-edge"),D=t.model,L=D.manager,H=(Pe,Ct)=>{L.setPositionFromValue(Pe,Ct,t,{getLeftEdge:p,getRightEdge:x,getTopEdge:T,getBottomEdge:O,getSpectrum:g})},q=(Pe,Ct)=>{D.value.set(Ct);const tt=d(Pe);H(Pe,tt)},J=(Pe,Ct)=>{q(Pe,Ct);const tt=d(Pe);return t.onChange(Pe,tt,Ct),R.some(!0)},re=Pe=>{L.setToMin(Pe,t)},de=Pe=>{L.setToMax(Pe,t)},oe=Pe=>{const Ct=()=>{Bo(Pe,t,"thumb").each(Be=>{const At=D.value.get();t.onChoose(Pe,Be,At)})},tt=t.mouseIsDown.get();t.mouseIsDown.set(!1),tt&&Ct()},fe=(Pe,Ct)=>{Ct.stop(),t.mouseIsDown.set(!0),t.onDragStart(Pe,d(Pe))},he=(Pe,Ct)=>{Ct.stop(),t.onDragEnd(Pe,d(Pe)),oe(Pe)},ke=Pe=>{Bo(Pe,t,"spectrum").map(jt.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Gs(t.sliderBehaviours,[jt.config({mode:"special",focusIn:ke}),Et.config({store:{mode:"manual",getValue:Pe=>D.value.get(),setValue:q}}),Bi.config({channels:{[pv()]:{onReceive:oe}}})]),events:No([$e(hw(),(Pe,Ct)=>{J(Pe,Ct.event.value)}),vo((Pe,Ct)=>{const tt=D.getInitialValue();D.value.set(tt);const Be=d(Pe);H(Pe,Be);const At=g(Pe);t.onInit(Pe,Be,At,D.value.get())}),$e(gl(),fe),$e(qu(),he),$e(pc(),(Pe,Ct)=>{ke(Pe),fe(Pe,Ct)}),$e(ju(),he)]),apis:{resetToMin:re,resetToMax:de,setValue:q,refresh:H},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),oD=Mt("rgb-hex-update"),sD=Mt("slider-update"),w6=Mt("palette-update"),x6=(t,s)=>{const a=vd.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),c=vd.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return vd.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ne(0)},components:[a,c],sliderBehaviours:rt([gn.config({})]),onChange:(d,g,p)=>{Ve(d.element,"aria-valuenow",Math.floor(360-p*3.6)),Gt(d,sD,{value:p})}})},c4="form",Lh=[qr("formBehaviours",[Et])],l4=t=>"<alloy.field."+t+">",E6=t=>{const s=(()=>{const g=[];return{field:(x,T)=>(g.push(x),wv(c4,l4(x),T)),record:ne(g)}})(),a=t(s),c=s.record(),d=qe(c,g=>ba({name:g,pname:l4(g)}));return K1(c4,Lh,d,rD,a)},T6=(t,s)=>t.fold(()=>In.error(s),In.value),rD=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Gs(t.formBehaviours,[Et.config({store:{mode:"manual",getValue:a=>{const c=TT(a,t);return Io(c,(d,g)=>d().bind(p=>{const x=Xn.getCurrent(p);return T6(x,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+bl(p.element)))}).map(Et.getValue))},setValue:(a,c)=>{_s(c,(d,g)=>{Bo(a,t,g).each(p=>{Xn.getCurrent(p).each(x=>{Et.setValue(x,d)})})})}}})]),apis:{getField:(a,c)=>Bo(a,t,c).bind(Xn.getCurrent)}}),Cb={getField:kg((t,s,a)=>t.getField(s,a)),sketch:E6},yw=Mt("valid-input"),aD=Mt("invalid-input"),iD=Mt("validating-input"),cD="colorcustom.rgb.",oW={isEnabled:Ft,setEnabled:Y,immediatelyShow:Y,immediatelyHide:Y},sW=(t,s,a,c,d,g)=>{const p=(re,de)=>{const oe=de.get();re!==oe.isEnabled()&&(oe.setEnabled(re),re?oe.immediatelyShow():oe.immediatelyHide())},x=(re,de,oe)=>wm.config({invalidClass:s("invalid"),notify:{onValidate:fe=>{Gt(fe,iD,{type:re})},onValid:fe=>{p(!1,oe),Gt(fe,yw,{type:re,value:Et.getValue(fe)})},onInvalid:fe=>{p(!0,oe),Gt(fe,aD,{type:re,value:Et.getValue(fe)})}},validator:{validate:fe=>{const he=Et.getValue(fe),ke=de(he)?In.value(!0):In.error(t("aria.input.invalid"));return Ja.pure(ke)},validateOnLoad:!1}}),T=(re,de,oe,fe,he)=>{const ke=Wt(oW),Pe=t(cD+"range"),Ct=Hn.parts.label({dom:{tag:"label"},components:[Vo(oe)]}),tt=Hn.parts.field({data:he,factory:Dh,inputAttributes:{type:"text","aria-label":fe,...de==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:rt([x(de,re,ke),zo.config({}),fs.config({...d({tooltipText:"",onSetup:Tn=>{ke.set({isEnabled:()=>fs.isEnabled(Tn),setEnabled:$t=>fs.setEnabled(Tn,$t),immediatelyShow:()=>fs.immediateOpenClose(Tn,!0),immediatelyHide:()=>fs.immediateOpenClose(Tn,!1)}),fs.setEnabled(Tn,!1)},onShow:(Tn,$t)=>{fs.setComponents(Tn,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[Vo(t(de==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:Tn=>{wm.isInvalid(Tn)&&wm.run(Tn).get(Y)}}),Be=Mt("aria-invalid"),At=io(g("invalid",R.some(Be),"warning")),cn=io({dom:{tag:"div",classes:[s("invalid-icon")]},components:[At.asSpec()]}),en=[Ct,tt,cn.asSpec()],$n=de!=="hex"?[Hn.parts["aria-descriptor"]({text:Pe})]:[],vn=en.concat($n);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:vn}},O=(re,de)=>{const oe=XS(de);return Cb.getField(re,"hex").each(fe=>{gn.isFocused(fe)||Et.setValue(re,{hex:oe.value})}),oe},D=(re,de)=>{const oe=de.red,fe=de.green,he=de.blue;Et.setValue(re,{red:oe,green:fe,blue:he})},L=io({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),H=(re,de)=>{L.getOpt(re).each(oe=>{En(oe.element,"background-color","#"+de.value)})};return Fi({factory:()=>{const re={red:Wt(R.some(255)),green:Wt(R.some(255)),blue:Wt(R.some(255)),hex:Wt(R.some("ffffff"))},de=($t,et)=>{const vt=YS(et);D($t,vt),ke(vt)},oe=$t=>re[$t].get(),fe=($t,et)=>{re[$t].set(et)},he=()=>oe("red").bind($t=>oe("green").bind(et=>oe("blue").map(vt=>cb($t,et,vt,1)))),ke=$t=>{const et=$t.red,vt=$t.green,fn=$t.blue;fe("red",R.some(et)),fe("green",R.some(vt)),fe("blue",R.some(fn))},Pe=($t,et)=>{const vt=et.event;vt.type!=="hex"?fe(vt.type,R.none()):c($t)},Ct=($t,et)=>{a($t);const vt=ML(et);fe("hex",R.some(vt.value));const fn=YS(vt);D($t,fn),ke(fn),Gt($t,oD,{hex:vt}),H($t,vt)},tt=($t,et,vt)=>{const fn=parseInt(vt,10);fe(et,R.some(fn)),he().each(An=>{const Jt=O($t,An);Gt($t,oD,{hex:Jt}),H($t,Jt)})},Be=$t=>$t.type==="hex",At=($t,et)=>{const vt=et.event;Be(vt)?Ct($t,vt.value):tt($t,vt.type,vt.value)},cn=$t=>({label:t(cD+$t+".label"),description:t(cD+$t+".description")}),en=cn("red"),$n=cn("green"),vn=cn("blue"),Tn=cn("hex");return Rt(Cb.sketch($t=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[$t.field("red",Hn.sketch(T(_k,"red",en.label,en.description,255))),$t.field("green",Hn.sketch(T(_k,"green",$n.label,$n.description,255))),$t.field("blue",Hn.sketch(T(_k,"blue",vn.label,vn.description,255))),$t.field("hex",Hn.sketch(T(BL,"hex",Tn.label,Tn.description,"ffffff"))),L.asSpec()],formBehaviours:rt([wm.config({invalidClass:s("form-invalid")}),wn("rgb-form-events",[$e(yw,At),$e(aD,Pe),$e(iD,Pe)])])})),{apis:{updateHex:($t,et)=>{Et.setValue($t,{hex:et.value}),de($t,et),H($t,et)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(re,de,oe)=>{re.updateHex(de,oe)}},extraApis:{}})},rW=(t,s)=>{const a=vd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),c=vd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(O,D)=>{const{width:L,height:H}=O,q=O.getContext("2d");if(q===null)return;q.fillStyle=D,q.fillRect(0,0,L,H);const J=q.createLinearGradient(0,0,L,0);J.addColorStop(0,"rgba(255,255,255,1)"),J.addColorStop(1,"rgba(255,255,255,0)"),q.fillStyle=J,q.fillRect(0,0,L,H);const re=q.createLinearGradient(0,0,0,H);re.addColorStop(0,"rgba(0,0,0,0)"),re.addColorStop(1,"rgba(0,0,0,1)"),q.fillStyle=re,q.fillRect(0,0,L,H)},g=(O,D)=>{const L=O.components()[0].element.dom,H=JS(D,100,100),q=VL(H);d(L,UL(q))},p=(O,D)=>{const L=QS(YS(D));vd.setValue(O,{x:L.saturation,y:100-L.value}),Ve(O.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",L.saturation,L.value]))};return Fi({factory:O=>{const D=ne({x:0,y:0}),L=(J,re,de)=>{Vt(de)||Ve(J.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(de.x),Math.floor(100-de.y)])),Gt(J,w6,{value:de})},H=(J,re,de,oe)=>{d(de.element.dom,UL(WL))},q=rt([Xn.config({find:R.some}),gn.config({})]);return vd.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:D},rounded:!1,components:[a,c],onChange:L,onInit:H,sliderBehaviours:q})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(O,D,L)=>{g(D,L)},setThumb:(O,D,L)=>{p(D,L)}},extraApis:{}})},aW=(t,s,a,c)=>{const d=p=>{const x=sW(t,s,p.onValidHex,p.onInvalidHex,a,c),T=rW(t,s),O=Be=>(100-Be)/100*360,D=Be=>100-Be/360*100,L={paletteRgba:Wt(WL),paletteHue:Wt(0)},H=io(x6(t,s)),q=io(T.sketch({})),J=io(x.sketch({})),re=(Be,At,cn)=>{q.getOpt(Be).each(en=>{T.setHue(en,cn)})},de=(Be,At)=>{J.getOpt(Be).each(cn=>{x.updateHex(cn,At)})},oe=(Be,At,cn)=>{H.getOpt(Be).each(en=>{vd.setValue(en,D(cn))})},fe=(Be,At)=>{q.getOpt(Be).each(cn=>{T.setThumb(cn,At)})},he=(Be,At)=>{const cn=YS(Be);L.paletteRgba.set(cn),L.paletteHue.set(At)},ke=(Be,At,cn,en)=>{he(At,cn),Ot(en,$n=>{$n(Be,At,cn)})},Pe=()=>{const Be=[de];return(At,cn)=>{const en=cn.event.value,$n=L.paletteHue.get(),vn=JS($n,en.x,100-en.y),Tn=YL(vn);ke(At,Tn,$n,Be)}},Ct=()=>{const Be=[re,de];return(At,cn)=>{const en=O(cn.event.value),$n=L.paletteRgba.get(),vn=QS($n),Tn=JS(en,vn.saturation,vn.value),$t=YL(Tn);ke(At,$t,en,Be)}},tt=()=>{const Be=[re,oe,fe];return(At,cn)=>{const en=cn.event.hex,$n=ca(en);ke(At,en,$n.hue,Be)}};return{uid:p.uid,dom:p.dom,components:[q.asSpec(),H.asSpec(),J.asSpec()],behaviours:rt([wn("colour-picker-events",[$e(oD,tt()),$e(w6,Pe()),$e(sD,Ct())]),Xn.config({find:Be=>J.getOpt(Be)}),jt.config({mode:"acyclic"})])}};return Fi({name:"ColourPicker",configFields:[Ze("dom"),Se("onValidHex",Y),Se("onInvalidHex",Y)],factory:d})},yd={self:()=>Xn.config({find:R.some}),memento:t=>Xn.config({find:t.getOpt}),childAt:t=>Xn.config({find:s=>cl(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},lW=dn([Se("preprocess",at),Se("postprocess",at)]),u4=(t,s)=>{const a=lr("RepresentingConfigs.memento processors",lW,s);return Et.config({store:{mode:"manual",getValue:c=>{const d=t.get(c),g=Et.getValue(d);return a.postprocess(g)},setValue:(c,d)=>{const g=a.preprocess(d),p=t.get(c);Et.setValue(p,g)}}})},Sb=(t,s,a)=>Et.config({store:{mode:"manual",...t.map(c=>({initialValue:c})).getOr({}),getValue:s,setValue:a}}),k6=(t,s,a)=>Sb(t,c=>s(c.element),(c,d)=>a(c.element,d)),_6=t=>k6(t,N2,Is),Cw=t=>Et.config({store:{mode:"memory",initialValue:t}}),uW={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},dW=t=>s=>te(s)?t.translate(uW[s]):t.translate(s),lD=(t,s,a)=>{const c=O=>"tox-"+O,d=(O,D,L=O,H=O)=>_l(L,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+O],attributes:{title:s.translate(H),"aria-live":"polite",...D.fold(()=>({}),q=>({id:q}))}},s.icons),g=aW(dW(s),c,s.tooltips.getConfig,d),p=O=>{Gt(O,tl,{name:"hex-valid",value:!0})},x=O=>{Gt(O,tl,{name:"hex-valid",value:!1})},T=io(g.sketch({dom:{tag:"div",classes:[c("color-picker-container")],attributes:{role:"presentation"}},onValidHex:p,onInvalidHex:x}));return{dom:{tag:"div"},components:[T.asSpec()],behaviours:rt([Sb(a,O=>{const D=T.get(O);return Xn.getCurrent(D).bind(q=>Et.getValue(q).hex).map(q=>"#"+jh(q,"#")).getOr("")},(O,D)=>{const L=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,H=R.from(L.exec(D)).bind(re=>ps(re,1)),q=T.get(O);Xn.getCurrent(q).fold(()=>{console.log("Can not find form")},re=>{Et.setValue(re,{hex:H.getOr("")}),Cb.getField(re,"hex").each(de=>{Wn(de,bc())})})}),yd.self()])}};var mW=tinymce.util.Tools.resolve("tinymce.Resource");const uD=t=>Jn(t,"init"),fW=t=>{const s=uo(),a=io({dom:{tag:t.tag}}),c=uo(),d=!uD(t)&&t.onFocus.isSome()?[gn.config({onFocus:g=>{t.onFocus.each(p=>{p(g.element.dom)})}}),zo.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:rt([wn("custom-editor-events",[vo(g=>{a.getOpt(g).each(p=>{(uD(t)?t.init(p.element.dom):mW.load(t.scriptId,t.scriptUrl).then(x=>x(p.element.dom,t.settings))).then(x=>{c.on(T=>{x.setValue(T)}),c.clear(),s.set(x)})})})]),Sb(R.none(),()=>s.get().fold(()=>c.get().getOr(""),g=>g.getValue()),(g,p)=>{s.get().fold(()=>c.set(p),x=>x.setValue(p))}),yd.self()].concat(d)),components:[a.asSpec()]}};var Ih=tinymce.util.Tools.resolve("tinymce.util.Tools");const dD=Mt("browse.files.event"),A6=(t,s)=>{const a=Ih.explode(s.getOption("images_file_types")),c=d=>wr(a,g=>wi(d.name.toLowerCase(),`.${g.toLowerCase()}`));return Eo(ti(t),c)},O6=(t,s,a)=>{const c=(H,q)=>{q.stop()},d=H=>(q,J)=>{Ot(H,re=>{re(q,J)})},g=(H,q)=>{var J;if(!Nt.isDisabled(H)){const re=q.event.raw;Gt(H,dD,{files:(J=re.dataTransfer)===null||J===void 0?void 0:J.files})}},p=(H,q)=>{const J=q.event.raw.target;Gt(H,dD,{files:J.files})},x=(H,q)=>{q&&(Et.setValue(H,A6(q,s)),Gt(H,kc,{name:t.name}))},T=io({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:rt([wn("input-file-events",[Yu(Xd()),Yu(Gu())])])}),O=t.label.map(H=>fp(H,s)),D=Hn.parts.field({factory:Nr,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Vo(s.translate("Browse for an image")),T.asSpec()],action:H=>{T.get(H).element.dom.click()},buttonBehaviours:rt([yd.self(),Cw(a.getOr([])),zo.config({}),Rl.button(()=>s.checkUiComponentContext(t.context).shouldDisable),rr(()=>s.checkUiComponentContext(t.context))])}),L={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:rt([Nt.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),rr(()=>s.checkUiComponentContext(t.context)),Mn.config({toggleClass:"dragenter",toggleOnExecute:!1}),wn("dropzone-events",[$e("dragenter",d([c,Mn.toggle])),$e("dragleave",d([c,Mn.toggle])),$e("dragover",c),$e("drop",d([c,g])),$e(iu(),p)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Vo(s.translate("Drop an image here"))]},D]}]};return cw(O,L,["tox-form__group--stretched"],[wn("handle-files",[$e(dD,(H,q)=>{Hn.getField(H).each(J=>{x(J,q.event.files)})})])])},hW=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:qe(t.items,s.interpreter)}),gW=(t,s)=>{let a=null,c=null;return{cancel:()=>{nt(a)||(clearTimeout(a),a=null,c=null)},throttle:(...p)=>{c=p,nt(a)&&(a=setTimeout(()=>{const x=c;a=null,c=null,t.apply(null,x)},s))}}},pW=(t,s)=>{let a=null;return{cancel:()=>{nt(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{nt(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},mD=(t,s)=>{let a=null;const c=()=>{nt(a)||(clearTimeout(a),a=null)};return{cancel:c,throttle:(...g)=>{c(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},d4=Mt("alloy-fake-before-tabstop"),fD=Mt("alloy-fake-after-tabstop"),hD=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:rt([gn.config({ignore:!0}),zo.config({})])}),R6=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[hD([d4]),s,hD([fD])],behaviours:rt([yd.childAt(1)])}),D6=(t,s)=>{Gt(t,Ki(),{raw:{which:9,shiftKey:s}})},bW=(t,s)=>{const a=s.element;Na(a,d4)?D6(t,!0):Na(a,fD)&&D6(t,!1)},Sw=t=>aw(t,["."+d4,"."+fD].join(","),On),m4=Mt("update-dialog"),M6=Mt("update-title"),P6=Mt("update-body"),N6=Mt("update-footer"),B6=Mt("body-send-message"),ny=Mt("dialog-focus-shifted"),gD=xs().browser,ww=gD.isSafari(),vW=gD.isFirefox(),oy=ww||vW,pD=gD.isChromium(),yW=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,L6=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),bD=(t,s)=>{const a=t.body;return R.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!pD&&!ww||st(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},I6=(t,s,a)=>{const c=t.dom;R.from(c.contentDocument).fold(a,d=>{let g=0;const p=bD(d,s).map(T=>(g=T.scrollTop,T)).forall(yW),x=()=>{const T=c.contentWindow;st(T)&&(p?L6(T,"bottom"):!p&&oy&&g!==0&&L6(T,g))};ww&&c.addEventListener("load",x,{once:!0}),d.open(),d.write(s),d.close(),ww||x()})},$6=un(oy,ww?500:200).map(t=>gW(I6,t)),CW=(t,s)=>{const a=Wt(t.getOr(""));return{getValue:c=>a.get(),setValue:(c,d)=>{if(a.get()!==d){const g=c.element,p=()=>Ve(g,"srcdoc",d);s?$6.fold(ne(I6),x=>x.throttle)(g,d,p):p()}a.set(d)}}},SW=(t,s,a)=>{const c="tox-dialog__iframe",d=t.transparent?[]:[`${c}--opaque`],g=t.border?["tox-navobj-bordered"]:[],p={...t.label.map(L=>({title:L})).getOr({}),...a.map(L=>({srcdoc:L})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},x=CW(a,t.streamContent),T=t.label.map(L=>fp(L,s)),O=L=>R6(R.from(g),{uid:L.uid,dom:{tag:"iframe",attributes:p,classes:[c,...d]},behaviours:rt([zo.config({}),gn.config({}),Sb(a,x.getValue,x.setValue),Bi.config({channels:{[ny]:{onReceive:(H,q)=>{q.newFocus.each(J=>{$c(H.element).each(re=>{(Kn(H.element,J)?qs:ao)(re,"tox-navobj-bordered-focus")})})}}}})])}),D=Hn.parts.field({factory:{sketch:O}});return cw(T,D,["tox-form__group--stretched"],[])},H6=(t,s,a,c,d)=>{const g=a*d,p=c*d,x=Math.max(0,t/2-g/2),T=Math.max(0,s/2-p/2);return{left:x.toString()+"px",top:T.toString()+"px",width:g.toString()+"px",height:p.toString()+"px"}},V6=(t,s,a)=>{const c=Rn(t),d=nr(t);return Math.min(c/s,d/a,1)},wW=(t,s)=>{const a=Wt(s.getOr({url:""})),c=io({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(T=>({src:T.url})).getOr({})}}),d=io({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[c.asSpec()]}),g=(T,O)=>{const D={url:O.url};O.zoom.each(H=>D.zoom=H),O.cachedWidth.each(H=>D.cachedWidth=H),O.cachedHeight.each(H=>D.cachedHeight=H),a.set(D);const L=()=>{const{cachedWidth:H,cachedHeight:q,zoom:J}=D;if(!Ht(H)&&!Ht(q)){if(Ht(J)){const de=V6(T.element,H,q);D.zoom=de}const re=H6(Rn(T.element),nr(T.element),H,q,D.zoom);d.getOpt(T).each(de=>{ta(de.element,re)})}};c.getOpt(T).each(H=>{const q=H.element;O.url!==Ln(q,"src")&&(Ve(q,"src",O.url),ao(T.element,"tox-imagepreview__loaded")),L(),rR(q).then(J=>{T.getSystem().isConnected()&&(qs(T.element,"tox-imagepreview__loaded"),D.cachedWidth=J.dom.naturalWidth,D.cachedHeight=J.dom.naturalHeight,L())})})},p={};t.height.each(T=>p.height=T);const x=s.map(T=>({url:T.url,zoom:R.from(T.zoom),cachedWidth:R.from(T.cachedWidth),cachedHeight:R.from(T.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:p,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:rt([yd.self(),Sb(x,()=>a.get(),g)])}},z6=(t,s,a)=>{const c="tox-label",d=t.align==="center"?[`${c}--center`]:[],g=t.align==="end"?[`${c}--end`]:[],p=io({dom:{tag:"label",classes:[c,...d,...g]},components:[Vo(s.providers.translate(t.label))]}),x=qe(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[p.asSpec(),...x],behaviours:rt([yd.self(),Sn.config({}),_6(R.none()),jt.config({mode:"acyclic"}),wn("label",[vo(T=>{t.for.each(O=>{a(O).each(D=>{p.getOpt(T).each(L=>{var H;const q=(H=Ln(D.element,"id"))!==null&&H!==void 0?H:Mt("form-field");Ve(D.element,"id",q),Ve(L.element,"for",q)})})})})])])}},f4=Mt("toolbar.button.execute"),xW=t=>cu((s,a)=>{jv(t,s)(c=>{Gt(s,f4,{buttonApi:c}),t.onAction(c)})}),Fh=Mt("common-button-display-events"),vD={[Di()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Xi()]:["toolbar-button-events",Fh],[ma()]:["toolbar-button-events","dropdown-events","tooltipping"],[pc()]:["focusing","alloy.base.behaviour",Fh]},h4=t=>En(t.element,"width",Xe(t.element,"width")),U6=(t,s,a)=>_l(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),yD=(t,s)=>U6(t,s,[]),bp=(t,s)=>U6(t,s,[Sn.config({})]),CD=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Vo(a.translate(t))],behaviours:rt([Sn.config({})])}),bu=Mt("update-menu-text"),vp=Mt("update-menu-icon"),W6=Mt("update-tooltip-text"),SD=(t,s,a,c)=>{const d=Wt(Y),g=Wt(t.tooltip),p=t.text.map(de=>io(CD(de,s,a.providers))),x=t.icon.map(de=>io(bp(de,a.providers.icons))),T=(de,oe)=>{const fe=Et.getValue(de);return gn.focus(fe),Gt(fe,"keydown",{raw:oe.event.raw}),el.close(fe),R.some(!0)},O=t.role.fold(()=>({}),de=>({role:de})),D=R.from(t.listRole).map(de=>({listRole:de})).getOr({}),L=t.ariaLabel.fold(()=>({}),de=>({"aria-label":a.providers.translate(de)})),H=_l("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),q=Mt("common-button-display-events"),J="dropdown-events";return io(el.sketch({...t.uid?{uid:t.uid}:{},...O,...D,dom:{tag:"button",classes:[s,`${s}--select`].concat(qe(t.classes,de=>`${s}--${de}`)),attributes:{...L,...st(c)?{"data-mce-name":c}:{}}},components:Cm([x.map(de=>de.asSpec()),p.map(de=>de.asSpec()),R.some(H)]),matchWidth:!0,useMinWidth:!0,onOpen:(de,oe,fe)=>{t.searchable&&sw(fe)},dropdownBehaviours:rt([...t.dropdownBehaviours,Rl.button(()=>t.disabled||a.providers.checkUiComponentContext(t.context).shouldDisable),rr(()=>a.providers.checkUiComponentContext(t.context)),mw.config({}),Sn.config({}),...t.tooltip.map(de=>fs.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(de),onShow:oe=>{if(ni(g.get(),t.tooltip,(fe,he)=>he!==fe).getOr(!1)){const fe=a.providers.translate(g.get().getOr(""));fs.setComponents(oe,a.providers.tooltips.getComponents({tooltipText:fe}))}}}))).toArray(),wn(J,[hd(t,d),dp(t,d)]),wn(q,[vo((de,oe)=>{t.listRole!=="listbox"&&h4(de)})]),wn("update-dropdown-width-variable",[$e(Yd(),(de,oe)=>el.close(de))]),wn("menubutton-update-display-text",[$e(bu,(de,oe)=>{p.bind(fe=>fe.getOpt(de)).each(fe=>{Sn.set(fe,[Vo(a.providers.translate(oe.event.text))])})}),$e(vp,(de,oe)=>{x.bind(fe=>fe.getOpt(de)).each(fe=>{Sn.set(fe,[bp(oe.event.icon,a.providers.icons)])})}),$e(W6,(de,oe)=>{const fe=a.providers.translate(oe.event.text);Ve(de.element,"aria-label",fe),g.set(R.some(oe.event.text))})])]),eventOrder:Rt(vD,{[pc()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Xi()]:["toolbar-button-events",fs.name(),J,q]}),sandboxBehaviours:rt([jt.config({mode:"special",onLeft:T,onRight:T}),wn("dropdown-sandbox-events",[$e(qB,(de,oe)=>{db(de),oe.stop()}),$e(jB,(de,oe)=>{j9(de,oe),oe.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...Sk(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:ow,onCollapseMenu:(de,oe,fe)=>{K.getHighlighted(fe).each(he=>{ow(de,fe,he)})},onDehighlightItem:G9}}},getAnchorOverrides:()=>({maxHeightFunction:(de,oe)=>{fC()(de,oe-10)}}),fetch:de=>Ja.nu(ln(t.fetch,de))})).asSpec()},wD=t=>te(t),Z6=t=>t.type==="separator",EW=t=>Jn(t,"getSubmenuItems"),TW={type:"separator"},xD=(t,s)=>{const a=Wo(t,(c,d)=>wD(d)?d===""?c:d==="|"?c.length>0&&!Z6(c[c.length-1])?c.concat([TW]):c:Jn(s,d.toLowerCase())?c.concat([s[d.toLowerCase()]]):c:c.concat([d]),[]);return a.length>0&&Z6(a[a.length-1])&&a.pop(),a},kW=(t,s)=>{const a=t.getSubmenuItems(),c=j6(a,s),d=Rt(c.menus,{[t.value]:c.items}),g=Rt(c.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},q6=t=>{const s=Tt(t,"value").getOrThunk(()=>Mt("generated-menu-item"));return Rt({value:s},t)},j6=(t,s)=>{const a=xD(te(t)?t.split(" "):t,s);return Fs(a,(c,d)=>{if(EW(d)){const g=q6(d),p=kW(g,s);return{menus:Rt(c.menus,p.menus),items:[p.item,...c.items],expansions:Rt(c.expansions,p.expansions)}}else return{...c,items:[d,...c.items]}},{menus:{},expansions:{},items:[]})},G6=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),_W=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),sy=(t,s,a,c)=>{const d=Mt("primary-menu"),g=j6(t,a.shared.providers.menuItems());if(g.items.length===0)return R.none();const p=G6(c),x=kI(d,g.items,s,a,c.isHorizontalMenu,p),T=_W(c),O=Io(g.menus,(L,H)=>kI(H,L,s,a,!1,T)),D=Rt(O,Zu(d,x));return R.from(ep.tieredData(d,D,g.expansions))},g4=t=>!Jn(t,"items"),K6="data-value",X6=(t,s,a,c,d)=>qe(a,g=>g4(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===c,onAction:()=>{Et.setValue(t,g.value),Gt(t,kc,{name:s}),gn.focus(t)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>X6(t,s,g.items,c,d)}),p4=(t,s)=>ks(t,a=>g4(a)?un(a.value===s,a):p4(a.items,s)),AW=(t,s,a)=>{const c=wr(t.items,O=>!g4(O)),d=s.shared.providers,g=a.bind(O=>p4(t.items,O)).orThunk(()=>Yr(t.items).filter(g4)),p=t.label.map(O=>fp(O,d)),x=Hn.parts.field({dom:{},factory:{sketch:O=>SD({context:t.context,uid:O.uid,text:g.map(D=>D.text),icon:R.none(),tooltip:R.none(),role:un(!c,"combobox"),...c?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(D,L)=>{const H=X6(D,t.name,t.items,Et.getValue(D),c);L(sy(H,Al.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:R.none()}))},onSetup:ne(Y),getApi:ne({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[zo.config({}),Sb(g.map(D=>D.value),D=>Ln(D.element,K6),(D,L)=>{p4(t.items,L).each(H=>{Ve(D.element,K6,H.value),Gt(D,bu,{text:H.text})})})]},"tox-listbox",s.shared)}}),T={dom:{tag:"div",classes:["tox-listboxfield"]},components:[x]};return Hn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Cn([p.toArray(),[T]]),fieldBehaviours:rt([Nt.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:O=>{Hn.getField(O).each(Nt.disable)},onEnabled:O=>{Hn.getField(O).each(Nt.enable)}})])})},OW=(t,s)=>({dom:{tag:"div",classes:t.classes},components:qe(t.items,s.shared.interpreter)}),Y6=(t,s)=>{const a=qe(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),c=t.data.map(d=>Zu("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:Gs(t.selectBehaviours,[gn.config({}),Et.config({store:{mode:"manual",getValue:d=>sm(d.element),setValue:(d,g)=>{const p=Yr(t.options);yn(t.options,T=>T.value===g).isSome()?Ar(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&p.each(T=>Ar(d.element,T.value))},...c}})])}},RW=Fi({name:"HtmlSelect",configFields:[Ze("options"),qr("selectBehaviours",[gn,Et]),Se("selectClasses",[]),Se("selectAttributes",{}),no("data")],factory:Y6}),DW=(t,s,a)=>{const c=qe(t.items,T=>({text:s.translate(T.text),value:T.value})),d=t.label.map(T=>fp(T,s)),g=Hn.parts.field({dom:{},...a.map(T=>({data:T})).getOr({}),selectAttributes:{size:t.size},options:c,factory:RW,selectBehaviours:rt([Nt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),zo.config({}),wn("selectbox-change",[$e(iu(),(T,O)=>{Gt(T,kc,{name:t.name})})])])}),p=t.size>1?R.none():R.some(_l("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),x={dom:{tag:"div",classes:["tox-selectfield"]},components:Cn([[g],p.toArray()])};return Hn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Cn([d.toArray(),[x]]),fieldBehaviours:rt([Nt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:T=>{Hn.getField(T).each(Nt.disable)},onEnabled:T=>{Hn.getField(T).each(Nt.enable)}}),rr(()=>s.checkUiComponentContext(t.context))])})},MW=ne([Se("field1Name","field1"),Se("field2Name","field2"),ch("onLockedChange"),Gm(["lockClass"]),Se("locked",!1),Ec.field("coupledFieldBehaviours",[Xn,Et]),ss("onInput",Y)]),J6=(t,s,a)=>Bo(t,s,a).bind(Xn.getCurrent),Q6=(t,s)=>ba({factory:Hn,name:t,overrides:a=>({fieldBehaviours:rt([wn("coupled-input-behaviour",[$e(bc(),c=>{J6(c,a,s).each(d=>{Bo(c,a,"lock").each(g=>{Mn.isOn(g)&&a.onLockedChange(c,d,g),a.onInput(c)})})})])])})}),PW=ne([Q6("field1","field2"),Q6("field2","field1"),ba({factory:Nr,schema:[Ze("dom")],name:"lock",overrides:t=>({buttonBehaviours:rt([Mn.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),NW=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Ec.augment(t.coupledFieldBehaviours,[Xn.config({find:R.some}),Et.config({store:{mode:"manual",getValue:d=>{const g=Ev(d,t,["field1","field2"]);return{[t.field1Name]:Et.getValue(g.field1()),[t.field2Name]:Et.getValue(g.field2())}},setValue:(d,g)=>{const p=Ev(d,t,["field1","field2"]);Ha(g,t.field1Name)&&Et.setValue(p.field1(),g[t.field1Name]),Ha(g,t.field2Name)&&Et.setValue(p.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>Bo(d,t,"field1"),getField2:d=>Bo(d,t,"field2"),getLock:d=>Bo(d,t,"lock")}}),Ys=Ba({name:"FormCoupledInputs",configFields:MW(),partFields:PW(),factory:NW,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),ED=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let c=t.value.toFixed(a(t.unit));return c.indexOf(".")!==-1&&(c=c.replace(/\.?0*$/,"")),c+t.unit},xw=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const c=parseFloat(a[1]),d=a[2];return In.value({value:c,unit:d})}else return In.error(t)},Ew=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},c=d=>Jn(a,d);return t.unit===s?R.some(t.value):c(t.unit)&&c(s)?a[t.unit]===a[s]?R.some(t.value):R.some(t.value/a[t.unit]*a[s]):R.none()},b4=t=>R.none(),BW=(t,s)=>a=>Ew(a,s).map(c=>({value:c*t,unit:s})),eF=(t,s)=>{const a=xw(t).toOptional(),c=xw(s).toOptional();return ni(a,c,(d,g)=>Ew(d,g.unit).map(p=>g.value/p).map(p=>BW(p,g.unit)).getOr(b4)).getOr(b4)},LW=(t,s)=>{let a=b4;const c=Mt("ratio-event"),d=re=>_l(re,{tag:"span",classes:["tox-icon","tox-lock-icon__"+re]},s.icons),g=()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,p=rr(()=>s.checkUiComponentContext(t.context)),x=t.label.getOr("Constrain proportions"),T=s.translate(x),O=Ys.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":T,"data-mce-name":x}},components:[d("lock"),d("unlock")],buttonBehaviours:rt([Nt.config({disabled:g}),p,zo.config({}),fs.config(s.tooltips.getConfig({tooltipText:T}))])}),D=re=>({dom:{tag:"div",classes:["tox-form__group"]},components:re}),L=re=>Hn.parts.field({factory:Dh,inputClasses:["tox-textfield"],inputBehaviours:rt([Nt.config({disabled:g}),p,zo.config({}),wn("size-input-events",[$e(Uc(),(de,oe)=>{Gt(de,c,{isField1:re})}),$e(iu(),(de,oe)=>{Gt(de,kc,{name:t.name})})])]),selectOnFocus:!1}),H=re=>({dom:{tag:"label",classes:["tox-label"]},components:[Vo(s.translate(re))]}),q=Ys.parts.field1(D([Hn.parts.label(H("Width")),L(!0)])),J=Ys.parts.field2(D([Hn.parts.label(H("Height")),L(!1)]));return Ys.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[q,J,D([H(Mg),O])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(re,de,oe)=>{xw(Et.getValue(re)).each(fe=>{a(fe).each(he=>{Et.setValue(de,ED(he))})})},coupledFieldBehaviours:rt([Nt.config({disabled:g,onDisabled:re=>{Ys.getField1(re).bind(Hn.getField).each(Nt.disable),Ys.getField2(re).bind(Hn.getField).each(Nt.disable),Ys.getLock(re).each(Nt.disable)},onEnabled:re=>{Ys.getField1(re).bind(Hn.getField).each(Nt.enable),Ys.getField2(re).bind(Hn.getField).each(Nt.enable),Ys.getLock(re).each(Nt.enable)}}),rr(()=>s.checkUiComponentContext("mode:design")),wn("size-input-events2",[$e(c,(re,de)=>{const oe=de.event.isField1,fe=oe?Ys.getField1(re):Ys.getField2(re),he=oe?Ys.getField2(re):Ys.getField1(re),ke=fe.map(Et.getValue).getOr(""),Pe=he.map(Et.getValue).getOr("");a=eF(ke,Pe)})])])})},tF=(t,s,a)=>{const c=vd.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Vo(s.translate(t.label))]}),d=vd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=vd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return vd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:ne(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[c,d,g],sliderBehaviours:rt([yd.self(),gn.config({})]),onChoose:(p,x,T)=>{Gt(p,kc,{name:t.name,value:T})},onChange:(p,x,T)=>{Gt(p,kc,{name:t.name,value:T})}})},IW=(t,s)=>{const a=x=>({dom:{tag:"th",innerHtml:s.translate(x)}}),c=x=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:qe(x,a)}]}),d=x=>({dom:{tag:"td",innerHtml:s.translate(x)}}),g=x=>({dom:{tag:"tr"},components:qe(x,d)}),p=x=>({dom:{tag:"tbody"},components:qe(x,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[c(t.header),p(t.cells)],behaviours:rt([zo.config({}),gn.config({})])}},nF=(t,s)=>{const a=t.label.map(q=>fp(q,s)),c=[Nt.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),rr(()=>s.checkUiComponentContext(t.context)),jt.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:q=>(Wn(q,uw),R.some(!0))}),wn("textfield-change",[$e(bc(),(q,J)=>{Gt(q,kc,{name:t.name})}),$e(b0(),(q,J)=>{Gt(q,kc,{name:t.name})})]),zo.config({})],d=t.validation.map(q=>wm.config({getRoot:J=>$c(J.element),invalidClass:"tox-invalid",validator:{validate:J=>{const re=Et.getValue(J),de=q.validator(re);return Ja.pure(de===!0?In.value(re):In.error(de))},validateOnLoad:q.validateOnLoad}})).toArray(),g=t.placeholder.fold(ne({}),q=>({placeholder:s.translate(q)})),p=t.inputMode.fold(ne({}),q=>({inputmode:q})),x={...g,...p,"data-mce-name":t.name},T=Hn.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(q=>({data:q})).getOr({}),inputAttributes:x,inputClasses:[t.classname],inputBehaviours:rt(Cn([c,d])),selectOnFocus:!1,factory:Dh}),O=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[T]}:T,L=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),H=[Nt.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:q=>{Hn.getField(q).each(Nt.disable)},onEnabled:q=>{Hn.getField(q).each(Nt.enable)}}),rr(()=>s.checkUiComponentContext(t.context))];return cw(a,O,L,H)},FW=(t,s,a)=>nF({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:R.none(),maximized:t.maximized,data:a,context:t.context},s),oF=(t,s,a)=>nF({name:t.name,multiline:!0,label:t.label,inputMode:R.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:R.none(),maximized:t.maximized,data:a,context:t.context},s),ry=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),$h=t=>t.dimension.property,wb=(t,s)=>t.dimension.getDimension(s),Tw=(t,s)=>{const a=ry(t,s);Pi(a,[s.shrinkingClass,s.growingClass])},TD=(t,s)=>{ao(t.element,s.openClass),qs(t.element,s.closedClass),En(t.element,$h(s),"0px"),Ei(t.element)},kD=(t,s)=>{ao(t.element,s.closedClass),qs(t.element,s.openClass),Un(t.element,$h(s))},xn=(t,s,a,c)=>{a.setCollapsed(),En(t.element,$h(s),wb(s,t.element)),Tw(t,s),TD(t,s),s.onStartShrink(t),s.onShrunk(t)},kw=(t,s,a,c)=>{const d=c.getOrThunk(()=>wb(s,t.element));a.setCollapsed(),En(t.element,$h(s),d),Ei(t.element);const g=ry(t,s);ao(g,s.growingClass),qs(g,s.shrinkingClass),TD(t,s),s.onStartShrink(t)},_D=(t,s,a)=>{const c=wb(s,t.element);(c==="0px"?xn:kw)(t,s,a,R.some(c))},AD=(t,s,a)=>{const c=ry(t,s),d=Na(c,s.shrinkingClass),g=wb(s,t.element);kD(t,s);const p=wb(s,t.element);(d?()=>{En(t.element,$h(s),g),Ei(t.element)}:()=>{TD(t,s)})(),ao(c,s.shrinkingClass),qs(c,s.growingClass),kD(t,s),En(t.element,$h(s),p),a.setExpanded(),s.onStartGrow(t)},sF=(t,s,a)=>{if(a.isExpanded()){Un(t.element,$h(s));const c=wb(s,t.element);En(t.element,$h(s),c)}},rF=(t,s,a)=>{a.isExpanded()||AD(t,s,a)},aF=(t,s,a)=>{a.isExpanded()&&_D(t,s,a)},jY=(t,s,a)=>{a.isExpanded()&&xn(t,s,a)},_w=(t,s,a)=>a.isExpanded(),$W=(t,s,a)=>a.isCollapsed(),OD=(t,s,a)=>{const c=ry(t,s);return Na(c,s.growingClass)===!0},iF=(t,s,a)=>{const c=ry(t,s);return Na(c,s.shrinkingClass)===!0};var RD=Object.freeze({__proto__:null,refresh:sF,grow:rF,shrink:aF,immediateShrink:jY,hasGrown:_w,hasShrunk:$W,isGrowing:OD,isShrinking:iF,isTransitioning:(t,s,a)=>OD(t,s)||iF(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?_D:AD)(t,s,a)},disableTransitions:Tw,immediateGrow:(t,s,a)=>{a.isExpanded()||(kD(t,s),En(t.element,$h(s),wb(s,t.element)),Tw(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),zW=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const c=s.expanded;return Wc(c?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Zu(s.dimension.property,"0px")})},events:(t,s)=>No([pg(p0(),(a,c)=>{c.event.raw.propertyName===t.dimension.property&&(Tw(a,t),s.isExpanded()&&Un(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),UW=[Ze("closedClass"),Ze("openClass"),Ze("shrinkingClass"),Ze("growingClass"),no("getAnimationRoot"),qn("onShrunk"),qn("onStartShrink"),qn("onGrown"),qn("onStartGrow"),Se("expanded",!1),Ri("dimension",Za("property",{width:[us("property","width"),us("getDimension",t=>Rn(t)+"px")],height:[us("property","height"),us("getDimension",t=>nr(t)+"px")]}))],WW=Object.freeze({__proto__:null,init:t=>{const s=Wt(t.expanded),a=()=>"expanded: "+s.get();return di({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:ln(s.set,!1),setExpanded:ln(s.set,!0),readState:a})}});const _c=yr({fields:UW,name:"sliding",active:zW,apis:RD,state:WW}),cF=t=>({isEnabled:()=>!Nt.isDisabled(t),setEnabled:s=>Nt.set(t,!s),setActive:s=>{const a=t.element;s?(qs(a,"tox-tbtn--enabled"),Ve(a,"aria-pressed",!0)):(ao(a,"tox-tbtn--enabled"),zn(a,"aria-pressed"))},isActive:()=>Na(t.element,"tox-tbtn--enabled"),setTooltip:s=>{Gt(t,W6,{text:s})},setText:s=>{Gt(t,bu,{text:s})},setIcon:s=>Gt(t,vp,{icon:s})}),Aw=(t,s,a,c,d=!0,g)=>{const p=t.buttonType==="bordered"?["bordered"]:[];return SD({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:c,fetch:(x,T)=>{const O={pattern:t.search.isSome()?rw(x):""};t.fetch(D=>{T(sy(D,Al.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},O,cF(x))},onSetup:t.onSetup,getApi:x=>cF(x),columns:1,presets:"normal",classes:p,dropdownBehaviours:[...d?[zo.config({})]:[]],context:t.context},s,a.shared,g)},ZW=(t,s,a)=>{const c=g=>p=>{const x=!p.isActive();p.setActive(x),g.storage.set(x),a.shared.getSink().each(T=>{s().getOpt(T).each(O=>{ha(O.element),Gt(O,tl,{name:g.name,value:g.storage.get()})})})},d=g=>p=>{p.setActive(g.storage.get())};return g=>{g(qe(t,p=>{const x=p.text.fold(()=>({}),T=>({text:T}));return{type:p.type,active:!1,...x,context:p.context,onAction:c(p),onSetup:d(p)}}))}},lF=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[Vo(t)]}),DD=(t,s,a)=>{t.customStateIcon.each(c=>s.push(dF(c,a.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],d=>[fs.config(a.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"])))},uF=Mt("leaf-label-event-id"),MD=({leaf:t,onLeafAction:s,visible:a,treeId:c,selectedId:d,backstage:g})=>{const p=t.menu.map(T=>Aw(T,"tox-mbtn",g,R.none(),a)),x=[lF(t.title)];return DD(t,x,g),p.each(T=>x.push(T)),Nr.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:x,role:"treeitem",action:T=>{s(t.id),T.getSystem().broadcastOn([`update-active-item-${c}`],{value:t.id})},eventOrder:{[Ki()]:[uF,"keying"]},buttonBehaviours:rt([...a?[zo.config({})]:[],Mn.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Bi.config({channels:{[`update-active-item-${c}`]:{onReceive:(T,O)=>{(O.value===t.id?Mn.on:Mn.off)(T)}}}}),wn(uF,[vo((T,O)=>{d.each(D=>{(D===t.id?Mn.on:Mn.off)(T)})}),$e(Ki(),(T,O)=>{const D=O.event.raw.code==="ArrowLeft",L=O.event.raw.code==="ArrowRight";D?(zs(T.element,".tox-tree--directory").each(H=>{T.getSystem().getByDom(H).each(q=>{ii(H,".tox-tree--directory__label").each(J=>{q.getSystem().getByDom(J).each(gn.focus)})})}),O.stop()):L&&O.stop()})])])})},dF=(t,s,a,c,d)=>_l(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(c||[]),behaviours:a,attributes:d},s),qW=(t,s)=>dF(t,s,[]),mF=Mt("directory-label-event-id"),jW=({directory:t,visible:s,noChildren:a,backstage:c})=>{const d=t.menu.map(x=>Aw(x,"tox-mbtn",c,R.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[qW("chevron-right",c.shared.providers.icons)]},lF(t.title)];DD(t,g,c),d.each(x=>{g.push(x)});const p=x=>{zs(x.element,".tox-tree--directory").each(T=>{x.getSystem().getByDom(T).each(O=>{const D=!Mn.isOn(O);Mn.toggle(O),Gt(x,"expand-tree-node",{expanded:D,node:t.id})})})};return Nr.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:p,eventOrder:{[Ki()]:[mF,"keying"]},buttonBehaviours:rt([...s?[zo.config({})]:[],wn(mF,[$e(Ki(),(x,T)=>{const O=T.event.raw.code==="ArrowRight",D=T.event.raw.code==="ArrowLeft";O&&a&&T.stop(),(O||D)&&zs(x.element,".tox-tree--directory").each(L=>{x.getSystem().getByDom(L).each(H=>{!Mn.isOn(H)&&O||Mn.isOn(H)&&D?(p(x),T.stop()):D&&!Mn.isOn(H)&&(zs(H.element,".tox-tree--directory").each(q=>{ii(q,".tox-tree--directory__label").each(J=>{H.getSystem().getByDom(J).each(gn.focus)})}),T.stop())})})})])])})},GW=({children:t,onLeafAction:s,visible:a,treeId:c,expandedIds:d,selectedId:g,backstage:p})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(x=>x.type==="leaf"?MD({leaf:x,selectedId:g,onLeafAction:s,visible:a,treeId:c,backstage:p}):PD({directory:x,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:c,backstage:p})),behaviours:rt([_c.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),Sn.config({})])}),KW=Mt("directory-event-id"),PD=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:c,backstage:d,expandedIds:g,selectedId:p})=>{const{children:x}=t,T=Wt(g),O=L=>x.map(H=>H.type==="leaf"?MD({leaf:H,selectedId:p,onLeafAction:s,visible:L,treeId:c,backstage:d}):PD({directory:H,expandedIds:T.get(),selectedId:p,onLeafAction:s,labelTabstopping:L,treeId:c,backstage:d})),D=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[jW({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),GW({children:x,expandedIds:g,selectedId:p,onLeafAction:s,visible:D,treeId:c,backstage:d})],behaviours:rt([wn(KW,[vo((L,H)=>{Mn.set(L,D)}),$e("expand-tree-node",(L,H)=>{const{expanded:q,node:J}=H.event;T.set(q?[...T.get(),J]:T.get().filter(re=>re!==J))})]),Mn.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(L,H)=>{const q=L.components()[1],J=O(H);H?_c.grow(q):_c.shrink(q),Sn.set(q,J)}})])}},XW=Mt("tree-event-id"),YW=(t,s)=>{const a=t.onLeafAction.getOr(Y),c=t.onToggleExpand.getOr(Y),d=t.defaultExpandedIds,g=Wt(d),p=Wt(t.defaultSelectedId),x=Mt("tree-id"),T=(O,D)=>t.items.map(L=>L.type==="leaf"?MD({leaf:L,selectedId:O,onLeafAction:a,visible:!0,treeId:x,backstage:s}):PD({directory:L,selectedId:O,onLeafAction:a,expandedIds:D,labelTabstopping:!0,treeId:x,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:T(p.get(),g.get()),behaviours:rt([jt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),wn(XW,[$e("expand-tree-node",(O,D)=>{const{expanded:L,node:H}=D.event;g.set(L?[...g.get(),H]:g.get().filter(q=>q!==H)),c(g.get(),{expanded:L,node:H})})]),Bi.config({channels:{[`update-active-item-${x}`]:{onReceive:(O,D)=>{p.set(R.some(D.value)),Sn.set(O,T(R.some(D.value),g.get()))}}}}),Sn.config({})])}};var QW=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.stream.streams.setup(t,s);return No([$e(t.event,c),vc(()=>s.cancel())].concat(t.cancelEvent.map(d=>[$e(d,()=>s.cancel())]).getOr([])))}});const fF=t=>{const s=Wt(null);return di({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var eZ=Object.freeze({__proto__:null,throttle:fF,init:t=>t.stream.streams.state(t)});const tZ=(t,s)=>{const a=t.stream,c=mD(t.onStream,a.delay);return s.setTimer(c),(d,g)=>{c.throttle(d,g),a.stopEvent&&g.stop()}};var nZ=[Ri("stream",Za("mode",{throttle:[Ze("delay"),Se("stopEvent",!0),us("streams",{setup:tZ,state:fF})]})),Se("event","input"),no("cancelEvent"),ch("onStream")];const v4=yr({fields:nZ,name:"streaming",active:QW,state:eZ}),y4=(t,s,a)=>{const c=Et.getValue(a);Et.setValue(s,c),hF(s)},ND=(t,s)=>{const a=t.element,c=sm(a),d=a.dom;Ln(a,"type")!=="number"&&s(d,c)},hF=t=>{ND(t,(s,a)=>s.setSelectionRange(a.length,a.length))},gF=(t,s)=>{ND(t,(a,c)=>a.setSelectionRange(s,c.length))},pF=(t,s,a)=>{if(t.selectsOver){const c=Et.getValue(s),d=t.getDisplayText(c),g=Et.getValue(a);return t.getDisplayText(g).indexOf(d)===0?R.some(()=>{y4(t,s,a),gF(s,d.length)}):R.none()}else return R.none()},Ow=ne("alloy.typeahead.itemexecute"),oZ=(t,s,a,c)=>{const d=(L,H,q)=>{t.previewing.set(!1);const J=Xs.getCoupled(L,"sandbox");if(eo.isOpen(J))Xn.getCurrent(J).each(re=>{K.getHighlighted(re).fold(()=>{q(re)},()=>{y2(J,re.element,"keydown",H)})});else{const re=de=>{Xn.getCurrent(de).each(q)};nw(t,p(L),L,J,c,re,jr.HighlightMenuAndItem).get(Y)}},g=Vv(t),p=L=>H=>H.map(q=>{const J=_f(q.menus),re=ye(J,oe=>Eo(oe.items,fe=>fe.type==="item"));return Et.getState(L).update(qe(re,oe=>oe.data)),q}),x=L=>Xn.getCurrent(L),T="typeaheadevents",O=[gn.config({}),Et.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:L=>sm(L.element),getFallbackEntry:L=>({value:L,meta:{}}),setValue:(L,H)=>{Ar(L.element,t.model.getDisplayText(H))},...t.initialData.map(L=>Zu("initialValue",L)).getOr({})}}),v4.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(L,H)=>{const q=Xs.getCoupled(L,"sandbox");if(gn.isFocused(L)&&sm(L.element).length>=t.minChars){const re=x(q).bind(oe=>K.getHighlighted(oe).map(Et.getValue));t.previewing.set(!0);const de=oe=>{x(q).each(fe=>{re.fold(()=>{t.model.selectsOver&&K.highlightFirst(fe)},he=>{K.highlightBy(fe,ke=>Et.getValue(ke).value===he.value),K.getHighlighted(fe).orThunk(()=>(K.highlightFirst(fe),R.none()))})})};nw(t,p(L),L,q,c,de,jr.HighlightJustMenu).get(Y)}},cancelEvent:Ku()}),jt.config({mode:"special",onDown:(L,H)=>(d(L,H,K.highlightFirst),R.some(!0)),onEscape:L=>{const H=Xs.getCoupled(L,"sandbox");return eo.isOpen(H)?(eo.close(H),R.some(!0)):R.none()},onUp:(L,H)=>(d(L,H,K.highlightLast),R.some(!0)),onEnter:L=>{const H=Xs.getCoupled(L,"sandbox"),q=eo.isOpen(H);if(q&&!t.previewing.get())return x(H).bind(J=>K.getHighlighted(J)).map(J=>(Gt(L,Ow(),{item:J}),!0));{const J=Et.getValue(L);return Wn(L,Ku()),t.onExecute(H,L,J),q&&eo.close(H),R.some(!0)}}}),Mn.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Xs.config({others:{sandbox:L=>_R(t,L,{onOpen:()=>Mn.on(L),onClose:()=>{t.lazyTypeaheadComp.get().each(H=>zn(H.element,"aria-activedescendant")),Mn.off(L)}})}}),wn(T,[vo(L=>{t.lazyTypeaheadComp.set(R.some(L))}),vc(L=>{t.lazyTypeaheadComp.set(R.none())}),cu(L=>{const H=Y;kR(t,p(L),L,c,H,jr.HighlightMenuAndItem).get(Y)}),$e(Ow(),(L,H)=>{const q=Xs.getCoupled(L,"sandbox");y4(t.model,L,H.event.item),Wn(L,Ku()),t.onItemExecute(L,q,H.event.item,Et.getValue(L)),eo.close(q),hF(L)})].concat(t.dismissOnBlur?[$e(n1(),L=>{const H=Xs.getCoupled(L,"sandbox");Ka(H.element).isNone()&&eo.close(H)})]:[]))],D={[ma()]:[Et.name(),v4.name(),T],...t.eventOrder};return{uid:t.uid,dom:ZB(Rt(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...Gs(t.typeaheadBehaviours,O)},eventOrder:D}},bF=ne([no("lazySink"),Ze("fetch"),Se("minChars",5),Se("responseTime",1e3),qn("onOpen"),Se("getHotspot",R.some),Se("getAnchorOverrides",ne({})),Se("layouts",R.none()),Se("eventOrder",{}),cg("model",{},[Se("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Se("selectsOver",!0),Se("populateFromBrowse",!0)]),qn("onSetValue"),Ni("onExecute"),qn("onItemExecute"),Se("inputClasses",[]),Se("inputAttributes",{}),Se("inputStyles",{}),Se("matchWidth",!0),Se("useMinWidth",!1),Se("dismissOnBlur",!0),Gm(["openClass"]),no("initialData"),no("listRole"),qr("typeaheadBehaviours",[gn,Et,v4,jt,Mn,Xs]),ui("lazyTypeaheadComp",()=>Wt(R.none)),ui("previewing",()=>Wt(!0))].concat(LO()).concat(AR())),sZ=ne([jc({schema:[v1()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,c)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{pF(t.model,d,c).fold(()=>{t.model.selectsOver?(K.dehighlight(a,c),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&y4(t.model,d,c),_n(c.element,"id").each(g=>Ve(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(c=>(Gt(c,Ow(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(c=>{t.model.populateFromBrowse&&y4(t.model,c,a)})}})})]),vF=Ba({name:"Typeahead",configFields:bF(),partFields:sZ(),factory:oZ}),Cd=t=>({...t,toCached:()=>Cd(t.toCached()),bindFuture:T=>Cd(t.bind(O=>O.fold(D=>Ja.pure(In.error(D)),D=>T(D)))),bindResult:T=>Cd(t.map(O=>O.bind(T))),mapResult:T=>Cd(t.map(O=>O.map(T))),mapError:T=>Cd(t.map(O=>O.mapError(T))),foldResult:(T,O)=>t.map(D=>D.fold(T,O)),withTimeout:(T,O)=>Cd(Ja.nu(D=>{let L=!1;const H=setTimeout(()=>{L=!0,D(In.error(O()))},T);t.get(q=>{L||(clearTimeout(H),D(q))})}))}),BD=t=>Cd(Ja.nu(t)),yF=t=>Cd(Ja.pure(In.value(t))),C4={nu:BD,wrap:Cd,pure:yF,value:yF,error:t=>Cd(Ja.pure(In.error(t))),fromResult:t=>Cd(Ja.pure(t)),fromFuture:t=>Cd(t.map(In.value)),fromPromise:t=>BD(s=>{t.then(a=>{s(In.value(a))},a=>{s(In.error(a))})})},xb=(t,s,a=[],c,d,g,p)=>{const x=s.fold(()=>({}),D=>({action:D})),T={buttonBehaviours:rt([Rl.item(()=>!t.enabled||p.checkUiComponentContext(t.context).shouldDisable),rr(()=>p.checkUiComponentContext(t.context)),zo.config({}),...g.map(D=>fs.config(p.tooltips.getConfig({tooltipText:p.translate(D)}))).toArray(),wn("button press",[J_("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...x},O=Rt(T,{dom:c});return Rt(O,{components:d})},aZ=(t,s,a,c=[],d)=>{const g=t.tooltip.map(O=>({"aria-label":a.translate(O)})).getOr({}),p={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},x=t.icon.map(O=>yD(O,a.icons)),T=Cm([x]);return xb(t,s,c,p,T,t.tooltip,a)},Rw=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},CF=(t,s,a,c=[],d=[])=>{const g=a.translate(t.text),p=t.icon.map(q=>yD(q,a.icons)),x=[p.getOrThunk(()=>Vo(g))],T=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),L={tag:"button",classes:[...Rw(T),...p.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},H=t.icon.map(ne(g));return xb(t,s,c,L,x,H,a)},S4=(t,s,a,c=[],d=[])=>{const g=CF(t,R.some(s),a,c,d);return Nr.sketch(g)},LD=(t,s)=>a=>{s==="custom"?Gt(a,tl,{name:t,value:{}}):s==="submit"?Wn(a,uw):s==="cancel"?Wn(a,Nh):console.error("Unknown button type: ",s)},ID=(t,s)=>s==="menu",iZ=(t,s)=>s==="custom"||s==="cancel"||s==="submit",cZ=(t,s)=>s==="togglebutton",SF=(t,s,a)=>{var c,d;const g=t.icon.map(he=>bp(he,s.icons)).map(io),p=he=>{Gt(he,tl,{name:t.name,value:{setIcon:ke=>{g.map(Pe=>Pe.getOpt(he).each(Ct=>{Sn.set(Ct,[bp(ke,s.icons)])}))}}})},x=t.buttonType.getOr(t.primary?"primary":"secondary"),T={...t,name:(c=t.name)!==null&&c!==void 0?c:"",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1},O=T.tooltip.or(t.text).map(he=>({"aria-label":s.translate(he)})).getOr({}),D=Rw(x??"secondary"),L=t.icon.isSome()&&t.text.isSome(),H={tag:"button",classes:[...D.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...L?["tox-button--icon-and-text"]:[]],attributes:{...O,...st(a)?{"data-mce-name":a}:{}}},q=[],J=s.translate(t.text.getOr("")),re=Vo(J),oe=[...Cm([g.map(he=>he.asSpec())]),...t.text.isSome()?[re]:[]],fe=xb(T,R.some(p),q,H,oe,t.tooltip,s);return Nr.sketch(fe)},w4=(t,s,a)=>{if(ID(t,s)){const c=()=>p,d=t,g={...t,buttonType:"default",type:"menubutton",search:R.none(),onSetup:x=>(x.setEnabled(t.enabled),Y),fetch:ZW(d.items,c,a)},p=io(Aw(g,"tox-tbtn",a,R.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return p.asSpec()}else if(iZ(t,s)){const c=LD(t.name,s),d={...t,context:s==="cancel"?"any":t.context,borderless:!1};return S4(d,c,a.shared.providers,[])}else{if(cZ(t,s))return SF(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},lZ=(t,s)=>{const a=LD(t.name,"custom");return dU(R.none(),Hn.parts.field({factory:Nr,...CF(t,R.some(a),s,[Cw(""),yd.self()])}))},FD={type:"separator"},uZ=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:Y}),$D=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:Y}),wF=t=>qe(t,uZ),xF=(t,s)=>Eo(s,a=>a.type===t),EF=(t,s)=>wF(xF(t,s)),dZ=t=>EF("header",t.targets),mZ=t=>EF("anchor",t.targets),fZ=t=>R.from(t.anchorTop).map(s=>$D("<top>",s)).toArray(),TF=t=>R.from(t.anchorBottom).map(s=>$D("<bottom>",s)).toArray(),vu=t=>qe(t,s=>$D(s,s)),HD=t=>Wo(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(FD,a),[]),VD=(t,s)=>{const a=t.toLowerCase();return Eo(s,c=>{var d;const g=c.meta!==void 0&&c.meta.text!==void 0?c.meta.text:c.text,p=(d=c.value)!==null&&d!==void 0?d:"";return ms(g.toLowerCase(),a)||ms(p.toLowerCase(),a)})},hZ=(t,s,a)=>{var c,d;const g=Et.getValue(s),p=(d=(c=g==null?void 0:g.meta)===null||c===void 0?void 0:c.text)!==null&&d!==void 0?d:g.value;return a.getLinkInformation().fold(()=>[],T=>{const O=VD(p,vu(a.getHistory(t)));return t==="file"?HD([O,VD(p,dZ(T)),VD(p,Cn([fZ(T),mZ(T),TF(T)]))]):O})},kF=Mt("aria-invalid"),gZ=(t,s,a,c)=>{const d=s.shared.providers,g=fe=>{const he=Et.getValue(fe);a.addToHistory(he.value,t.filetype)},p={...c.map(fe=>({initialData:fe})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":kF,type:"url"},minChars:0,responseTime:0,fetch:fe=>{const he=hZ(t.filetype,fe,a),ke=sy(he,Al.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:R.none()});return Ja.pure(ke)},getHotspot:fe=>J.getOpt(fe),onSetValue:(fe,he)=>{fe.hasConfigured(wm)&&wm.run(fe).get(Y)},typeaheadBehaviours:rt([...a.getValidationHandler().map(fe=>wm.config({getRoot:he=>$c(he.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(he,ke)=>{D.getOpt(he).each(Pe=>{Ve(Pe.element,"title",d.translate(ke))})}},validator:{validate:he=>{const ke=Et.getValue(he);return C4.nu(Pe=>{fe({type:t.filetype,url:ke.value},Ct=>{if(Ct.status==="invalid"){const tt=In.error(Ct.message);Pe(tt)}else{const tt=In.value(Ct.message);Pe(tt)}})})},validateOnLoad:!1}})).toArray(),Nt.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable}),zo.config({}),wn("urlinput-events",[$e(bc(),fe=>{const he=sm(fe.element),ke=he.trim();ke!==he&&Ar(fe.element,ke),t.filetype==="file"&&Gt(fe,kc,{name:t.name})}),$e(iu(),fe=>{Gt(fe,kc,{name:t.name}),g(fe)}),$e(b0(),fe=>{Gt(fe,kc,{name:t.name}),g(fe)})])]),eventOrder:{[bc()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:fe=>fe.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:Sk(!1,1,"normal")},onExecute:(fe,he,ke)=>{Gt(he,uw,{})},onItemExecute:(fe,he,ke,Pe)=>{g(fe),Gt(fe,kc,{name:t.name})}},x=Hn.parts.field({...p,factory:vF}),T=t.label.map(fe=>fp(fe,d)),D=io(((fe,he,ke=fe,Pe=fe)=>_l(ke,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+fe],attributes:{title:d.translate(Pe),"aria-live":"polite",...he.fold(()=>({}),Ct=>({id:Ct}))}},d.icons))("invalid",R.some(kF),"warning")),L=io({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[D.asSpec()]}),H=a.getUrlPicker(t.filetype),q=Mt("browser.url.event"),J=io({dom:{tag:"div",classes:["tox-control-wrap"]},components:[x,L.asSpec()],behaviours:rt([Nt.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable})])}),re=io(S4({context:t.context,name:t.name,icon:R.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:R.none(),borderless:!0},fe=>Wn(fe,q),d,[],["tox-browse-url"])),de=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Cn([[J.asSpec()],H.map(()=>re.asSpec()).toArray()])}),oe=fe=>{Xn.getCurrent(fe).each(he=>{const ke=Et.getValue(he),Pe={fieldname:t.name,...ke};H.each(Ct=>{Ct(Pe).get(tt=>{Et.setValue(he,tt),Gt(fe,kc,{name:t.name})})})})};return Hn.sketch({dom:BI(),components:T.toArray().concat([de()]),fieldBehaviours:rt([Nt.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:fe=>{Hn.getField(fe).each(Nt.disable),re.getOpt(fe).each(Nt.disable)},onEnabled:fe=>{Hn.getField(fe).each(Nt.enable),re.getOpt(fe).each(Nt.enable)}}),rr(()=>d.checkUiComponentContext(t.context)),wn("url-input-events",[$e(q,oe)])])})},pZ=(t,s)=>{const a=OO(t.icon,s.icons);return gd.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[Nr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:c=>Gt(c,tl,{name:"alert-banner",value:t.url}),buttonBehaviours:rt([RO()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},_F=(t,s)=>{t.dom.checked=s},AF=t=>t.dom.checked,tJ=(t,s,a)=>{const c=T=>(T.element.dom.click(),R.some(!0)),d=Hn.parts.field({factory:{sketch:at},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:rt([yd.self(),Nt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:T=>{$c(T.element).each(O=>qs(O,"tox-checkbox--disabled"))},onEnabled:T=>{$c(T.element).each(O=>ao(O,"tox-checkbox--disabled"))}}),zo.config({}),gn.config({}),k6(a,AF,_F),jt.config({mode:"special",onEnter:c,onSpace:c,stopSpaceKeyup:!0}),wn("checkbox-events",[$e(iu(),(T,O)=>{Gt(T,kc,{name:t.name})})])])}),g=Hn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Vo(s.translate(t.label))],behaviours:rt([mw.config({})])}),p=T=>_l(T==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+T]},s.icons),x=io({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return Hn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,x.asSpec(),g],fieldBehaviours:rt([Nt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),rr(()=>s.checkUiComponentContext(t.context))])})},nJ=(t,s)=>{const a=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],c=wn("htmlpanel",[vo(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?gd.sketch({dom:{tag:"div",classes:a,innerHtml:t.html},containerBehaviours:rt([fs.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{Pn(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Ka(d.element)).each(g=>{_n(g,"data-mce-tooltip").each(p=>{fs.setComponents(d,s.tooltips.getComponents({tooltipText:p}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:Pn(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Ka(d.element).filter(g=>_n(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:ne([Cr,Or,or,aa,dr,sr]),onRtl:ne([Cr,Or,or,aa,dr,sr])},bubble:gi(0,-2,{})})}),c])}):gd.sketch({dom:{tag:"div",classes:a,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:rt([zo.config({}),gn.config({}),c])})},yo=t=>(s,a,c,d,g)=>Tt(a,"name").fold(()=>t(a,d,R.none(),g),p=>s.field(p,t(a,d,Tt(c,p),g))),zD=t=>(s,a,c,d,g)=>{const p=Rt(a,{source:"dynamic"});return yo(t)(s,p,c,d,g)},bZ={bar:yo((t,s)=>iU(t,s.shared)),collection:yo((t,s,a)=>FR(t,s.shared.providers,a)),alertbanner:yo((t,s)=>pZ(t,s.shared.providers)),input:yo((t,s,a)=>FW(t,s.shared.providers,a)),textarea:yo((t,s,a)=>oF(t,s.shared.providers,a)),label:yo((t,s,a,c)=>z6(t,s.shared,c)),iframe:zD((t,s,a)=>SW(t,s.shared.providers,a)),button:yo((t,s)=>lZ(t,s.shared.providers)),checkbox:yo((t,s,a)=>tJ(t,s.shared.providers,a)),colorinput:yo((t,s,a)=>$R(t,s.shared,s.colorinput,a)),colorpicker:yo((t,s,a)=>lD(t,s.shared.providers,a)),dropzone:yo((t,s,a)=>O6(t,s.shared.providers,a)),grid:yo((t,s)=>hW(t,s.shared)),listbox:yo((t,s,a)=>AW(t,s,a)),selectbox:yo((t,s,a)=>DW(t,s.shared.providers,a)),sizeinput:yo((t,s)=>LW(t,s.shared.providers)),slider:yo((t,s,a)=>tF(t,s.shared.providers,a)),urlinput:yo((t,s,a)=>gZ(t,s,s.urlinput,a)),customeditor:yo(fW),htmlpanel:yo((t,s)=>nJ(t,s.shared.providers)),imagepreview:yo((t,s,a)=>wW(t,a)),table:yo((t,s)=>IW(t,s.shared.providers)),tree:yo((t,s)=>YW(t,s)),panel:yo((t,s)=>OW(t,s))},x4={field:(t,s)=>s,record:ne([])},OF=(t,s,a,c,d)=>{const g=Rt(c,{shared:{interpreter:p=>UD(t,p,a,g,d)}});return UD(t,s,a,g,d)},UD=(t,s,a,c,d)=>Tt(bZ,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(t,s,a,c,d)),RF=(t,s,a,c)=>UD(x4,t,s,a,c),yp="layout-inset",WD=t=>t.x,DF=(t,s)=>t.x+t.width/2-s.width/2,ZD=(t,s)=>t.x+t.width-s.width,qD=t=>t.y,E4=(t,s)=>t.y+t.height-s.height,Dw=(t,s)=>t.y+t.height/2-s.height/2,Mw=(t,s,a)=>Wr(ZD(t,s),E4(t,s),a.insetSouthwest(),J2(),"southwest",fa(t,{right:0,bottom:3}),yp),ay=(t,s,a)=>Wr(WD(t),E4(t,s),a.insetSoutheast(),Y2(),"southeast",fa(t,{left:1,bottom:3}),yp),Pw=(t,s,a)=>Wr(ZD(t,s),qD(t),a.insetNorthwest(),X2(),"northwest",fa(t,{right:0,top:2}),yp),iy=(t,s,a)=>Wr(WD(t),qD(t),a.insetNortheast(),U0(),"northeast",fa(t,{left:1,top:2}),yp),Sd=(t,s,a)=>Wr(DF(t,s),qD(t),a.insetNorth(),gE(),"north",fa(t,{top:2}),yp),Nw=(t,s,a)=>Wr(DF(t,s),E4(t,s),a.insetSouth(),pE(),"south",fa(t,{bottom:3}),yp),jD=(t,s,a)=>Wr(ZD(t,s),Dw(t,s),a.insetEast(),vE(),"east",fa(t,{right:0}),yp),vZ=(t,s,a)=>Wr(WD(t),Dw(t,s),a.insetWest(),bE(),"west",fa(t,{left:1}),yp),oJ=t=>{switch(t){case"north":return Sd;case"northeast":return iy;case"northwest":return Pw;case"south":return Nw;case"southeast":return ay;case"southwest":return Mw;case"east":return jD;case"west":return vZ}},GD=(t,s,a,c,d)=>_1(c).map(oJ).getOr(Sd)(t,s,a,c,d),yZ=t=>{switch(t){case"north":return Nw;case"northeast":return ay;case"northwest":return Mw;case"south":return Sd;case"southeast":return iy;case"southwest":return Pw;case"east":return vZ;case"west":return jD}},CZ=(t,s,a,c,d)=>_1(c).map(yZ).getOr(Sd)(t,s,a,c,d),cy={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},KD=(t,s,a)=>{const d={maxHeightFunction:fh()},g=()=>({type:"node",root:gr(Hr(t())),node:R.from(t()),bubble:gi(12,12,cy),layouts:{onRtl:()=>[iy],onLtr:()=>[Pw]},overrides:d}),p=()=>({type:"hotspot",hotspot:s(),bubble:gi(-12,12,cy),layouts:{onRtl:()=>[or,dr,Cr],onLtr:()=>[dr,or,Cr]},overrides:d});return()=>a()?g():p()},SZ=(t,s,a,c)=>{const g={maxHeightFunction:fh()},p=()=>({type:"node",root:gr(Hr(s())),node:R.from(s()),bubble:gi(12,12,cy),layouts:{onRtl:()=>[Sd],onLtr:()=>[Sd]},overrides:g}),x=()=>t?{type:"node",root:gr(Hr(s())),node:R.from(s()),bubble:gi(0,-Bu(s()),cy),layouts:{onRtl:()=>[Or],onLtr:()=>[Or]},overrides:g}:{type:"hotspot",hotspot:a(),bubble:gi(0,0,cy),layouts:{onRtl:()=>[Or],onLtr:()=>[Or]},overrides:g};return()=>c()?p():x()},wZ=(t,s,a)=>{const c=()=>({type:"node",root:gr(Hr(t())),node:R.from(t()),layouts:{onRtl:()=>[Sd],onLtr:()=>[Sd]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Cr],onLtr:()=>[Cr]}});return()=>a()?c():d()},MF=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),c=t.model.table.getSelectedCells();if(c.length>1){const d=c[0],g=c[c.length-1],p={firstCell:ct.fromDom(d),lastCell:ct.fromDom(g)};return R.some(p)}return R.some(ef.range(ct.fromDom(a.startContainer),a.startOffset,ct.fromDom(a.endContainer),a.endOffset))}}),xZ=t=>s=>({type:"node",root:t(),node:s}),EZ=(t,s,a,c)=>{const d=md(t),g=()=>ct.fromDom(t.getBody()),p=()=>ct.fromDom(t.getContentAreaContainer()),x=()=>d||!c();return{inlineDialog:KD(p,s,x),inlineBottomDialog:SZ(t.inline,p,a,x),banner:wZ(p,s,x),cursor:MF(t,g),node:xZ(g)}},TZ=t=>(s,a)=>{cI(t)(s,a)},kZ=t=>()=>tI(t),Bw=t=>s=>Pk(t,s),XD=t=>s=>eI(t,s),_Z=t=>({colorPicker:TZ(t),hasCustomColors:kZ(t),getColors:Bw(t),getColorCols:XD(t)}),AZ=t=>()=>iB(t),OZ=t=>({isDraggableModal:AZ(t)}),RZ=t=>{const s=Wt(lO(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},PF=t=>Ha(t,"items"),NF=t=>Ha(t,"format"),T4=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],DZ=t=>Jn(t,"items"),k4=t=>Jn(t,"block"),MZ=t=>Jn(t,"inline"),ly=t=>Jn(t,"selector"),BF=t=>Wo(t,(s,a)=>{if(DZ(a)){const c=BF(a.items);return{customFormats:s.customFormats.concat(c.customFormats),formats:s.formats.concat([{title:a.title,items:c.formats}])}}else if(MZ(a)||k4(a)||ly(a)){const d=`custom-${te(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),YD=(t,s)=>{const a=BF(s),c=d=>{Ot(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?c(a.customFormats):t.on("init",()=>{c(a.customFormats)}),a.formats},Eb=t=>Q3(t).map(s=>{const a=YD(t,s);return eO(t)?T4.concat(a):a}).getOr(T4),LF=t=>{const s=Zo(t);return s.length===1&&Mo(s,"title")},JD=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),_4=(t,s,a,c)=>{const d=T=>JD(T,a,c),g=T=>{const O=x(T.items);return{...T,type:"submenu",getStyleItems:ne(O)}},p=T=>{const O=te(T.name)?T.name:Mt(T.title),D=`custom-${O}`,L={...T,type:"formatter",format:D,isSelected:a(D),getStylePreview:c(D)};return t.formatter.register(O,L),L},x=T=>qe(T,O=>PF(O)?g(O):NF(O)?d(O):LF(O)?{...O,type:"separator"}:p(O));return x(s)},IF=t=>{const s=x=>()=>t.formatter.match(x),a=x=>()=>{const T=t.formatter.get(x);return T!==void 0?R.some({tag:T.length>0&&(T[0].inline||T[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(x))}):R.none()},c=Wt([]),d=Wt([]),g=Wt(!1);return t.on("PreInit",x=>{const T=Eb(t),O=_4(t,T,s,a);c.set(O)}),t.on("addStyleModifications",x=>{const T=_4(t,x.items,s,a);d.set(T),g.set(x.replace)}),{getData:()=>{const x=g.get()?[]:c.get(),T=d.get();return x.concat(T)}}},QD=t=>{let c=0;const d=()=>c>0,g=x=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Vo(x.tooltipText)]}];return{getConfig:x=>({delayForShow:()=>d()?60:300,delayForHide:ne(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(x),onShow:(T,O)=>{c++,x.onShow&&x.onShow(T,O)},onHide:(T,O)=>{c--,x.onHide&&x.onHide(T,O)},onSetup:x.onSetup}),getComponents:g}},FF=t=>st(t)&&t.nodeType===1,$F=Ih.trim,Lw=t=>s=>!!(FF(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),Tb=Lw("true"),PZ=Lw("false"),HF=(t,s,a,c,d)=>({type:t,title:s,url:a,level:c,attach:d}),NZ=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return Tb(s)}return!1},uy=(t,s)=>qe(bi(ct.fromDom(s),t),a=>a.dom),eM=t=>t.innerText||t.textContent,A4=t=>t.id?t.id:Mt("h"),VF=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,tM=t=>VF(t)&&zF(t),pf=t=>t&&/^(H[1-6])$/.test(t.nodeName),zF=t=>NZ(t)&&!PZ(t),BZ=t=>pf(t)&&zF(t),LZ=t=>pf(t)?parseInt(t.nodeName.substr(1),10):0,nM=t=>{var s;const a=A4(t),c=()=>{t.id=a};return HF("header",(s=eM(t))!==null&&s!==void 0?s:"","#"+a,LZ(t),c)},IZ=t=>{const s=t.id||t.name,a=eM(t);return HF("anchor",a||"#"+s,"#"+s,0,Y)},FZ=t=>qe(Eo(t,BZ),nM),$Z=t=>qe(Eo(t,tM),IZ),HZ=t=>uy("h1,h2,h3,h4,h5,h6,a:not([href])",t),VZ=t=>$F(t.title).length>0,zZ={find:t=>{const s=HZ(t);return Eo(FZ(s).concat($Z(s)),VZ)}},Iw="tinymce-url-history",UF=5,kb=t=>te(t)&&/^https?/.test(t),UZ=t=>Ie(t)&&t.length<=UF&&ic(t,kb),WF=t=>Ce(t)&&fr(t,s=>!UZ(s)).isNone(),Fw=()=>{const t=ub.getItem(Iw);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+Iw+" was not valid JSON",a),{};throw a}return WF(s)?s:(console.log("Local storage "+Iw+" was not valid format",s),{})},ZF=t=>{if(!WF(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));ub.setItem(Iw,JSON.stringify(t))},O4=t=>{const s=Fw();return Tt(s,t).getOr([])},WZ=(t,s)=>{if(!kb(t))return;const a=Fw(),c=Tt(a,s).getOr([]),d=Eo(c,g=>g!==t);a[s]=[t].concat(d).slice(0,UF),ZF(a)},qF=t=>!!t,ZZ=t=>Io(Ih.makeMap(t,/[, ]/),qF),oM=t=>R.from(sB(t)),qZ=t=>{const s=R.from(aB(t)).filter(qF).map(ZZ);return oM(t).fold(On,a=>s.fold(Ft,c=>Zo(c).length>0?c:!1))},sM=(t,s)=>{const a=qZ(t);return pt(a)?a?oM(t):R.none():a[s]?oM(t):R.none()},jZ=(t,s)=>sM(t,s).map(a=>c=>Ja.nu(d=>{const g=(x,T)=>{if(!te(x))throw new Error("Expected value to be string");if(T!==void 0&&!Ce(T))throw new Error("Expected meta to be a object");d({value:x,meta:T})},p={filetype:s,fieldname:c.fieldname,...R.from(c.meta).getOr({})};a.call(t,g,c.value,p)})),jF=t=>R.from(t).filter(te).getOrUndefined(),GZ=t=>ek(t)?R.some({targets:zZ.find(t.getBody()),anchorTop:jF(sO(t)),anchorBottom:jF(rO(t))}):R.none(),KZ=t=>R.from(oO(t)),XZ=t=>({getHistory:O4,addToHistory:WZ,getLinkInformation:()=>GZ(t),getValidationHandler:()=>KZ(t),getUrlPicker:s=>jZ(t,s)}),YZ=(t,s,a,c)=>{const d=Wt(!1),g=RZ(s),p={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:hu.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:QD(t.dialog),checkUiComponentContext:oe=>{if(XT(s))return{contextType:"disabled",shouldDisable:!0};const[fe,he=""]=oe.split(":"),ke=s.ui.registry.getAll().contexts,Pe=Tt(ke,fe).fold(()=>Tt(ke,"mode").map(Ct=>Ct("design")).getOr(!1),Ct=>he.charAt(0)==="!"?!Ct(he.slice(1)):Ct(he));return{contextType:fe,shouldDisable:!Pe}}},x=XZ(s),T=IF(s),O=_Z(s),D=OZ(s),L=()=>d.get(),H=oe=>d.set(oe),q={shared:{providers:p,anchors:EZ(s,a,c,g.isPositionedAtTop),header:g},urlinput:x,styles:T,colorinput:O,dialog:D,isContextMenuOpen:L,setContextMenuState:H},J=oe=>R.none(),re={...q,shared:{...q.shared,interpreter:oe=>RF(oe,{},re,J),getSink:t.popup}},de={...q,shared:{...q.shared,interpreter:oe=>RF(oe,{},de,J),getSink:t.dialog}};return{popup:re,dialog:de}},JZ=(t,s,a)=>{const c=(Be,At)=>{Ot([s,...a],cn=>{cn.broadcastEvent(Be,At)})},d=(Be,At)=>{Ot([s,...a],cn=>{cn.broadcastOn([Be],At)})},g=Be=>d(cm(),{target:Be.target}),p=Bm(),x=hi(p,"touchstart",g),T=hi(p,"touchmove",Be=>c(v0(),Be)),O=hi(p,"touchend",Be=>c(Mx(),Be)),D=hi(p,"mousedown",g),L=hi(p,"mouseup",Be=>{Be.raw.button===0&&d(pv(),{target:Be.target})}),H=Be=>d(cm(),{target:ct.fromDom(Be.target)}),q=Be=>{Be.button===0&&d(pv(),{target:ct.fromDom(Be.target)})},J=()=>{Ot(t.editorManager.get(),Be=>{t!==Be&&Be.dispatch("DismissPopups",{relatedTarget:t})})},re=Be=>c(y0(),RE(Be)),de=Be=>{d(lm(),{}),c(Yd(),RE(Be))},oe=Hr(ct.fromDom(t.getElement())),fe=Y0(oe,"scroll",Be=>{requestAnimationFrame(()=>{const At=t.getContainer();if(At!=null){const en=sp(t,s.element).map($n=>[$n.element,...$n.others]).getOr([]);wr(en,$n=>Kn($n,Be.target))&&(t.dispatch("ElementScroll",{target:Be.target.dom}),c(S0(),Be))}})}),he=()=>d(lm(),{}),ke=Be=>{Be.state&&d(cm(),{target:ct.fromDom(t.getContainer())})},Pe=Be=>{d(cm(),{target:ct.fromDom(Be.relatedTarget.getContainer())})},Ct=Be=>t.dispatch("focusin",Be),tt=Be=>t.dispatch("focusout",Be);t.on("PostRender",()=>{t.on("click",H),t.on("tap",H),t.on("mouseup",q),t.on("mousedown",J),t.on("ScrollWindow",re),t.on("ResizeWindow",de),t.on("ResizeEditor",he),t.on("AfterProgressState",ke),t.on("DismissPopups",Pe),Ot([s,...a],Be=>{Be.element.dom.addEventListener("focusin",Ct),Be.element.dom.addEventListener("focusout",tt)})}),t.on("remove",()=>{t.off("click",H),t.off("tap",H),t.off("mouseup",q),t.off("mousedown",J),t.off("ScrollWindow",re),t.off("ResizeWindow",de),t.off("ResizeEditor",he),t.off("AfterProgressState",ke),t.off("DismissPopups",Pe),Ot([s,...a],Be=>{Be.element.dom.removeEventListener("focusin",Ct),Be.element.dom.removeEventListener("focusout",tt)}),D.unbind(),x.unbind(),T.unbind(),O.unbind(),L.unbind(),fe.unbind()}),t.on("detach",()=>{Ot([s,...a],xl),Ot([s,...a],Be=>Be.destroy())})},Ca=FN,bf=G1,GF=ne([Se("shell",!1),Ze("makeItem"),Se("setupItem",Y),Ec.field("listBehaviours",[Sn])]),R4=Ii({name:"items",overrides:()=>({behaviours:rt([Sn.config({})])})}),KF=ne([R4]),eq=ne("CustomList"),tq=(t,s,a,c)=>{const d=(x,T)=>{p(x).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},O=>{const D=Sn.contents(O),L=T.length,H=L-D.length,q=H>0?gs(H,()=>t.makeItem()):[],J=D.slice(L);Ot(J,de=>Sn.remove(O,de)),Ot(q,de=>Sn.append(O,de));const re=Sn.contents(O);Ot(re,(de,oe)=>{t.setupItem(x,de,T[oe],oe)})})},g=t.shell?{behaviours:[Sn.config({})],components:[]}:{behaviours:[],components:s},p=x=>t.shell?R.some(x):Bo(x,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:Gs(t.listBehaviours,g.behaviours),apis:{setItems:d}}},XF=Ba({name:eq(),configFields:GF(),partFields:KF(),factory:tq,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),dy=ne([Ze("dom"),Se("shell",!0),qr("toolbarBehaviours",[Sn])]),nq=ne([Ii({name:"groups",overrides:()=>({behaviours:rt([Sn.config({})])})})]),oq=(t,s,a,c)=>{const d=(x,T)=>{g(x).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},O=>{Sn.set(O,T)})},g=x=>t.shell?R.some(x):Bo(x,t,"groups"),p=t.shell?{behaviours:[Sn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:Gs(t.toolbarBehaviours,p.behaviours),apis:{setGroups:d,refresh:Y},domModification:{attributes:{role:"group"}}}},wd=Ba({name:"Toolbar",configFields:dy(),partFields:nq(),factory:oq,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),YF=Y,sq=On,rM=ne([]);var rq=Object.freeze({__proto__:null,setup:YF,isDocked:sq,getBehaviours:rM});const aM=ne(Mt("toolbar-height-change")),vf={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},Cp="tox-tinymce--toolbar-sticky-on",iM="tox-tinymce--toolbar-sticky-off",$w=(t,s)=>{const a=ws(s),d=Gl(s).dom.innerHeight,g=Ra(a),p=ct.fromDom(t.elm),x=_i(p),T=nr(p),O=x.y,D=O+T,L=Va(s),H=nr(s),q=L.top,J=q+H,re=Math.abs(q-g.top)<2,de=Math.abs(J-(g.top+d))<2;if(re&&O<J)Gd(g.left,O-H,a);else if(de&&D>q){const oe=O-d+T+H;Gd(g.left,oe,a)}},_b=(t,s)=>Mo(ds.getModes(t),s),D4=t=>{const s=c=>Bu(c)+(parseInt(Xe(c,"margin-top"),10)||0)+(parseInt(Xe(c,"margin-bottom"),10)||0),a=t.element;$c(a).each(c=>{const d="padding-"+ds.getModes(t)[0];if(ds.isDocked(t)){const g=Rn(c);En(a,"width",g+"px"),En(c,d,s(a)+"px")}else Un(a,"width"),Un(c,d)})},cM=(t,s)=>{s?(ao(t,vf.fadeOutClass),th(t,[vf.transitionClass,vf.fadeInClass])):(ao(t,vf.fadeInClass),th(t,[vf.fadeOutClass,vf.transitionClass]))},lM=(t,s)=>{const a=ct.fromDom(t.getContainer());s?(qs(a,Cp),ao(a,iM)):(qs(a,iM),ao(a,Cp))},aJ=(t,s)=>{const a=ws(s);Cc(a).filter(c=>!Kn(s,c)).filter(c=>Kn(c,ct.fromDom(a.dom.body))||il(t,c)).each(()=>ha(s))},aq=(t,s)=>Ka(t).orThunk(()=>s().toOptional().bind(a=>Ka(a.element))),iq=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(ds.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(D4)}),t.on("SkinLoaded",()=>{a().each(c=>{ds.isDocked(c)?ds.reset(c):ds.refresh(c)})}),t.on("FullscreenStateChanged",()=>{a().each(ds.reset)})),t.on("AfterScrollIntoView",c=>{a().each(d=>{ds.refresh(d);const g=d.element;lS(g)&&$w(c,g)})}),t.on("PostRender",()=>{lM(t,!1)})},cq=t=>t().map(ds.isDocked).getOr(!1),lq=()=>[Bi.config({channels:{[aM()]:{onReceive:D4}}})],JF=(t,s)=>{const a=uo(),c=s.getSink,d=x=>{c().each(T=>x(T.element))},g=x=>{t.inline||D4(x),lM(t,ds.isDocked(x)),x.getSystem().broadcastOn([lm()],{}),c().each(T=>T.getSystem().broadcastOn([lm()],{}))},p=t.inline?[]:lq();return[gn.config({}),ds.config({contextual:{lazyContext:x=>{const T=Bu(x.element),O=t.inline?t.getContentAreaContainer():t.getContainer();return R.from(O).map(D=>{const L=pr(ct.fromDom(D));return sp(t,x.element).fold(()=>{const q=L.height-T,J=L.y+(_b(x,"top")?0:T);return bs(L.x,J,L.width,q)},q=>{const J=Wf(L,rp(q)),re=_b(x,"top")?J.y:J.y+T;return bs(J.x,re,J.width,J.height-T)})})},onShow:()=>{d(x=>cM(x,!0))},onShown:x=>{d(T=>Pi(T,[vf.transitionClass,vf.fadeInClass])),a.get().each(T=>{aJ(x.element,T),a.clear()})},onHide:x=>{aq(x.element,c).fold(a.clear,a.set),d(T=>cM(T,!1))},onHidden:()=>{d(x=>Pi(x,[vf.transitionClass]))},...vf},lazyViewport:x=>sp(t,x.element).fold(()=>{const O=_r(),D=nO(t),L=O.y+(_b(x,"top")&&!fO(t)?D:0),H=O.height-(_b(x,"bottom")?D:0);return{bounds:bs(O.x,L,O.width,H),optScrollEnv:R.none()}},O=>({bounds:rp(O),optScrollEnv:R.some({currentScrollTop:O.element.dom.scrollTop,scrollElmTop:Va(O.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...p]};var my=Object.freeze({__proto__:null,setup:iq,isDocked:cq,getBehaviours:JF});const Hw=t=>{const s=t.editor,a=t.sticky?JF:rM;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:rt(a(s,t.sharedBackstage))}},uM=dn([Ks,Ri("items",Lm([l0([UO,Ko("items",We)]),We]))].concat(uf)),uq=t=>os("GroupToolbarButton",uM,t),dq=[ys("buttonType","default"),Ls("text"),Ls("tooltip"),Ls("icon"),zc("search",!1,Lm([Xp,dn([Ls("placeholder")])],t=>pt(t)?t?R.some({placeholder:R.none()}):R.none():R.some(t))),hc("fetch"),ss("onSetup",()=>Y),ys("context","mode:design")],M4=dn([Ks,...dq]),QF=t=>os("menubutton",M4,t),Vw=dn([Ks,rb,Xc,lp,hz,mz,sb,hl("presets","normal",["normal","color","listpreview"]),oL(1),ob,tL,ys("context","mode:design")]),e$=t=>os("SplitButton",Vw,t);var dM=Fi({factory:(t,s)=>{const a=(d,g)=>{const p=qe(g,x=>{const T={type:"menubutton",text:x.text,fetch:D=>{D(x.getItems())},context:"any"},O=QF(T).mapError(D=>ig(D)).getOrDie();return Aw(O,"tox-mbtn",s.backstage,R.some("menuitem"))});Sn.set(d,p)},c={focus:jt.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:rt([Sn.config({}),wn("menubar-events",[vo(d=>{t.onSetup(d)}),$e(pl(),(d,g)=>{Pn(d.element,".tox-mbtn--active").each(p=>{Us(g.event.target,".tox-mbtn").each(x=>{Kn(p,x)||d.getSystem().getByDom(p).each(T=>{d.getSystem().getByDom(x).each(O=>{el.expand(O),el.close(T),gn.focus(O)})})})})}),$e(Qf(),(d,g)=>{g.event.prevFocus.bind(p=>d.getSystem().getByDom(p).toOptional()).each(p=>{g.event.newFocus.bind(x=>d.getSystem().getByDom(x).toOptional()).each(x=>{el.isOpen(p)&&(el.expand(x),el.close(p))})})})]),jt.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),R.some(!0))}),zo.config({})]),apis:c,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ze("dom"),Ze("uid"),Ze("onEscape"),Ze("backstage"),Se("onSetup",Y)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const mq="💝Get all features",fq="https://www.tiny.cloud/tinymce-upgrade-to-cloud/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",hq=t=>{const s=t.promotionLink?[{dom:{tag:"a",attributes:{href:fq,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:mq}}]:[];return{uid:t.uid,dom:t.dom,components:s}},t$="container",n$=[qr("slotBehaviours",[])],mM=t=>"<alloy.field."+t+">",fM=t=>{const s=(()=>{const g=[];return{slot:(x,T)=>(g.push(x),wv(t$,mM(x),T)),record:ne(g)}})(),a=t(s),c=s.record(),d=qe(c,g=>ba({name:g,pname:mM(g)}));return K1(t$,n$,d,gq,a)},gq=(t,s)=>{const a=re=>GC(t),c=(re,de)=>Bo(re,t,de),d=(re,de)=>(oe,fe)=>Bo(oe,t,fe).map(he=>re(he,fe)).getOr(de),g=re=>(de,oe)=>{Ot(oe,fe=>re(de,fe))},p=(re,de)=>Ln(re.element,"aria-hidden")!=="true",x=(re,de)=>{if(!p(re)){const oe=re.element;Un(oe,"display"),zn(oe,"aria-hidden"),Gt(re,C0(),{name:de,visible:!0})}},T=(re,de)=>{if(p(re)){const oe=re.element;En(oe,"display","none"),Ve(oe,"aria-hidden","true"),Gt(re,C0(),{name:de,visible:!1})}},O=d(p,!1),D=d(T),L=g(D),H=re=>L(re,a()),q=d(x),J={getSlotNames:a,getSlot:c,isShowing:O,hideSlot:D,hideAllSlots:H,showSlot:q};return{uid:t.uid,dom:t.dom,components:s,behaviours:bv(t.slotBehaviours),apis:J}},Sa={...Io({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>kg(t)),sketch:fM},o$=dn([Xc,rb,ss("onShow",Y),ss("onHide",Y),sb]),pq=t=>os("sidebar",o$,t),bq=t=>{const{sidebars:s}=t.ui.registry.getAll();Ot(Zo(s),a=>{const c=s[a],d=()=>Qr(R.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:c.icon,tooltip:c.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const p=()=>g.setActive(d());return t.on("ToggleSidebar",p),()=>{t.off("ToggleSidebar",p)}},context:"any"})})},vq=t=>({element:()=>t.element.dom}),yq=(t,s)=>{const a=qe(Zo(s),c=>{const d=s[c],g=ml(pq(d));return{name:c,getApi:vq,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return qe(a,c=>{const d=Wt(Y);return t.slot(c.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Tc.unnamedEvents([hd(c,d),dp(c,d),$e(C0(),(g,p)=>{const x=p.event;yn(a,O=>O.name===x.name).each(O=>{(x.visible?O.onShow:O.onHide)(O.getApi(g))})})])})})},gM=t=>Sa.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:yq(s,t),slotBehaviours:Tc.unnamedEvents([vo(a=>Sa.hideAllSlots(a))])})),Cq=(t,s,a)=>{Xn.getCurrent(t).each(d=>{Sn.set(d,[gM(s)]);const g=a==null?void 0:a.toLowerCase();te(g)&&Jn(s,g)&&Xn.getCurrent(d).each(p=>{Sa.showSlot(p,g),_c.immediateGrow(d),Un(d.element,"width"),fy(t.element,"region")})})},fy=(t,s)=>{Ve(t,"role",s)},Sq=(t,s)=>{Xn.getCurrent(t).each(c=>{Xn.getCurrent(c).each(g=>{_c.hasGrown(c)?Sa.isShowing(g,s)?(_c.shrink(c),fy(t.element,"presentation")):(Sa.hideAllSlots(g),Sa.showSlot(g,s),fy(t.element,"region")):(Sa.hideAllSlots(g),Sa.showSlot(g,s),_c.grow(c),fy(t.element,"region"))})})},pM=t=>Xn.getCurrent(t).bind(a=>_c.isGrowing(a)||_c.hasGrown(a)?Xn.getCurrent(a).bind(g=>yn(Sa.getSlotNames(g),p=>Sa.isShowing(g,p))):R.none()),bM=Mt("FixSizeEvent"),vM=Mt("AutoSizeEvent"),wq=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:rt([zo.config({}),gn.config({}),_c.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Xn.getCurrent(s).each(Sa.hideAllSlots),Wn(s,vM)},onGrown:s=>{Wn(s,vM)},onStartGrow:s=>{Gt(s,bM,{width:Ps(s.element,"width").getOr("")})},onStartShrink:s=>{Gt(s,bM,{width:Rn(s.element)+"px"})}}),Sn.config({}),Xn.config({find:s=>{const a=Sn.contents(s);return Yr(a)}})])}],behaviours:rt([yd.childAt(0),wn("sidebar-sliding-events",[$e(bM,(s,a)=>{En(s.element,"width",a.event.width)}),$e(vM,(s,a)=>{Un(s.element,"width")})])])});var uJ=Object.freeze({__proto__:null,block:(t,s,a,c)=>{Ve(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=rt([jt.config({mode:"special",onTab:()=>R.some(!0),onShiftTab:()=>R.some(!0)}),gn.config({})]),p=c(d,g),x=d.getSystem().build(p);Sn.append(d,ur(x)),x.hasConfigured(jt)&&s.focus&&jt.focusIn(x),a.isBlocked()||s.onBlock(t),a.blockWith(()=>Sn.remove(d,x))},unblock:(t,s,a)=>{zn(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),s$=[ss("getRoot",R.none),da("focus",!0),qn("onBlock"),qn("onUnblock")],r$=Object.freeze({__proto__:null,init:()=>{const t=nu(),s=a=>{t.set({destroy:a})};return di({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const xm=yr({fields:s$,name:"blocking",apis:uJ,state:r$}),xq=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:gm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),a$=t=>Xn.getCurrent(t).each(s=>ha(s.element,!0)),Eq=(t,s)=>{const a="tabindex",c=`data-mce-${a}`;R.from(t.iframeElement).map(ct.fromDom).each(d=>{s?(_n(d,a).each(g=>Ve(d,c,g)),Ve(d,a,-1)):(zn(d,a),_n(d,c).each(g=>{Ve(d,a,g),zn(d,c)}))})},Tq=(t,s,a,c)=>{const d=s.element;if(Eq(t,a),a)xm.block(s,xq(c)),Un(d,"display"),zn(d,"aria-hidden"),t.hasFocus()&&a$(s);else{const g=Xn.getCurrent(s).exists(p=>Rr(p.element));xm.unblock(s),En(d,"display","none"),Ve(d,"aria-hidden","true"),g&&t.focus()}},i$=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:rt([Sn.config({}),xm.config({focus:!1}),Xn.config({find:s=>Yr(s.components())})]),components:[]}),kq=t=>t.type==="focusin",_q=t=>kq(t)?(t.composed?Yr(t.composedPath()):R.from(t.target)).map(ct.fromDom).filter(Os).exists(a=>Na(a,"mce-pastebin")):!1,Aq=(t,s,a)=>{const c=Wt(!1),d=uo(),g=x=>{c.get()&&!_q(x)&&(x.preventDefault(),a$(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",x=>{x.command.toLowerCase()==="mcefocus"&&x.value!==!0&&g(x)})});const p=x=>{x!==c.get()&&(c.set(x),Tq(t,s(),x,a.providers),hR(t,x))};t.on("ProgressState",x=>{if(d.on(clearTimeout),Vt(x.time)){const T=jT.setEditorTimeout(t,()=>p(x.state),x.time);d.set(T)}else p(x.state),d.clear()})},mJ=(t,s)=>Wo(t,(d,g)=>s(g,d.len).fold(ne(d),x=>({len:x.finish,list:d.list.concat([x])})),{len:0,list:[]}).list,c$=(t,s,a)=>({within:t,extra:s,withinWidth:a}),yM=(t,s,a)=>{const c=mJ(t,(x,T)=>{const O=a(x);return R.some({element:x,start:T,finish:T+O,width:O})}),d=Eo(c,x=>x.finish<=s),g=Fs(d,(x,T)=>x+T.width,0),p=c.slice(d.length);return{within:d,extra:p,withinWidth:g}},zw=t=>qe(t,s=>s.element),Oq=(t,s,a)=>{const c=zw(t.concat(s));return c$(c,[],a)},Rq=(t,s,a,c)=>{const d=zw(t).concat([a]);return c$(d,zw(s),c)},Ml=(t,s,a)=>c$(zw(t),[],a),Dq=(t,s,a)=>{const c=yM(s,t,a);return c.extra.length===0?R.some(c):R.none()},l$=(t,s,a,c)=>{const d=Dq(t,s,a).getOrThunk(()=>yM(s,t-a(c),a)),g=d.within,p=d.extra,x=d.withinWidth;return p.length===1&&p[0].width<=a(c)?Oq(g,p,x):p.length>=1?Rq(g,p,c,x):Ml(g,p,x)},CM=(t,s)=>{const a=qe(s,c=>ur(c));wd.setGroups(t,a)},Mq=t=>ks(t,s=>Ka(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),hy=(t,s,a)=>{const c=s.builtGroups.get();if(c.length===0)return;const d=mu(t,s,"primary"),g=Xs.getCoupled(t,"overflowGroup");En(d.element,"visibility","hidden");const p=c.concat([g]),x=Mq(p);a([]),CM(d,p);const T=Rn(d.element),O=l$(T,s.builtGroups.get(),D=>Math.ceil(D.element.dom.getBoundingClientRect().width),g);O.extra.length===0?(Sn.remove(d,g),a([])):(CM(d,O.within),a(O.extra)),Un(d.element,"visibility"),Ei(d.element),x.each(gn.focus)},u$=ne([qr("splitToolbarBehaviours",[Xs]),ui("builtGroups",()=>Wt([]))]),P4=ne([Gm(["overflowToggledClass"]),Uu("getOverflowBounds"),Ze("lazySink"),ui("overflowGroups",()=>Wt([])),qn("onOpened"),qn("onClosed")].concat(u$())),Pq=ne([ba({factory:wd,schema:dy(),name:"primary"}),jc({schema:dy(),name:"overflow"}),jc({name:"overflow-button"}),jc({name:"overflow-group"})]),gy=ne((t,s)=>{Yl(t,Math.floor(s))}),Nq=ne([Gm(["toggledClass"]),Ze("lazySink"),hc("fetch"),Uu("getBounds"),Gi("fireDismissalEventInstead",[Se("event",Um())]),Qm(),qn("onToggled")]),Bq=ne([jc({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:rt([Mn.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),jc({factory:wd,schema:dy(),name:"toolbar",overrides:t=>({toolbarBehaviours:rt([jt.config({mode:"cyclic",onEscape:s=>(Bo(s,t,"button").each(gn.focus),R.none())})])})})]),Ac=uo(),Lq=(t,s)=>{Ac.set(!0),py(t,s),Ac.clear()},py=(t,s)=>{const a=Xs.getCoupled(t,"toolbarSandbox");eo.isOpen(a)?eo.close(a):eo.open(a,s.toolbar())},N4=(t,s,a,c)=>{const d=a.getBounds.map(p=>p()),g=a.lazySink(t).getOrDie();ga.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:c,overrides:{maxWidthFunction:gy()}}},d)},SM=(t,s,a,c,d)=>{wd.setGroups(s,d),N4(t,s,a,c),Mn.on(t)},Iq=(t,s,a)=>{const c=K2(),d=(p,x)=>{const T=Ac.get().getOr(!1);a.fetch().get(O=>{SM(t,x,a,s.layouts,O),c.link(t.element),T||jt.focusIn(x)})},g=()=>{Mn.off(t),Ac.get().getOr(!1)||gn.focus(t),c.unlink(t.element)};return{dom:{tag:"div",attributes:{id:c.id}},behaviours:rt([jt.config({mode:"special",onEscape:p=>(eo.close(p),R.some(!0))}),eo.config({onOpen:d,onClose:g,isPartOf:(p,x,T)=>Ym(x,T)||Ym(t,T),getAttachPoint:()=>a.lazySink(t).getOrDie()}),Bi.config({channels:{...ec({isExtraPart:On,...a.fireDismissalEventInstead.map(p=>({fireEventInstead:{event:p.event}})).getOr({})}),...Sh({doReposition:()=>{eo.getState(Xs.getCoupled(t,"toolbarSandbox")).each(p=>{N4(t,p,a,s.layouts)})}})}})])}},Sp=Ba({name:"FloatingToolbarButton",factory:(t,s,a,c)=>({...Nr.sketch({...c.button(),action:d=>{py(d,c)},buttonBehaviours:Ec.augment({dump:c.button().buttonBehaviours},[Xs.config({others:{toolbarSandbox:d=>Iq(d,a,t)}})])}),apis:{setGroups:(d,g)=>{eo.getState(Xs.getCoupled(d,"toolbarSandbox")).each(p=>{SM(d,p,t,a.layouts,g)})},reposition:d=>{eo.getState(Xs.getCoupled(d,"toolbarSandbox")).each(g=>{N4(d,g,t,a.layouts)})},toggle:d=>{py(d,c)},toggleWithoutFocusing:d=>{Lq(d,c)},getToolbar:d=>eo.getState(Xs.getCoupled(d,"toolbarSandbox")),isOpen:d=>eo.isOpen(Xs.getCoupled(d,"toolbarSandbox"))}}),configFields:Nq(),partFields:Bq(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),$q=ne([Ze("items"),Gm(["itemSelector"]),qr("tgroupBehaviours",[jt])]),Hq=ne([_h({name:"items",unit:"item"})]),Vq=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Gs(t.tgroupBehaviours,[jt.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),B4=Ba({name:"ToolbarGroup",configFields:$q(),partFields:Hq(),factory:Vq}),d$=t=>qe(t,s=>ur(s)),m$=(t,s,a)=>{hy(t,a,c=>{a.overflowGroups.set(c),s.getOpt(t).each(d=>{Sp.setGroups(d,d$(c))})})},f$=(t,s,a,c)=>{const d=io(Sp.sketch({fetch:()=>Ja.nu(g=>{g(d$(t.overflowGroups.get()))}),layouts:{onLtr:()=>[dr,or],onRtl:()=>[or,dr],onBottomLtr:()=>[sr,aa],onBottomRtl:()=>[aa,sr]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:c["overflow-button"](),toolbar:c.overflow()},onToggled:(g,p)=>t[p?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:Gs(t.splitToolbarBehaviours,[Xs.config({others:{overflowGroup:()=>B4.sketch({...c["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,p)=>{t.builtGroups.set(qe(p,g.getSystem().build)),m$(g,d,t)},refresh:g=>m$(g,d,t),toggle:g=>{d.getOpt(g).each(p=>{Sp.toggle(p)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(Sp.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(Sp.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(p=>{Sp.reposition(p)})},getOverflow:g=>d.getOpt(g).bind(Sp.getToolbar)},domModification:{attributes:{role:"group"}}}},wM=Ba({name:"SplitFloatingToolbar",configFields:P4(),partFields:Pq(),factory:f$,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),h$=ne([Gm(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),qn("onOpened"),qn("onClosed")].concat(u$())),zq=ne([ba({factory:wd,schema:dy(),name:"primary"}),ba({factory:wd,schema:dy(),name:"overflow",overrides:t=>({toolbarBehaviours:rt([_c.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Bo(s,t,"overflow-button").each(a=>{Mn.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{Bo(s,t,"overflow-button").each(Mn.on)}}),jt.config({mode:"acyclic",onEscape:s=>(Bo(s,t,"overflow-button").each(gn.focus),R.some(!0))})])})}),jc({name:"overflow-button",overrides:t=>({buttonBehaviours:rt([Mn.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),jc({name:"overflow-group"})]),g$=(t,s)=>Bo(t,s,"overflow").map(_c.hasGrown).getOr(!1),xM=(t,s,a)=>{Bo(t,s,"overflow-button").each(c=>{Bo(t,s,"overflow").each(d=>{if(EM(t,s),_c.hasShrunk(d)){const g=s.onOpened;s.onOpened=p=>{a||jt.focusIn(d),g(p),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=p=>{a||gn.focus(c),g(p),s.onClosed=g}}_c.toggleGrow(d)})})},EM=(t,s)=>{Bo(t,s,"overflow").each(a=>{hy(t,s,c=>{const d=qe(c,g=>ur(g));wd.setGroups(a,d)}),Bo(t,s,"overflow-button").each(c=>{_c.hasGrown(a)&&Mn.on(c)}),_c.refresh(a)})},p$=(t,s,a,c)=>{const d="alloy.toolbar.toggle",g=(p,x)=>{const T=qe(x,p.getSystem().build);t.builtGroups.set(T)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Gs(t.splitToolbarBehaviours,[Xs.config({others:{overflowGroup:p=>B4.sketch({...c["overflow-group"](),items:[Nr.sketch({...c["overflow-button"](),action:x=>{Wn(p,d)}})]})}}),wn("toolbar-toggle-events",[$e(d,p=>{xM(p,t,!1)})])]),apis:{setGroups:(p,x)=>{g(p,x),EM(p,t)},refresh:p=>EM(p,t),toggle:p=>{xM(p,t,!1)},toggleWithoutFocusing:p=>{xM(p,t,!0)},isOpen:p=>g$(p,t)},domModification:{attributes:{role:"group"}}}},L4=Ba({name:"SplitSlidingToolbar",configFields:h$(),partFields:zq(),factory:p$,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),TM=t=>{const s=t.label.isNone()?t.title.fold(()=>({}),a=>({attributes:{"aria-label":a}})):t.label.fold(()=>({}),a=>({attributes:{"aria-label":a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(t.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...t.label.map(a=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[Vo(a)]})).toArray(),B4.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:rt([zo.config({}),gn.config({ignore:!0})])}},I4=t=>B4.sketch(TM(t)),b$=(t,s)=>{const a=vo(c=>{const d=qe(t.initGroups,I4);wd.setGroups(c,d)});return rt([Rl.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),rr(()=>t.providers.checkUiComponentContext("any")),jt.config({mode:s,onEscape:t.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),wn("toolbar-events",[a])])},v$=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":TM({title:R.none(),label:R.none(),items:[]}),"overflow-button":aZ({context:"any",icon:R.some("more-drawer"),enabled:!0,tooltip:R.some("Reveal or hide additional toolbar items")},R.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:b$(t,s)}},y$=t=>{const s=v$(t),a=4,c=wM.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return wM.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=_i(d),p=cc(d),x=_i(p),T=Math.max(p.dom.scrollHeight,x.height);return bs(g.x+a,x.y,g.width-a*2,T)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[c],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},Uq=t=>{const s=L4.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=L4.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),c=v$(t);return L4.sketch({...c,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([aM()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([aM()],{type:"closed"}),t.onToggled(d,!1)}})},F4=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return wd.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===kl.scrolling?["tox-toolbar--scrolling"]:[])},components:[wd.parts.groups({})],toolbarBehaviours:b$(t,s)})},C$=[lp,Xc,Ls("tooltip"),hl("buttonType","secondary",["primary","secondary"]),da("borderless",!1),hc("onAction"),ys("context","mode:design")],Wq=[...C$,lf,fl("type",["button"])],Zq=[...C$,da("active",!1),fl("type",["togglebutton"])],S$={button:Wq,togglebutton:Zq},qq=[fl("type",["group"]),Wu("buttons",[],Za("type",S$))],jq=Za("type",{...S$,group:qq}),Gq=dn([Wu("buttons",[],jq),hc("onShow"),hc("onHide")]),Kq=t=>os("view",Gq,t),w$=(t,s)=>{var a,c;const d=t.type==="togglebutton",g=t.icon.map(he=>bp(he,s.icons)).map(io),x=he=>{const ke=Be=>{g.map(At=>At.getOpt(he).each(cn=>{Sn.set(cn,[bp(Be,s.icons)])}))},Pe=Be=>{const At=he.element;Be?(qs(At,"tox-button--enabled"),Ve(At,"aria-pressed",!0)):(ao(At,"tox-button--enabled"),zn(At,"aria-pressed"))},Ct=()=>Na(he.element,"tox-button--enabled"),tt=()=>ha(he.element);if(d)return t.onAction({setIcon:ke,setActive:Pe,isActive:Ct,focus:tt});if(t.type==="button")return t.onAction({setIcon:ke})},T={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:R.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},O=Rw((c=t.buttonType)!==null&&c!==void 0?c:"secondary"),D=d?t.text.map(s.translate):R.some(s.translate(t.text)),L=D.map(Vo),H=T.tooltip.or(D).map(he=>({"aria-label":s.translate(he)})).getOr({}),q=g.map(he=>he.asSpec()),J=Cm([q,L]),re=t.icon.isSome()&&L.isSome(),de={tag:"button",classes:O.concat(...t.icon.isSome()&&!re?["tox-button--icon"]:[]).concat(...re?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:H},oe=[],fe=xb(T,R.some(x),oe,de,J,t.tooltip,s);return Nr.sketch(fe)},x$=(t,s)=>w$(t,s),Xq=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:qe(t.buttons,a=>x$(a,s))}),$4=xs().deviceType,Yq=$4.isPhone(),H4=$4.isTablet(),Jq=t=>{let s=!1;const a=qe(t.buttons,c=>c.type==="group"?(s=!0,Xq(c,t.providers)):x$(c,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...Yq||H4?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:rt([gn.config({}),jt.config({mode:"flow",selector:"button, .tox-button",focusInside:ya.OnEnterOrSpaceMode})]),components:s?a:[gd.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),gd.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},E$=t=>({uid:t.uid,behaviours:rt([gn.config({}),zo.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),Qq=(t,s,a,c)=>{const d={getPane:g=>Ca.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:rt([gn.config({}),jt.config({mode:"cyclic",focusInside:ya.OnEnterOrSpaceMode})]),apis:d}};var by=Ba({name:"silver.View",configFields:[Ze("viewConfig")],partFields:[Ii({factory:{sketch:Jq},schema:[Ze("buttons"),Ze("providers")],name:"header"}),Ii({factory:{sketch:E$},schema:[],name:"pane"})],factory:Qq,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const fJ=(t,s,a)=>Au(s,(c,d)=>{const g=ml(Kq(c));return t.slot(d,by.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[by.parts.header({buttons:g.buttons,providers:a})]:[],by.parts.pane({})]}))}),ej=(t,s)=>Sa.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:fJ(a,t,s),slotBehaviours:Tc.unnamedEvents([vo(c=>Sa.hideAllSlots(c))])})),T$=t=>yn(Sa.getSlotNames(t),s=>Sa.isShowing(t,s)),kM=t=>{const s=t.element;En(s,"display","none"),Ve(s,"aria-hidden","true")},tj=t=>{const s=t.element;Un(s,"display"),zn(s,"aria-hidden")},V4=t=>({getContainer:ne(t)}),_M=(t,s,a)=>{Sa.getSlot(t,s).each(c=>{by.getPane(c).each(d=>{a(c)(V4(d.element.dom))})})},k$=(t,s)=>_M(t,s,by.getOnShow),AM=(t,s)=>_M(t,s,by.getOnHide);var Uw=Fi({factory:(t,s)=>{const g={setViews:(p,x)=>{Sn.set(p,[ej(x,s.backstage.shared.providers)])},whichView:p=>Xn.getCurrent(p).bind(T$),toggleView:(p,x,T,O)=>Xn.getCurrent(p).exists(D=>{const L=T$(D),H=L.exists(J=>O===J),q=Sa.getSlot(D,O).isSome();return q&&(Sa.hideAllSlots(D),H?(kM(p),x()):(T(),tj(p),Sa.showSlot(D,O),k$(D,O)),L.each(J=>AM(D,J))),q})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:rt([Sn.config({}),Xn.config({find:p=>{const x=Sn.contents(p);return Yr(x)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Ze("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,c,d)=>t.toggleView(s,a,c,d),whichView:(t,s)=>t.whichView(s)}});const vy=(t,s,a)=>{let c=!1;const d=p=>{Ua(p,".tox-statusbar").each(x=>{Xe(x,"display")==="none"&&Ln(x,"aria-hidden")==="true"?(Un(x,"display"),zn(x,"aria-hidden")):(En(x,"display","none"),Ve(x,"aria-hidden","true"))})},g={getSocket:p=>Ca.getPart(p,t,"socket"),setSidebar:(p,x,T)=>{Ca.getPart(p,t,"sidebar").each(O=>Cq(O,x,T))},toggleSidebar:(p,x)=>{Ca.getPart(p,t,"sidebar").each(T=>Sq(T,x))},whichSidebar:p=>Ca.getPart(p,t,"sidebar").bind(pM).getOrNull(),getHeader:p=>Ca.getPart(p,t,"header"),getToolbar:p=>Ca.getPart(p,t,"toolbar"),setToolbar:(p,x)=>{Ca.getPart(p,t,"toolbar").each(T=>{const O=qe(x,I4);T.getApis().setGroups(T,O)})},setToolbars:(p,x)=>{Ca.getPart(p,t,"multiple-toolbar").each(T=>{const O=qe(x,D=>qe(D,I4));XF.setItems(T,O)})},refreshToolbar:p=>{Ca.getPart(p,t,"toolbar").each(T=>T.getApis().refresh(T))},toggleToolbarDrawer:p=>{Ca.getPart(p,t,"toolbar").each(x=>{Po(x.getApis().toggle,T=>T(x))})},toggleToolbarDrawerWithoutFocusing:p=>{Ca.getPart(p,t,"toolbar").each(x=>{Po(x.getApis().toggleWithoutFocusing,T=>T(x))})},isToolbarDrawerToggled:p=>Ca.getPart(p,t,"toolbar").bind(x=>R.from(x.getApis().isOpen).map(T=>T(x))).getOr(!1),getThrobber:p=>Ca.getPart(p,t,"throbber"),focusToolbar:p=>{Ca.getPart(p,t,"toolbar").orThunk(()=>Ca.getPart(p,t,"multiple-toolbar")).each(T=>{jt.focusIn(T)})},setMenubar:(p,x)=>{Ca.getPart(p,t,"menubar").each(T=>{dM.setMenus(T,x)})},focusMenubar:p=>{Ca.getPart(p,t,"menubar").each(x=>{dM.focus(x)})},setViews:(p,x)=>{Ca.getPart(p,t,"viewWrapper").each(T=>{Uw.setViews(T,x)})},toggleView:(p,x)=>Ca.getPart(p,t,"viewWrapper").exists(T=>Uw.toggleView(T,()=>g.showMainView(p),()=>g.hideMainView(p),x)),whichView:p=>Ca.getPart(p,t,"viewWrapper").bind(Uw.whichView).getOrNull(),hideMainView:p=>{c=g.isToolbarDrawerToggled(p),c&&g.toggleToolbarDrawer(p),Ca.getPart(p,t,"editorContainer").each(x=>{const T=x.element;d(T),En(T,"display","none"),Ve(T,"aria-hidden","true")})},showMainView:p=>{c&&g.toggleToolbarDrawer(p),Ca.getPart(p,t,"editorContainer").each(x=>{const T=x.element;d(T),Un(T,"display"),zn(T,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},_$=bf.optional({factory:dM,name:"menubar",schema:[Ze("backstage")]}),nj=t=>t.type===kl.sliding?Uq:t.type===kl.floating?y$:F4,oj=bf.optional({factory:{sketch:t=>XF.sketch({uid:t.uid,dom:t.dom,listBehaviours:rt([jt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>F4({type:t.type,uid:Mt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),R.some(!0))}),setupItem:(s,a,c,d)=>{wd.setGroups(a,c)},shell:!0})},name:"multiple-toolbar",schema:[Ze("dom"),Ze("onEscape")]}),sj=bf.optional({factory:{sketch:t=>{const s=nj(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),R.some(!0)),onToggled:(c,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[Ze("dom"),Ze("onEscape"),Ze("getSink")]}),OM=bf.optional({factory:{sketch:Hw},name:"header",schema:[Ze("dom")]}),rj=bf.optional({factory:{sketch:hq},name:"promotion",schema:[Ze("dom"),Ze("promotionLink")]}),aj=bf.optional({name:"socket",schema:[Ze("dom")]}),A$=bf.optional({factory:{sketch:wq},name:"sidebar",schema:[Ze("dom")]}),O$=bf.optional({factory:{sketch:i$},name:"throbber",schema:[Ze("dom")]}),z4=bf.optional({factory:Uw,name:"viewWrapper",schema:[Ze("backstage")]}),RM=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),ij=bf.optional({factory:{sketch:RM},name:"editorContainer",schema:[]});var Jo=Ba({name:"OuterContainer",factory:vy,configFields:[Ze("dom"),Ze("behaviours")],partFields:[OM,_$,sj,oj,aj,A$,rj,O$,z4,ij],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,c)=>{t.setSidebar(s,a,c)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const R$="file edit view insert format tools table help",D$={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},cj=(t,s,a)=>{const c=eB(a).split(/[ ,]/);return{text:t.title,getItems:()=>ye(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:wr(c,p=>p===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},DM=t=>t.split(" "),MM=(t,s)=>{const a={...D$,...s.menus},c=Zo(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?DM(R$):DM(s.menubar===!1?"":s.menubar),g=Eo(d,x=>{const T=Jn(D$,x);return c?T||Tt(s.menus,x).exists(O=>Jn(O,"items")):T}),p=qe(g,x=>{const T=a[x];return cj({title:T.title,items:DM(T.items)},s,t)});return Eo(p,x=>{const T=O=>te(O)||O.type!=="separator";return x.getItems().length>0&&wr(x.getItems(),T)})},lj=t=>{const s=()=>{t._skinLoaded=!0,Yz(t)};return()=>{t.initialized?s():t.on("init",s)}},uj=(t,s)=>()=>Jz(t,{message:s}),PM=t=>{const s=vS(t);return s?R.from(s):R.none()},M$=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),U4=(t,s,a,c)=>(t.on("remove",()=>c.unloadRawCss(s)),c.loadRawCss(s,a)),P$=(t,s)=>"ui/"+t+"/"+s,dj=t=>R.from(tinymce.Resource.get(t)).filter(te),W4=(t,s,a="")=>{const c=PM(t).map(g=>P$(g,`${s}.css`)),d=c.bind(dj);return ni(c,d,(g,p)=>({_kind:"load-raw",key:g,css:p})).getOrThunk(()=>{const g=t.editorManager.suffix;return{_kind:"load-stylesheet",url:a+`/${s}${g}.css`}})},mj=(t,s)=>{const a=t.ui.styleSheetLoader,c=W4(t,"skin",s);switch(c._kind){case"load-raw":const{key:d,css:g}=c;return U4(t,d,g,a),Promise.resolve();case"load-stylesheet":const{url:p}=c;return M$(t,p,a);default:return Promise.resolve()}},N$=(t,s)=>{if(lc(ct.fromDom(t.getElement()))){const c=gS.DOM.styleSheetLoader,d=W4(t,"skin.shadowdom",s);switch(d._kind){case"load-raw":const{key:g,css:p}=d;return U4(t,g,p,c),Promise.resolve();case"load-stylesheet":const{url:x}=d;return M$(t,x,c);default:return Promise.resolve()}}else return Promise.resolve()},fj=(t,s,a)=>{const d=W4(t,s?"content.inline":"content",a);switch(d._kind){case"load-raw":const{key:g,css:p}=d;return s?U4(t,g,p,t.ui.styleSheetLoader):t.on("PostRender",()=>{U4(t,g,p,t.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:x}=d;return a&&t.contentCSS.push(x),Promise.resolve();default:return Promise.resolve()}},hj=async(t,s)=>{const a=fB(s);if(await fj(s,t,a),!cO(s)&&te(a))return Promise.all([mj(s,a),N$(s,a)]).then()},B$=(t,s)=>hj(t,s).then(lj(s),uj(s,"Skin could not be loaded")),L$=ln(B$,!1),gj=ln(B$,!0),pj=ne([Ze("toggleClass"),Ze("fetch"),ch("onExecute"),Se("getHotspot",R.some),Se("getAnchorOverrides",ne({})),Qm(),ch("onItemExecute"),no("lazySink"),Ze("dom"),qn("onOpen"),qr("splitDropdownBehaviours",[Xs,jt,gn]),Se("matchWidth",!1),Se("useMinWidth",!1),Se("eventOrder",{}),no("role"),no("listRole")].concat(AR())),bj=ba({factory:Nr,schema:[Ze("dom")],name:"arrow",defaults:()=>({buttonBehaviours:rt([gn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Qd)},buttonBehaviours:rt([Mn.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),NM=ba({factory:Nr,schema:[Ze("dom")],name:"button",defaults:()=>({buttonBehaviours:rt([gn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),BM=ne([bj,NM,Ii({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ze("text")],name:"aria-descriptor"}),jc({schema:[v1()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(c=>{t.onItemExecute(c,s,a)})}})}),V9()]),vj=(t,s,a,c)=>{const d=D=>{Xn.getCurrent(D).each(L=>{K.highlightFirst(L),jt.focusIn(L)})},g=D=>{kR(t,at,D,c,d,jr.HighlightMenuAndItem).get(Y)},p=D=>(g(D),R.some(!0)),x=D=>{const L=mu(D,t,"button");return Qd(L),R.some(!0)},T={...No([vo((D,L)=>{Bo(D,t,"aria-descriptor").each(q=>{const J=Mt("aria");Ve(q.element,"id",J),Ve(D.element,"aria-describedby",J)})})]),...Bv(R.some(g))},O={repositionMenus:D=>{Mn.isOn(D)&&xI(D)}};return{uid:t.uid,dom:t.dom,components:s,apis:O,eventOrder:{...t.eventOrder,[Di()]:["disabling","toggling","alloy.base.behaviour"]},events:T,behaviours:Gs(t.splitDropdownBehaviours,[Xs.config({others:{sandbox:D=>{const L=mu(D,t,"arrow");return _R(t,D,{onOpen:()=>{Mn.on(L),Mn.on(D)},onClose:()=>{Mn.off(L),Mn.off(D)}})}}}),jt.config({mode:"special",onSpace:x,onEnter:x,onDown:p}),gn.config({}),Mn.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},Z4=Ba({name:"SplitDropdown",configFields:pj(),partFields:BM(),factory:vj,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),I$=t=>({isEnabled:()=>!Nt.isDisabled(t),setEnabled:s=>Nt.set(t,!s),setText:s=>Gt(t,bu,{text:s}),setIcon:s=>Gt(t,vp,{icon:s})}),yj=t=>({setActive:s=>{Mn.set(t,s)},isActive:()=>Mn.isOn(t),isEnabled:()=>!Nt.isDisabled(t),setEnabled:s=>Nt.set(t,!s),setText:s=>Gt(t,bu,{text:s}),setIcon:s=>Gt(t,vp,{icon:s})}),F$=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),$$=Mt("focus-button"),LM=(t,s,a,c,d,g,p)=>{const x=s.map(O=>io(CD(O,"tox-tbtn",d))),T=t.map(O=>io(bp(O,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...F$(a,d),...st(p)?{"data-mce-name":p}:{}}},components:Cm([T.map(O=>O.asSpec()),x.map(O=>O.asSpec())]),eventOrder:{[pc()]:["focusing","alloy.base.behaviour",Fh],[Xi()]:[Fh,"toolbar-group-button-events"],[ma()]:[Fh,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:rt([Rl.toolbarButton(()=>d.checkUiComponentContext(g).shouldDisable),rr(()=>d.checkUiComponentContext(g)),wn(Fh,[vo((O,D)=>h4(O)),$e(bu,(O,D)=>{x.bind(L=>L.getOpt(O)).each(L=>{Sn.set(L,[Vo(d.translate(D.event.text))])})}),$e(vp,(O,D)=>{T.bind(L=>L.getOpt(O)).each(L=>{Sn.set(L,[bp(D.event.icon,d.icons)])})}),$e(pc(),(O,D)=>{D.event.prevent(),Wn(O,$$)})])].concat(c.getOr([])))}},Cj=(t,s,a,c,d)=>{const g=s.shared,p=Wt(Y),x={toolbarButtonBehaviours:[],getApi:I$,onSetup:t.onSetup},T=[wn("toolbar-group-button-events",[hd(x,p),dp(x,p)]),...t.tooltip.map(O=>fs.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(O)}))).toArray()];return Sp.sketch({lazySink:g.getSink,fetch:()=>Ja.nu(O=>{O(qe(a(t.items),I4))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:LM(t.icon,t.text,t.tooltip,R.some(T),g.providers,t.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:c}}}})},H$=(t,s,a,c)=>{var d;const g=Wt(Y),p=LM(t.icon,t.text,t.tooltip,R.none(),a,t.context,c);return Nr.sketch({dom:p.dom,components:p.components,eventOrder:vD,buttonBehaviours:{...rt([wn("toolbar-button-events",[xW({onAction:t.onAction,getApi:s.getApi}),hd(s,g),dp(s,g)]),...t.tooltip.map(x=>fs.config(a.tooltips.getConfig({tooltipText:a.translate(x)+t.shortcut.map(T=>` (${jS(T)})`).getOr("")}))).toArray(),Rl.toolbarButton(()=>!t.enabled||a.checkUiComponentContext(t.context).shouldDisable),rr(()=>a.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[Fh]:(d=p.buttonBehaviours)===null||d===void 0?void 0:d[Fh]}})},V$=(t,s,a)=>yy(t,s,[],a),yy=(t,s,a,c)=>H$(t,{toolbarButtonBehaviours:a.length>0?[wn("toolbarButtonWith",a)]:[],getApi:I$,onSetup:t.onSetup},s,c),IM=(t,s,a)=>FM(t,s,[],a),FM=(t,s,a,c)=>H$(t,{toolbarButtonBehaviours:[Sn.config({}),Mn.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[wn("toolbarToggleButtonWith",a)]:[]),getApi:yj,onSetup:t.onSetup},s,c),wp=(t,s,a)=>c=>Ja.nu(d=>s.fetch(d)).map(d=>R.from(OR(Rt(Lk(Mt("menu-value"),d,g=>{s.onItemAction(t(c),g)},s.columns,s.presets,Al.CLOSE_ON_EXECUTE,s.select.getOr(On),a),{movement:ew(s.columns,s.presets),menuBehaviours:Tc.unnamedEvents(s.columns!=="auto"?[]:[vo((g,p)=>{nR(g,4,BO(s.presets)).each(({numRows:x,numColumns:T})=>{jt.setGridSize(g,x,T)})})])})))),z$=(t,s,a)=>{const c=Wt(t.tooltip.getOr("")),d=x=>({isEnabled:()=>!Nt.isDisabled(x),setEnabled:T=>Nt.set(x,!T),setIconFill:(T,O)=>{Pn(x.element,`svg path[class="${T}"], rect[class="${T}"]`).each(D=>{Ve(D,"fill",O)})},setActive:T=>{Ve(x.element,"aria-pressed",T),Pn(x.element,"span").each(O=>{x.getSystem().getByDom(O).each(D=>Mn.set(D,T))})},isActive:()=>Pn(x.element,"span").exists(T=>x.getSystem().getByDom(T).exists(Mn.isOn)),setText:T=>Pn(x.element,"span").each(O=>x.getSystem().getByDom(O).each(D=>Gt(D,bu,{text:T}))),setIcon:T=>Pn(x.element,"span").each(O=>x.getSystem().getByDom(O).each(D=>Gt(D,vp,{icon:T}))),setTooltip:T=>{const O=s.providers.translate(T);Ve(x.element,"aria-label",O),c.set(T)}}),g=Wt(Y),p={getApi:d,onSetup:t.onSetup};return Z4.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...F$(t.tooltip,s.providers),...st(a)?{"data-mce-name":a}:{}}},onExecute:x=>{const T=d(x);T.isEnabled()&&t.onAction(T)},onItemExecute:(x,T,O)=>{},splitDropdownBehaviours:rt([wn("split-dropdown-events",[vo((x,T)=>h4(x)),$e($$,gn.focus),hd(p,g),dp(p,g)]),Rl.splitButton(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),rr(()=>s.providers.checkUiComponentContext(t.context)),mw.config({}),...t.tooltip.map(x=>fs.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(x),onShow:T=>{if(c.get()!==x){const O=s.providers.translate(c.get());fs.setComponents(T,s.providers.tooltips.getComponents({tooltipText:O}))}}})})).toArray()]),eventOrder:{[Xi()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[ma()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:wp(d,t,s.providers),parts:{menu:Sk(!1,t.columns,t.presets)},components:[Z4.parts.button(LM(t.icon,t.text,R.none(),R.some([Mn.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),Rl.toolbarButton(On),rr(ne({contextType:"any",shouldDisable:!1}))]),s.providers,t.context)),Z4.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:OO("chevron-down",s.providers.icons)},buttonBehaviours:rt([Rl.splitButton(On),rr(ne({contextType:"any",shouldDisable:!1}))])}),Z4.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},Sj=".tox-toolbar-slider__input,.tox-toolbar-textfield",U$=t=>{Cs.getContent(t).each(s=>{Pn(s.element,Sj).fold(()=>jt.focusIn(s),ha)})},wj=t=>Ka(t.element).each(s=>{zs(s,'[tabindex="-1"]').each(a=>{ha(a)})}),W$=Mt("forward-slide"),q4=Mt("backward-slide"),$M=Mt("change-slide-event"),HM="tox-pop--resizing",Z$=t=>{const s=Wt([]);return{sketch:Cs.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:c=>{s.set([]),Cs.getContent(c).each(d=>{Un(d.element,"visibility")}),ao(c.element,HM),Un(c.element,"width")},onHide:()=>{s.set([]),t.onHide()},inlineBehaviours:rt([wn("context-toolbar-events",[pg(p0(),(c,d)=>{d.event.raw.propertyName==="width"&&(ao(c.element,HM),Un(c.element,"width"))}),$e($M,(c,d)=>{const g=c.element;Un(g,"width");const p=Rn(g),x=Ka(c.element).isSome();Un(g,"left"),Un(g,"right"),Un(g,"max-width"),Cs.setContent(c,d.event.contents),qs(g,HM);const T=Rn(g);En(g,"transition","none"),Cs.reposition(c),Un(g,"transition"),En(g,"width",p+"px"),d.event.focus.fold(()=>{x&&U$(c)},O=>{Cc(Hr(c.element)).fold(()=>ha(O),D=>{Kn(D,O)||ha(O)})}),setTimeout(()=>{En(c.element,"width",T+"px")},0)}),$e(W$,(c,d)=>{Cs.getContent(c).each(g=>{s.set(s.get().concat([{bar:g,focus:Cc(Hr(c.element))}]))}),Gt(c,$M,{contents:d.event.forwardContents,focus:R.none()})}),$e(q4,(c,d)=>{t.onBack(),Dd(s.get()).each(g=>{s.set(s.get().slice(0,s.get().length-1)),Gt(c,$M,{contents:ur(g.bar),focus:g.focus})})})]),jt.config({mode:"special",onEscape:c=>Dd(s.get()).fold(()=>t.onEscape(),d=>(Wn(c,q4),R.some(!0)))})]),lazySink:()=>In.value(t.sink)}),inSubtoolbar:()=>s.get().length>0}},xj=(t,s)=>{const a=ml(Zv({type:"button",icon:"chevron-left",tooltip:"Back",onAction:Y}));return yy(a,s.shared.providers,[$e(f4,c=>{Wn(c,q4)})])},Cy=(t,s,a)=>is(a)?t.translate(s):t.translate([s,t.translate(a)]),VM=(t,s)=>{const a=(p,x,T,O)=>{const D=t.shared.providers.translate(p.title);if(p.type==="separator")return R.some({type:"separator",text:D});if(p.type==="submenu"){const L=ye(p.getStyleItems(),H=>c(H,x,O));return x===0&&L.length<=0?R.none():R.some({type:"nestedmenuitem",text:D,enabled:L.length>0,getSubmenuItems:()=>ye(p.getStyleItems(),H=>c(H,x,O))})}else return R.some({type:"togglemenuitem",text:D,icon:p.icon,active:p.isSelected(O),enabled:!T,onAction:s.onAction(p),...p.getStylePreview().fold(()=>({}),L=>({meta:{style:L}}))})},c=(p,x,T)=>{const O=p.type==="formatter"&&s.isInvalid(p);return x===0?O?[]:a(p,x,!1,T).toArray():a(p,x,O,T).toArray()},d=p=>{const x=s.getCurrentValue(),T=s.shouldHide?0:1;return ye(p,O=>c(O,T,x))};return{validateItems:d,getFetch:(p,x)=>(T,O)=>{const D=x(),L=d(D),H=sy(L,Al.CLOSE_ON_EXECUTE,p,{isHorizontalMenu:!1,search:R.none()});O(H)}}},Sy=(t,s)=>{const a=s.dataset,c=a.type==="basic"?()=>qe(a.data,d=>JD(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:VM(t,s),getStyleItems:c}},Ww=(t,s,a,c,d,g)=>{const{items:p,getStyleItems:x}=Sy(s,a),T=Wt(a.tooltip),O=L=>({getComponent:ne(L),setTooltip:H=>{const q=s.shared.providers.translate(H);Ve(L.element,"aria-label",q),T.set(H)}}),D=L=>{const H=q=>L.setTooltip(Cy(t,c(q.value),q.value));return t.on(d,H),Dk(lb(t,"NodeChange",q=>{const J=q.getComponent();a.updateText(J),Nt.set(q.getComponent(),!t.selection.isEditable())})(L),()=>t.off(d,H))};return SD({context:"mode:design",text:a.icon.isSome()?R.none():a.text,icon:a.icon,ariaLabel:R.some(a.tooltip),tooltip:R.none(),role:R.none(),fetch:p.getFetch(s,x),onSetup:D,getApi:O,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[fs.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:L=>{if(a.tooltip!==T.get()){const H=s.shared.providers.translate(T.get());fs.setComponents(L,s.shared.providers.tooltips.getComponents({tooltipText:H}))}}})})]},"tox-tbtn",s.shared,g)},Ej=t=>qe(t,s=>{let a=s,c=s;const d=s.split("=");return d.length>1&&(a=d[0],c=d[1]),{title:a,format:c}}),Tj=t=>({type:"basic",data:t});var wy;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(wy||(wy={}));const kj=(t,s)=>s===wy.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),j4=(t,s,a)=>{const c=t.options.get(s);return{type:"basic",data:Ej(kj(c,a))}},q$="Align",zM=ne("Alignment {0}"),j$="left",G4=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],G$=t=>{const s=()=>yn(G4,x=>t.formatter.match(x.format)),a=x=>()=>t.formatter.match(x),c=x=>R.none,d=x=>{const O=s().fold(ne(j$),D=>D.title.toLowerCase());Gt(x,vp,{icon:`align-${O}`}),gR(t,{value:O})},g=Tj(G4),p=x=>()=>yn(G4,T=>T.format===x.format).each(T=>t.execCommand(T.command));return{tooltip:Cy(t,zM(),j$),text:R.none(),icon:R.some("align-left"),isSelectedFor:a,getCurrentValue:R.none,getPreviewFor:c,onAction:p,updateText:d,dataset:g,shouldHide:!1,isInvalid:x=>!t.formatter.canApply(x.format)}},_j=(t,s)=>Ww(t,s,G$(t),zM,"AlignTextUpdate","align"),Aj=(t,s)=>{const a=Sy(s,G$(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(q$),onSetup:Hi(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},UM=(t,s)=>{const a=s(),c=qe(a,d=>d.format);return R.from(t.formatter.closest(c)).bind(d=>yn(a,g=>g.format===d))},Oj="Blocks",WM=ne("Block {0}"),ZM="Paragraph",K$=t=>{const s=g=>()=>t.formatter.match(g),a=g=>()=>{const p=t.formatter.get(g);return p?R.some({tag:p.length>0&&(p[0].inline||p[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):R.none()},c=g=>{const x=UM(t,()=>d.data).fold(ne(ZM),T=>T.title);Gt(g,bu,{text:x}),qL(t,{value:x})},d=j4(t,"block_formats",wy.SemiColon);return{tooltip:Cy(t,WM(),ZM),text:R.some(ZM),icon:R.none(),isSelectedFor:s,getCurrentValue:R.none,getPreviewFor:a,onAction:GL(t),updateText:c,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},Rj=(t,s)=>Ww(t,s,K$(t),WM,"BlocksTextUpdate","blocks"),Dj=(t,s)=>{const a=Sy(s,K$(t));t.ui.registry.addNestedMenuItem("blocks",{text:Oj,onSetup:Hi(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},Mj="Fonts",X$=ne("Font {0}"),qM="System Font",Y$=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],J$=t=>{const s=t.split(/\s*,\s*/);return qe(s,a=>a.replace(/^['"]+|['"]+$/g,""))},Q$=(t,s)=>s.length>0&&ic(s,a=>t.indexOf(a.toLowerCase())>-1),Pj=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=J$(t.toLowerCase());return Q$(a,Y$)||Q$(a,s)}else return!1},e8=t=>{const s=()=>{const T=J=>J?J$(J)[0]:"",O=t.queryCommandValue("FontName"),D=x.data,L=O?O.toLowerCase():"",H=mB(t);return{matchOpt:yn(D,J=>{const re=J.format;return re.toLowerCase()===L||T(re).toLowerCase()===T(L).toLowerCase()}).orThunk(()=>un(Pj(L,H),{title:qM,format:L})),font:O}},a=T=>O=>O.exists(D=>D.format===T),c=()=>{const{matchOpt:T}=s();return T},d=T=>()=>R.some({tag:"div",styles:T.indexOf("dings")===-1?{"font-family":T}:{}}),g=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,T.format)})},p=T=>{const{matchOpt:O,font:D}=s(),L=O.fold(ne(D),H=>H.title);Gt(T,bu,{text:L}),n9(t,{value:L})},x=j4(t,"font_family_formats",wy.SemiColon);return{tooltip:Cy(t,X$(),qM),text:R.some(qM),icon:R.none(),isSelectedFor:a,getCurrentValue:c,getPreviewFor:d,onAction:g,updateText:p,dataset:x,shouldHide:!1,isInvalid:On}},Nj=(t,s)=>Ww(t,s,e8(t),X$,"FontFamilyTextUpdate","fontfamily"),Bj=(t,s)=>{const a=Sy(s,e8(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(Mj),onSetup:Hi(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},Lj={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},t8=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),c="\\.",d=x=>`(?:${x})?`,p=`[+-]?(?:${["Infinity",t+c+d(t)+d(a),c+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${p})(.*)$`)})(),Ij=(t,s)=>wr(s,a=>wr(Lj[a],c=>t===c)),K4=(t,s)=>R.from(t8.exec(t)).bind(c=>{const d=Number(c[1]),g=c[2];return Ij(g,s)?R.some({value:d,unit:g}):R.none()}),n8=(t,s)=>K4(t,s).map(({value:a,unit:c})=>a+c),o8={tab:ne(9),escape:ne(27),enter:ne(13),backspace:ne(8),delete:ne(46),left:ne(37),up:ne(38),right:ne(39),down:ne(40),space:ne(32),home:ne(36),end:ne(35),pageUp:ne(33),pageDown:ne(34)},s8=(t,s,a,c)=>{let d=R.none();const g=he=>he.map(ke=>Et.getValue(ke)).getOr(""),p=lb(t,"NodeChange SwitchMode DisabledStateChange",he=>{const ke=he.getComponent();d=R.some(ke),a.updateInputValue(ke),Nt.set(ke,!t.selection.isEditable()||XT(t))}),x=he=>({getComponent:ne(he)}),T=Wt(Y),O=Mt("custom-number-input-events"),D=(he,ke,Pe)=>{const Ct=g(d),tt=a.getNewValue(Ct,he),Be=Ct.length-`${tt}`.length,At=d.map(en=>en.element.dom.selectionStart-Be),cn=d.map(en=>en.element.dom.selectionEnd-Be);a.onAction(tt,Pe),d.each(en=>{Et.setValue(en,tt),ke&&(At.each($n=>en.element.dom.selectionStart=$n),cn.each($n=>en.element.dom.selectionEnd=$n))})},L=(he,ke)=>D((Pe,Ct)=>Pe-Ct,he,ke),H=(he,ke)=>D((Pe,Ct)=>Pe+Ct,he,ke),q=he=>$c(he.element).fold(R.none,ke=>(ha(ke),R.some(!0))),J=he=>Rr(he.element)?(Pu(he.element).each(ke=>ha(ke)),R.some(!0)):R.none(),re=(he,ke,Pe,Ct)=>{const tt=Wt(Y),Be=s.shared.providers.translate(Pe),At=Mt("altExecuting"),cn=lb(t,"NodeChange SwitchMode DisabledStateChange",$n=>{Nt.set($n.getComponent(),!t.selection.isEditable()||XT(t))}),en=$n=>{Nt.isDisabled($n)||he(!0)};return Nr.sketch({dom:{tag:"button",attributes:{"aria-label":Be,"data-mce-name":ke},classes:Ct.concat(ke)},components:[yD(ke,s.shared.providers.icons)],buttonBehaviours:rt([Nt.config({}),fs.config(s.shared.providers.tooltips.getConfig({tooltipText:Be})),wn(At,[hd({onSetup:cn,getApi:x},tt),dp({getApi:x},tt),$e(Ki(),($n,vn)=>{(vn.event.raw.keyCode===o8.space()||vn.event.raw.keyCode===o8.enter())&&(Nt.isDisabled($n)||he(!1))}),$e(Xd(),en),$e(qu(),en)])]),eventOrder:{[Ki()]:[At,"keying"],[Xd()]:[At,"alloy.base.behaviour"],[qu()]:[At,"alloy.base.behaviour"],[Xi()]:["alloy.base.behaviour",At,"tooltipping"],[ma()]:[At,"tooltipping"]}})},de=io(re(he=>L(!1,he),"minus","Decrease font size",[])),oe=io(re(he=>H(!1,he),"plus","Increase font size",[])),fe=io({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Dh.sketch({inputBehaviours:rt([Nt.config({}),wn(O,[hd({onSetup:p,getApi:x},T),dp({getApi:x},T)]),wn("input-update-display-text",[$e(bu,(he,ke)=>{Et.setValue(he,ke.event.text)}),$e(g0(),he=>{a.onAction(Et.getValue(he))}),$e(iu(),he=>{a.onAction(Et.getValue(he))})]),jt.config({mode:"special",onEnter:he=>(D(at,!0,!0),R.some(!0)),onEscape:q,onUp:he=>(H(!0,!1),R.some(!0)),onDown:he=>(L(!0,!1),R.some(!0)),onLeft:(he,ke)=>(ke.cut(),R.none()),onRight:(he,ke)=>(ke.cut(),R.none())})])})],behaviours:rt([gn.config({}),jt.config({mode:"special",onEnter:J,onSpace:J,onEscape:q}),wn("input-wrapper-events",[$e(pl(),he=>{Ot([de,oe],ke=>{const Pe=ct.fromDom(ke.get(he).element.dom);Rr(Pe)&&sd(Pe)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...st(c)?{"data-mce-name":c}:{}}},components:[de.asSpec(),fe.asSpec(),oe.asSpec()],behaviours:rt([gn.config({}),jt.config({mode:"flow",focusInside:ya.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:he=>Rr(he.element)?R.none():(ha(he.element),R.some(!0))})])}},r8="Font sizes",a8=ne("Font size {0}"),i8="12pt",Fj={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},xy={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},$j=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},Hj=(t,s)=>/[0-9.]+px$/.test(t)?$j(parseInt(t,10)*72/96,s||0)+"pt":Tt(xy,t).getOr(t),Vj=t=>Tt(Fj,t).getOr(""),c8=t=>{const s=()=>{let T=R.none();const O=x.data,D=t.queryCommandValue("FontSize");if(D)for(let L=3;T.isNone()&&L>=0;L--){const H=Hj(D,L),q=Vj(H);T=yn(O,J=>J.format===D||J.format===H||J.format===q)}return{matchOpt:T,size:D}},a=T=>O=>O.exists(D=>D.format===T),c=()=>{const{matchOpt:T}=s();return T},d=ne(R.none),g=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,T.format)})},p=T=>{const{matchOpt:O,size:D}=s(),L=O.fold(ne(D),H=>H.title);Gt(T,bu,{text:L}),pR(t,{value:L})},x=j4(t,"font_size_formats",wy.Space);return{tooltip:Cy(t,a8(),i8),text:R.some(i8),icon:R.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:c,onAction:g,updateText:p,dataset:x,shouldHide:!1,isInvalid:On}},zj=(t,s)=>Ww(t,s,c8(t),a8,"FontSizeTextUpdate","fontsize"),Uj=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},Wj=16,Zj=t=>t>=0,jM=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:c=>Gt(c,bu,{text:s()}),onAction:(c,d)=>t.execCommand("FontSize",!1,c,{skip_focus:!d}),getNewValue:(c,d)=>{K4(c,["unsupportedLength","empty"]);const g=s(),p=K4(c,["unsupportedLength","empty"]).or(K4(g,["unsupportedLength","empty"])),x=p.map(H=>H.value).getOr(Wj),T=rB(t),O=p.map(H=>H.unit).filter(H=>H!=="").getOr(T),D=d(x,Uj(O).step),L=`${Zj(D)?D:x}${O}`;return L!==g&&Rk(t,{value:L}),L}}},qj=(t,s)=>s8(t,s,jM(t),"fontsizeinput"),jj=(t,s)=>{const a=Sy(s,c8(t));t.ui.registry.addNestedMenuItem("fontsize",{text:r8,onSetup:Hi(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},l8="Formats",GM=t=>is(t)?"Formats":"Format {0}",u8=(t,s)=>{const a="Formats",c=p=>()=>t.formatter.match(p),d=p=>()=>{const x=t.formatter.get(p);return x!==void 0?R.some({tag:x.length>0&&(x[0].inline||x[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):R.none()},g=p=>{const x=L=>PF(L)?ye(L.items,x):NF(L)?[{title:L.title,format:L.format}]:[],T=ye(Eb(t),x),D=UM(t,ne(T)).fold(ne({title:a,tooltipLabel:""}),L=>({title:L.title,tooltipLabel:L.title}));Gt(p,bu,{text:D.title}),t9(t,{value:D.tooltipLabel})};return{tooltip:Cy(t,GM(""),""),text:R.some(a),icon:R.none(),isSelectedFor:c,getCurrentValue:R.none,getPreviewFor:d,onAction:GL(t),updateText:g,shouldHide:J5(t),isInvalid:p=>!t.formatter.canApply(p.format),dataset:s}},Gj=(t,s)=>{const a={type:"advanced",...s.styles};return Ww(t,s,u8(t,a),GM,"StylesTextUpdate","styles")},Kj=(t,s)=>{const a={type:"advanced",...s.styles},c=Sy(s,u8(t,a));t.ui.registry.addNestedMenuItem("styles",{text:l8,onSetup:Hi(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},Xj=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],Zw=(t,s)=>(a,c,d,g)=>{const p=t(a).mapError(x=>ig(x)).getOrDie();return s(p,c,d,g)},Yj={button:Zw(Zv,(t,s,a,c)=>V$(t,s.shared.providers,c)),togglebutton:Zw(qv,(t,s,a,c)=>IM(t,s.shared.providers,c)),menubutton:Zw(QF,(t,s,a,c)=>Aw(t,"tox-tbtn",s,R.none(),!1,c)),splitbutton:Zw(e$,(t,s,a,c)=>z$(t,s.shared,c)),grouptoolbarbutton:Zw(uq,(t,s,a,c)=>{const d=a.ui.registry.getAll().buttons,g=x=>Ab(a,{buttons:d,toolbar:x,allowToolbarGroups:!1},s,R.none()),p={[tv]:s.shared.header.isPositionedAtTop()?rd.TopToBottom:rd.BottomToTop};switch(Fv(a)){case kl.floating:return Cj(t,s,g,p,c);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},d8=(t,s,a,c)=>Tt(Yj,t.type).fold(()=>(console.error("skipping button defined by",t),R.none()),d=>R.some(d(t,s,a,c))),m8={styles:Gj,fontsize:zj,fontsizeinput:qj,fontfamily:Nj,blocks:Rj,align:_j,navigateback:xj},Jj=t=>{const s=qe(Xj,a=>{const c=Eo(a.items,d=>Jn(t,d)||Jn(m8,d));return{name:a.name,items:c}});return Eo(s,a=>a.items.length>0)},Qj=t=>{const s=t.split("|");return qe(s,a=>({items:a.trim().split(" ")}))},eG=t=>Oe(t,s=>(Jn(s,"name")||Jn(s,"label"))&&Jn(s,"items")),f8=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?Jj(a):te(s)?Qj(s):eG(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},tG=(t,s,a,c,d,g)=>Tt(s,a.toLowerCase()).orThunk(()=>g.bind(p=>ks(p,x=>Tt(s,x+a.toLowerCase())))).fold(()=>Tt(m8,a.toLowerCase()).map(p=>p(t,d)),p=>p.type==="grouptoolbarbutton"&&!c?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),R.none()):d8(p,d,t,a.toLowerCase())),Ab=(t,s,a,c)=>{const d=f8(s),g=qe(d,p=>{const x=ye(p.items,T=>T.trim().length===0?[]:tG(t,s.buttons,T,s.allowToolbarGroups,a,c).toArray());return{title:R.from(t.translate(p.name)),label:un(p.label!==void 0,t.translate(p.label)),items:x}});return Eo(g,p=>p.items.length>0)},qw=(t,s,a,c)=>{const d=s.mainUi.outerContainer,g=a.toolbar,p=a.buttons;if(Oe(g,te)){const x=g.map(T=>{const O={toolbar:T,buttons:p,allowToolbarGroups:a.allowToolbarGroups};return Ab(t,O,c,R.none())});Jo.setToolbars(d,x)}else Jo.setToolbar(d,Ab(t,a,c,R.none()))},KM=xs(),nG=KM.os.isiOS()&&KM.os.version.major<=12,oG=(t,s)=>{const{uiMotherships:a}=s,c=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,p=Wt($o(d.innerWidth,d.innerHeight)),x=Wt($o(g.offsetWidth,g.offsetHeight)),T=()=>{const H=p.get();(H.left!==d.innerWidth||H.top!==d.innerHeight)&&(p.set($o(d.innerWidth,d.innerHeight)),fR(t))},O=()=>{const H=t.getDoc().documentElement,q=x.get();(q.left!==H.offsetWidth||q.top!==H.offsetHeight)&&(x.set($o(H.offsetWidth,H.offsetHeight)),fR(t))},D=H=>{Ak(t,H)};c.bind(d,"resize",T),c.bind(d,"scroll",D);const L=Y0(ct.fromDom(t.getBody()),"load",O);t.on("hide",()=>{Ot(a,H=>{En(H.element,"display","none")})}),t.on("show",()=>{Ot(a,H=>{Un(H.element,"display")})}),t.on("NodeChange",O),t.on("remove",()=>{L.unbind(),c.unbind(d,"resize",T),c.unbind(d,"scroll",D),d=null})},sG=(t,s,a)=>{Rh(t)&&ia(a.mainUi.mothership.element,a.popupUi.mothership),pa(s,a.dialogUi.mothership)};var rG=Object.freeze({__proto__:null,render:(t,s,a,c,d)=>{const{mainUi:g,uiMotherships:p}=s,x=Wt(0),T=g.outerContainer;L$(t);const O=ct.fromDom(d.targetNode),D=gr(Hr(O));ia(O,g.mothership),sG(t,D,s),t.on("PostRender",()=>{Jo.setSidebar(T,a.sidebar,dB(t))}),t.on("SkinLoaded",()=>{qw(t,s,a,c),x.set(t.getWin().innerWidth),Jo.setMenubar(T,MM(t,a)),Jo.setViews(T,a.views),oG(t,s)});const L=Jo.getSocket(T).getOrDie("Could not find expected socket element");if(nG){ta(L.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const re=pW(()=>{t.dispatch("ScrollContent")},20),de=hi(L.element,"scroll",re.throttle);t.on("remove",de.unbind)}sR(t,s),t.addCommand("ToggleSidebar",(re,de)=>{Jo.toggleSidebar(T,de),o9(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var re;return(re=Jo.whichSidebar(T))!==null&&re!==void 0?re:""}),t.addCommand("ToggleView",(re,de)=>{if(Jo.toggleView(T,de)){const oe=T.element;g.mothership.broadcastOn([cm()],{target:oe}),Ot(p,fe=>{fe.broadcastOn([cm()],{target:oe})}),nt(Jo.whichView(T))&&(t.focus(),t.nodeChanged(),Jo.refreshToolbar(T)),s9(t)}}),t.addQueryValueHandler("ToggleView",()=>{var re;return(re=Jo.whichView(T))!==null&&re!==void 0?re:""});const H=Fv(t),q=()=>{Jo.refreshToolbar(s.mainUi.outerContainer)};(H===kl.sliding||H===kl.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const re=t.getWin().innerWidth;re!==x.get()&&(q(),x.set(re))});const J={setEnabled:re=>{Gv(s,re?"setEnabled":"setDisabled")},isEnabled:()=>!Nt.isDisabled(T)};return{iframeContainer:L.element.dom,editorContainer:T.element.dom,api:J}}});const X4=t=>/^[0-9\.]+(|px)$/i.test(""+t)?R.some(parseInt(""+t,10)):R.none(),Y4=t=>Vt(t)?t+"px":t,jw=(t,s,a)=>{const c=s.filter(g=>t<g),d=a.filter(g=>t>g);return c.or(d).getOr(t)},h8=(t,s)=>{if(typeof s=="number")return R.from(s);const a=/^([0-9.]+)(pt|em|px)$/.exec(s.trim());if(a){const c=a[2],d=Number.parseFloat(a[1]);if(Number.isNaN(d)||d<0)return R.none();if(c==="em")return R.from(d*Number.parseFloat(window.getComputedStyle(t.dom).fontSize));if(c==="pt")return R.from(d*(72/96));if(c==="px")return R.from(d)}return R.none()},g8=t=>{const s=h8(ct.fromDom(t.targetElm),X3(t)),a=J3(t),c=Iv(t);return s.map(d=>jw(d,a,c))},aG=t=>g8(t).getOr(X3(t)),XM=t=>{const s=Y3(t),a=bS(t),c=np(t);return X4(s).map(d=>jw(d,a,c))},iG=t=>XM(t).getOr(Y3(t)),{ToolbarLocation:YM,ToolbarMode:p8}=AV,cG=40,lG=(t,s,a,c,d)=>{const{mainUi:g,uiMotherships:p}=a,x=gS.DOM,T=md(t),O=op(t),D=np(t).or(XM(t)),L=c.shared.header,H=L.isPositionedAtTop,q=150,J=Fv(t),re=J===p8.sliding||J===p8.floating,de=Wt(!1),oe=()=>de.get()&&!t.removed,fe=$t=>re?$t.fold(ne(0),et=>et.components().length>1?nr(et.components()[1].element):0):0,he=$t=>{switch(JT(t)){case YM.auto:const et=Jo.getToolbar(g.outerContainer),vt=fe(et),fn=nr($t.element)-vt,An=pr(s);if(An.y>fn)return"top";{const kn=cc(s),Oo=Math.max(kn.dom.scrollHeight,nr(kn));return An.bottom<Oo-fn||_r().bottom<An.bottom-fn?"bottom":"top"}case YM.bottom:return"bottom";case YM.top:default:return"top"}},ke=$t=>{d.on(et=>{ds.setModes(et,[$t]),L.setDockingMode($t);const vt=H()?rd.TopToBottom:rd.BottomToTop;Ve(et.element,tv,vt)})},Pe=()=>{d.on($t=>{const et=D.getOrThunk(()=>ll().width-Ti(s).left-10);En($t.element,"max-width",et+"px")})},Ct=($t,et)=>{d.on(vt=>{const fn=Jo.getToolbar(g.outerContainer),An=fe(fn),Jt=pr(s),kn=tt(t,g.outerContainer.element),Oo=()=>kn.fold(()=>Jt.x,Qa=>{const Bl=pr(Qa);return Kn(Qa,ge())?Jt.x:Jt.x-Bl.x}),So=()=>kn.fold(()=>H()?Math.max(Jt.y-nr(vt.element)+An,0):Jt.bottom,Qa=>{var Bl;const Ll=pr(Qa),kd=(Bl=Qa.dom.scrollTop)!==null&&Bl!==void 0?Bl:0,xf=Kn(Qa,ge())?Math.max(Jt.y-nr(vt.element)+An,0):Jt.y-Ll.y+kd-nr(vt.element)+An;return H()?xf:Jt.bottom}),Rc=Oo(),Es=un($t,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(Qa=>Qa>q).map(Qa=>{const Bl=et.getOr(Ra()),Ll=window.innerWidth-(Rc-Bl.left),kd=Math.max(Math.min(Qa,Ll),q);return Ll<Qa&&En(g.outerContainer.element,"width",kd+"px"),{width:kd+"px"}}).getOr({width:"max-content"}),Nl={position:"absolute",left:Math.round(Rc)+"px",top:So()+"px"};ta(g.outerContainer.element,{...Nl,...Es})})},tt=($t,et)=>Rh($t)?E0(et):R.none(),Be=()=>{Ot(p,$t=>{$t.broadcastOn([lm()],{})})},At=()=>!T&&(Va(g.outerContainer.element).left+Id(g.outerContainer.element)>=window.innerWidth-cG||Ps(g.outerContainer.element,"width").isSome())?(En(g.outerContainer.element,"position","absolute"),En(g.outerContainer.element,"left","0px"),Un(g.outerContainer.element,"width"),!0):!1,cn=$t=>{if(!oe())return;T||Pe();const et=Ra(),vt=T?!1:At();if(re&&Jo.refreshToolbar(g.outerContainer),!T){const fn=Ra(),An=un(et.left!==fn.left,et);Ct(vt,An),An.each(Jt=>{Gd(Jt.left,fn.top)})}O&&d.on($t),Be()},en=()=>T||!O||!oe()?!1:d.get().exists($t=>{const et=L.getDockingMode(),vt=he($t);return vt!==et?(ke(vt),!0):!1});return{isVisible:oe,isPositionedAtTop:H,show:()=>{de.set(!0),En(g.outerContainer.element,"display","flex"),x.addClass(t.getBody(),"mce-edit-focus"),Ot(p,$t=>{Un($t.element,"display")}),en(),Rh(t)?cn($t=>ds.isDocked($t)?ds.reset($t):ds.refresh($t)):cn(ds.refresh)},hide:()=>{de.set(!1),En(g.outerContainer.element,"display","none"),x.removeClass(t.getBody(),"mce-edit-focus"),Ot(p,$t=>{En($t.element,"display","none")})},update:cn,updateMode:()=>{en()&&cn(ds.reset)},repositionPopups:Be}},Ey=(t,s)=>{const a=pr(t);return{pos:s?a.y:a.bottom,bounds:a}},uG=(t,s,a,c)=>{const d=Wt(Ey(s,a.isPositionedAtTop())),g=O=>{const{pos:D,bounds:L}=Ey(s,a.isPositionedAtTop()),{pos:H,bounds:q}=d.get(),J=L.height!==q.height||L.width!==q.width;d.set({pos:D,bounds:L}),J&&fR(t,O),a.isVisible()&&(H!==D?a.update(ds.reset):J&&(a.updateMode(),a.repositionPopups()))};c||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(ds.reset)),t.on("NodeChange keydown",O=>{requestAnimationFrame(()=>g(O))});let p=0;const x=mD(()=>a.update(ds.refresh),33);t.on("ScrollWindow",()=>{const O=Ra().left;O!==p&&(p=O,x.throttle()),a.updateMode()}),Rh(t)&&t.on("ElementScroll",O=>{a.update(ds.refresh)});const T=Ai();T.set(Y0(ct.fromDom(t.getBody()),"load",O=>g(O.raw))),t.on("remove",()=>{T.clear()})};var dG=Object.freeze({__proto__:null,render:(t,s,a,c,d)=>{const{mainUi:g}=s,p=uo(),x=ct.fromDom(d.targetNode),T=lG(t,x,s,c,p),O=nB(t);gj(t);const D=()=>{if(p.isSet()){T.show();return}p.set(Jo.getHeader(g.outerContainer).getOrDie());const H=uO(t);Rh(t)?(ia(x,g.mothership),ia(x,s.popupUi.mothership)):pa(H,g.mothership),pa(H,s.dialogUi.mothership);const q=()=>{qw(t,s,a,c),Jo.setMenubar(g.outerContainer,MM(t,a)),T.show(),uG(t,x,T,O),t.nodeChanged()};O?t.once("SkinLoaded",q):q()};t.on("show",D),t.on("hide",T.hide),O||(t.on("focus",D),t.on("blur",T.hide)),t.on("init",()=>{(t.hasFocus()||O)&&D()}),sR(t,s);const L={show:D,hide:T.hide,setEnabled:H=>{Gv(s,H?"setEnabled":"setDisabled")},isEnabled:()=>!Nt.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:L}}});const b8=()=>{const t=uo(),s=uo(),a=uo();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=t.get().map(x=>x.mothership),p=s.get().map(x=>x.mothership);return g.fold(()=>p.toArray(),x=>p.fold(()=>[x],T=>Kn(x.element,T.element)?[x]:[x,T]))},lazyGetInOuterOrDie:(g,p)=>()=>a.get().bind(x=>p(x.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}};var v8=tinymce.util.Tools.resolve("tinymce.util.VK");const y8="contexttoolbar-show",C8="contexttoolbar-hide",Ty=(t,s,a)=>({setInputEnabled:c=>{!c&&a&&ha(a),Nt.set(t,!c)},isInputEnabled:()=>!Nt.isDisabled(t),hide:()=>{Wn(t,Jf())},back:()=>{Wn(t,q4)},getValue:()=>s.get().getOrThunk(()=>Et.getValue(t)),setValue:c=>{t.getSystem().isConnected()?Et.setValue(t,c):s.set(c)}}),S8=(t,s,a)=>$e(f4,(c,d)=>{const g=t.get(c),p=Ty(g,a,c.element);s.onAction(p,d.event.buttonApi)}),mG=(t,s,a,c)=>{const{primary:d,...g}=s.original,p=ml(Zv({...g,type:"button",onAction:Y}));return yy(p,a,[S8(t,s,c)])},fG=(t,s,a,c)=>{const{primary:d,...g}=s.original,p=ml(qv({...g,type:"togglebutton",onAction:Y}));return FM(p,a,[S8(t,s,c)])},Gw=t=>t.type==="contextformtogglebutton",w8=(t,s,a,c)=>Gw(s)?fG(t,s,a,c):mG(t,s,a,c),x8=(t,s,a,c)=>{const d=qe(s,x=>io(w8(t,x,a,c)));return{asSpecs:()=>qe(d,x=>x.asSpec()),findPrimary:x=>ks(s,(T,O)=>T.primary?R.from(d[O]).bind(D=>D.getOpt(x)).filter(Ee(Nt.isDisabled)):R.none())}},hG=(t,s,a,c)=>{const{width:d,height:g}=t.initValue();let p=b4;const x=Mt("ratio-event"),T=tt=>Ty(tt,c),O=tt=>_l(tt,{tag:"span",classes:["tox-icon","tox-lock-icon__"+tt]},s.icons),D=()=>!1,L=t.label.getOr("Constrain proportions"),H=s.translate(L),q=Ys.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":H,"data-mce-name":L}},components:[O("lock"),O("unlock")],buttonBehaviours:rt([Nt.config({disabled:D}),zo.config({}),fs.config(s.tooltips.getConfig({tooltipText:H}))])}),J=tt=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:tt}),re=tt=>zs(tt.element,"div.tox-focusable-wrapper").fold(R.none,At=>(ha(At),R.some(!0))),de=tt=>Hn.parts.field({factory:Dh,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:tt?d:g,inputBehaviours:rt([Nt.config({disabled:D}),zo.config({}),wn("size-input-toolbar-events",[$e(Uc(),(Be,At)=>{Gt(Be,x,{isField1:tt})})]),jt.config({mode:"special",onEnter:a,onEscape:re})]),selectOnFocus:!1}),oe=tt=>({dom:{tag:"label",classes:["tox-label"]},components:[Vo(s.translate(tt))]}),fe=tt=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[tt],behaviours:rt([zo.config({}),gn.config({}),jt.config({mode:"special",onEnter:Be=>Pn(Be.element,"input").fold(R.none,cn=>(ha(cn),R.some(!0)))})])}),he=fe(Ys.parts.field1(J([Hn.parts.label(oe("Width:")),de(!0)]))),ke=fe(Ys.parts.field2(J([Hn.parts.label(oe("Height:")),de(!1)]))),Pe=Wt(Y),Ct=[hd({onBeforeSetup:tt=>Pn(tt.element,"input").each(ha),onSetup:t.onSetup,getApi:T},Pe),oR({getApi:T},Pe,c)];return Ys.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[he,ke,J([oe(Mg),q])],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(tt,Be,At)=>{xw(Et.getValue(tt)).each(cn=>{p(cn).each(en=>{Et.setValue(Be,ED(en))})})},onInput:tt=>Wn(tt,II),coupledFieldBehaviours:rt([gn.config({}),jt.config({mode:"flow",focusInside:ya.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),Nt.config({disabled:D,onDisabled:tt=>{Ys.getField1(tt).bind(Hn.getField).each(Nt.disable),Ys.getField2(tt).bind(Hn.getField).each(Nt.disable),Ys.getLock(tt).each(Nt.disable)},onEnabled:tt=>{Ys.getField1(tt).bind(Hn.getField).each(Nt.enable),Ys.getField2(tt).bind(Hn.getField).each(Nt.enable),Ys.getLock(tt).each(Nt.enable)}}),rr(()=>s.checkUiComponentContext("mode:design")),wn("size-input-toolbar-events2",[$e(x,(tt,Be)=>{const At=Be.event.isField1,cn=At?Ys.getField1(tt):Ys.getField2(tt),en=At?Ys.getField2(tt):Ys.getField1(tt),$n=cn.map(Et.getValue).getOr(""),vn=en.map(Et.getValue).getOr("");p=eF($n,vn)}),$e(II,tt=>t.onInput(T(tt))),...Ct])])})},JM=(t,s,a)=>Hn.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...t.toArray(),s],fieldBehaviours:rt([Nt.config({disabled:()=>a.checkUiComponentContext("mode:design").shouldDisable,onDisabled:c=>{wj(c),Hn.getField(c).each(Nt.disable)},onEnabled:c=>{Hn.getField(c).each(Nt.enable)}})])}),QM=(t,s,a,c)=>{const d=Wt(Y),g=T=>Ty(T,c),p=t.label.map(T=>Hn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Vo(s.translate(T))]})),x=Hn.parts.field({factory:Dh,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(t.min()),max:String(t.max())},data:t.initValue().toString(),fromInputValue:T=>ji(T).getOr(t.min()),toInputValue:T=>String(T),inputBehaviours:rt([Nt.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),rr(()=>s.checkUiComponentContext("mode:design")),jt.config({mode:"special",onEnter:a,onLeft:(T,O)=>(O.cut(),R.none()),onRight:(T,O)=>(O.cut(),R.none())}),wn("slider-events",[hd({onSetup:t.onSetup,getApi:g,onBeforeSetup:jt.focusIn},d),oR({getApi:g},d,c),$e(bc(),T=>{t.onInput(g(T))})])])});return JM(p,x,s)},E8=(t,s,a,c)=>{const d=Wt(Y),g=D=>Ty(D,c),p=t.label.map(D=>Hn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Vo(s.translate(D))]})),T={...t.placeholder.map(D=>({placeholder:s.translate(D)})).getOr({})},O=Hn.parts.field({factory:Dh,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:T,data:t.initValue(),selectOnFocus:!0,inputBehaviours:rt([Nt.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),rr(()=>s.checkUiComponentContext("mode:design")),jt.config({mode:"special",onEnter:a,onLeft:(D,L)=>(L.cut(),R.none()),onRight:(D,L)=>(L.cut(),R.none())}),wn("input-events",[hd({onSetup:t.onSetup,getApi:D=>zs(D.element,".tox-toolbar").bind(H=>Pn(H,"button:enabled")).fold(()=>Ty(D,c),H=>Ty(D,c,H)),onBeforeSetup:jt.focusIn},d),oR({getApi:g},d,c),$e(bc(),D=>{t.onInput(g(D))})])])});return JM(p,O,s)},J4=(t,s,a)=>{const c=uo(),g=io(t(a,O=>x.findPrimary(O).orThunk(()=>T.findPrimary(O)).map(D=>(Qd(D),!0)),c)),p=Hl(s.commands,O=>O.align==="start"),x=x8(g,p.pass,a,c),T=x8(g,p.fail,a,c);return Eo([{title:R.none(),label:R.none(),items:x.asSpecs()},{title:R.none(),label:R.none(),items:[g.asSpec()]},{title:R.none(),label:R.none(),items:T.asSpecs()}],O=>O.items.length>0)},T8=(t,s)=>{switch(t.type){case"contextform":return J4(ln(E8,t),t,s);case"contextsliderform":return J4(ln(QM,t),t,s);case"contextsizeinputform":return J4(ln(hG,t),t,s)}},Q4={renderContextForm:(t,s,a)=>F4({type:t,uid:Mt("context-toolbar"),initGroups:T8(s,a),onEscape:R.none,cyclicKeying:!0,providers:a}),buildInitGroups:T8},Xw=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,eP=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Yh(ct.fromDom(t.startContainer),t.startOffset).element;return(hr(a)?Er(a):R.some(a)).filter(Os).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},Yw=t=>{const s=t.selection.getRng(),a=eP(s);if(t.inline){const c=Ra();return bs(c.left+a.left,c.top+a.top,a.width,a.height)}else{const c=_i(ct.fromDom(t.getBody()));return bs(c.x+a.left,c.y+a.top,a.width,a.height)}},k8=(t,s)=>s.filter(a=>se(a)&&Fo(a)).map(_i).getOrThunk(()=>Yw(t)),e_=(t,s,a)=>{const c=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:c,width:d-c}},_8=(t,s,a,c,d,g)=>{const p=ct.fromDom(t.getContainer()),x=Pn(p,".tox-editor-header").getOr(p),T=pr(x),O=T.y>=s.bottom,D=c&&!O;if(t.inline&&D)return{y:Math.max(T.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!D)return{y:a.y,bottom:Math.min(T.y-g,a.bottom)};const L=d==="line"?pr(p):s;return D?{y:Math.max(T.bottom+g,a.y),bottom:Math.min(L.bottom-g,a.bottom)}:{y:Math.max(L.y+g,a.y),bottom:Math.min(T.y-g,a.bottom)}},tP=(t,s,a,c=0)=>{const d=ll(window),g=pr(ct.fromDom(t.getContentAreaContainer())),p=ok(t)||sk(t)||yS(t),{x,width:T}=e_(g,d,c);if(t.inline&&!p)return bs(x,d.y,T,d.height);{const O=s.header.isPositionedAtTop(),{y:D,bottom:L}=_8(t,g,d,O,a,c);return bs(x,D,T,L-D)}},ky=12,A8={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},nP={maxHeightFunction:fh(),maxWidthFunction:gy()},gG=(t,s)=>{const a=t.selection.getRng(),c=Yh(ct.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Kn(c.element,s)},pG=(t,s,a)=>{const c=Ps(t,"position");En(t,"position",s);const d=a(t);return c.each(g=>En(t,"position",g)),d},Jw=t=>t==="node",O8=(t,s,a,c,d)=>{const g=Yw(t),p=c.lastElement().exists(x=>Kn(a,x));if(gG(t,a))return p?GD:Sd;if(p)return pG(s,c.getMode(),()=>Xw(g,pr(s),-20)&&!c.isReposition()?CZ:GD);{const x=c.getMode()==="fixed"?d.y+Ra().top:d.y,T=nr(s)+ky;return x+T<=g.y?Sd:Nw}},bG=(t,s,a,c)=>{const d=T=>(O,D,L,H,q)=>{const J=O8(t,H,T,a,q),re={...O,y:q.y,height:q.height};return{...J(re,D,L,H,q),alwaysFit:!0}},g=T=>Jw(c)?[d(T)]:[];return s?{onLtr:T=>[Cr,or,dr,aa,sr,Or].concat(g(T)),onRtl:T=>[Cr,dr,or,sr,aa,Or].concat(g(T))}:{onLtr:T=>[Or,Cr,aa,or,sr,dr].concat(g(T)),onRtl:T=>[Or,Cr,sr,dr,aa,or].concat(g(T))}},vG=(t,s,a,c)=>s==="line"?{bubble:gi(ky,0,A8),layouts:{onLtr:()=>[oC],onRtl:()=>[T1]},overrides:nP}:{bubble:gi(0,ky,A8,1/ky),layouts:bG(t,a,c,s),overrides:nP},oP=(t,s)=>{const a=Eo(s,g=>g.predicate(t.dom)),{pass:c,fail:d}=Hl(a,g=>g.type==="contexttoolbar");return{contextToolbars:c,contextForms:d}},yG=t=>{if(t.length<=1)return t;{const s=g=>wr(t,p=>p.position===g),a=g=>Eo(t,p=>p.position===g),c=s("selection"),d=s("node");if(c||d)if(d&&c){const g=a("node"),p=qe(a("selection"),x=>({...x,position:"node"}));return g.concat(p)}else return a(c?"selection":"node");else return a("line")}},CG=t=>{if(t.length<=1)return t;{const s=c=>yn(t,d=>d.position===c);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(c=>c.position).fold(()=>[],c=>Eo(t,d=>d.position===c))}},R8=(t,s,a)=>{const c=oP(t,s);if(c.contextForms.length>0)return R.some({elem:t,toolbars:[c.contextForms[0]]});{const d=oP(t,a);if(d.contextForms.length>0)return R.some({elem:t,toolbars:[d.contextForms[0]]});if(c.contextToolbars.length>0||d.contextToolbars.length>0){const g=yG(c.contextToolbars.concat(d.contextToolbars));return R.some({elem:t,toolbars:g})}else return R.none()}},D8=(t,s,a)=>t(s)?R.none():f0(s,c=>{if(Os(c)){const{contextToolbars:d,contextForms:g}=oP(c,a.inNodeScope),p=g.length>0?g:CG(d);return p.length>0?R.some({elem:c,toolbars:p}):R.none()}else return R.none()},t),M8=(t,s)=>{const a=ct.fromDom(s.getBody()),c=p=>Kn(p,a),d=p=>!c(p)&&!il(a,p),g=ct.fromDom(s.selection.getNode());return d(g)?R.none():R8(g,t.inNodeScope,t.inEditorScope).orThunk(()=>D8(c,g,t))},P8=(t,s)=>{const a={},c=[],d=[],g={},p={},x=(D,L)=>{const H=ml(iL(L));a[D]=H,H.launch.map(q=>{g["form:"+D]={...L.launch,type:q.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(H)}}}),H.scope==="editor"?d.push(H):c.push(H),p[D]=H},T=(D,L)=>{Sz(L).each(H=>{H.launch.isSome()&&(g["toolbar:"+D]={...L.launch,type:"button",onAction:()=>{s(H)}}),L.scope==="editor"?d.push(H):c.push(H),p[D]=H})},O=Zo(t);return Ot(O,D=>{const L=t[D];L.type==="contextform"||L.type==="contextsliderform"||L.type==="contextsizeinputform"?x(D,L):L.type==="contexttoolbar"&&T(D,L)}),{forms:a,inNodeScope:c,inEditorScope:d,lookupTable:p,formNavigators:g}},sP="tox-pop--transition",N8=t=>t===v8.ENTER||t===v8.SPACEBAR,B8=(t,s,a,c)=>{const d=c.backstage,g=d.shared,p=xs().deviceType.isTouch,x=uo(),T=uo(),O=uo(),D=Z$({sink:a,onEscape:()=>(t.focus(),jL(t),R.some(!0)),onHide:()=>{jL(t)},onBack:()=>{r9(t)}}),L=Ga(D.sketch),H=()=>{const vn=O.get().getOr("node"),Tn=Jw(vn)?1:0;return tP(t,g,vn,Tn)},q=()=>!t.removed&&!(p()&&d.isContextMenuOpen()),J=vn=>Qr(ni(vn,x.get(),Kn),!0),re=()=>{if(q()){const vn=H(),Tn=Qr(O.get(),"node")?k8(t,x.get()):Yw(t);return vn.height<=0||!Xw(Tn,vn,.01)}else return!0},de=()=>{x.clear(),T.clear(),O.clear(),Cs.hide(L)},oe=()=>{if(Cs.isOpen(L)){const vn=L.element;Un(vn,"display"),re()?En(vn,"display","none"):(T.set(0),Cs.reposition(L))}},fe=vn=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[vn],behaviours:rt([jt.config({mode:"acyclic"}),wn("pop-dialog-wrap-events",[vo(Tn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>jt.focusIn(Tn))}),vc(Tn=>{t.shortcuts.remove("ctrl+F9")})])])}),he=vn=>{const Tn=tt([vn]);Gt(L,W$,{forwardContents:fe(Tn)})},ke=Jl(()=>P8(s,he)),Pe=(vn,Tn)=>Ab(t,{buttons:vn,toolbar:Tn.items,allowToolbarGroups:!1},c.backstage,R.some(["form:","toolbar:"])),Ct=(vn,Tn)=>Q4.buildInitGroups(vn,Tn),tt=vn=>{const{buttons:Tn}=t.ui.registry.getAll(),$t=ke(),et={...Tn,...$t.formNavigators},vt=Fv(t)===kl.scrolling?kl.scrolling:kl.default,fn=Cn(qe(vn,An=>An.type==="contexttoolbar"?Pe(et,JO(An)):Ct(An,g.providers)));return F4({type:vt,uid:Mt("context-toolbar"),initGroups:fn,onEscape:R.none,cyclicKeying:!0,providers:g.providers})},Be=(vn,Tn)=>{const $t=vn==="node"?g.anchors.node(Tn):g.anchors.cursor(),et=vG(t,vn,p(),{lastElement:x.get,isReposition:()=>Qr(T.get(),0),getMode:()=>ga.getMode(a)});return Rt($t,et)},At=(vn,Tn)=>{if($n.cancel(),!q())return;const $t=tt(vn),et=vn[0].position,vt=Be(et,Tn);O.set(et),T.set(1);const fn=L.element;Un(fn,"display"),J(Tn)||(ao(fn,sP),ga.reset(a,L)),Cs.showWithinBounds(L,fe($t),{anchor:vt,transition:{classes:[sP],mode:"placement"}},()=>R.some(H())),Tn.fold(x.clear,x.set),re()&&En(fn,"display","none")},cn=()=>{En(L.element,"transition","none"),oe(),Un(L.element,"transition")};let en=!1;const $n=mD(()=>{if(!(!t.hasFocus()||t.removed||en))if(Na(L.element,sP))$n.throttle();else{const vn=ke();M8(vn,t).fold(de,Tn=>{At(Tn.toolbars,R.some(Tn.elem))})}},17);t.on("init",()=>{t.on("remove",de),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",oe),t.on("click focus SetContent",$n.throttle),t.on("keyup",vn=>{(!N8(vn.keyCode)||!D.inSubtoolbar())&&$n.throttle()}),t.on(C8,de),t.on(y8,vn=>{const Tn=ke();Tt(Tn.lookupTable,vn.toolbarKey).each($t=>{At([$t],un(vn.target!==t,vn.target)),U$(L)})}),t.on("focusout",vn=>{jT.setEditorTimeout(t,()=>{Ka(a.element).isNone()&&Ka(L.element).isNone()&&!t.hasFocus()&&de()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&de()}),t.on("DisabledStateChange",vn=>{vn.state&&de()}),t.on("ExecCommand",({command:vn})=>{vn.toLowerCase()==="toggleview"&&de()}),t.on("AfterProgressState",vn=>{vn.state?de():t.hasFocus()&&$n.throttle()}),t.on("dragstart",()=>{en=!0}),t.on("dragend drop",()=>{en=!1}),t.on("NodeChange",vn=>{D.inSubtoolbar()?cn():Ka(L.element).fold($n.throttle,Y)})})},SG=t=>{Ot([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Qc(t,a.cmd),onSetup:Mk(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Hi(t),onAction:Qc(t,"JustifyNone")})},wG=(t,s)=>{const a=()=>{const c=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=uo();return qe(c,p=>({type:"togglemenuitem",text:s.display(p),onSetup:x=>{const T=D=>{D&&(g.on(L=>L.setActive(!1)),g.set(x)),x.setActive(D)};T(Qr(d,s.hash(p)));const O=s.watcher(t,p,T);return()=>{g.clear(),O()}},onAction:()=>s.setCurrent(t,p)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:c=>c(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},xG=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:hB,hash:s=>n8(s,["fixed","relative","empty"]).getOr(s),display:at,watcher:(s,a,c)=>s.formatter.formatChanged("lineheight",c,!1,{value:a}).unbind,getCurrent:s=>R.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Hi(t),onMenuSetup:Hi(t)}),EG=t=>R.from(Q5(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:ne(a),hash:c=>Ht(c.customCode)?c.code:`${c.code}/${c.customCode}`,display:c=>c.title,watcher:(c,d,g)=>{var p;return c.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(p=d.customCode)!==null&&p!==void 0?p:null}).unbind},getCurrent:c=>{const d=ct.fromDom(c.selection.getNode());return m2(d,g=>R.some(g).filter(Os).bind(p=>_n(p,"lang").map(T=>{const O=_n(p,"data-mce-lang").getOrUndefined();return{code:T,customCode:O,title:""}})))},setCurrent:(c,d)=>c.execCommand("Lang",!1,d),onToolbarSetup:c=>{const d=Ai();return c.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",c.setActive,!0)),Dk(d.clear,Hi(t)(c))},onMenuSetup:Hi(t)})),TG=t=>{wG(t,xG(t)),EG(t).each(s=>wG(t,s))},kG=(t,s)=>{Aj(t,s),Bj(t,s),Kj(t,s),Dj(t,s),jj(t,s)},_G=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",Ft),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},AG=t=>lb(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),OG=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:AG(t),onAction:Qc(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Hi(t),onAction:Qc(t,"indent")})},RG=t=>{OG(t)},L8=(t,s)=>a=>{a.setActive(s.get());const c=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",c),Dk(()=>t.off("PastePlainTextToggle",c),Hi(t)(a))},DG=t=>{const s=Wt(uB(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:L8(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:L8(t,s)})},rP=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},MG=t=>{Ih.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Mk(t,s.name),onAction:rP(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,c=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:Mk(t,a),onAction:rP(t,a),shortcut:c})}},PG=t=>{Ih.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Qc(t,s.action),shortcut:s.shortcut,context:s.context})}),Ih.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Hi(t),onAction:Qc(t,s.action)})})},I8=t=>{Ih.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Qc(t,s.action),onSetup:Mk(t,s.name)})})},NG=t=>{MG(t),PG(t),I8(t)},BG=t=>{Ih.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Qc(t,s.action),context:s.context})}),Ih.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Hi(t),onAction:Qc(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Hi(t),onAction:rP(t,"code")})},LG=t=>{NG(t),BG(t)},t_=(t,s)=>lb(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),IG=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:t_(t,"hasUndo"),onAction:Qc(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:t_(t,"hasRedo"),onAction:Qc(t,"redo")})},FG=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:t_(t,"hasUndo"),onAction:Qc(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:t_(t,"hasRedo"),onAction:Qc(t,"redo"),shortcut:"Meta+Y"})},$G=t=>{IG(t),FG(t)},HG=t=>lb(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),VG=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:HG(t),onAction:Qc(t,"mceToggleVisualAid"),context:"any"})},aP=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Qc(t,"mceToggleVisualAid"),context:"any"})},zG=t=>{aP(t),VG(t)},UG=(t,s)=>{SG(t),LG(t),kG(t,s),$G(t),C9(t),zG(t),RG(t),TG(t),DG(t),_G(t)},iP=t=>te(t)?t.split(/[ ,]/):t,cP=t=>s=>s.options.get(t),F8=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:te(a)||Oe(a,te)?{value:iP(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},$8=cP("contextmenu_never_use_native"),WG=cP("contextmenu_avoid_overlap"),ZG=t=>H8(t).length===0,H8=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:Eo(a,c=>Jn(s,c))},Qw=(t,s)=>({type:"makeshift",x:t,y:s}),lP=(t,s,a)=>Qw(t.x+s,t.y+a),V8=t=>t.type==="longpress"||t.type.indexOf("touch")===0,z8=t=>{if(V8(t)){const s=t.touches[0];return Qw(s.pageX,s.pageY)}else return Qw(t.pageX,t.pageY)},qG=t=>{if(V8(t)){const s=t.touches[0];return Qw(s.clientX,s.clientY)}else return Qw(t.clientX,t.clientY)},jG=(t,s)=>{const a=gS.DOM.getPos(t);return lP(s,a.x,a.y)},uP=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?z8(s):jG(t.getContentAreaContainer(),qG(s)):U8(t),U8=t=>({type:"selection",root:ct.fromDom(t.selection.getNode())}),W8=t=>({type:"node",node:R.some(ct.fromDom(t.selection.getNode())),root:ct.fromDom(t.getBody())}),Z8=(t,s,a)=>{switch(a){case"node":return W8(t);case"point":return uP(t,s);case"selection":return U8(t)}},GG=(t,s,a,c,d,g)=>{const p=a(),x=Z8(t,s,g);sy(p,Al.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:R.none()}).map(T=>{s.preventDefault(),Cs.showMenuAt(d,{anchor:x},{menu:{markers:cp("normal")},data:T})})},dP={onLtr:()=>[Cr,or,dr,aa,sr,Or,Sd,Nw,iy,ay,Pw,Mw],onRtl:()=>[Cr,dr,or,sr,aa,Or,Sd,Nw,Pw,Mw,iy,ay]},KG=12,XG={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},YG=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const c=s.touches[0],d=a.getRng();return tf(t.getWin(),ef.domRange(d)).exists(p=>p.left<=c.clientX&&p.right>=c.clientX&&p.top<=c.clientY&&p.bottom>=c.clientY)}},JG=t=>{const s=t.selection.getRng(),a=()=>{jT.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const c=p=>{p.preventDefault(),p.stopImmediatePropagation()};t.on("mousedown",c,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",c)}},QG=(t,s,a)=>{const c=Z8(t,s,a);return{bubble:gi(0,a==="point"?KG:0,XG),layouts:dP,overrides:{maxWidthFunction:gy(),maxHeightFunction:fh()},...c}},q8=(t,s,a,c,d,g,p)=>{const x=QG(t,s,g);sy(a,Al.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!0,search:R.none()}).map(T=>{s.preventDefault();const O=p?jr.HighlightMenuAndItem:jr.HighlightNone;Cs.showMenuWithinBounds(d,{anchor:x},{menu:{markers:cp("normal"),highlightOnOpen:O},data:T,type:"horizontal"},()=>R.some(tP(t,c.shared,g==="node"?"node":"selection"))),t.dispatch(C8)})},eK=(t,s,a,c,d,g)=>{const p=xs(),x=p.os.isiOS(),T=p.os.isMacOS(),O=p.os.isAndroid(),D=p.deviceType.isTouch(),L=()=>!(O||x||T&&D),H=()=>{const q=a();q8(t,s,q,c,d,g,L())};if((T||x)&&g!=="node"){const q=()=>{JG(t),H()};YG(t,s)?q():(t.once("selectionchange",q),t.once("touchend",()=>t.off("selectionchange",q)))}else H()},j8=t=>te(t)?t==="|":t.type==="separator",mP={type:"separator"},G8=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(te(t))return t;switch(t.type){case"separator":return mP;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const c=t.getSubmenuItems();return te(c)?c:qe(c,G8)}};default:const a=t;return{type:"menuitem",...s(a),onAction:we(a.onAction)}}},K8=(t,s)=>{if(s.length===0)return t;const c=Dd(t).filter(d=>!j8(d)).fold(()=>[],d=>[mP]);return t.concat(c).concat(s).concat([mP])},tK=(t,s,a)=>{const c=Wo(s,(d,g)=>Tt(t,g.toLowerCase()).map(p=>{const x=p.update(a);if(te(x)&&xr(Ic(x)))return K8(d,x.split(" "));if(Ie(x)&&x.length>0){const T=qe(x,G8);return K8(d,T)}else return d}).getOrThunk(()=>d.concat([g])),[]);return c.length>0&&j8(c[c.length-1])&&c.pop(),c},nK=(t,s)=>s.ctrlKey&&!$8(t),oK=t=>t.type==="longpress"||Jn(t,"touches"),fP=(t,s)=>!oK(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),X8=(t,s)=>fP(t,s)?t.selection.getStart(!0):s.target,Y8=(t,s)=>{const a=WG(t),c=fP(t,s)?"selection":"point";if(xr(a)){const d=X8(t,s);return aw(ct.fromDom(d),a)?"node":c}else return c},sK=(t,s,a)=>{const d=xs().deviceType.isTouch,g=Ga(Cs.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:rt([wn("dismissContextMenu",[$e(Um(),(T,O)=>{eo.close(T),t.focus()})])])})),p=()=>Cs.hide(g),x=T=>{if($8(t)&&T.preventDefault(),nK(t,T)||ZG(t))return;const O=Y8(t,T),D=()=>{const H=X8(t,T),q=t.ui.registry.getAll(),J=H8(t);return tK(q.contextMenus,J,H)};(d()?eK:GG)(t,T,D,a,g,O)};t.on("init",()=>{const T="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(T,p),t.on("longpress contextmenu",x)})},hP=Ma.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),n_=t=>s=>s.translate(-t.left,-t.top),yf=t=>s=>s.translate(t.left,t.top),Cf=t=>(s,a)=>Wo(t,(c,d)=>d(c),$o(s,a)),o_=(t,s,a)=>t.fold(Cf([yf(a),n_(s)]),Cf([n_(s)]),Cf([])),_y=(t,s,a)=>t.fold(Cf([yf(a)]),Cf([]),Cf([yf(s)])),J8=(t,s,a)=>t.fold(Cf([]),Cf([n_(a)]),Cf([yf(s),n_(a)])),rK=(t,s,a,c,d,g)=>{const p=_y(t,d,g),x=_y(s,d,g);return Math.abs(p.left-x.left)<=a&&Math.abs(p.top-x.top)<=c},Q8=(t,s,a,c,d,g)=>{const p=_y(t,d,g),x=_y(s,d,g),T=Math.abs(p.left-x.left),O=Math.abs(p.top-x.top);return $o(T,O)},e7=(t,s,a)=>{const c=t.fold((d,g)=>({position:R.some("absolute"),left:R.some(d+"px"),top:R.some(g+"px")}),(d,g)=>({position:R.some("absolute"),left:R.some(d-a.left+"px"),top:R.some(g-a.top+"px")}),(d,g)=>({position:R.some("fixed"),left:R.some(d+"px"),top:R.some(g+"px")}));return{right:R.none(),bottom:R.none(),...c}},aK=(t,s,a)=>t.fold((c,d)=>s_(c+s,d+a),(c,d)=>xp(c+s,d+a),(c,d)=>Ob(c+s,d+a)),gP=(t,s,a,c)=>{const d=(g,p)=>(x,T)=>{const O=g(s,a,c);return p(x.getOr(O.left),T.getOr(O.top))};return t.fold(d(J8,s_),d(_y,xp),d(o_,Ob))},s_=hP.offset,xp=hP.absolute,Ob=hP.fixed,t7=(t,s)=>{const a=Ln(t,s);return Ht(a)?NaN:parseInt(a,10)},iK=(t,s)=>{const a=t.element,c=t7(a,s.leftAttr),d=t7(a,s.topAttr);return isNaN(c)||isNaN(d)?R.none():R.some($o(c,d))},cK=(t,s,a)=>{const c=t.element;Ve(c,s.leftAttr,a.left+"px"),Ve(c,s.topAttr,a.top+"px")},lK=(t,s)=>{const a=t.element;zn(a,s.leftAttr),zn(a,s.topAttr)},n7=(t,s,a,c)=>iK(t,s).fold(()=>a,d=>Ob(d.left+c.left,d.top+c.top)),o7=(t,s,a,c,d,g)=>{const p=n7(t,s,a,c),x=s.mustSnap?dK(t,s,p,d,g):mK(t,s,p,d,g),T=o_(p,d,g);return cK(t,s,T),x.fold(()=>({coord:Ob(T.left,T.top),extra:R.none()}),O=>({coord:O.output,extra:O.extra}))},uK=(t,s)=>{lK(t,s)},Ay=(t,s,a,c)=>ks(t,d=>{const g=d.sensor;return rK(s,g,d.range.left,d.range.top,a,c)?R.some({output:gP(d.output,s,a,c),extra:d.extra}):R.none()}),dK=(t,s,a,c,d)=>{const g=s.getSnapPoints(t);return Ay(g,a,c,d).orThunk(()=>Wo(g,(T,O)=>{const D=O.sensor,L=Q8(a,D,O.range.left,O.range.top,c,d);return T.deltas.fold(()=>({deltas:R.some(L),snap:R.some(O)}),H=>{const q=(L.left+L.top)/2,J=(H.left+H.top)/2;return q<=J?{deltas:R.some(L),snap:R.some(O)}:T})},{deltas:R.none(),snap:R.none()}).snap.map(T=>({output:gP(T.output,a,c,d),extra:T.extra})))},mK=(t,s,a,c,d)=>{const g=s.getSnapPoints(t);return Ay(g,a,c,d)},pP=(t,s,a)=>({coord:gP(t.output,t.output,s,a),extra:t.extra});var fK=Object.freeze({__proto__:null,snapTo:(t,s,a,c)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ws(t.element),p=Ra(g),x=u1(d),T=pP(c,p,x),O=e7(T.coord,p,x);Bf(d,O)}}});const bP="data-initial-z-index",hK=t=>{Er(t.element).filter(Os).each(s=>{_n(s,bP).fold(()=>Un(s,"z-index"),a=>En(s,"z-index",a)),zn(s,bP)})},gK=t=>{Er(t.element).filter(Os).each(s=>{Ps(s,"z-index").each(a=>{Ve(s,bP,a)}),En(s,"z-index",Xe(t.element,"z-index"))})},s7=(t,s)=>{t.getSystem().addToGui(s),gK(s)},pK=t=>{hK(t),t.getSystem().removeFromGui(t)},r7=(t,s,a)=>t.getSystem().build(gd.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var bK=Gi("snaps",[Ze("getSnapPoints"),qn("onSensor"),Ze("leftAttr"),Ze("topAttr"),Se("lazyViewport",_r),Se("mustSnap",!1)]);const vP=[Se("useFixed",On),Ze("blockerClass"),Se("getTarget",at),Se("onDrag",Y),Se("repositionTarget",!0),Se("onDrop",Y),ss("getBounds",_r),bK],vK=t=>Ru(Ps(t,"left"),Ps(t,"top"),Ps(t,"position"),(s,a,c)=>(c==="fixed"?Ob:s_)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=Va(t);return xp(s.left,s.top)}),yK=(t,s,a,c,d)=>{const g=d.bounds,p=_y(s,a,c),x=yl(p.left,g.x,g.x+g.width-d.width),T=yl(p.top,g.y,g.y+g.height-d.height),O=xp(x,T);return s.fold(()=>{const D=J8(O,a,c);return s_(D.left,D.top)},ne(O),()=>{const D=o_(O,a,c);return Ob(D.left,D.top)})},CK=(t,s,a,c,d,g,p)=>{const x=s.fold(()=>{const T=aK(a,g.left,g.top),O=o_(T,c,d);return Ob(O.left,O.top)},T=>{const O=o7(t,T,a,g,c,d);return O.extra.each(D=>{T.onSensor(t,D)}),O.coord});return yK(t,x,c,d,p)},SK=(t,s,a,c)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ws(t.element),p=Ra(g),x=u1(d),T=vK(d),O=CK(t,s.snaps,T,p,x,c,a),D=e7(O,p,x);Bf(d,D)}s.onDrag(t,d,c)},a7=(t,s)=>({bounds:t.getBounds(),height:Bu(s.element),width:Id(s.element)}),yP=(t,s,a,c,d)=>{const g=a.update(c,d),p=a.getStartData().getOrThunk(()=>a7(s,t));g.each(x=>{SK(t,s,p,x)})},i7=(t,s,a,c)=>{s.each(pK),a.snaps.each(g=>{uK(t,g)});const d=a.getTarget(t.element);c.reset(),a.onDrop(t,d)},Oy=t=>(s,a)=>{const c=d=>{a.setStartData(a7(s,d))};return No([$e(y0(),d=>{a.getStartData().each(()=>c(d))}),...t(s,a,c)])},wK=t=>No([$e(pc(),t.forceDrop),$e(ju(),t.drop),$e(e1(),(s,a)=>{t.move(a.event)}),$e(h0(),t.delayDrop)]);var xK=Object.freeze({__proto__:null,getData:t=>R.from($o(t.x,t.y)),getDelta:(t,s)=>$o(s.left-t.left,s.top-t.top)});const c7=(t,s,a)=>[$e(pc(),(c,d)=>{if(d.event.raw.button!==0)return;d.stop();const p=()=>i7(c,R.some(O),t,s),x=_I(p,200),T={drop:p,delayDrop:x.schedule,forceDrop:p,move:L=>{x.cancel(),yP(c,t,s,xK,L)}},O=r7(c,t.blockerClass,wK(T));(()=>{a(c),s7(c,O)})()})],EK=[...vP,us("dragger",{handlers:Oy(c7)})],l7=t=>No([$e(gl(),t.forceDrop),$e(qu(),t.drop),$e(Qp(),t.drop),$e(ug(),(s,a)=>{t.move(a.event)})]),TK=t=>{const s=t[0];return R.some($o(s.clientX,s.clientY))};var u7=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?TK(a):R.none()},getDelta:(t,s)=>$o(s.left-t.left,s.top-t.top)});const d7=(t,s,a)=>{const c=uo(),d=g=>{i7(g,c.get(),t,s),c.clear()};return[$e(gl(),(g,p)=>{p.stop();const x=()=>d(g),T={drop:x,delayDrop:Y,forceDrop:x,move:L=>{yP(g,t,s,u7,L)}},O=r7(g,t.blockerClass,l7(T));c.set(O),(()=>{a(g),s7(g,O)})()}),$e(ug(),(g,p)=>{p.stop(),yP(g,t,s,u7,p.event)}),$e(qu(),(g,p)=>{p.stop(),d(g)}),$e(Qp(),d)]},CP=[...vP,us("dragger",{handlers:Oy(d7)})],m7=(t,s,a)=>[...c7(t,s,a),...d7(t,s,a)],kK=[...vP,us("dragger",{handlers:Oy(m7)})];var _K=Object.freeze({__proto__:null,mouse:EK,touch:CP,mouseOrTouch:kK}),AK=Object.freeze({__proto__:null,init:()=>{let t=R.none(),s=R.none();const a=()=>{t=R.none(),s=R.none()},c=(T,O)=>{const D=t.map(L=>T.getDelta(L,O));return t=R.some(O),D},d=(T,O)=>T.getData(O).bind(D=>c(T,D)),g=T=>{s=R.some(T)},p=()=>s,x=ne({});return di({readState:x,reset:a,update:d,getStartData:p,setStartData:g})}});const Rb=Ix({branchKey:"mode",branches:_K,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:R.from(t.extra)})},state:AK,apis:fK}),SP=40,r_=SP/2,f7=(t,s,a,c,d,g)=>t.fold(()=>Rb.snap({sensor:xp(a-r_,c-r_),range:$o(d,g),output:xp(R.some(a),R.some(c)),extra:{td:s}}),p=>{const x=a-r_,T=c-r_,O=SP,D=SP,L=p.element.dom.getBoundingClientRect();return Rb.snap({sensor:xp(x,T),range:$o(O,D),output:xp(R.some(a-L.width/2),R.some(c-L.height/2)),extra:{td:s}})}),h7=(t,s,a)=>{const c=(d,g)=>d.exists(p=>Kn(p,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const p=g.td;c(s.get(),p)||(s.set(p),a(p))},mustSnap:!0}},g7=t=>io(Nr.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:rt([Rb.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),mw.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),OK=(t,s)=>{const a=Wt([]),c=Wt([]),d=Wt(!1),g=uo(),p=uo(),x=tt=>{const Be=_i(tt);return f7(q.getOpt(s),tt,Be.x,Be.y,Be.width,Be.height)},T=()=>qe(a.get(),tt=>x(tt)),O=tt=>{const Be=_i(tt);return f7(J.getOpt(s),tt,Be.right,Be.bottom,Be.width,Be.height)},D=()=>qe(c.get(),tt=>O(tt)),L=h7(T,g,tt=>{p.get().each(Be=>{t.dispatch("TableSelectorChange",{start:tt,finish:Be})})}),H=h7(D,p,tt=>{g.get().each(Be=>{t.dispatch("TableSelectorChange",{start:Be,finish:tt})})}),q=g7(L),J=g7(H),re=Ga(q.asSpec()),de=Ga(J.asSpec()),oe=(tt,Be,At,cn)=>{const en=Be.dom.getBoundingClientRect();Un(tt.element,"display");const $n=Gl(ct.fromDom(t.getBody())).dom.innerHeight,vn=At(en),Tn=cn(en,$n);(vn||Tn)&&En(tt.element,"display","none")},fe=(tt,Be,At,cn)=>{const en=At(Be);Rb.snapTo(tt,en),oe(tt,Be,Tn=>Tn[cn]<0,(Tn,$t)=>Tn[cn]>$t)},he=tt=>fe(re,tt,x,"top"),ke=()=>g.get().each(he),Pe=tt=>fe(de,tt,O,"bottom"),Ct=()=>p.get().each(Pe);if(xs().deviceType.isTouch()){const tt=Be=>qe(Be,ct.fromDom);t.on("TableSelectionChange",Be=>{d.get()||(yh(s,re),yh(s,de),d.set(!0));const At=ct.fromDom(Be.start),cn=ct.fromDom(Be.finish);g.set(At),p.set(cn),R.from(Be.otherCells).each(en=>{a.set(tt(en.upOrLeftCells)),c.set(tt(en.downOrRightCells)),he(At),Pe(cn)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{ke(),Ct()}),t.on("TableSelectionClear",()=>{d.get()&&(du(re),du(de),d.set(!1)),g.clear(),p.clear()})}};var p7=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const RK=(t,s)=>{const a=R.from(Ln(t,"id")).getOrThunk(()=>{const c=Mt("aria");return Ve(s,"id",c),c});Ve(t,"aria-describedby",a)},DK=t=>{zn(t,"aria-describedby")},MK=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",PK=(t,s,a)=>{var c;const d=(c=s.delimiter)!==null&&c!==void 0?c:"›",g=(O,D,L)=>Nr.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":L}},components:[Vo(O)],action:H=>{t.focus(),t.selection.select(D),t.nodeChanged()},buttonBehaviours:rt([fs.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",D.nodeName.toLowerCase()]),onShow:(H,q)=>{RK(H.element,q.element)},onHide:H=>{DK(H.element)}})}),Rl.button(a.isDisabled),rr(()=>a.checkUiComponentContext("any"))])}),p=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Vo(` ${d} `)]}),x=O=>Wo(O,(D,L,H)=>{const q=g(L.name,L.element,H);return H===0?D.concat([q]):D.concat([p(),q])},[]),T=O=>{const D=[];let L=O.length;for(;L-- >0;){const H=O[L];if(H.nodeType===1&&!MK(H)){const q=ZL(t,H);if(q.isDefaultPrevented()||D.push({name:q.name,element:H}),q.isPropagationStopped())break}}return D};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:rt([jt.config({mode:"flow",selector:"div[role=button]"}),Nt.config({disabled:a.isDisabled}),rr(()=>a.checkUiComponentContext("any")),zo.config({}),Sn.config({}),wn("elementPathEvents",[vo((O,D)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>jt.focusIn(O)),t.on("NodeChange",L=>{const H=T(L.parents),q=H.length>0?x(H):[];Sn.set(O,q)})})])]),components:[]}};var Ep;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(Ep||(Ep={}));const NK=(t,s,a,c,d)=>{const g={height:jw(c+s.top,J3(t),Iv(t))};return a===Ep.Both&&(g.width=jw(d+s.left,bS(t),np(t))),g},b7=(t,s,a)=>{const c=ct.fromDom(t.getContainer()),d=NK(t,s,a,nr(c),Rn(c));_s(d,(g,p)=>{Vt(g)&&En(c,p,Y4(g))}),Qz(t)},BK=t=>{const s=lB(t);return s===!1?Ep.None:s==="both"?Ep.Both:Ep.Vertical},ex=(t,s,a,c)=>{const g=$o(a*20,c*20);return b7(t,g,s),R.some(!0)},v7=(t,s)=>{const a=BK(t);if(a===Ep.None)return R.none();const c=a===Ep.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return R.some(_l("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(c),"data-mce-name":"resize-handle"},behaviours:[Rb.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,p)=>b7(t,p,a),blockerClass:"tox-blocker"}),jt.config({mode:"special",onLeft:()=>ex(t,a,-1,0),onRight:()=>ex(t,a,1,0),onUp:()=>ex(t,a,0,-1),onDown:()=>ex(t,a,0,1)}),zo.config({}),gn.config({}),fs.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},LK=(t,s)=>{const a=(c,d,g)=>Sn.set(c,[Vo(s.translate(["{0} "+g,d[g]]))]);return Nr.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:rt([Rl.button(s.isDisabled),rr(()=>s.checkUiComponentContext("any")),zo.config({}),Sn.config({}),Et.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),wn("wordcount-events",[cu(c=>{const d=Et.getValue(c),g=d.mode==="words"?"characters":"words";Et.setValue(c,{mode:g,count:d.count}),a(c,d.count,g)}),vo(c=>{t.on("wordCountUpdate",d=>{const{mode:g}=Et.getValue(c);Et.setValue(c,{mode:g,count:d.wordCount}),a(c,d.wordCount,g)})})])]),eventOrder:{[Di()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},wP=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",p7.trim()])},behaviours:rt([gn.config({})])}]}),c=()=>{const x=jS("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Vo(hu.translate(["Press {0} for help",x]))]}},d=()=>{const x=[];return t.hasPlugin("wordcount")&&x.push(LK(t,s)),aO(t)&&x.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:x}},g=()=>{const x=[],T=nk(t),O=cB(t),D=aO(t)||t.hasPlugin("wordcount"),L=()=>{const H="tox-statusbar__text-container--flex-start",q="tox-statusbar__text-container--flex-end",J="tox-statusbar__text-container--space-around";if(T){const re="tox-statusbar__text-container-3-cols";return!D&&!O?[re,J]:D&&!O?[re,q]:[re,H]}return[D&&!O?q:H]};return O&&x.push(PK(t,{},s)),T&&x.push(c()),D&&x.push(d()),x.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...L()]},components:x}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const x=g(),T=v7(t,s);return x.concat(T.toArray())})()}},Ry=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),xP=(t,s)=>{const a=t.inline,c=a?dG:rG,d=op(t)?my:rq,g=b8(),p=uo(),x=uo(),T=uo(),H=xs().deviceType.isTouch()?["tox-platform-touch"]:[],q=lO(t),J=Fv(t),re=io({dom:{tag:"div",classes:["tox-anchorbar"]}}),de=io({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),oe=()=>g.mainUi.get().map(Jt=>Jt.outerContainer).bind(Jo.getHeader),fe=()=>In.fromOption(g.dialogUi.get().map(Jt=>Jt.sink),"UI has not been rendered"),he=()=>In.fromOption(g.popupUi.get().map(Jt=>Jt.sink),"(popup) UI has not been rendered"),ke=g.lazyGetInOuterOrDie("anchor bar",re.getOpt),Pe=g.lazyGetInOuterOrDie("bottom anchor bar",de.getOpt),Ct=g.lazyGetInOuterOrDie("toolbar",Jo.getToolbar),tt=g.lazyGetInOuterOrDie("throbber",Jo.getThrobber),Be=YZ({popup:he,dialog:fe},t,ke,Pe),At=()=>{const Jt={attributes:{[tv]:q?rd.BottomToTop:rd.TopToBottom}},kn=Jo.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Be.popup,onEscape:()=>{t.focus()}}),Oo=Jo.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Be.popup.shared.getSink,providers:Be.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:xf=>{e9(t,xf)},type:J,lazyToolbar:Ct,lazyHeader:()=>oe().getOrDie("Could not find header element"),...Jt}),So=Jo.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Be.popup.shared.providers,onEscape:()=>{t.focus()},type:J}),Rc=yS(t),Es=sk(t),Nl=ok(t),Qa=iO(t),Bl=cn(Qa),Ll=Rc||Es||Nl,kd=()=>Rc?[So]:Es?[Oo]:[],lx=[Bl,kn];return Jo.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Ll?[]:["tox-editor-header--empty"]),...Jt},components:Cn([Nl?lx:[],kd(),md(t)?[]:[re.asSpec()]]),sticky:op(t),editor:t,sharedBackstage:Be.popup.shared})},cn=Jt=>Jo.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]},promotionLink:Jt}),en=()=>{const Jt=Jo.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),kn=Jo.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Jt,kn]}},$n=()=>{const Jt=uO(t),kn=Kn(ge(),Jt)&&Xe(Jt,"display")==="grid",Oo={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(H),attributes:{...hu.isRtl()?{dir:"rtl"}:{}}},behaviours:rt([ga.config({useFixed:()=>d.isDocked(oe)})])},So={dom:{styles:{width:document.body.clientWidth+"px"}},events:No([$e(Yd(),Nl=>{En(Nl.element,"width",document.body.clientWidth+"px")})])},Rc=Ga(Rt(Oo,kn?So:{})),Es=BR(Rc);return x.set(Es),{sink:Rc,mothership:Es}},vn=()=>{const Jt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(H),attributes:{...hu.isRtl()?{dir:"rtl"}:{}}},behaviours:rt([ga.config({useFixed:()=>d.isDocked(oe),getBounds:()=>s.getPopupSinkBounds()})])},kn=Ga(Jt),Oo=BR(kn);return T.set(Oo),{sink:kn,mothership:Oo}},Tn=()=>{const Jt=At(),kn=en(),Oo=Jo.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Be.popup}),So=Jo.parts.viewWrapper({backstage:Be.popup}),Rc=tk(t)&&!a?R.some(wP(t,Be.popup.shared.providers)):R.none(),Es=Cn([q?[]:[Jt],a?[]:[kn],q?[Jt]:[]]),Nl=Jo.parts.editorContainer({components:Cn([Es,a?[]:[de.asSpec()]])}),Qa=dO(t),Bl={role:"application",...hu.isRtl()?{dir:"rtl"}:{},...Qa?{"aria-hidden":"true"}:{}},Ll=Ga(Jo.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(q?["tox-tinymce--toolbar-bottom"]:[]).concat(H),styles:{visibility:"hidden",...Qa?{opacity:"0",border:"0"}:{}},attributes:Bl},components:[Nl,...a?[]:[So,...Rc.toArray()],Oo],behaviours:rt([rr(()=>Be.popup.shared.providers.checkUiComponentContext("any")),Nt.config({disableClass:"tox-tinymce--disabled"}),jt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),kd=BR(Ll);return p.set(kd),{mothership:kd,outerContainer:Ll}},$t=Jt=>{const kn=Y4(aG(t)),Oo=Y4(iG(t));return t.inline||(Ns("div","width",Oo)&&En(Jt.element,"width",Oo),Ns("div","height",kn)?En(Jt.element,"height",kn):En(Jt.element,"height","400px")),kn},et=Jt=>{t.addShortcut("alt+F9","focus menubar",()=>{Jo.focusMenubar(Jt)}),t.addShortcut("alt+F10","focus toolbar",()=>{Jo.focusToolbar(Jt)}),t.addCommand("ToggleToolbarDrawer",(kn,Oo)=>{Oo!=null&&Oo.skipFocus?Jo.toggleToolbarDrawerWithoutFocusing(Jt):Jo.toggleToolbarDrawer(Jt)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Jo.isToolbarDrawerToggled(Jt))},vt=Jt=>{const{mainUi:kn,popupUi:Oo,uiMotherships:So}=Jt;Io(YT(t),(Lb,IP)=>{t.ui.registry.addGroupToolbarButton(IP,Lb)});const{buttons:Rc,menuItems:Es,contextToolbars:Nl,sidebars:Qa,views:Bl}=t.ui.registry.getAll(),Ll=rk(t),kd={menuItems:Es,menus:gB(t),menubar:oB(t),toolbar:Ll.getOrThunk(()=>QT(t)),allowToolbarGroups:J===kl.floating,buttons:Rc,sidebar:Qa,views:Bl};et(kn.outerContainer),JZ(t,kn.mothership,So),d.setup(t,Be.popup.shared,oe),UG(t,Be.popup),sK(t,Be.popup.shared.getSink,Be.popup),bq(t),Aq(t,tt,Be.popup.shared),B8(t,Nl,Oo.sink,{backstage:Be.popup}),OK(t,Oo.sink);const lx=t.getElement(),xf=$t(kn.outerContainer),LP={targetNode:lx,height:xf};return c.render(t,Jt,kd,Be.popup,LP)},fn=Jt=>(T.set(Jt.mothership),Jt),An=()=>{const Jt=Tn(),kn=$n(),Oo=Rh(t)?vn():fn(kn);g.dialogUi.set(kn),g.popupUi.set(Oo),g.mainUi.set(Jt);const So={popupUi:Oo,dialogUi:kn,mainUi:Jt,uiMotherships:g.getUiMotherships()};return vt(So)};return{popups:{backstage:Be.popup,getMothership:()=>Ry("popups",T)},dialogs:{backstage:Be.dialog,getMothership:()=>Ry("dialogs",x)},renderUI:An}},a_=t=>t.dom.textContent,Db=(t,s)=>{const a=_n(t,"id").fold(()=>{const c=Mt("dialog-label");return Ve(s,"id",c),c},at);Ve(t,"aria-labelledby",a)},i_=ne([Ze("lazySink"),no("dragBlockClass"),ss("getBounds",_r),Se("useTabstopAt",Ft),Se("firstTabstop",0),Se("eventOrder",{}),qr("modalBehaviours",[jt]),Ni("onExecute"),P0("onEscape")]),EP={sketch:at},y7=ne([Ii({name:"draghandle",overrides:(t,s)=>({behaviours:rt([Rb.config({mode:"mouse",getTarget:a=>zs(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),ba({schema:[Ze("dom")],name:"title"}),ba({factory:EP,schema:[Ze("dom")],name:"close"}),ba({factory:EP,schema:[Ze("dom")],name:"body"}),Ii({factory:EP,schema:[Ze("dom")],name:"footer"}),jc({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[Se("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Se("components",[])],name:"blocker"})]),C7=(t,s,a,c)=>{const d=uo(),g=J=>{d.set(J);const re=t.lazySink(J).getOrDie(),de=c.blocker(),oe=re.getSystem().build({...de,components:de.components.concat([ur(J)]),behaviours:rt([gn.config({}),wn("dialog-blocker-events",[pg(Uc(),()=>{xm.isBlocked(J)?Y():jt.focusIn(J)})])])});yh(re,oe),jt.focusIn(J)},p=J=>{d.clear(),Er(J.element).each(re=>{J.getSystem().getByDom(re).each(de=>{du(de)})})},x=J=>mu(J,t,"body"),T=J=>Bo(J,t,"footer"),O=(J,re)=>{xm.block(J,re)},D=J=>{xm.unblock(J)},L=Mt("modal-events"),H={...t.eventOrder,[Xi()]:[L].concat(t.eventOrder["alloy.system.attached"]||[])},q=xs();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:p,getBody:x,getFooter:T,setIdle:D,setBusy:O},eventOrder:H,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Gs(t.modalBehaviours,[Sn.config({}),jt.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),xm.config({getRoot:d.get}),wn(L,[vo(J=>{const re=mu(J,t,"title").element,de=a_(re);q.os.isMacOS()&&st(de)?Ve(J.element,"aria-label",de):Db(J.element,re)})])])}},Br=Ba({name:"ModalDialog",configFields:i_(),partFields:y7(),factory:C7,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),IK=dn([Ks,UO].concat(up)),FK=Xp,TP=[Ol("button"),Xc,hl("align","end",["start","end"]),HS,gu,Fm("buttonType",["primary","secondary"]),ys("context","mode:design")],kP=[...TP,lf],c_=[fl("type",["submit","cancel","custom"]),...kP],_P=[fl("type",["menu"]),lp,rb,Xc,Ko("items",IK),...TP],$K=[...TP,fl("type",["togglebutton"]),rb,Xc,lp,da("active",!1)],HK=Za("type",{submit:c_,cancel:c_,custom:c_,menu:_P,togglebutton:$K}),VK=[Ks,lf,fl("level",["info","warn","error","success"]),WO,Se("url","")],zK=dn(VK),tx=t=>[Ks,t],UK=[Ks,lf,gu,Ol("button"),Xc,gz,Fm("buttonType",["primary","secondary","toolbar"]),HS,ys("context","mode:design")],WK=dn(UK),Mb=[Ks,UO],Em=Mb.concat([$S]),ZK=Mb.concat([zv,gu,ys("context","mode:design")]),qK=dn(ZK),AP=Xp,OP=Em.concat([oL("auto"),ys("context","mode:design")]),jK=dn(OP),S7=l0([Uv,lf,WO]),GK=Em.concat([ys("storageKey","default"),ys("context","mode:design")]),KK=dn(GK),w7=We,XK=dn(Em),Pb=We,x7=Mb.concat([ys("tag","textarea"),vr("scriptId"),vr("scriptUrl"),Uu("onFocus"),a2("settings",void 0)]),YK=Mb.concat([ys("tag","textarea"),hc("init")]),l_=li(t=>os("customeditor.old",fc(YK),t).orThunk(()=>os("customeditor.new",fc(x7),t))),Dy=We,u_=Em.concat([ys("context","mode:design")]),E7=dn(u_),d_=_x(),Oc=t=>[Ks,d0("columns"),t],m_=[Ks,vr("html"),hl("presets","presentation",["presentation","document"]),ss("onInit",Y),da("stretched",!1)],T7=dn(m_),k7=Em.concat([da("border",!1),da("sandboxed",!0),da("streamContent",!1),da("transparent",!0)]),JK=dn(k7),QK=We,Tp=dn(Mb.concat([Ls("height")])),_J=dn([vr("url"),gc("zoom"),gc("cachedWidth"),gc("cachedHeight")]),eX=Em.concat([Ls("inputMode"),Ls("placeholder"),da("maximized",!1),gu,ys("context","mode:design")]),_7=dn(eX),My=We,f_=t=>[Ks,zv,t,hl("align","start",["start","center","end"]),Ls("for")],A7=[lf,Uv],tX=[lf,Ko("items",Ax("items",()=>O7))],O7=Lm([dn(A7),dn(tX)]),nX=Em.concat([Ko("items",O7),gu,ys("context","mode:design")]),oX=dn(nX),Py=We,AJ=Em.concat([r2("items",[lf,Uv]),Jp("size",1),gu,ys("context","mode:design")]),sX=dn(AJ),rX=We,OJ=Em.concat([da("constrain",!0),gu,ys("context","mode:design")]),aX=dn(OJ),R7=dn([vr("width"),vr("height")]),nx=Mb.concat([zv,Jp("min",0),Jp("max",0)]),iX=dn(nx),cX=ag,D7=[Ks,Ko("header",We),Ko("cells",Da(We))],lX=dn(D7),RJ=Em.concat([Ls("placeholder"),da("maximized",!1),gu,ys("context","mode:design")]),e=dn(RJ),n=We,o=[fl("type",["directory","leaf"]),JB,vr("id"),au("menu",M4),Ls("customStateIcon"),Ls("customStateIconTooltip")],i=dn(o),u=o.concat([Ko("children",Ax("children",()=>Go("type",{directory:h,leaf:i})))]),h=dn(u),v=Go("type",{directory:h,leaf:i}),w=[Ks,Ko("items",v),Uu("onLeafAction"),Uu("onToggleExpand"),Wu("defaultExpandedIds",[],We),Ls("defaultSelectedId")],k=dn(w),P=Em.concat([hl("filetype","file",["image","media","file"]),gu,Ls("picker_text"),ys("context","mode:design")]),I=dn(P),F=dn([Uv,qO]),W=t=>sa("items","items",pn(),Da(li(s=>os(`Checking item of ${t}`,X,s).fold(a=>In.error(ig(a)),a=>In.value(a))))),X=qt(()=>Go("type",{alertbanner:zK,bar:dn(tx(W("bar"))),button:WK,checkbox:qK,colorinput:KK,colorpicker:XK,dropzone:E7,grid:dn(Oc(W("grid"))),iframe:JK,input:_7,listbox:oX,selectbox:sX,sizeinput:aX,slider:iX,textarea:e,urlinput:I,customeditor:l_,htmlpanel:T7,imagepreview:Tp,collection:jK,label:dn(f_(W("label"))),table:lX,tree:k,panel:ee})),G=[Ks,Se("classes",[]),Ko("items",X)],ee=dn(G),ce=[Ol("tab"),JB,Ko("items",X)],pe=[Ks,r2("tabs",ce)],be=dn(pe),Te=kP,Ue=HK,dt=dn([vr("title"),Ri("body",Go("type",{panel:ee,tabpanel:be})),ys("size","normal"),Wu("buttons",[],Ue),Se("initialData",{}),ss("onAction",Y),ss("onChange",Y),ss("onSubmit",Y),ss("onClose",Y),ss("onCancel",Y),ss("onTabChange",Y)]),Bt=t=>os("dialog",dt,t),Fe=dn([fl("type",["cancel","custom"]),...Te]),Me=dn([vr("title"),vr("url"),gc("height"),gc("width"),$m("buttons",Fe),ss("onAction",Y),ss("onCancel",Y),ss("onClose",Y),ss("onMessage",Y)]),Ge=t=>os("dialog",Me,t),kt=t=>Ce(t)?[t].concat(ye(_f(t),kt)):Ie(t)?ye(t,kt):[],Kt=t=>te(t.type)&&te(t.name),Nn={checkbox:AP,colorinput:w7,colorpicker:Pb,dropzone:d_,input:My,iframe:QK,imagepreview:_J,selectbox:rX,sizeinput:R7,slider:cX,listbox:Py,size:R7,textarea:n,urlinput:F,customeditor:Dy,collection:S7,togglemenuitem:FK},Fn=t=>R.from(Nn[t.type]),lo=t=>Eo(kt(t),Kt),ko=t=>{const s=lo(t),a=ye(s,c=>Fn(c).fold(()=>[],d=>[Ri(c.name,d)]));return dn(a)},Js=t=>{var s;const a=ml(Bt(t)),c=ko(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:c,initialData:d}},Qs={open:(t,s)=>{const a=Js(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=ml(Ge(s));return t(a)},redial:t=>Js(t)};var yt=Object.freeze({__proto__:null,events:(t,s)=>{const a=(c,d)=>{t.updateState.each(g=>{const p=g(c,d);s.set(p)}),t.renderComponents.each(g=>{const p=g(d,s.get());(t.reuseDom?P5:N3)(c,p)})};return No([$e(zm(),(c,d)=>{const g=d;if(!g.universal){const p=t.channel;Mo(g.channels,p)&&a(c,g.data)}}),vo((c,d)=>{t.initialData.each(g=>{a(c,g)})})])}}),co=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),Pt=[Ze("channel"),no("renderComponents"),no("updateState"),no("initialData"),da("reuseDom",!0)],_t=Object.freeze({__proto__:null,init:()=>{const t=Wt(R.none()),s=()=>t.set(R.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Qt=yr({fields:Pt,name:"reflecting",active:yt,apis:co,state:_t}),_o=t=>{const s=[],a={};return _s(t,(c,d)=>{c.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?In.error(s):In.value(a)},jn=(t,s,a,c)=>{const d=io(Cb.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:qe(t.items,p=>OF(g,p,s,a,c))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:rt([jt.config({mode:"acyclic",useTabstopAt:Ee(Sw)}),yd.memento(d),u4(d,{postprocess:g=>_o(g).fold(p=>(console.error(p),{}),at)}),wn("dialog-body-panel",[$e(Uc(),(g,p)=>{g.getSystem().broadcastOn([ny],{newFocus:R.some(p.event.target)})})])])}},Ia=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:Bv(t.action),behaviours:Gs(t.tabButtonBehaviours,[gn.config({}),jt.config({mode:"execution",useSpace:!0,useEnter:!0}),Et.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),yu=Fi({name:"TabButton",configFields:[Se("uid",void 0),Ze("value"),sa("dom","dom",ci(()=>({attributes:{role:"tab",id:Mt("aria"),"aria-selected":"false"}})),oa()),no("action"),Se("domModification",{}),qr("tabButtonBehaviours",[gn,jt,Et]),Ze("view")],factory:Ia}),Sf=ne([Ze("tabs"),Ze("dom"),Se("clickToDismiss",!1),qr("tabbarBehaviours",[K,jt]),Gm(["tabClass","selectedClass"])]),oc=_h({factory:yu,name:"tabs",unit:"tab",overrides:t=>{const s=(c,d)=>{K.dehighlight(c,d),Gt(c,Px(),{tabbar:c,button:d})},a=(c,d)=>{K.highlight(c,d),Gt(c,Jd(),{tabbar:c,button:d})};return{action:c=>{const d=c.getSystem().getByUid(t.uid).getOrDie(),g=K.isHighlighted(d,c);(g&&t.clickToDismiss?s:g?Y:a)(d,c)},domModification:{classes:[t.markers.tabClass]}}}}),xd=ne([oc]),Pl=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Gs(t.tabbarBehaviours,[K.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{Ve(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Ve(g.element,"aria-selected","false")}}),jt.config({mode:"flow",getInitial:d=>K.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),vi=Ba({name:"Tabbar",configFields:Sf(),partFields:xd(),factory:Pl}),sc=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:Gs(t.tabviewBehaviours,[Sn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Cu=Fi({name:"Tabview",configFields:[qr("tabviewBehaviours",[Sn])],factory:sc}),kp=ne([Se("selectFirst",!0),qn("onChangeTab"),qn("onDismissTab"),Se("tabs",[]),qr("tabSectionBehaviours",[])]),tn=ba({factory:vi,schema:[Ze("dom"),Ws("markers",[Ze("tabClass"),Ze("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),to=ba({factory:Cu,name:"tabview"}),er=ne([tn,to]),Gr=(t,s,a,c)=>{const d=p=>{const x=Et.getValue(p);Bo(p,t,"tabview").each(T=>{yn(t.tabs,D=>D.value===x).each(D=>{const L=D.view();_n(p.element,"id").each(H=>{Ve(T.element,"aria-labelledby",H)}),Sn.set(T,L),t.onChangeTab(T,p,L)})})},g=(p,x)=>{Bo(p,t,"tabbar").each(T=>{x(T).each(Qd)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:bv(t.tabSectionBehaviours),events:No(Cn([t.selectFirst?[vo((p,x)=>{g(p,K.getFirst)})]:[],[$e(Jd(),(p,x)=>{const T=x.event.button;d(T)}),$e(Px(),(p,x)=>{const T=x.event.button;t.onDismissTab(p,T)})]])),apis:{getViewItems:p=>Bo(p,t,"tabview").map(x=>Sn.contents(x)).getOr([]),showTab:(p,x)=>{g(p,O=>{const D=K.getCandidates(O);return yn(D,H=>Et.getValue(H)===x).filter(H=>!K.isHighlighted(O,H))})}}}},ar=Ba({name:"TabSection",configFields:kp(),partFields:er(),factory:Gr,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),Lr=(t,s,a)=>qe(t,(c,d)=>{Sn.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return Sn.set(a,[]),g.height}),Ds=t=>Yr(_u(t,(s,a)=>s>a?-1:s<a?1:0)),Ms=(t,s,a)=>{const c=cc(t).dom,d=zs(t,".tox-dialog-wrap").getOr(t),g=Xe(d,"position")==="fixed";let p;g?p=Math.max(c.clientHeight,window.innerHeight):p=Math.max(c.offsetHeight,c.scrollHeight);const x=nr(s),O=s.dom.offsetLeft>=a.dom.offsetLeft+Rn(a)?Math.max(nr(a),x):x,D=parseInt(Xe(t,"margin-top"),10)||0,L=parseInt(Xe(t,"margin-bottom"),10)||0,q=nr(t)+D+L-O;return p-q},rc=(t,s)=>{Yr(t).each(a=>ar.showTab(s,a.value))},Su=(t,s)=>{En(t,"height",s+"px"),En(t,"flex-basis",s+"px")},wu=(t,s,a)=>{zs(t,'[role="dialog"]').each(c=>{Pn(c,'[role="tablist"]').each(d=>{a.get().map(g=>(En(s,"height","0"),En(s,"flex-basis","0"),Math.min(g,Ms(c,s,d)))).each(g=>{Su(s,g)})})})},xu=t=>Pn(t,'[role="tabpanel"]'),Ny=t=>{const s=uo();return{extraEvents:[vo(d=>{const g=d.element;xu(g).each(p=>{En(p,"visibility","hidden"),d.getSystem().getByDom(p).toOptional().each(x=>{const T=Lr(t,p,x);Ds(T).fold(s.clear,s.set)}),wu(g,p,s),Un(p,"visibility"),rc(t,d),requestAnimationFrame(()=>{wu(g,p,s)})})}),$e(Yd(),d=>{const g=d.element;xu(g).each(p=>{wu(g,p,s)})}),$e(Dl,(d,g)=>{const p=d.element;xu(p).each(x=>{const T=Cc(Hr(x));En(x,"visibility","hidden");const O=Ps(x,"height").map(H=>parseInt(H,10));Un(x,"height"),Un(x,"flex-basis");const D=x.dom.getBoundingClientRect().height;O.forall(H=>D>H)?(s.set(D),wu(p,x,s)):O.each(H=>{Su(x,H)}),Un(x,"visibility"),T.each(ha)})})],selectFirst:!1}},Nb="send-data-to-section",_p="send-data-to-view",Ed=(t,s,a,c)=>{const d=Wt({}),g=D=>{const L=Et.getValue(D),H=_o(L).getOr({}),q=d.get(),J=Rt(q,H);d.set(J)},p=D=>{const L=d.get();Et.setValue(D,L)},x=Wt(null),T=qe(t.tabs,D=>({value:D.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Vo(a.shared.providers.translate(D.title))],view:()=>[Cb.sketch(L=>({dom:{tag:"div",classes:["tox-form"]},components:qe(D.items,H=>OF(L,H,s,a,c)),formBehaviours:rt([jt.config({mode:"acyclic",useTabstopAt:Ee(Sw)}),wn("TabView.form.events",[vo(p),vc(g)]),Bi.config({channels:lg([{key:Nb,value:{onReceive:g}},{key:_p,value:{onReceive:p}}])})])}))]})),O=Ny(T);return ar.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(D,L,H)=>{const q=Et.getValue(L);Gt(D,dw,{name:q,oldName:x.get()}),x.set(q)},tabs:T,components:[ar.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[vi.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:rt([zo.config({})])}),ar.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:O.selectFirst,tabSectionBehaviours:rt([wn("tabpanel",O.extraEvents),jt.config({mode:"acyclic"}),Xn.config({find:D=>Yr(ar.getViewItems(D))}),Sb(R.none(),D=>(D.getSystem().broadcastOn([Nb],{}),d.get()),(D,L)=>{d.set(L),D.getSystem().broadcastOn([_p],{})})])})},Hh=(t,s,a,c,d,g)=>{const p=O=>{const D=O.body;switch(D.type){case"tabpanel":return[Ed(D,O.initialData,c,g)];default:return[jn(D,O.initialData,c,g)]}},x=(O,D)=>R.some({isTabPanel:()=>D.body.type==="tabpanel"}),T={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(O=>({id:O})).getOr({}),...d?T:{}}},components:[],behaviours:rt([yd.childAt(0),Qt.config({channel:`${P6}-${s}`,updateState:x,renderComponents:p,initialData:t})])}},ox=(t,s,a,c,d,g)=>Hh(t,s,R.some(a),c,d,g),By=(t,s,a,c)=>{const d=Hh(t,s,R.none(),a,!1,c);return Br.parts.body(d)},M7=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[R6(R.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:rt([zo.config({}),gn.config({})])})]}],behaviours:rt([jt.config({mode:"acyclic",useTabstopAt:Ee(Sw)})])};return Br.parts.body(s)},sx=tp.deviceType.isTouch(),Ly=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),RP=(t,s)=>Br.parts.close(Nr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:rt([zo.config({})])})),Bb=()=>Br.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),Vh=(t,s)=>Br.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:gm(`<p>${MB(s.translate(t))}</p>`)}]}]}),rx=t=>Br.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),xe=(t,s)=>[gd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),gd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],Ae=t=>{const s="tox-dialog",a=s+"-wrap",c=a+"__backdrop",d=s+"__disable-scroll";return Br.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),R.some(!0)),useTabstopAt:g=>!Sw(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:gm(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:sx?[c,c+"--opaque"]:[c]}}]}},dragBlockClass:a,modalBehaviours:rt([gn.config({}),wn("dialog-events",t.dialogEvents.concat([pg(Uc(),(g,p)=>{xm.isBlocked(g)?Y():jt.focusIn(g)}),$e(Qf(),(g,p)=>{g.getSystem().broadcastOn([ny],{newFocus:p.event.newFocus})})])),wn("scroll-lock",[vo(()=>{qs(ge(),d)}),vc(()=>{ao(ge(),d)})]),...t.extraBehaviours]),eventOrder:{[Di()]:["dialog-events"],[Xi()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[ma()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},bt=t=>Nr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:rt([zo.config({}),fs.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[_l("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{Wn(s,Nh)}}),ft=(t,s,a,c)=>{const d=g=>[Vo(c.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:rt([Qt.config({channel:`${M6}-${s}`,initialData:t,renderComponents:d})])}},mn=()=>({dom:gm('<div class="tox-dialog__draghandle"></div>')}),so=(t,s,a,c)=>gd.sketch({dom:gm('<div class="tox-dialog__header"></div>'),components:[ft(t,s,R.some(a),c),mn(),bt(c)],containerBehaviours:rt([Rb.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Us(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"},onDrag:(d,g)=>{d.getSystem().broadcastOn([cm()],{target:g})}})])}),tr=(t,s,a)=>{const c=Br.parts.title(ft(t,s,R.none(),a)),d=Br.parts.draghandle(mn()),g=Br.parts.close(bt(a)),p=[c].concat(t.draggable?[d]:[]).concat([g]);return gd.sketch({dom:gm('<div class="tox-dialog__header"></div>'),components:p})},Td=(t,s,a)=>tr({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),Eu=(t,s,a,c)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${c.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:gm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),Iy=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:c=>{const d=Pn(t().element,".tox-dialog__header").map(g=>nr(g));Br.setBusy(t(),(g,p)=>Eu(c.message,p,s,d))},onUnblock:()=>{Br.setIdle(t())}}),DP="tox-dialog--fullscreen",h_="tox-dialog--width-lg",ax="tox-dialog--width-md",ix=t=>{switch(t){case"large":return R.some(h_);case"medium":return R.some(ax);default:return R.none()}},wf=(t,s)=>{const a=ct.fromDom(s.element.dom);Na(a,DP)||(Pi(a,[h_,ax]),ix(t).each(c=>qs(a,c)))},MP=(t,s)=>{const a=ct.fromDom(t.element.dom),c=oh(a),d=yn(c,g=>g===h_||g===ax).or(ix(s));nh(a,[DP,...d.toArray()])},PP=(t,s,a)=>Ga(Ae({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[Cw({}),...t.extraBehaviours],onEscape:c=>{Wn(c,Nh)},dialogEvents:s,eventOrder:{[zm()]:[Qt.name(),Bi.name()],[Xi()]:["scroll-lock",Qt.name(),"messages","dialog-events","alloy.base.behaviour"],[ma()]:["alloy.base.behaviour","dialog-events","messages",Qt.name(),"scroll-lock"]}})),g_=(t,s={})=>{const a=c=>{const d=qe(c.items,g=>{const p=Tt(s,g.name).getOr(Wt(!1));return{...g,storage:p}});return{...c,items:d}};return qe(t,c=>c.type==="menu"?a(c):c)},NP=t=>Wo(t,(s,a)=>a.type==="menu"?Wo(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),P7=(t,s)=>[w2(Uc(),bW),t(lw,(a,c,d,g)=>{Rr(g.element)&&Cc(Hr(g.element)).each(sd),s.onClose(),c.onClose()}),t(Nh,(a,c,d,g)=>{c.onCancel(a),Wn(g,lw)}),$e(IR,(a,c)=>s.onUnblock()),$e(LR,(a,c)=>s.onBlock(c.event))],Gn=(t,s)=>{const a=(d,g)=>$e(d,(p,x)=>{c(p,(T,O)=>{g(t(),T,x.event,p)})}),c=(d,g)=>{Qt.getState(d).get().each(p=>{g(p,d)})};return[...P7(a,s),a(tl,(d,g,p)=>{g.onAction(d,{name:p.name})})]},Re=(t,s,a)=>{const c=(g,p)=>$e(g,(x,T)=>{d(x,(O,D)=>{p(t(),O,T.event,x)})}),d=(g,p)=>{Qt.getState(g).get().each(x=>{p(x.internalDialog,g)})};return[...P7(c,s),c(uw,(g,p)=>p.onSubmit(g)),c(kc,(g,p,x)=>{p.onChange(g,{name:x.name})}),c(tl,(g,p,x,T)=>{const O=()=>T.getSystem().isConnected()?jt.focusIn(T):void 0,D=q=>Vs(q,"disabled")||_n(q,"aria-disabled").exists(J=>J==="true"),L=Hr(T.element),H=Cc(L);p.onAction(g,{name:x.name,value:x.value}),Cc(L).fold(O,q=>{D(q)||H.exists(J=>il(q,J)&&D(J))?O():a().toOptional().filter(J=>!il(J.element,q)).each(O)})}),c(dw,(g,p,x)=>{p.onTabChange(g,{newTabName:x.name,oldTabName:x.oldName})}),vc(g=>{const p=t();Et.setValue(g,p.getData())})]},Yt=(t,s)=>w4(t,t.type,s),Bn=(t,s,a)=>yn(s,c=>c.name===a).bind(c=>c.memento.getOpt(t)),Kr=(t,s)=>{const a=s.map(x=>x.footerButtons).getOr([]),c=Hl(a,x=>x.align==="start"),d=(x,T)=>gd.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${x}`]},components:qe(T,O=>O.memento.asSpec())}),g=d("start",c.pass),p=d("end",c.fail);return[g,p]},ac=(t,s,a)=>{const c=(d,g)=>{const p=qe(g.buttons,T=>{const O=io(Yt(T,a));return{name:T.name,align:T.align,memento:O}}),x=T=>Bn(d,p,T);return R.some({lookupByName:x,footerButtons:p})};return{dom:gm('<div class="tox-dialog__footer"></div>'),components:[],behaviours:rt([Qt.config({channel:`${N6}-${s}`,initialData:t,updateState:c,renderComponents:Kr})])}},zi=(t,s,a)=>ac(t,s,a),ol=(t,s,a)=>Br.parts.footer(ac(t,s,a)),Tu=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const c=Xn.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Cb.getField(c,s).orThunk(()=>t.getFooter().bind(p=>Qt.getState(p).get()).bind(p=>p.lookupByName(s)))}else return R.none()},cx=(t,s)=>{const a=t.getRoot();return Qt.getState(a).get().map(c=>ml(os("data",c.dataValidator,s))).getOr(s)},Ui=(t,s,a)=>{const c=J=>{const re=t.getRoot();re.getSystem().isConnected()&&J(re)},q={getData:()=>{const J=t.getRoot(),re=J.getSystem().isConnected()?t.getFormWrapper():J,de=Et.getValue(re),oe=Io(a,fe=>fe.get());return{...de,...oe}},setData:J=>{c(re=>{const de=q.getData(),oe=Rt(de,J),fe=cx(t,oe),he=t.getFormWrapper();Et.setValue(he,fe),_s(a,(ke,Pe)=>{Jn(oe,Pe)&&ke.set(oe[Pe])})})},setEnabled:(J,re)=>{Tu(t,J).each(re?Nt.enable:Nt.disable)},focus:J=>{Tu(t,J).each(gn.focus)},block:J=>{if(!te(J))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c(re=>{Gt(re,LR,{message:J})})},unblock:()=>{c(J=>{Wn(J,IR)})},showTab:J=>{c(re=>{const de=t.getBody();Qt.getState(de).get().exists(fe=>fe.isTabPanel())&&Xn.getCurrent(de).each(fe=>{ar.showTab(fe,J)})})},redial:J=>{c(re=>{const de=t.getId(),oe=s(J),fe=g_(oe.internalDialog.buttons,a);re.getSystem().broadcastOn([`${m4}-${de}`],oe),re.getSystem().broadcastOn([`${M6}-${de}`],oe.internalDialog),re.getSystem().broadcastOn([`${P6}-${de}`],oe.internalDialog),re.getSystem().broadcastOn([`${N6}-${de}`],{...oe.internalDialog,buttons:fe}),q.setData(oe.initialData)})},close:()=>{c(J=>{Wn(J,lw)})},toggleFullscreen:t.toggleFullscreen};return q},uX=(t,s,a)=>{const c=Mt("dialog"),d=t.internalDialog,g=Td(d.title,c,a),p=Wt(d.size),x=he=>Tu(oe,he),T=ix(p.get()).toArray(),O=(he,ke)=>(p.set(ke.internalDialog.size),wf(ke.internalDialog.size,he),R.some(ke)),D=By({body:d.body,initialData:d.initialData},c,a,x),L=g_(d.buttons),H=NP(L),q=un(L.length!==0,ol({buttons:L},c,a)),J=Re(()=>fe,Iy(()=>de,a.shared.providers,s),a.shared.getSink),re={id:c,header:g,body:D,footer:q,extraClasses:T,extraBehaviours:[Qt.config({channel:`${m4}-${c}`,updateState:O,initialData:t})],extraStyles:{}},de=PP(re,J,a),oe=(()=>{const he=()=>{const Pe=Br.getBody(de);return Xn.getCurrent(Pe).getOr(Pe)},ke=()=>{MP(de,p.get())};return{getId:ne(c),getRoot:ne(de),getBody:()=>Br.getBody(de),getFooter:()=>Br.getFooter(de),getFormWrapper:he,toggleFullscreen:ke}})(),fe=Ui(oe,s.redial,H);return{dialog:de,instanceApi:fe}},BP=(t,s,a,c=!1,d)=>{const g=Mt("dialog"),p=Mt("dialog-label"),x=Mt("dialog-content"),T=t.internalDialog,O=At=>Tu(tt,At),D=Wt(T.size),L=ix(D.get()).toArray(),H=(At,cn)=>(D.set(cn.internalDialog.size),wf(cn.internalDialog.size,At),d(),R.some(cn)),q=io(so({title:T.title,draggable:!0},g,p,a.shared.providers)),J=io(ox({body:T.body,initialData:T.initialData},g,x,a,c,O)),re=g_(T.buttons),de=NP(re),oe=un(re.length!==0,io(zi({buttons:re},g,a))),fe=Re(()=>Be,{onBlock:At=>{xm.block(Pe,(cn,en)=>{const $n=q.getOpt(Pe).map(vn=>nr(vn.element));return Eu(At.message,en,a.shared.providers,$n)})},onUnblock:()=>{xm.unblock(Pe)},onClose:()=>s.closeWindow()},a.shared.getSink),he="tox-dialog-inline",ke=xs().os,Pe=Ga({dom:{tag:"div",classes:["tox-dialog",he,...L],attributes:{role:"dialog",...ke.isMacOS()?{"aria-label":T.title}:{"aria-labelledby":p}}},eventOrder:{[zm()]:[Qt.name(),Bi.name()],[Di()]:["execute-on-form"],[Xi()]:["reflecting","execute-on-form"]},behaviours:rt([jt.config({mode:"cyclic",onEscape:At=>(Wn(At,lw),R.some(!0)),useTabstopAt:At=>!Sw(At)&&(Hs(At)!=="button"||Ln(At,"disabled")!=="disabled"),firstTabstop:1}),Qt.config({channel:`${m4}-${g}`,updateState:H,initialData:t}),gn.config({}),wn("execute-on-form",fe.concat([pg(Uc(),(At,cn)=>{jt.focusIn(At)}),$e(Qf(),(At,cn)=>{At.getSystem().broadcastOn([ny],{newFocus:cn.event.newFocus})})])),xm.config({getRoot:()=>R.some(Pe)}),Sn.config({}),Cw({})]),components:[q.asSpec(),J.asSpec(),...oe.map(At=>At.asSpec()).toArray()]}),Ct=()=>{MP(Pe,D.get())},tt={getId:ne(g),getRoot:ne(Pe),getFooter:()=>oe.map(At=>At.get(Pe)),getBody:()=>J.get(Pe),getFormWrapper:()=>{const At=J.get(Pe);return Xn.getCurrent(At).getOr(At)},toggleFullscreen:Ct},Be=Ui(tt,s.redial,de);return{dialog:Pe,instanceApi:Be}};var p_=tinymce.util.Tools.resolve("tinymce.util.URI");const Tte=t=>{const s=p=>{t.getSystem().isConnected()&&p(t)};return{block:p=>{if(!te(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(x=>{Gt(x,LR,{message:p})})},unblock:()=>{s(p=>{Wn(p,IR)})},close:()=>{s(p=>{Wn(p,lw)})},sendMessage:p=>{s(x=>{x.getSystem().broadcastOn([B6],p)})}}},kte=["insertContent","setContent","execCommand","close","block","unblock"],DJ=t=>Ce(t)&&kte.indexOf(t.mceAction)!==-1,_te=t=>!DJ(t)&&Ce(t)&&Jn(t,"mceAction"),Ate=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const c=pt(a.ui)?a.ui:!1;t.execCommand(a.cmd,c,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},Ote=(t,s,a,c)=>{const d=Mt("dialog"),g=Td(t.title,d,c),p=M7(t),x=t.buttons.bind(he=>he.length===0?R.none():R.some(ol({buttons:he},d,c))),T=Gn(()=>fe,Iy(()=>oe,c.shared.providers,s)),O={...t.height.fold(()=>({}),he=>({height:he+"px","max-height":he+"px"})),...t.width.fold(()=>({}),he=>({width:he+"px","max-width":he+"px"}))},D=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],L=new p_(t.url,{base_uri:new p_(window.location.href)}),H=`${L.protocol}://${L.host}${L.port?":"+L.port:""}`,q=Ai(),J=(he,ke)=>R.some(ke),re=[Qt.config({channel:`${m4}-${d}`,updateState:J,initialData:t}),wn("messages",[vo(()=>{const he=hi(ct.fromDom(window),"message",ke=>{if(L.isSameOrigin(new p_(ke.raw.origin))){const Pe=ke.raw.data;DJ(Pe)?Ate(a,fe,Pe):_te(Pe)&&t.onMessage(fe,Pe)}});q.set(he)}),vc(q.clear)]),Bi.config({channels:{[B6]:{onReceive:(he,ke)=>{Pn(he.element,"iframe").each(Pe=>{const Ct=Pe.dom.contentWindow;st(Ct)&&Ct.postMessage(ke,H)})}}}})],oe=PP({id:d,header:g,body:p,footer:x,extraClasses:D,extraBehaviours:re,extraStyles:O},T,c),fe=Tte(oe);return{dialog:oe,instanceApi:fe}},Rte=t=>{const s=t.shared;return{open:(c,d)=>{const g=()=>{Br.hide(O),d()},p=io(w4({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:R.some("primary"),align:"end",enabled:!0,icon:R.none()},"cancel",t)),x=Bb(),T=RP(g,s.providers),O=Ga(Ae({lazySink:()=>s.getSink(),header:Ly(x,T),body:Vh(c,s.providers),footer:R.some(rx(xe([],[p.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[$e(Nh,g)],eventOrder:{}}));Br.show(O);const D=p.get(O);gn.focus(D)}}},Dte=t=>{const s=t.shared;return{open:(c,d)=>{const g=H=>{Br.hide(D),d(H)},p=io(w4({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:R.some("primary"),align:"end",enabled:!0,icon:R.none()},"submit",t)),x=w4({context:"any",name:"no",text:"No",primary:!1,buttonType:R.some("secondary"),align:"end",enabled:!0,icon:R.none()},"cancel",t),T=Bb(),O=RP(()=>g(!1),s.providers),D=Ga(Ae({lazySink:()=>s.getSink(),header:Ly(T,O),body:Vh(c,s.providers),footer:R.some(rx(xe([],[x,p.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[$e(Nh,()=>g(!1)),$e(uw,()=>g(!0))],eventOrder:{}}));Br.show(D);const L=p.get(D);gn.focus(L)}}},MJ=(t,s)=>ml(os("data",s,t)),PJ=t=>aw(t,".tox-alert-dialog")||aw(t,".tox-confirm-dialog"),Mte=(t,s,a)=>s&&a?[]:[ds.config({contextual:{lazyContext:()=>R.some(pr(ct.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:c=>sp(t,c.element).map(g=>({bounds:rp(g),optScrollEnv:R.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:Va(g.element).top})})).getOrThunk(()=>({bounds:_r(),optScrollEnv:R.none()}))})],Pte=t=>{const s=t.editor,a=op(s),c=Rte(t.backstages.dialog),d=Dte(t.backstages.dialog),g=(J,re,de)=>{if(!Ht(re)){if(re.inline==="toolbar")return O(J,t.backstages.popup.shared.anchors.inlineDialog(),de,re);if(re.inline==="bottom")return D(J,t.backstages.popup.shared.anchors.inlineBottomDialog(),de,re);if(re.inline==="cursor")return O(J,t.backstages.popup.shared.anchors.cursor(),de,re)}return T(J,de)},p=(J,re)=>x(J,re),x=(J,re)=>{const de=oe=>{const fe=Ote(oe,{closeWindow:()=>{Br.hide(fe.dialog),re(fe.instanceApi)}},s,t.backstages.dialog);return Br.show(fe.dialog),fe.instanceApi};return Qs.openUrl(de,J)},T=(J,re)=>{const de=(oe,fe,he)=>{const ke=fe,Ct=uX({dataValidator:he,initialData:ke,internalDialog:oe},{redial:Qs.redial,closeWindow:()=>{Br.hide(Ct.dialog),re(Ct.instanceApi)}},t.backstages.dialog);return Br.show(Ct.dialog),Ct.instanceApi.setData(ke),Ct.instanceApi};return Qs.open(de,J)},O=(J,re,de,oe)=>{const fe=(he,ke,Pe)=>{const Ct=MJ(ke,Pe),tt=uo(),Be=t.backstages.popup.shared.header.isPositionedAtTop(),At={dataValidator:Pe,initialData:Ct,internalDialog:he},cn=()=>tt.on(Tn=>{Cs.reposition(Tn),(!a||!Be)&&ds.refresh(Tn)}),en=BP(At,{redial:Qs.redial,closeWindow:()=>{tt.on(Cs.hide),s.off("ResizeEditor",cn),tt.clear(),de(en.instanceApi)}},t.backstages.popup,oe.ariaAttrs,cn),$n=Ga(Cs.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:oe.persistent?{event:"doNotDismissYet"}:{},...Be?{}:{fireRepositionEventInstead:{}},inlineBehaviours:rt([wn("window-manager-inline-events",[$e(Um(),(Tn,$t)=>{Wn(en.dialog,Nh)})]),...Mte(s,a,Be)]),isExtraPart:(Tn,$t)=>PJ($t)}));tt.set($n);const vn=()=>{const Tn=s.inline?ge():ct.fromDom(s.getContainer()),$t=pr(Tn);return R.some($t)};return Cs.showWithinBounds($n,ur(en.dialog),{anchor:re},vn),(!a||!Be)&&(ds.refresh($n),s.on("ResizeEditor",cn)),en.instanceApi.setData(Ct),jt.focusIn(en.dialog),en.instanceApi};return Qs.open(fe,J)},D=(J,re,de,oe)=>{const fe=(he,ke,Pe)=>{const Ct=MJ(ke,Pe),tt=uo(),Be=t.backstages.popup.shared.header.isPositionedAtTop(),At={dataValidator:Pe,initialData:Ct,internalDialog:he},cn=()=>tt.on(Tn=>{Cs.reposition(Tn),ds.refresh(Tn)}),en=BP(At,{redial:Qs.redial,closeWindow:()=>{tt.on(Cs.hide),s.off("ResizeEditor ScrollWindow ElementScroll",cn),tt.clear(),de(en.instanceApi)}},t.backstages.popup,oe.ariaAttrs,cn),$n=Ga(Cs.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:oe.persistent?{event:"doNotDismissYet"}:{},...Be?{}:{fireRepositionEventInstead:{}},inlineBehaviours:rt([wn("window-manager-inline-events",[$e(Um(),(Tn,$t)=>{Wn(en.dialog,Nh)})]),ds.config({contextual:{lazyContext:()=>R.some(pr(ct.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:Tn=>sp(s,Tn.element).map(et=>({bounds:rp(et),optScrollEnv:R.some({currentScrollTop:et.element.dom.scrollTop,scrollElmTop:Va(et.element).top})})).getOrThunk(()=>({bounds:_r(),optScrollEnv:R.none()}))})]),isExtraPart:(Tn,$t)=>PJ($t)}));tt.set($n);const vn=()=>t.backstages.popup.shared.getSink().toOptional().bind(Tn=>{const $t=sp(s,Tn.element),et=15,vt=$t.map(Jt=>rp(Jt)).getOr(_r()),fn=pr(ct.fromDom(s.getContentAreaContainer())),An=Wf(fn,vt);return R.some(bs(An.x,An.y,An.width,An.height-et))});return Cs.showWithinBounds($n,ur(en.dialog),{anchor:re},vn),ds.refresh($n),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",cn),en.instanceApi.setData(Ct),jt.focusIn(en.dialog),en.instanceApi};return Qs.open(fe,J)};return{open:g,openUrl:p,alert:(J,re)=>{c.open(J,re)},close:J=>{J.close()},confirm:(J,re)=>{d.open(J,re)}}},Nte=t=>{KT(t),d9(t),F8(t)};var Bte=()=>{mc.add("silver",t=>{Nte(t);let s=()=>_r();const{dialogs:a,popups:c,renderUI:d}=xP(t,{getPopupSinkBounds:()=>s()}),g=()=>{const D=d();return sp(t,c.getMothership().element).each(H=>{s=()=>rp(H)}),D};RR.register(t,c.backstage.shared);const p=Pte({editor:t,backstages:{popup:c.backstage,dialog:a.backstage}}),x=uo(),T=()=>XV(t,{backstage:c.backstage},c.getMothership(),x),O=()=>Pn(ct.fromDom(t.getContainer()),".tox-promotion").map(D=>D.dom).getOrNull();return{renderUI:g,getWindowManagerImpl:ne(p),getNotificationManagerImpl:T,getPromotionElement:O}})};Bte()}()),DQ}Xre();var PQ={},NQ={},BQ;function xte(){return BQ||(BQ=1,tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12.7 18.3a1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7 1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7v-1a1 1 0 0 0-.3-.7ZM11.3 5.7a1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3A1 1 0 0 0 13 5V4a1 1 0 0 0-.3-.7A1 1 0 0 0 12 3a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7Zm9.4 5.6a1 1 0 0 0-.7-.3h-1a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7Zm-15 1.4A1 1 0 0 0 6 12a1 1 0 0 0-.3-.7A1 1 0 0 0 5 11H4a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3Zm13 4.6-.7-.8a1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.8l.7.7a1 1 0 0 0 .7.3 1 1 0 0 0 .8-.3 1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7ZM5.3 6.7l.7.8a1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.8l-.7-.7A1 1 0 0 0 6 5a1 1 0 0 0-.8.3 1 1 0 0 0-.3.8 1 1 0 0 0 .3.6Zm12 1a1 1 0 0 0 .7-.2l.7-.7A1 1 0 0 0 19 6a1 1 0 0 0-.3-.8 1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3l-.7.7a1 1 0 0 0-.3.8 1 1 0 0 0 .3.7 1 1 0 0 0 .7.2ZM6.7 16.4a1 1 0 0 0-.8.2l-.7.7a1 1 0 0 0-.3.7 1 1 0 0 0 .3.8 1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3l.7-.7a1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3Z"/><path fill-rule="evenodd" d="M13.6 8.3A4 4 0 0 0 12 8a4 4 0 0 0-1.6.3A4 4 0 0 0 9 9.5a4 4 0 0 0-.6 1A4 4 0 0 0 8 12c0 .6.1 1 .3 1.6a4 4 0 0 0 2.1 2 4 4 0 0 0 1.6.4 4 4 0 0 0 1.6-.3 4 4 0 0 0 2-2.1A4 4 0 0 0 16 12a4 4 0 0 0-.3-1.6 4 4 0 0 0-2.1-2ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24" class="color-swatch-remove-color"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 0 1 19.4 9c.4 1 .6 2 .6 3.1s-.2 2.1-.6 3.1a8 8 0 0 1-1.7 2.6 8 8 0 0 1-2.6 1.7 7.8 7.8 0 0 1-3.1.6 7.8 7.8 0 0 1-3.1-.6 8 8 0 0 1-2.6-1.7A8 8 0 0 1 4.6 15 7.8 7.8 0 0 1 4 12c0-1.1.2-2.1.6-3.1a8 8 0 0 1 1.7-2.6A8 8 0 0 1 9 4.6 7.8 7.8 0 0 1 12 4Zm-6 8a6 6 0 0 0 1.8 4.2 6 6 0 0 0 1.9 1.3 5.8 5.8 0 0 0 2.3.5V6c-.8 0-1.6.2-2.3.5a6 6 0 0 0-2 1.3 6 6 0 0 0-1.2 1.9A5.8 5.8 0 0 0 6 12Z"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg height="24" width="24"><path d="M11.5 16.3a.7.7 0 1 0 1.4 0V14l2.7-6a.7.7 0 1 0-1.2-.6l-2.2 5-2.3-4.9C9.6 7 8.7 7 8 7.2v1.1c.8-.2.9 0 1.2 1l2.3 4.7z"/><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2h14v14H5z" fill-rule="evenodd"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg height="24" width="24"><path d="M5 4 3.6 5.4l3.9 4C6.6 10.7 6 12.3 6 14a6 6 0 0 0 10.3 4.2l1.9 1.8 1.4-1.4z" fill-rule="evenodd"/><path d="M13.4 8.4c.9 1 1.6 2.1 2 3.2l2.6 2.6V14c0-5-6-10-6-10s-1 .8-2.1 2l1.4 1.5.7-.7 1.4 1.6z"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path fill-rule="evenodd" d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',"auto-image-enhancement":'<svg width="24" height="24"><path d="M7.7 10.6a5.8 5.8 0 0 0 5.7 5.7A5.8 5.8 0 0 0 7.7 22 5.8 5.8 0 0 0 2 16.3a5.8 5.8 0 0 0 5.7-5.7ZM15.5 2c.3 3 3.3 6 6.5 6.4-3.2.5-6.2 3.4-6.5 6.5-.3-3.4-3-6-6.4-6.5 3.3-.5 6.1-3 6.4-6.4Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.4 0H19v3.6zm-2.8 0h-2.2l8.6 8.6v-2.2zm-5 0H5l14 14v-2.6z" fill-rule="evenodd"/></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"photo-filter":'<svg height="24" width="24"><path d="M4.4 21c-.3 0-.6-.2-.9-.5-.3-.3-.4-.6-.5-.9L19.6 3c.3 0 .6.3.9.5l.5.9zM3 14.7v-2.8L11.9 3h2.8zM3 7V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h2zm14 14 4-4v2c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm-7.7 0L21 9.3v2.8L12 21z"/></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',vibrance:'<svg height="24" width="24"><path d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}})),NQ}var LQ;function Yre(){return LQ||(LQ=1,xte()),PQ}Yre();var IQ={},FQ={},$Q;function Jre(){return $Q||($Q=1,function(){var C=tinymce.util.Tools.resolve("tinymce.PluginManager");const f=(Z,se,ge)=>{var He;return ge(Z,se.prototype)?!0:((He=Z.constructor)===null||He===void 0?void 0:He.name)===se.name},y=Z=>{const se=typeof Z;return Z===null?"null":se==="object"&&Array.isArray(Z)?"array":se==="object"&&f(Z,String,(ge,He)=>He.isPrototypeOf(ge))?"string":se},E=Z=>se=>y(se)===Z,N=Z=>se=>typeof se===Z,U=Z=>se=>Z===se,Q=E("string"),te=E("object"),Ce=E("array"),_e=U(null),Ie=N("boolean"),nt=Z=>Z==null,pt=Z=>!nt(Z),Ht=N("function"),ot=(Z,se)=>{if(Ce(Z)){for(let ge=0,He=Z.length;ge<He;++ge)if(!se(Z[ge]))return!1;return!0}return!1},st=()=>{},Ne=Z=>()=>Z,Vt=(Z,se)=>Z===se;class Oe{constructor(se,ge){this.tag=se,this.value=ge}static some(se){return new Oe(!0,se)}static none(){return Oe.singletonNone}fold(se,ge){return this.tag?ge(this.value):se()}isSome(){return this.tag}isNone(){return!this.tag}map(se){return this.tag?Oe.some(se(this.value)):Oe.none()}bind(se){return this.tag?se(this.value):Oe.none()}exists(se){return this.tag&&se(this.value)}forall(se){return!this.tag||se(this.value)}filter(se){return!this.tag||se(this.value)?this:Oe.none()}getOr(se){return this.tag?this.value:se}or(se){return this.tag?this:se}getOrThunk(se){return this.tag?this.value:se()}orThunk(se){return this.tag?this:se()}getOrDie(se){if(this.tag)return this.value;throw new Error(se??"Called getOrDie on None")}static from(se){return pt(se)?Oe.some(se):Oe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(se){this.tag&&se(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Oe.singletonNone=new Oe(!1);const Y=Array.prototype.indexOf,we=Array.prototype.push,gt=(Z,se)=>Y.call(Z,se),lt=(Z,se)=>gt(Z,se)>-1,ne=(Z,se)=>{const ge=Z.length,He=new Array(ge);for(let mt=0;mt<ge;mt++){const Ve=Z[mt];He[mt]=se(Ve,mt)}return He},at=(Z,se)=>{for(let ge=0,He=Z.length;ge<He;ge++){const mt=Z[ge];se(mt,ge)}},rn=(Z,se,ge)=>(at(Z,(He,mt)=>{ge=se(ge,He,mt)}),ge),ln=Z=>{const se=[];for(let ge=0,He=Z.length;ge<He;++ge){if(!Ce(Z[ge]))throw new Error("Arr.flatten item "+ge+" was not an array, input: "+Z);we.apply(se,Z[ge])}return se},Ee=(Z,se)=>ln(ne(Z,se)),le=(Z,se)=>{for(let ge=0;ge<Z.length;ge++){const He=se(Z[ge],ge);if(He.isSome())return He}return Oe.none()},xo=(Z,se,ge=Vt)=>Z.exists(He=>ge(He,se)),On=Z=>{const se=[],ge=He=>{se.push(He)};for(let He=0;He<Z.length;He++)Z[He].each(ge);return se},Ft=(Z,se)=>Z?Oe.some(se):Oe.none(),R=Z=>se=>se.options.get(Z),Do=Z=>{const se=Z.options.register;se("link_assume_external_targets",{processor:ge=>{const He=Q(ge)||Ie(ge);return He?ge===!0?{value:1,valid:He}:ge==="http"||ge==="https"?{value:ge,valid:He}:{value:0,valid:He}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),se("link_context_toolbar",{processor:"boolean",default:!1}),se("link_list",{processor:ge=>Q(ge)||Ht(ge)||ot(ge,te)}),se("link_default_target",{processor:"string"}),se("link_default_protocol",{processor:"string",default:"https"}),se("link_target_list",{processor:ge=>Ie(ge)||ot(ge,te),default:!0}),se("link_rel_list",{processor:"object[]",default:[]}),se("link_class_list",{processor:"object[]",default:[]}),se("link_title",{processor:"boolean",default:!0}),se("allow_unsafe_link_target",{processor:"boolean",default:!1}),se("link_quicklink",{processor:"boolean",default:!1}),se("link_attributes_postprocess",{processor:"function"})},St=R("link_assume_external_targets"),Uo=R("link_context_toolbar"),bn=R("link_list"),je=R("link_default_target"),Mo=R("link_default_protocol"),wr=R("link_target_list"),gs=R("link_rel_list"),Xr=R("link_class_list"),qe=R("link_title"),Ot=R("allow_unsafe_link_target"),V=R("link_quicklink"),Hl=R("link_attributes_postprocess"),Eo=Object.keys,Fs=Object.hasOwnProperty,Wo=(Z,se)=>{const ge=Eo(Z);for(let He=0,mt=ge.length;He<mt;He++){const Ve=ge[He],zt=Z[Ve];se(zt,Ve)}},Np=Z=>(se,ge)=>{Z[ge]=se},yn=(Z,se,ge,He)=>{Wo(Z,(mt,Ve)=>{(se(mt,Ve)?ge:He)(mt,Ve)})},bo=(Z,se)=>{const ge={};return yn(Z,se,Np(ge),st),ge},Cn=(Z,se)=>Fs.call(Z,se),ye=(Z,se)=>Cn(Z,se)&&Z[se]!==void 0&&Z[se]!==null;var ic=tinymce.util.Tools.resolve("tinymce.util.URI"),ir=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),an=tinymce.util.Tools.resolve("tinymce.util.Tools");const Bc=Z=>pt(Z)&&Z.nodeName.toLowerCase()==="a",as=Z=>Bc(Z)&&!!Yr(Z),_u=(Z,se)=>{if(Z.collapsed)return[];{const ge=Z.cloneContents(),He=ge.firstChild,mt=new ir(He,ge),Ve=[];let zt=He;do se(zt)&&Ve.push(zt);while(zt=mt.next());return Ve}},ps=Z=>/^\w+:/i.test(Z),Yr=Z=>{var se,ge;return(ge=(se=Z.getAttribute("data-mce-href"))!==null&&se!==void 0?se:Z.getAttribute("href"))!==null&&ge!==void 0?ge:""},Dd=(Z,se)=>{const ge=["noopener"],He=Z?Z.split(/\s+/):[],mt=_n=>an.trim(_n.sort().join(" ")),Ve=_n=>(_n=zt(_n),_n.length>0?_n.concat(ge):ge),zt=_n=>_n.filter(Vs=>an.inArray(ge,Vs)===-1),Ln=se?Ve(He):zt(He);return Ln.length>0?mt(Ln):""},ti=Z=>Z.replace(/\uFEFF/g,""),ks=(Z,se)=>(se=se||_s(Z.selection.getRng())[0]||Z.selection.getNode(),Jr(se)?Oe.from(Z.dom.select("a[href]",se)[0]):Oe.from(Z.dom.getParent(se,"a[href]"))),Zo=(Z,se)=>ks(Z,se).isSome(),qi=(Z,se)=>{const ge=se.fold(()=>Z.getContent({format:"text"}),He=>He.innerText||He.textContent||"");return ti(ge)},_s=Z=>_u(Z,as),Io=Z=>an.grep(Z,as),Vl=Z=>Io(Z).length>0,Ir=Z=>_s(Z).length>0,Si=Z=>{const se=Z.schema.getTextInlineElements(),ge=Ve=>Ve.nodeType===1&&!Bc(Ve)&&!Cn(se,Ve.nodeName.toLowerCase());if(ks(Z).exists(Ve=>Ve.hasAttribute("data-mce-block")))return!1;const mt=Z.selection.getRng();return mt.collapsed?!0:_u(mt,ge).length===0},Jr=Z=>pt(Z)&&Z.nodeName==="FIGURE"&&/\bimage\b/i.test(Z.className),zl=Z=>rn(["title","rel","class","target"],(ge,He)=>(Z[He].each(mt=>{ge[He]=mt.length>0?mt:null}),ge),{href:Z.href}),Au=(Z,se)=>(se==="http"||se==="https")&&!ps(Z)?se+"://"+Z:Z,fr=(Z,se)=>{const ge={...se};if(gs(Z).length===0&&!Ot(Z)){const He=Dd(ge.rel,ge.target==="_blank");ge.rel=He||null}return Oe.from(ge.target).isNone()&&wr(Z)===!1&&(ge.target=je(Z)),ge.href=Au(ge.href,St(Z)),ge},_f=(Z,se,ge,He)=>{ge.each(Ve=>{Cn(se,"innerText")?se.innerText=Ve:se.textContent=Ve}),Z.dom.setAttribs(se,He);const mt=Z.dom.createRng();mt.setStartAfter(se),mt.setEndAfter(se),Z.selection.setRng(mt)},Tt=(Z,se,ge,He)=>{const mt=Z.dom;Jr(se)?Po(mt,se,He):ge.fold(()=>{Z.execCommand("mceInsertLink",!1,He);const Ve=Z.selection.getEnd(),zt=mt.createRng();zt.setStartAfter(Ve),zt.setEndAfter(Ve),Z.selection.setRng(zt)},Ve=>{Z.insertContent(mt.createHTML("a",He,mt.encode(Ve)))})},Jn=(Z,se,ge)=>{const He=Z.selection.getNode(),mt=ks(Z,He),Ve=fr(Z,zl(ge)),zt=Hl(Z);pt(zt)&&zt(Ve),Z.undoManager.transact(()=>{ge.href===se.href&&se.attach(),mt.fold(()=>{Tt(Z,He,ge.text,Ve)},Ln=>{Z.focus(),_f(Z,Ln,ge.text,Ve)})})},Ha=Z=>{const se=Z.dom,ge=Z.selection,He=ge.getBookmark(),mt=ge.getRng().cloneRange(),Ve=se.getParent(mt.startContainer,"a[href]",Z.getBody()),zt=se.getParent(mt.endContainer,"a[href]",Z.getBody());Ve&&mt.setStartBefore(Ve),zt&&mt.setEndAfter(zt),ge.setRng(mt),Z.execCommand("unlink"),ge.moveToBookmark(He)},Qr=Z=>{Z.undoManager.transact(()=>{const se=Z.selection.getNode();Jr(se)?Ru(Z,se):Ha(Z),Z.focus()})},Ou=Z=>{const{class:se,href:ge,rel:He,target:mt,text:Ve,title:zt}=Z;return bo({class:se.getOrNull(),href:ge,rel:He.getOrNull(),target:mt.getOrNull(),text:Ve.getOrNull(),title:zt.getOrNull()},(Ln,_n)=>_e(Ln)===!1)},Ul=(Z,se)=>{const ge=Z.options.get,He={allow_html_data_urls:ge("allow_html_data_urls"),allow_script_urls:ge("allow_script_urls"),allow_svg_data_urls:ge("allow_svg_data_urls")},mt=se.href;return{...se,href:ic.isDomSafe(mt,"a",He)?mt:""}},qo=(Z,se,ge)=>{const He=Ul(Z,ge);Z.hasPlugin("rtc",!0)?Z.execCommand("createlink",!1,Ou(He)):Jn(Z,se,He)},ni=Z=>{Z.hasPlugin("rtc",!0)?Z.execCommand("unlink"):Qr(Z)},Ru=(Z,se)=>{var ge;const He=Z.dom.select("img",se)[0];if(He){const mt=Z.dom.getParents(He,"a[href]",se)[0];mt&&((ge=mt.parentNode)===null||ge===void 0||ge.insertBefore(He,mt),Z.dom.remove(mt))}},Po=(Z,se,ge)=>{var He;const mt=Z.select("img",se)[0];if(mt){const Ve=Z.create("a",ge);(He=mt.parentNode)===null||He===void 0||He.insertBefore(Ve,mt),Ve.appendChild(mt)}},un=Z=>Q(Z.value)?Z.value:"",ea=Z=>Q(Z.text)?Z.text:Q(Z.title)?Z.title:"",Lc=(Z,se)=>{const ge=[];return an.each(Z,He=>{const mt=ea(He);if(He.menu!==void 0){const Ve=Lc(He.menu,se);ge.push({text:mt,items:Ve})}else{const Ve=se(He);ge.push({text:mt,value:Ve})}}),ge},Md=(Z=un)=>se=>Oe.from(se).map(ge=>Lc(ge,Z)),ms={sanitize:Z=>Md(un)(Z),sanitizeWith:Md,createUi:(Z,se)=>ge=>({name:Z,type:"listbox",label:se,items:ge}),getValue:un},As=Z=>ye(Z,"items"),wi=(Z,se)=>le(se,ge=>As(ge)?wi(Z,ge.items):Ft(ge.value===Z,ge)),Pd=(Z,se,ge,He)=>{const mt=He[se],Ve=Z.length>0;return mt!==void 0?wi(mt,ge).map(zt=>({url:{value:zt.value,meta:{text:Ve?Z:zt.text,attach:st}},text:Ve?Z:zt.text})):Oe.none()},Ic=(Z,se)=>se==="link"?Z.link:se==="anchor"?Z.anchor:Oe.none(),is={init:(Z,se)=>{const ge={text:Z.text,title:Z.title},He=_n=>{var Vs;return Ft(ge.title.length<=0,Oe.from((Vs=_n.meta)===null||Vs===void 0?void 0:Vs.title).getOr(""))},mt=_n=>{var Vs;return Ft(ge.text.length<=0,Oe.from((Vs=_n.meta)===null||Vs===void 0?void 0:Vs.text).getOr(_n.value))},Ve=_n=>{const Vs=mt(_n.url),zn=He(_n.url);return Vs.isSome()||zn.isSome()?Oe.some({...Vs.map(Nu=>({text:Nu})).getOr({}),...zn.map(Nu=>({title:Nu})).getOr({})}):Oe.none()},zt=(_n,Vs)=>{const zn=Ic(se,Vs).getOr([]);return Pd(ge.text,Vs,zn,_n)};return{onChange:(_n,Vs)=>{const zn=Vs.name;return zn==="url"?Ve(_n()):lt(["anchor","link"],zn)?zt(_n(),zn):((zn==="text"||zn==="title")&&(ge[zn]=_n()[zn]),Oe.none())}}},getDelta:Pd};var ji=tinymce.util.Tools.resolve("tinymce.util.Delay");const ka=(Z,se,ge)=>{const He=Z.selection.getRng();ji.setEditorTimeout(Z,()=>{Z.windowManager.confirm(se,mt=>{Z.selection.setRng(He),ge(mt)})})},Af=Z=>{const se=Z.href;return se.indexOf("@")>0&&se.indexOf("/")===-1&&se.indexOf("mailto:")===-1?Oe.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:He=>({...He,href:"mailto:"+se})}):Oe.none()},Gh=(Z,se)=>ge=>{const He=ge.href;return Z===1&&!ps(He)||Z===0&&/^\s*www(\.|\d\.)/i.test(He)?Oe.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${se}:// prefix?`,preprocess:Ve=>({...Ve,href:se+"://"+He})}):Oe.none()},Wl={preprocess:(Z,se)=>le([Af,Gh(St(Z),Mo(Z))],ge=>ge(se)).fold(()=>Promise.resolve(se),ge=>new Promise(He=>{ka(Z,ge.message,mt=>{He(mt?ge.preprocess(se):se)})}))},ct={getAnchors:Z=>{const se=Z.dom.select("a:not([href])"),ge=Ee(se,He=>{const mt=He.name||He.id;return mt?[{text:mt,value:"#"+mt}]:[]});return ge.length>0?Oe.some([{text:"None",value:""}].concat(ge)):Oe.none()}},Bp={getClasses:Z=>{const se=Xr(Z);return se.length>0?ms.sanitize(se):Oe.none()}},Am=Z=>{try{return Oe.some(JSON.parse(Z))}catch{return Oe.none()}},Of={getLinks:Z=>{const se=He=>Z.convertURL(He.value||He.url||"","href"),ge=bn(Z);return new Promise(He=>{Q(ge)?fetch(ge).then(mt=>mt.ok?mt.text().then(Am):Promise.reject()).then(He,()=>He(Oe.none())):Ht(ge)?ge(mt=>He(Oe.some(mt))):He(Oe.from(ge))}).then(He=>He.bind(ms.sanitizeWith(se)).map(mt=>mt.length>0?[{text:"None",value:""}].concat(mt):mt))}},ql={getRels:(Z,se)=>{const ge=gs(Z);if(ge.length>0){const He=xo(se,"_blank"),mt=Ot(Z)===!1,Ve=Ln=>Dd(ms.getValue(Ln),He);return(mt?ms.sanitizeWith(Ve):ms.sanitize)(ge)}return Oe.none()}},Du=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],$s={getTargets:Z=>{const se=wr(Z);return Ce(se)?ms.sanitize(se).orThunk(()=>Oe.some(Du)):se===!1?Oe.none():Oe.some(Du)}},_a=(Z,se,ge)=>{const He=Z.getAttrib(se,ge);return He!==null&&He.length>0?Oe.some(He):Oe.none()},Mu=(Z,se)=>{const ge=Z.dom,mt=Si(Z)?Oe.some(qi(Z.selection,se)):Oe.none(),Ve=se.bind(zn=>Oe.from(ge.getAttrib(zn,"href"))),zt=se.bind(zn=>Oe.from(ge.getAttrib(zn,"target"))),Ln=se.bind(zn=>_a(ge,zn,"rel")),_n=se.bind(zn=>_a(ge,zn,"class")),Vs=se.bind(zn=>_a(ge,zn,"title"));return{url:Ve,text:mt,title:Vs,target:zt,rel:Ln,linkClass:_n}},Rf={collect:(Z,se)=>Of.getLinks(Z).then(ge=>{const He=Mu(Z,se);return{anchor:He,catalogs:{targets:$s.getTargets(Z),rels:ql.getRels(Z,He.target),classes:Bp.getClasses(Z),anchor:ct.getAnchors(Z),link:ge},optNode:se,flags:{titleEnabled:qe(Z)}}})},xi=(Z,se)=>ge=>{const He=ge.getData();if(!He.url.value){ni(Z),ge.close();return}const mt=Ln=>Oe.from(He[Ln]).filter(_n=>!xo(se.anchor[Ln],_n)),Ve={href:He.url.value,text:mt("text"),target:mt("target"),rel:mt("rel"),class:mt("linkClass"),title:mt("title")},zt={href:He.url.value,attach:He.url.meta!==void 0&&He.url.meta.attach?He.url.meta.attach:st};Wl.preprocess(Z,Ve).then(Ln=>{qo(Z,zt,Ln)}),ge.close()},Fo=Z=>{const se=ks(Z);return Rf.collect(Z,se)},Os=(Z,se)=>{const ge=Z.anchor,He=ge.url.getOr("");return{url:{value:He,meta:{original:{value:He}}},text:ge.text.getOr(""),title:ge.title.getOr(""),anchor:He,link:He,rel:ge.rel.getOr(""),target:ge.target.or(se).getOr(""),linkClass:ge.linkClass.getOr("")}},hr=(Z,se,ge)=>{const He=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],mt=Z.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Ve=Z.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],zt=Oe.from(je(ge)),Ln=Os(Z,zt),_n=Z.catalogs,Vs=is.init(Ln,_n);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:ln([He,mt,Ve,On([_n.anchor.map(ms.createUi("anchor","Anchors")),_n.rels.map(ms.createUi("rel","Rel")),_n.targets.map(ms.createUi("target","Open link in...")),_n.link.map(ms.createUi("link","Link list")),_n.classes.map(ms.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ln,onChange:(Nu,{name:Mm})=>{Vs.onChange(Nu.getData,{name:Mm}).each(Kl=>{Nu.setData(Kl)})},onSubmit:se}},jl=Z=>{Fo(Z).then(ge=>{const He=xi(Z,ge);return hr(ge,He,Z)}).then(ge=>{Z.windowManager.open(ge)})},Fc=Z=>{Z.addCommand("mceLink",(se,ge)=>{(ge==null?void 0:ge.dialog)===!0||!V(Z)?jl(Z):Z.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},Aa=Z=>{Z.addShortcut("Meta+K","",()=>{Z.execCommand("mceLink")})},jo=Z=>{let se=Z;return{get:()=>se,set:mt=>{se=mt}}},Kh=Z=>{const se=jo(Oe.none()),ge=()=>se.get().each(Z);return{clear:()=>{ge(),se.set(Oe.none())},isSet:()=>se.get().isSome(),get:()=>se.get(),set:Ln=>{ge(),se.set(Oe.some(Ln))}}},al=()=>{const Z=Kh(st);return{...Z,on:ge=>Z.get().each(ge)}},Df=(Z,se)=>Z.substring(se),Kn=(Z,se,ge)=>se===""||Z.length>=se.length&&Z.substr(ge,ge+se.length)===se,il=(Z,se)=>ws(Z,se)?Df(Z,se.length):Z,ws=(Z,se)=>Kn(Z,se,0);var Mf=tinymce.util.Tools.resolve("tinymce.util.VK");const cc=(Z,se)=>{document.body.appendChild(Z),Z.dispatchEvent(se),document.body.removeChild(Z)},Gl=Z=>{const se=document.createElement("a");se.target="_blank",se.href=Z,se.rel="noreferrer noopener";const ge=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(ge),cc(se,ge)},Er=Z=>Z.altKey===!0&&Z.shiftKey===!1&&Z.ctrlKey===!1&&Z.metaKey===!1,Bd=(Z,se)=>{if(se){const ge=Yr(se);if(/^#/.test(ge)){const He=Z.dom.select(`${ge},[name="${il(ge,"#")}"]`);He.length&&Z.selection.scrollIntoView(He[0],!0)}else Gl(se.href)}},$c=Z=>{const se=Z.selection.getRng(),ge=se.startContainer;return as(ge)&&se.startContainer===se.endContainer&&Z.dom.select("img",ge).length===1},Rm=(Z,se)=>{const ge=Io(Z.dom.getParents(se));return Ft(ge.length===1,ge[0])},Xh=Z=>{const se=_s(Z.selection.getRng());return Ft(se.length>0,se[0]).or(Rm(Z,Z.selection.getNode()))},Pf=Z=>Z.selection.isCollapsed()||$c(Z)?Rm(Z,Z.selection.getStart()):Xh(Z),$r=Z=>{const se=al(),ge=()=>se.get().or(Pf(Z)),He=()=>ge().each(mt=>Bd(Z,mt));return Z.on("contextmenu",mt=>{Rm(Z,mt.target).each(se.set)}),Z.on("SelectionChange",()=>{se.isSet()||Pf(Z).each(se.set)}),Z.on("click",mt=>{se.clear();const Ve=Io(Z.dom.getParents(mt.target));Ve.length===1&&Mf.metaKeyPressed(mt)&&(mt.preventDefault(),Bd(Z,Ve[0]))}),Z.on("keydown",mt=>{se.clear(),!mt.isDefaultPrevented()&&mt.keyCode===13&&Er(mt)&&ge().each(Ve=>{mt.preventDefault(),Bd(Z,Ve)})}),{gotoSelectedLink:He}},cl=Z=>()=>{Z.execCommand("mceLink",!1,{dialog:!0})},Pu=(Z,se)=>(Z.on("NodeChange",se),()=>Z.off("NodeChange",se)),Ld=Z=>se=>{const ge=()=>{se.setActive(!Z.mode.isReadOnly()&&Zo(Z,Z.selection.getNode())),se.setEnabled(Z.selection.isEditable())};return ge(),Pu(Z,ge)},Yh=Z=>se=>{const ge=()=>{se.setEnabled(Z.selection.isEditable())};return ge(),Pu(Z,ge)},Hc=Z=>se=>{const ge=Ve=>Vl(Ve)||Ir(Z.selection.getRng()),He=Z.dom.getParents(Z.selection.getStart()),mt=Ve=>{se.setEnabled(ge(Ve)&&Z.selection.isEditable())};return mt(He),Pu(Z,Ve=>mt(Ve.parents))},Hr=(Z,se)=>{Z.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:cl(Z),onSetup:Ld(Z)}),Z.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:se.gotoSelectedLink,onSetup:Hc(Z)}),Z.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>ni(Z),onSetup:Hc(Z)})},gr=(Z,se)=>{Z.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:se.gotoSelectedLink,onSetup:Hc(Z)}),Z.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:cl(Z),onSetup:Yh(Z)}),Z.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>ni(Z),onSetup:Hc(Z)})},lc=Z=>{const se="link unlink openlink",ge="link";Z.ui.registry.addContextMenu("link",{update:He=>Z.dom.isEditable(He)?Vl(Z.dom.getParents(He,"a"))?se:ge:""})},Dm=(Z,se)=>{const ge=Ve=>{Ve.selection.collapse(!1)},He=Ve=>{const zt=Z.selection.getNode();return Ve.setEnabled(Zo(Z,zt)&&Z.selection.isEditable()),st},mt=Ve=>{const zt=ks(Z),Ln=Si(Z);if(zt.isNone()&&Ln){const _n=qi(Z.selection,zt);return Ft(_n.length===0,Ve)}else return Oe.none()};Z.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Ld(Z)},label:"Link",predicate:Ve=>Uo(Z)&&Zo(Z,Ve),initValue:()=>ks(Z).fold(Ne(""),Yr),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Ve=>{const zt=Z.selection.getNode();return Ve.setActive(Zo(Z,zt)),Ld(Z)(Ve)},onAction:Ve=>{const zt=Ve.getValue(),Ln=mt(zt);qo(Z,{href:zt,attach:st},{href:zt,text:Ln,title:Oe.none(),rel:Oe.none(),target:Oe.from(je(Z)),class:Oe.none()}),ge(Z),Ve.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:He,onAction:Ve=>{ni(Z),Ve.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:He,onAction:Ve=>{se.gotoSelectedLink(),Ve.hide()}}]})},Nf=Z=>{const se=$r(Z);Hr(Z,se),gr(Z,se),lc(Z),Dm(Z,se)};var la=()=>{C.add("link",Z=>{Do(Z),Fc(Z),Nf(Z),Aa(Z)})};la()}()),FQ}var HQ;function Qre(){return HQ||(HQ=1,Jre()),IQ}Qre();var VQ={},zQ={},UQ;function eae(){return UQ||(UQ=1,function(){var C=tinymce.util.Tools.resolve("tinymce.PluginManager");const f=(_,B,z)=>{var ae;return z(_,B.prototype)?!0:((ae=_.constructor)===null||ae===void 0?void 0:ae.name)===B.name},y=_=>{const B=typeof _;return _===null?"null":B==="object"&&Array.isArray(_)?"array":B==="object"&&f(_,String,(z,ae)=>ae.isPrototypeOf(z))?"string":B},E=_=>B=>y(B)===_,N=_=>B=>typeof B===_,U=E("string"),Q=E("object"),te=E("array"),Ce=N("boolean"),_e=_=>_==null,Ie=_=>!_e(_),nt=N("function"),pt=N("number"),Ht=()=>{},ot=(_,B)=>z=>_(B(z)),st=_=>()=>_,Ne=(_,B)=>_===B;function Vt(_,...B){return(...z)=>{const ae=B.concat(z);return _.apply(null,ae)}}const Oe=_=>B=>!_(B),Y=st(!1);class we{constructor(B,z){this.tag=B,this.value=z}static some(B){return new we(!0,B)}static none(){return we.singletonNone}fold(B,z){return this.tag?z(this.value):B()}isSome(){return this.tag}isNone(){return!this.tag}map(B){return this.tag?we.some(B(this.value)):we.none()}bind(B){return this.tag?B(this.value):we.none()}exists(B){return this.tag&&B(this.value)}forall(B){return!this.tag||B(this.value)}filter(B){return!this.tag||B(this.value)?this:we.none()}getOr(B){return this.tag?this.value:B}or(B){return this.tag?this:B}getOrThunk(B){return this.tag?this.value:B()}orThunk(B){return this.tag?this:B()}getOrDie(B){if(this.tag)return this.value;throw new Error(B??"Called getOrDie on None")}static from(B){return Ie(B)?we.some(B):we.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(B){this.tag&&B(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}we.singletonNone=new we(!1);const gt=Array.prototype.slice,lt=Array.prototype.indexOf,ne=Array.prototype.push,at=(_,B)=>lt.call(_,B),rn=(_,B)=>at(_,B)>-1,ln=(_,B)=>{for(let z=0,ae=_.length;z<ae;z++){const me=_[z];if(B(me,z))return!0}return!1},Ee=(_,B)=>{const z=_.length,ae=new Array(z);for(let me=0;me<z;me++){const Ye=_[me];ae[me]=B(Ye,me)}return ae},le=(_,B)=>{for(let z=0,ae=_.length;z<ae;z++){const me=_[z];B(me,z)}},xo=(_,B)=>{const z=[];for(let ae=0,me=_.length;ae<me;ae++){const Ye=_[ae];B(Ye,ae)&&z.push(Ye)}return z},On=(_,B)=>{if(_.length===0)return[];{let z=B(_[0]);const ae=[];let me=[];for(let Ye=0,Rt=_.length;Ye<Rt;Ye++){const Dn=_[Ye],pn=B(Dn);pn!==z&&(ae.push(me),me=[]),z=pn,me.push(Dn)}return me.length!==0&&ae.push(me),ae}},Ft=(_,B,z)=>(le(_,(ae,me)=>{z=B(z,ae,me)}),z),R=(_,B,z)=>{for(let ae=0,me=_.length;ae<me;ae++){const Ye=_[ae];if(B(Ye,ae))return we.some(Ye);if(z(Ye,ae))break}return we.none()},Do=(_,B)=>R(_,B,Y),St=_=>{const B=[];for(let z=0,ae=_.length;z<ae;++z){if(!te(_[z]))throw new Error("Arr.flatten item "+z+" was not an array, input: "+_);ne.apply(B,_[z])}return B},Uo=(_,B)=>St(Ee(_,B)),bn=_=>{const B=gt.call(_,0);return B.reverse(),B},je=(_,B)=>B>=0&&B<_.length?we.some(_[B]):we.none(),Mo=_=>je(_,0),wr=_=>je(_,_.length-1),gs=(_,B)=>{const z=[],ae=nt(B)?me=>ln(z,Ye=>B(Ye,me)):me=>rn(z,me);for(let me=0,Ye=_.length;me<Ye;me++){const Rt=_[me];ae(Rt)||z.push(Rt)}return z},Xr=(_,B,z=Ne)=>_.exists(ae=>z(ae,B)),qe=(_,B,z=Ne)=>Ot(_,B,z).getOr(_.isNone()&&B.isNone()),Ot=(_,B,z)=>_.isSome()&&B.isSome()?we.some(z(_.getOrDie(),B.getOrDie())):we.none(),V=8,Hl=11,Eo=1,Fs=3,Wo=(_,B)=>{const ae=(B||document).createElement("div");if(ae.innerHTML=_,!ae.hasChildNodes()||ae.childNodes.length>1){const me="HTML does not have a single root node";throw console.error(me,_),new Error(me)}return bo(ae.childNodes[0])},Np=(_,B)=>{const ae=(B||document).createElement(_);return bo(ae)},yn=(_,B)=>{const ae=(B||document).createTextNode(_);return bo(ae)},bo=_=>{if(_==null)throw new Error("Node cannot be null or undefined");return{dom:_}},ye={fromHtml:Wo,fromTag:Np,fromText:yn,fromDom:bo,fromPoint:(_,B,z)=>we.from(_.dom.elementFromPoint(B,z)).map(bo)},ic=(_,B)=>{const z=_.dom;if(z.nodeType!==Eo)return!1;{const ae=z;if(ae.matches!==void 0)return ae.matches(B);if(ae.msMatchesSelector!==void 0)return ae.msMatchesSelector(B);if(ae.webkitMatchesSelector!==void 0)return ae.webkitMatchesSelector(B);if(ae.mozMatchesSelector!==void 0)return ae.mozMatchesSelector(B);throw new Error("Browser lacks native selectors")}},ir=(_,B)=>_.dom===B.dom,an=(_,B)=>{const z=_.dom,ae=B.dom;return z===ae?!1:z.contains(ae)},Bc=ic,as=typeof window<"u"?window:Function("return this;")(),_u=(_,B)=>{let z=B??as;for(let ae=0;ae<_.length&&z!==void 0&&z!==null;++ae)z=z[_[ae]];return z},ps=(_,B)=>{const z=_.split(".");return _u(z,B)},Yr=(_,B)=>ps(_,B),Dd=(_,B)=>{const z=Yr(_,B);if(z==null)throw new Error(_+" not available on this browser");return z},ti=Object.getPrototypeOf,ks=_=>Dd("HTMLElement",_),Zo=_=>{const B=ps("ownerDocument.defaultView",_);return Q(_)&&(ks(B).prototype.isPrototypeOf(_)||/^HTML\w*Element$/.test(ti(_).constructor.name))},qi=_=>_.dom.nodeName.toLowerCase(),_s=_=>_.dom.nodeType,Io=_=>B=>_s(B)===_,Vl=_=>_s(_)===V||qi(_)==="#comment",Ir=_=>Si(_)&&Zo(_.dom),Si=Io(Eo),Jr=Io(Fs),zl=Io(Hl),Au=_=>B=>Si(B)&&qi(B)===_,fr=_=>we.from(_.dom.parentNode).map(ye.fromDom),_f=_=>we.from(_.dom.parentElement).map(ye.fromDom),Tt=_=>we.from(_.dom.nextSibling).map(ye.fromDom),Jn=_=>Ee(_.dom.childNodes,ye.fromDom),Ha=(_,B)=>{const z=_.dom.childNodes;return we.from(z[B]).map(ye.fromDom)},Qr=_=>Ha(_,0),Ou=_=>Ha(_,_.dom.childNodes.length-1),Ul=_=>zl(_)&&Ie(_.dom.host),qo=_=>ye.fromDom(_.dom.getRootNode()),ni=_=>{const B=qo(_);return Ul(B)?we.some(B):we.none()},Ru=_=>ye.fromDom(_.dom.host),Po=_=>{const B=Jr(_)?_.dom.parentNode:_.dom;if(B==null||B.ownerDocument===null)return!1;const z=B.ownerDocument;return ni(ye.fromDom(B)).fold(()=>z.body.contains(B),ot(Po,Ru))};var un=(_,B,z,ae,me)=>_(z,ae)?we.some(z):nt(me)&&me(z)?we.none():B(z,ae,me);const ea=(_,B,z)=>{let ae=_.dom;const me=nt(z)?z:Y;for(;ae.parentNode;){ae=ae.parentNode;const Ye=ye.fromDom(ae);if(B(Ye))return we.some(Ye);if(me(Ye))break}return we.none()},Lc=(_,B,z)=>un((me,Ye)=>Ye(me),ea,_,B,z),Md=(_,B,z)=>ea(_,ae=>ic(ae,B),z),jh=(_,B,z)=>un((me,Ye)=>ic(me,Ye),Md,_,B,z),Ta=_=>jh(_,"[contenteditable]"),ms=(_,B=!1)=>Po(_)?_.dom.isContentEditable:Ta(_).fold(st(B),z=>As(z)==="true"),As=_=>_.dom.contentEditable,wi=(_,B)=>{fr(_).each(ae=>{ae.dom.insertBefore(B.dom,_.dom)})},Pd=(_,B)=>{Tt(_).fold(()=>{fr(_).each(me=>{xr(me,B)})},ae=>{wi(ae,B)})},Ic=(_,B)=>{Qr(_).fold(()=>{xr(_,B)},ae=>{_.dom.insertBefore(B.dom,ae.dom)})},xr=(_,B)=>{_.dom.appendChild(B.dom)},is=(_,B)=>{le(B,z=>{wi(_,z)})},ji=(_,B)=>{le(B,z=>{xr(_,z)})},ka=_=>{_.dom.textContent="",le(Jn(_),B=>{Af(B)})},Af=_=>{const B=_.dom;B.parentNode!==null&&B.parentNode.removeChild(B)};var Gh=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Nd=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Wl=tinymce.util.Tools.resolve("tinymce.util.VK");const xt=_=>Ee(_,ye.fromDom),ct=Object.keys,Zl=(_,B)=>{const z=ct(_);for(let ae=0,me=z.length;ae<me;ae++){const Ye=z[ae],Rt=_[Ye];B(Rt,Ye)}},Bp=_=>(B,z)=>{_[z]=B},Am=(_,B,z,ae)=>{Zl(_,(me,Ye)=>{(B(me,Ye)?z:ae)(me,Ye)})},Qo=(_,B)=>{const z={};return Am(_,B,Bp(z),Ht),z},Of=(_,B,z)=>{if(U(z)||Ce(z)||pt(z))_.setAttribute(B,z+"");else throw console.error("Invalid call to Attribute.set. Key ",B,":: Value ",z,":: Element ",_),new Error("Attribute value was not simple")},Om=(_,B)=>{const z=_.dom;Zl(B,(ae,me)=>{Of(z,me,ae)})},ql=_=>Ft(_.dom.attributes,(B,z)=>(B[z.name]=z.value,B),{}),Du=(_,B)=>ye.fromDom(_.dom.cloneNode(B)),Fr=_=>Du(_,!0),$s=(_,B)=>{const z=ye.fromTag(B),ae=ql(_);return Om(z,ae),z},_a=(_,B)=>{const z=$s(_,B);Pd(_,z);const ae=Jn(_);return ji(z,ae),Af(_),z};var Mu=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Hs=tinymce.util.Tools.resolve("tinymce.util.Tools");const Rf=_=>B=>Ie(B)&&B.nodeName.toLowerCase()===_,xi=_=>B=>Ie(B)&&_.test(B.nodeName),Fo=_=>Ie(_)&&_.nodeType===3,Os=_=>Ie(_)&&_.nodeType===1,hr=xi(/^(OL|UL|DL)$/),jl=xi(/^(OL|UL)$/),Fc=Rf("ol"),Aa=xi(/^(LI|DT|DD)$/),jo=xi(/^(DT|DD)$/),Kh=xi(/^(TH|TD)$/),al=Rf("br"),Df=_=>{var B;return((B=_.parentNode)===null||B===void 0?void 0:B.firstChild)===_},Kn=(_,B)=>Ie(B)&&B.nodeName in _.schema.getTextBlockElements(),il=(_,B)=>Ie(_)&&_.nodeName in B,ws=(_,B)=>Ie(B)&&B.nodeName in _.schema.getVoidElements(),Mf=(_,B)=>al(B)?_.isBlock(B.nextSibling)&&!al(B.previousSibling):!1,cc=(_,B,z)=>{const ae=_.isEmpty(B);return z&&_.select("span[data-mce-type=bookmark]",B).length>0?!1:ae},Gl=(_,B)=>_.isChildOf(B,_.getRoot()),Er=_=>B=>B.options.get(_),Bd=_=>{const B=_.options.register;B("lists_indent_on_tab",{processor:"boolean",default:!0})},$c=Er("lists_indent_on_tab"),Rm=Er("forced_root_block"),Xh=Er("forced_root_block_attrs"),Pf=(_,B,z={})=>{const ae=_.dom,me=_.schema.getBlockElements(),Ye=ae.createFragment(),Rt=Rm(_),Dn=Xh(_);let pn,Zt,Ho=!1;for(Zt=ae.create(Rt,{...Dn,...z.style?{style:z.style}:{}}),il(B.firstChild,me)||Ye.appendChild(Zt);pn=B.firstChild;){const vs=pn.nodeName;!Ho&&(vs!=="SPAN"||pn.getAttribute("data-mce-type")!=="bookmark")&&(Ho=!0),il(pn,me)?(Ye.appendChild(pn),Zt=null):(Zt||(Zt=ae.create(Rt,Dn),Ye.appendChild(Zt)),Zt.appendChild(pn))}return!Ho&&Zt&&Zt.appendChild(ae.create("br",{"data-mce-bogus":"1"})),Ye},$r=Mu.DOM,cl=(_,B,z)=>{const ae=Zt=>{const Ho=Zt.parentNode;Ho&&Hs.each(me,vs=>{Ho.insertBefore(vs,z.parentNode)}),$r.remove(Zt)},me=$r.select('span[data-mce-type="bookmark"]',B),Ye=Pf(_,z),Rt=$r.createRng();Rt.setStartAfter(z),Rt.setEndAfter(B);const Dn=Rt.extractContents();for(let Zt=Dn.firstChild;Zt;Zt=Zt.firstChild)if(Zt.nodeName==="LI"&&_.dom.isEmpty(Zt)){$r.remove(Zt);break}_.dom.isEmpty(Dn)||$r.insertAfter(Dn,B),$r.insertAfter(Ye,B);const pn=z.parentElement;pn&&cc(_.dom,pn)&&ae(pn),$r.remove(z),cc(_.dom,B)&&$r.remove(B)},Pu=Au("dd"),Ld=Au("dt"),Yh=(_,B)=>{Pu(B)?_a(B,"dt"):Ld(B)&&_f(B).each(z=>cl(_,z.dom,B.dom))},Hc=_=>{Ld(_)&&_a(_,"dd")},Hr=(_,B,z)=>{B==="Indent"?le(z,Hc):le(z,ae=>Yh(_,ae))},gr=(_,B)=>{if(Fo(_))return{container:_,offset:B};const z=Gh.getNode(_,B);return Fo(z)?{container:z,offset:B>=_.childNodes.length?z.data.length:0}:z.previousSibling&&Fo(z.previousSibling)?{container:z.previousSibling,offset:z.previousSibling.data.length}:z.nextSibling&&Fo(z.nextSibling)?{container:z.nextSibling,offset:0}:{container:_,offset:B}},lc=_=>{const B=_.cloneRange(),z=gr(_.startContainer,_.startOffset);B.setStart(z.container,z.offset);const ae=gr(_.endContainer,_.endOffset);return B.setEnd(ae.container,ae.offset),B},Dm=["OL","UL","DL"],Nf=Dm.join(","),la=(_,B)=>{const z=B||_.selection.getStart(!0);return _.dom.getParent(z,Nf,_n(_,z))},Z=(_,B)=>Ie(_)&&B.length===1&&B[0]===_,se=_=>xo(_.querySelectorAll(Nf),hr),ge=_=>{const B=la(_),z=_.selection.getSelectedBlocks();return Z(B,z)?se(B):xo(z,ae=>hr(ae)&&B!==ae)},He=(_,B)=>{const z=Hs.map(B,ae=>{const me=_.dom.getParent(ae,"li,dd,dt",_n(_,ae));return me||ae});return gs(z)},mt=_=>{const B=_.selection.getSelectedBlocks();return xo(He(_,B),Aa)},Ve=_=>xo(mt(_),jo),zt=(_,B)=>{const z=_.dom.getParents(B,"TD,TH");return z.length>0?z[0]:_.getBody()},Ln=(_,B)=>!hr(B)&&!Aa(B)&&ln(Dm,z=>_.isValidChild(B.nodeName,z)),_n=(_,B)=>{const z=_.dom.getParents(B,_.dom.isBlock),ae=Ye=>Ye.nodeName.toLowerCase()!==Rm(_);return Do(z,Ye=>ae(Ye)&&Ln(_.schema,Ye)).getOr(_.getBody())},Vs=_=>fr(_).exists(B=>Aa(B.dom)&&Qr(B).exists(z=>!hr(z.dom))&&Ou(B).exists(z=>!hr(z.dom))),zn=(_,B)=>{const z=_.dom.getParents(B,"ol,ul",_n(_,B));return wr(z)},Nu=_=>{const B=zn(_,_.selection.getStart()),z=xo(_.selection.getSelectedBlocks(),jl);return B.toArray().concat(z)},Mm=_=>{const B=_.selection.getStart();return _.dom.getParents(B,"ol,ul",_n(_,B))},Kl=_=>{const B=Nu(_),z=Mm(_);return Do(z,ae=>Vs(ye.fromDom(ae))).fold(()=>En(_,B),ae=>[ae])},En=(_,B)=>{const z=Ee(B,ae=>zn(_,ae).getOr(ae));return gs(z)},ta=_=>/\btox\-/.test(_.className),Bf=(_,B)=>R(_,hr,Kh).exists(z=>z.nodeName===B&&!ta(z)),Xe=(_,B)=>B!==null&&!_.dom.isEditable(B),Xl=_=>{const B=la(_);return Xe(_,B)||!_.selection.isEditable()},Ps=(_,B)=>{const z=_.dom.getParent(B,"ol,ul,dl");return Xe(_,z)||!_.selection.isEditable()},Lp=(_,B)=>{const z=_.selection.getNode();return B({parents:_.dom.getParents(z),element:z}),_.on("NodeChange",B),()=>_.off("NodeChange",B)},Ns=(_,B)=>{const ae=document.createDocumentFragment();return le(_,me=>{ae.appendChild(me.dom)}),ye.fromDom(ae)},Un=(_,B,z)=>_.dispatch("ListMutation",{action:B,element:z}),Vr=(_=>B=>B.replace(_,""))(/^\s+|\s+$/g),Lf=_=>_.length>0,nr=_=>!Lf(_),Bu=_=>_.style!==void 0&&nt(_.style.getPropertyValue),Ip=(_,B,z)=>{if(!U(z))throw console.error("Invalid call to CSS.set. Property ",B,":: Value ",z,":: Element ",_),new Error("CSS value must be a string: "+z);Bu(_)&&_.style.setProperty(B,z)},qb=(_,B,z)=>{const ae=_.dom;Ip(ae,B,z)},$o=_=>Bc(_,"OL,UL"),qy=_=>Bc(_,"LI"),Tr=_=>Qr(_).exists($o),Va=_=>Ou(_).exists($o),Ti=_=>"listAttributes"in _,Lu=_=>"isComment"in _,jb=_=>"isFragment"in _,Rn=_=>_.depth>0,Id=_=>_.isSelected,Yl=_=>{const B=Jn(_),z=Va(_)?B.slice(0,-1):B;return Ee(z,Fr)},Jl=(_,B,z)=>fr(_).filter(Si).map(ae=>({depth:B,dirty:!1,isSelected:z,content:Yl(_),itemAttributes:ql(_),listAttributes:ql(ae),listType:qi(ae),isInPreviousLi:!1})),Pm=(_,B)=>{xr(_.item,B.list)},es=_=>{for(let B=1;B<_.length;B++)Pm(_[B-1],_[B])},kr=(_,B)=>{Ot(wr(_),Mo(B),Pm)},Fd=(_,B)=>{const z={list:ye.fromTag(B,_),item:ye.fromTag("li",_)};return xr(z.list,z.item),z},Fp=(_,B,z)=>{const ae=[];for(let me=0;me<z;me++)ae.push(Fd(_,Ti(B)?B.listType:B.parentListType));return ae},Ql=(_,B)=>{for(let z=0;z<_.length-1;z++)qb(_[z].item,"list-style-type","none");wr(_).each(z=>{Ti(B)&&(Om(z.list,B.listAttributes),Om(z.item,B.itemAttributes)),ji(z.item,B.content)})},oi=(_,B)=>{qi(_.list)!==B.listType&&(_.list=_a(_.list,B.listType)),Om(_.list,B.listAttributes)},zr=(_,B,z)=>{const ae=ye.fromTag("li",_);return Om(ae,B),ji(ae,z),ae},ua=(_,B)=>{xr(_.list,B),_.item=B},Oa=(_,B,z)=>{const ae=B.slice(0,z.depth);return wr(ae).each(me=>{if(Ti(z)){const Ye=zr(_,z.itemAttributes,z.content);ua(me,Ye),oi(me,z)}else if(jb(z))ji(me.item,z.content);else{const Ye=ye.fromHtml(`<!--${z.content}-->`);xr(me.list,Ye)}}),ae},Vc=(_,B,z)=>{const ae=Fp(_,z,z.depth-B.length);return es(ae),Ql(ae,z),kr(B,ae),B.concat(ae)},$d=(_,B)=>{let z=we.none();const ae=Ft(B,(me,Ye,Rt)=>Lu(Ye)?Rt===0?(z=we.some(Ye),me):Oa(_,me,Ye):Ye.depth>me.length?Vc(_,me,Ye):Oa(_,me,Ye),[]);return z.each(me=>{const Ye=ye.fromHtml(`<!--${me.content}-->`);Mo(ae).each(Rt=>{Ic(Rt.list,Ye)})}),Mo(ae).map(me=>me.list)},cs=(_,B)=>{switch(_){case"Indent":B.depth++;break;case"Outdent":B.depth--;break;case"Flatten":B.depth=0}B.dirty=!0},If=(_,B)=>{Ti(_)&&Ti(B)&&(_.listType=B.listType,_.listAttributes={...B.listAttributes})},$p=_=>{_.listAttributes=Qo(_.listAttributes,(B,z)=>z!=="start")},Hd=(_,B)=>{const z=_[B].depth,ae=Ye=>Ye.depth===z&&!Ye.dirty,me=Ye=>Ye.depth<z;return R(bn(_.slice(0,B)),ae,me).orThunk(()=>R(_.slice(B+1),ae,me))},Jh=_=>(le(_,(B,z)=>{Hd(_,z).fold(()=>{B.dirty&&Ti(B)&&$p(B)},ae=>If(B,ae))}),_),jy=_=>{let B=_;return{get:()=>B,set:me=>{B=me}}},Vd=(_,B,z,ae)=>{var me;if(Vl(ae))return[{depth:_+1,content:(me=ae.dom.nodeValue)!==null&&me!==void 0?me:"",dirty:!1,isSelected:!1,isComment:!0}];B.each(Dn=>{ir(Dn.start,ae)&&z.set(!0)});const Ye=Jl(ae,_,z.get());B.each(Dn=>{ir(Dn.end,ae)&&z.set(!1)});const Rt=Ou(ae).filter($o).map(Dn=>Ud(_,B,z,Dn)).getOr([]);return Ye.toArray().concat(Rt)},zd=(_,B,z,ae)=>Qr(ae).filter($o).fold(()=>Vd(_,B,z,ae),me=>{const Ye=Ft(Jn(ae),(Rt,Dn,pn)=>{if(pn===0)return Rt;if(qy(Dn))return Rt.concat(Vd(_,B,z,Dn));{const Zt={isFragment:!0,depth:_,content:[Dn],isSelected:!1,dirty:!1,parentListType:qi(me)};return Rt.concat(Zt)}},[]);return Ud(_,B,z,me).concat(Ye)}),Ud=(_,B,z,ae)=>Uo(Jn(ae),me=>{const Ye=$o(me)?Ud:zd,Rt=_+1;return Ye(Rt,B,z,me)}),si=(_,B)=>{const z=jy(!1),ae=0;return Ee(_,me=>({sourceList:me,entries:Ud(ae,B,z,me)}))},Gb=(_,B)=>{const z=Jh(B);return Ee(z,ae=>{const me=Lu(ae)?Ns([ye.fromHtml(`<!--${ae.content}-->`)]):Ns(ae.content),Ye=Ti(ae)?ae.itemAttributes:{};return ye.fromDom(Pf(_,me.dom,Ye))})},Iu=(_,B)=>{const z=Jh(B);return $d(_.contentDocument,z).toArray()},Qh=(_,B)=>Uo(On(B,Rn),z=>Mo(z).exists(Rn)?Iu(_,z):Gb(_,z)),Ff=(_,B)=>{le(xo(_,Id),z=>cs(B,z))},Kb=_=>{const B=Ee(mt(_),ye.fromDom);return Ot(Do(B,Oe(Tr)),Do(bn(B),Oe(Tr)),(z,ae)=>({start:z,end:ae}))},Hp=(_,B,z)=>{const ae=si(B,Kb(_));le(ae,me=>{Ff(me.entries,z);const Ye=Qh(_,me.entries);le(Ye,Rt=>{Un(_,z==="Indent"?"IndentList":"OutdentList",Rt.dom)}),is(me.sourceList,Ye),Af(me.sourceList)})},$f=(_,B)=>{const z=xt(Kl(_)),ae=xt(Ve(_));let me=!1;if(z.length||ae.length){const Ye=_.selection.getBookmark();Hp(_,z,B),Hr(_,B,ae),_.selection.moveToBookmark(Ye),_.selection.setRng(lc(_.selection.getRng())),_.nodeChanged(),me=!0}return me},Vp=(_,B)=>!Xl(_)&&$f(_,B),Xb=_=>Vp(_,"Indent"),Wd=_=>Vp(_,"Outdent"),zp=_=>Vp(_,"Flatten"),ie="\uFEFF",Zd=_=>_===ie,za=(_,B,z)=>ea(_,B,z).isSome(),Gy=(_,B)=>za(_,Vt(ir,B));var Yb=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Nm=Mu.DOM,oo=_=>{const B={},z=ae=>{let me=_[ae?"startContainer":"endContainer"],Ye=_[ae?"startOffset":"endOffset"];if(Os(me)){const Rt=Nm.create("span",{"data-mce-type":"bookmark"});me.hasChildNodes()?(Ye=Math.min(Ye,me.childNodes.length-1),ae?me.insertBefore(Rt,me.childNodes[Ye]):Nm.insertAfter(Rt,me.childNodes[Ye])):me.appendChild(Rt),me=Rt,Ye=0}B[ae?"startContainer":"endContainer"]=me,B[ae?"startOffset":"endOffset"]=Ye};return z(!0),_.collapsed||z(),B},xs=_=>{const B=ae=>{const me=Dn=>{var pn;let Zt=(pn=Dn.parentNode)===null||pn===void 0?void 0:pn.firstChild,Ho=0;for(;Zt;){if(Zt===Dn)return Ho;(!Os(Zt)||Zt.getAttribute("data-mce-type")!=="bookmark")&&Ho++,Zt=Zt.nextSibling}return-1};let Ye=_[ae?"startContainer":"endContainer"],Rt=_[ae?"startOffset":"endOffset"];if(Ye){if(Os(Ye)&&Ye.parentNode){const Dn=Ye;Rt=me(Ye),Ye=Ye.parentNode,Nm.remove(Dn),!Ye.hasChildNodes()&&Nm.isBlock(Ye)&&Ye.appendChild(Nm.create("br"))}_[ae?"startContainer":"endContainer"]=Ye,_[ae?"startOffset":"endOffset"]=Rt}};B(!0),B();const z=Nm.createRng();return z.setStart(_.startContainer,_.startOffset),_.endContainer&&z.setEnd(_.endContainer,_.endOffset),lc(z)},ri=_=>{switch(_){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},eu=(_,B,z)=>{const ae=z["list-style-type"]?z["list-style-type"]:null;_.setStyle(B,"list-style-type",ae)},Jb=(_,B)=>{Hs.each(B,(z,ae)=>{_.setAttribute(ae,z)})},qd=(_,B,z)=>{Jb(B,z["list-attributes"]),Hs.each(_.select("li",B),ae=>{Jb(ae,z["list-item-attributes"])})},ai=(_,B,z)=>{eu(_,B,z),qd(_,B,z)},Hf=(_,B,z)=>{Hs.each(z,ae=>_.setStyle(B,ae,""))},Vf=(_,B)=>Ie(B)&&!il(B,_.schema.getBlockElements()),jd=(_,B,z,ae)=>{let me=B[z?"startContainer":"endContainer"];const Ye=B[z?"startOffset":"endOffset"];Os(me)&&(me=me.childNodes[Math.min(Ye,me.childNodes.length-1)]||me),!z&&al(me.nextSibling)&&(me=me.nextSibling);const Rt=pn=>{for(;!_.dom.isBlock(pn)&&pn.parentNode&&ae!==pn;)pn=pn.parentNode;return pn},Dn=(pn,Zt)=>{var Ho;const vs=new Nd(pn,Rt(pn)),ci=Zt?"next":"prev";let Oi;for(;Oi=vs[ci]();)if(!(ws(_,Oi)||Zd(Oi.textContent)||((Ho=Oi.textContent)===null||Ho===void 0?void 0:Ho.length)===0))return we.some(Oi);return we.none()};if(z&&Fo(me))if(Zd(me.textContent))me=Dn(me,!1).getOr(me);else for(me.parentNode!==null&&Vf(_,me.parentNode)&&(me=me.parentNode);me.previousSibling!==null&&(Vf(_,me.previousSibling)||Fo(me.previousSibling));)me=me.previousSibling;if(!z&&Fo(me))if(Zd(me.textContent))me=Dn(me,!0).getOr(me);else for(me.parentNode!==null&&Vf(_,me.parentNode)&&(me=me.parentNode);me.nextSibling!==null&&(Vf(_,me.nextSibling)||Fo(me.nextSibling));)me=me.nextSibling;for(;me.parentNode!==ae;){const pn=me.parentNode;if(Kn(_,me)||/^(TD|TH)$/.test(pn.nodeName))return me;me=pn}return me},Fu=(_,B,z)=>{const ae=[],me=_.dom,Ye=jd(_,B,!0,z),Rt=jd(_,B,!1,z);let Dn;const pn=[];for(let Zt=Ye;Zt&&(pn.push(Zt),Zt!==Rt);Zt=Zt.nextSibling);return Hs.each(pn,Zt=>{var Ho;if(Kn(_,Zt)){ae.push(Zt),Dn=null;return}if(me.isBlock(Zt)||al(Zt)){al(Zt)&&me.remove(Zt),Dn=null;return}const vs=Zt.nextSibling;if(Yb.isBookmarkNode(Zt)&&(hr(vs)||Kn(_,vs)||!vs&&Zt.parentNode===z)){Dn=null;return}Dn||(Dn=me.create("p"),(Ho=Zt.parentNode)===null||Ho===void 0||Ho.insertBefore(Dn,Zt),ae.push(Dn)),Dn.appendChild(Zt)}),ae},zf=(_,B,z)=>{const ae=_.getStyle(B,"list-style-type");let me=z?z["list-style-type"]:"";return me=me===null?"":me,ae===me},ki=(_,B)=>{const z=_.selection.getStart(!0),ae=jd(_,B,!0,_.getBody());return Gy(ye.fromDom(ae),ye.fromDom(B.commonAncestorContainer))?B.commonAncestorContainer:z},Uf=(_,B,z)=>{const ae=_.selection.getRng();let me="LI";const Ye=_n(_,ki(_,ae)),Rt=_.dom;if(Rt.getContentEditable(_.selection.getNode())==="false")return;B=B.toUpperCase(),B==="DL"&&(me="DT");const Dn=oo(ae),pn=xo(Fu(_,ae,Ye),_.dom.isEditable);Hs.each(pn,Zt=>{let Ho;const vs=Zt.previousSibling,ci=Zt.parentNode;Aa(ci)||(vs&&hr(vs)&&vs.nodeName===B&&zf(Rt,vs,z)?(Ho=vs,Zt=Rt.rename(Zt,me),vs.appendChild(Zt)):(Ho=Rt.create(B),ci.insertBefore(Ho,Zt),Ho.appendChild(Zt),Zt=Rt.rename(Zt,me)),Hf(Rt,Zt,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),ai(Rt,Ho,z),Gd(_.dom,Ho))}),_.selection.setRng(xs(Dn))},Ur=(_,B)=>hr(_)&&_.nodeName===(B==null?void 0:B.nodeName),$u=(_,B,z)=>{const ae=_.getStyle(B,"list-style-type",!0),me=_.getStyle(z,"list-style-type",!0);return ae===me},uc=(_,B)=>_.className===B.className,Ra=(_,B,z)=>Ur(B,z)&&$u(_,B,z)&&uc(B,z),Gd=(_,B)=>{let z,ae=B.nextSibling;if(Ra(_,B,ae)){const me=ae;for(;z=me.firstChild;)B.appendChild(z);_.remove(me)}if(ae=B.previousSibling,Ra(_,B,ae)){const me=ae;for(;z=me.lastChild;)B.insertBefore(z,B.firstChild);_.remove(me)}},Ky=(_,B,z,ae)=>{if(B.nodeName!==z){const me=_.dom.rename(B,z);ai(_.dom,me,ae),Un(_,ri(z),me)}else ai(_.dom,B,ae),Un(_,ri(z),B)},eg=(_,B,z,ae)=>{if(B.classList.forEach((me,Ye,Rt)=>{me.startsWith("tox-")&&(Rt.remove(me),Rt.length===0&&B.removeAttribute("class"))}),B.nodeName!==z){const me=_.dom.rename(B,z);ai(_.dom,me,ae),Un(_,ri(z),me)}else ai(_.dom,B,ae),Un(_,ri(z),B)},ll=(_,B,z,ae,me)=>{const Ye=hr(B);if(Ye&&B.nodeName===ae&&!Bm(me)&&!ta(B))zp(_);else{Uf(_,ae,me);const Rt=oo(_.selection.getRng()),Dn=Ye?[B,...z]:z,pn=Ye&&ta(B)?eg:Ky;Hs.each(Dn,Zt=>{pn(_,Zt,ae,me)}),_.selection.setRng(xs(Rt))}},Bm=_=>"list-style-type"in _,Qb=(_,B,z,ae)=>{if(B!==_.getBody())if(B)if(B.nodeName===z&&!Bm(ae)&&!ta(B))zp(_);else{const me=oo(_.selection.getRng());ta(B)&&B.classList.forEach((Rt,Dn,pn)=>{Rt.startsWith("tox-")&&(pn.remove(Rt),pn.length===0&&B.removeAttribute("class"))}),ai(_.dom,B,ae);const Ye=_.dom.rename(B,z);Gd(_.dom,Ye),_.selection.setRng(xs(me)),Uf(_,z,ae),Un(_,ri(z),Ye)}else Uf(_,z,ae),Un(_,ri(z),B)},tg=(_,B,z)=>{const ae=la(_);if(Ps(_,ae))return;const me=ge(_),Ye=Q(z)?z:{};me.length>0?ll(_,ae,me,B,Ye):Qb(_,ae,B,Ye)},e0=Mu.DOM,xx=(_,B)=>{const z=B.parentElement;if(z&&z.nodeName==="LI"&&z.firstChild===B){const ae=z.previousSibling;ae&&ae.nodeName==="LI"?(ae.appendChild(B),cc(_,z)&&e0.remove(z)):e0.setStyle(z,"listStyleType","none")}if(hr(z)){const ae=z.previousSibling;ae&&ae.nodeName==="LI"&&ae.appendChild(B)}},t0=(_,B)=>{const z=Hs.grep(_.select("ol,ul",B));Hs.each(z,ae=>{xx(_,ae)})},tu=(_,B,z,ae)=>{let me=B.startContainer;const Ye=B.startOffset;if(Fo(me)&&(z?Ye<me.data.length:Ye>0))return me;const Rt=_.schema.getNonEmptyElements();Os(me)&&(me=Gh.getNode(me,Ye));const Dn=new Nd(me,ae);z&&Mf(_.dom,me)&&Dn.next();const pn=z?Dn.next.bind(Dn):Dn.prev2.bind(Dn);for(;me=pn();)if(me.nodeName==="LI"&&!me.hasChildNodes()||Rt[me.nodeName]||Fo(me)&&me.data.length>0)return me;return null},Up=(_,B)=>{const z=B.childNodes;return z.length===1&&!hr(z[0])&&_.isBlock(z[0])},ul=_=>we.from(_).map(ye.fromDom).filter(Ir).exists(B=>ms(B)&&!rn(["details"],qi(B))),bs=(_,B)=>{Up(_,B)&&ul(B.firstChild)&&_.remove(B.firstChild,!0)},pr=(_,B,z)=>{let ae;const me=Up(_,z)?z.firstChild:z;if(bs(_,B),!cc(_,B,!0))for(;ae=B.firstChild;)me.appendChild(ae)},_i=(_,B,z)=>{let ae;const me=B.parentNode;if(!Gl(_,B)||!Gl(_,z))return;hr(z.lastChild)&&(ae=z.lastChild),me===z.lastChild&&al(me.previousSibling)&&_.remove(me.previousSibling);const Ye=z.lastChild;Ye&&al(Ye)&&B.hasChildNodes()&&_.remove(Ye),cc(_,z,!0)&&ka(ye.fromDom(z)),pr(_,B,z),ae&&z.appendChild(ae);const Dn=an(ye.fromDom(z),ye.fromDom(B))?_.getParents(B,hr,z):[];_.remove(B),le(Dn,pn=>{cc(_,pn)&&pn!==_.getRoot()&&_.remove(pn)})},Wf=(_,B,z)=>{ka(ye.fromDom(z)),_i(_.dom,B,z),_.selection.setCursorLocation(z,0)},Zf=(_,B,z,ae)=>{const me=_.dom;if(me.isEmpty(ae))Wf(_,z,ae);else{const Ye=oo(B);_i(me,z,ae),_.selection.setRng(xs(Ye))}},_r=(_,B,z,ae)=>{const me=oo(B);_i(_.dom,z,ae);const Ye=xs(me);_.selection.setRng(Ye)},Wt=(_,B)=>{const z=_.dom,ae=_.selection,me=ae.getStart(),Ye=zt(_,me),Rt=z.getParent(ae.getStart(),"LI",Ye);if(Rt){const Dn=Rt.parentElement;if(Dn===_.getBody()&&cc(z,Dn))return!0;const pn=lc(ae.getRng()),Zt=z.getParent(tu(_,pn,B,Ye),"LI",Ye),Ho=Zt&&(B?z.isChildOf(Rt,Zt):z.isChildOf(Zt,Rt));if(Zt&&Zt!==Rt&&!Ho)return _.undoManager.transact(()=>{B?Zf(_,pn,Zt,Rt):Df(Rt)?Wd(_):_r(_,pn,Rt,Zt)}),!0;if(Ho&&!B&&Zt!==Rt){const vs=pn.commonAncestorContainer.parentElement;return!vs||z.isChildOf(Zt,vs)?!1:(_.undoManager.transact(()=>{const ci=oo(pn);pr(z,vs,Zt),vs.remove();const Oi=xs(ci);_.selection.setRng(Oi)}),!0)}else if(!Zt&&!B&&pn.startOffset===0&&pn.endOffset===0)return _.undoManager.transact(()=>{zp(_)}),!0}return!1},Wp=(_,B,z)=>{const ae=_.getParent(B.parentNode,_.isBlock,z);_.remove(B),ae&&_.isEmpty(ae)&&_.remove(ae)},nu=(_,B)=>{const z=_.dom,ae=_.selection.getStart(),me=zt(_,ae),Ye=z.getParent(ae,z.isBlock,me);if(Ye&&z.isEmpty(Ye,void 0,{checkRootAsContent:!0})){const Rt=lc(_.selection.getRng()),Dn=tu(_,Rt,B,me),pn=z.getParent(Dn,"LI",me);if(Dn&&pn){const Zt=Oi=>rn(["td","th","caption"],qi(Oi)),Ho=Oi=>Oi.dom===me,vs=Lc(ye.fromDom(pn),Zt,Ho),ci=Lc(ye.fromDom(Rt.startContainer),Zt,Ho);return qe(vs,ci,ir)?(_.undoManager.transact(()=>{const Oi=pn.parentNode;Wp(z,Ye,me),Gd(z,Oi),_.selection.select(Dn,!0),_.selection.collapse(B)}),!0):!1}}return!1},Ai=(_,B)=>Wt(_,B)||nu(_,B),uo=_=>{const B=_.selection.getStart(),z=zt(_,B);return _.dom.getParent(B,"LI,DT,DD",z)||mt(_).length>0},Hu=_=>uo(_)?(_.undoManager.transact(()=>{let B=!0;const z=()=>B=!1;_.on("input",z),_.execCommand("Delete"),_.off("input",z),B&&_.dispatch("input"),t0(_.dom,_.getBody())}),!0):!1,qf=(_,B)=>{const z=_.selection;return!Ps(_,z.getNode())&&(z.isCollapsed()?Ai(_,B):Hu(_))},ng=_=>{_.on("ExecCommand",B=>{const z=B.command.toLowerCase();(z==="delete"||z==="forwarddelete")&&uo(_)&&t0(_.dom,_.getBody())}),_.on("keydown",B=>{B.keyCode===Wl.BACKSPACE?qf(_,!1)&&B.preventDefault():B.keyCode===Wl.DELETE&&qf(_,!0)&&B.preventDefault()})},Zp=_=>({backspaceDelete:B=>{qf(_,B)}}),ou=(_,B)=>{const z=la(_);z===null||Ps(_,z)||_.undoManager.transact(()=>{Q(B.styles)&&_.dom.setStyles(z,B.styles),Q(B.attrs)&&Zl(B.attrs,(ae,me)=>_.dom.setAttrib(z,me,ae))})},dc=_=>{const B=bn(Vr(_).split("")),z=Ee(B,(ae,me)=>{const Ye=ae.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,me)*Ye});return Ft(z,(ae,me)=>ae+me,0)},og=_=>{if(_--,_<0)return"";{const B=_%26,z=Math.floor(_/26),ae=og(z),me=String.fromCharCode(65+B);return ae+me}},zs=_=>/^[A-Z]+$/.test(_),Ua=_=>/^[a-z]+$/.test(_),ii=_=>/^[0-9]+$/.test(_),Pn=_=>ii(_)?2:zs(_)?0:Ua(_)?1:nr(_)?3:4,Us=_=>{switch(Pn(_)){case 2:return we.some({listStyleType:we.none(),start:_});case 0:return we.some({listStyleType:we.some("upper-alpha"),start:dc(_).toString()});case 1:return we.some({listStyleType:we.some("lower-alpha"),start:dc(_).toString()});case 3:return we.some({listStyleType:we.none(),start:""});case 4:return we.none()}},mc=_=>{const B=parseInt(_.start,10);return Xr(_.listStyleType,"upper-alpha")?og(B):Xr(_.listStyleType,"lower-alpha")?og(B).toLowerCase():_.start},sg=_=>{const B=la(_);!Fc(B)||Ps(_,B)||_.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:mc({start:_.dom.getAttrib(B,"start","1"),listStyleType:we.from(_.dom.getStyle(B,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:z=>{const ae=z.getData();Us(ae.start).each(me=>{_.execCommand("mceListUpdate",!1,{attrs:{start:me.start==="1"?"":me.start},styles:{"list-style-type":me.listStyleType.getOr("")}})}),z.close()}})},ts=(_,B)=>()=>{const z=la(_);return Ie(z)&&z.nodeName===B},rg=_=>{_.addCommand("mceListProps",()=>{sg(_)})},In=_=>{_.on("BeforeExecCommand",B=>{const z=B.command.toLowerCase();z==="indent"?Xb(_):z==="outdent"&&Wd(_)}),_.addCommand("InsertUnorderedList",(B,z)=>{tg(_,"UL",z)}),_.addCommand("InsertOrderedList",(B,z)=>{tg(_,"OL",z)}),_.addCommand("InsertDefinitionList",(B,z)=>{tg(_,"DL",z)}),_.addCommand("RemoveList",()=>{zp(_)}),rg(_),_.addCommand("mceListUpdate",(B,z)=>{Q(z)&&ou(_,z)}),_.addQueryStateHandler("InsertUnorderedList",ts(_,"UL")),_.addQueryStateHandler("InsertOrderedList",ts(_,"OL")),_.addQueryStateHandler("InsertDefinitionList",ts(_,"DL"))};var na=tinymce.util.Tools.resolve("tinymce.html.Node");const dl=_=>_.type===3,ns=_=>_.length===0,su=_=>{const B=(me,Ye)=>{const Rt=na.create("li");le(me,Dn=>Rt.append(Dn)),Ye?_.insert(Rt,Ye,!0):_.append(Rt)},z=(me,Ye)=>dl(Ye)?[...me,Ye]:!ns(me)&&!dl(Ye)?(B(me,Ye),[]):me,ae=Ft(_.children(),z,[]);ns(ae)||B(ae)},Ex=_=>{_.on("PreInit",()=>{const{parser:B}=_;B.addNodeFilter("ul,ol",z=>le(z,su))})},n0=_=>{_.on("keydown",B=>{B.keyCode!==Wl.TAB||Wl.metaKeyPressed(B)||_.undoManager.transact(()=>{(B.shiftKey?Wd(_):Xb(_))&&B.preventDefault()})})},Xy=_=>{$c(_)&&n0(_),ng(_)},jf=(_,B)=>z=>{const ae=me=>{z.setActive(Bf(me.parents,B)),z.setEnabled(!Ps(_,me.element)&&_.selection.isEditable())};return z.setEnabled(_.selection.isEditable()),Lp(_,ae)},Yy=_=>{const B=z=>()=>_.execCommand(z);_.hasPlugin("advlist")||(_.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:B("InsertOrderedList"),onSetup:jf(_,"OL")}),_.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:B("InsertUnorderedList"),onSetup:jf(_,"UL")}))},Qn=(_,B)=>z=>Lp(_,me=>z.setEnabled(Bf(me.parents,B)&&!Ps(_,me.element))),o0=_=>{const B={text:"List properties...",icon:"ordered-list",onAction:()=>_.execCommand("mceListProps"),onSetup:Qn(_,"OL")};_.ui.registry.addMenuItem("listprops",B),_.ui.registry.addContextMenu("lists",{update:z=>{const ae=la(_,z);return Fc(ae)?["listprops"]:[]}})};var Bs=()=>{C.add("lists",_=>(Bd(_),Ex(_),_.hasPlugin("rtc",!0)?rg(_):(Xy(_),In(_)),Yy(_),o0(_),Zp(_)))};Bs()}()),zQ}var WQ;function tae(){return WQ||(WQ=1,eae()),VQ}tae();var ZQ={},qQ={},jQ;function nae(){return jQ||(jQ=1,function(){var C=tinymce.util.Tools.resolve("tinymce.PluginManager");const f=(te,Ce)=>{te.focus(),te.undoManager.transact(()=>{te.setContent(Ce)}),te.selection.setCursorLocation(),te.nodeChanged()},y=te=>te.getContent({source_view:!0}),E=te=>{const Ce=y(te);te.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Ce},onSubmit:_e=>{f(te,_e.getData().code),_e.close()}})},N=te=>{te.addCommand("mceCodeEditor",()=>{E(te)})},U=te=>{const Ce=()=>te.execCommand("mceCodeEditor");te.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Ce}),te.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Ce})};var Q=()=>{C.add("code",te=>(N(te),U(te),{}))};Q()}()),qQ}var GQ;function oae(){return GQ||(GQ=1,nae()),ZQ}oae();var KQ={},XQ;function sae(){return XQ||(XQ=1,function(){var C=tinymce.util.Tools.resolve("tinymce.ModelManager");const f=(l,m,b)=>{var S;return b(l,m.prototype)?!0:((S=l.constructor)===null||S===void 0?void 0:S.name)===m.name},y=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&f(l,String,(b,S)=>S.isPrototypeOf(b))?"string":m},E=l=>m=>y(m)===l,N=l=>m=>typeof m===l,U=l=>m=>l===m,Q=E("string"),te=E("object"),Ce=E("array"),_e=U(null),Ie=N("boolean"),nt=U(void 0),pt=l=>l==null,Ht=l=>!pt(l),ot=N("function"),st=N("number"),Ne=()=>{},Vt=(l,m)=>(...b)=>l(m.apply(null,b)),Oe=(l,m)=>b=>l(m(b)),Y=l=>()=>l,we=l=>l,gt=(l,m)=>l===m;function lt(l,...m){return(...b)=>{const S=m.concat(b);return l.apply(null,S)}}const ne=l=>m=>!l(m),at=l=>()=>{throw new Error(l)},rn=l=>l(),ln=Y(!1),Ee=Y(!0);class le{constructor(m,b){this.tag=m,this.value=b}static some(m){return new le(!0,m)}static none(){return le.singletonNone}fold(m,b){return this.tag?b(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?le.some(m(this.value)):le.none()}bind(m){return this.tag?m(this.value):le.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:le.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Ht(m)?le.some(m):le.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}le.singletonNone=new le(!1);const xo=Array.prototype.slice,On=Array.prototype.indexOf,Ft=Array.prototype.push,R=(l,m)=>On.call(l,m),Do=(l,m)=>R(l,m)>-1,St=(l,m)=>{for(let b=0,S=l.length;b<S;b++){const A=l[b];if(m(A,b))return!0}return!1},Uo=(l,m)=>{const b=[];for(let S=0;S<l;S++)b.push(m(S));return b},bn=(l,m)=>{const b=l.length,S=new Array(b);for(let A=0;A<b;A++){const M=l[A];S[A]=m(M,A)}return S},je=(l,m)=>{for(let b=0,S=l.length;b<S;b++){const A=l[b];m(A,b)}},Mo=(l,m)=>{for(let b=l.length-1;b>=0;b--){const S=l[b];m(S,b)}},wr=(l,m)=>{const b=[],S=[];for(let A=0,M=l.length;A<M;A++){const $=l[A];(m($,A)?b:S).push($)}return{pass:b,fail:S}},gs=(l,m)=>{const b=[];for(let S=0,A=l.length;S<A;S++){const M=l[S];m(M,S)&&b.push(M)}return b},Xr=(l,m,b)=>(Mo(l,(S,A)=>{b=m(b,S,A)}),b),qe=(l,m,b)=>(je(l,(S,A)=>{b=m(b,S,A)}),b),Ot=(l,m,b)=>{for(let S=0,A=l.length;S<A;S++){const M=l[S];if(m(M,S))return le.some(M);if(b(M,S))break}return le.none()},V=(l,m)=>Ot(l,m,ln),Hl=(l,m)=>{for(let b=0,S=l.length;b<S;b++){const A=l[b];if(m(A,b))return le.some(b)}return le.none()},Eo=l=>{const m=[];for(let b=0,S=l.length;b<S;++b){if(!Ce(l[b]))throw new Error("Arr.flatten item "+b+" was not an array, input: "+l);Ft.apply(m,l[b])}return m},Fs=(l,m)=>Eo(bn(l,m)),Wo=(l,m)=>{for(let b=0,S=l.length;b<S;++b){const A=l[b];if(m(A,b)!==!0)return!1}return!0},Np=l=>{const m=xo.call(l,0);return m.reverse(),m},yn=(l,m)=>{const b={};for(let S=0,A=l.length;S<A;S++){const M=l[S];b[String(M)]=m(M,S)}return b},bo=(l,m)=>{const b=xo.call(l,0);return b.sort(m),b},Cn=(l,m)=>m>=0&&m<l.length?le.some(l[m]):le.none(),ye=l=>Cn(l,0),ic=l=>Cn(l,l.length-1),ir=(l,m)=>{for(let b=0;b<l.length;b++){const S=m(l[b],b);if(S.isSome())return S}return le.none()},an=Object.keys,Bc=Object.hasOwnProperty,as=(l,m)=>{const b=an(l);for(let S=0,A=b.length;S<A;S++){const M=b[S],$=l[M];m($,M)}},_u=(l,m)=>ps(l,(b,S)=>({k:S,v:m(b,S)})),ps=(l,m)=>{const b={};return as(l,(S,A)=>{const M=m(S,A);b[M.k]=M.v}),b},Yr=l=>(m,b)=>{l[b]=m},Dd=(l,m,b,S)=>{as(l,(A,M)=>{(m(A,M)?b:S)(A,M)})},ti=(l,m)=>{const b={};return Dd(l,m,Yr(b),Ne),b},ks=(l,m)=>{const b=[];return as(l,(S,A)=>{b.push(m(S,A))}),b},Zo=l=>ks(l,we),qi=(l,m)=>_s(l,m)?le.from(l[m]):le.none(),_s=(l,m)=>Bc.call(l,m),Io=(l,m)=>_s(l,m)&&l[m]!==void 0&&l[m]!==null,Vl=l=>{for(const m in l)if(Bc.call(l,m))return!1;return!0},Ir=typeof window<"u"?window:Function("return this;")(),Si=(l,m)=>{let b=m??Ir;for(let S=0;S<l.length&&b!==void 0&&b!==null;++S)b=b[l[S]];return b},Jr=(l,m)=>{const b=l.split(".");return Si(b,m)},zl=(l,m)=>Jr(l,m),Au=(l,m)=>{const b=zl(l,m);if(b==null)throw new Error(l+" not available on this browser");return b},fr=Object.getPrototypeOf,_f=l=>Au("HTMLElement",l),Tt=l=>{const m=Jr("ownerDocument.defaultView",l);return te(l)&&(_f(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(fr(l).constructor.name))},Jn=8,Ha=9,Qr=11,Ou=1,Ul=3,qo=l=>l.dom.nodeName.toLowerCase(),ni=l=>l.dom.nodeType,Ru=l=>m=>ni(m)===l,Po=l=>ni(l)===Jn||qo(l)==="#comment",un=l=>ea(l)&&Tt(l.dom),ea=Ru(Ou),Lc=Ru(Ul),Md=Ru(Ha),jh=Ru(Qr),Ta=l=>m=>ea(m)&&qo(m)===l,ms=(l,m,b)=>{if(Q(b)||Ie(b)||st(b))l.setAttribute(m,b+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",b,":: Element ",l),new Error("Attribute value was not simple")},As=(l,m,b)=>{ms(l.dom,m,b)},wi=(l,m)=>{const b=l.dom;as(m,(S,A)=>{ms(b,A,S)})},Pd=(l,m)=>{as(m,(b,S)=>{b.fold(()=>{is(l,S)},A=>{ms(l.dom,S,A)})})},Ic=(l,m)=>{const b=l.dom.getAttribute(m);return b===null?void 0:b},xr=(l,m)=>le.from(Ic(l,m)),is=(l,m)=>{l.dom.removeAttribute(m)},ji=l=>qe(l.dom.attributes,(m,b)=>(m[b.name]=b.value,m),{}),ka=(l,m)=>{const S=(m||document).createElement("div");if(S.innerHTML=l,!S.hasChildNodes()||S.childNodes.length>1){const A="HTML does not have a single root node";throw console.error(A,l),new Error(A)}return Nd(S.childNodes[0])},Af=(l,m)=>{const S=(m||document).createElement(l);return Nd(S)},Gh=(l,m)=>{const S=(m||document).createTextNode(l);return Nd(S)},Nd=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},xt={fromHtml:ka,fromTag:Af,fromText:Gh,fromDom:Nd,fromPoint:(l,m,b)=>le.from(l.dom.elementFromPoint(m,b)).map(Nd)},ct=(l,m)=>{const b=l.dom;if(b.nodeType!==Ou)return!1;{const S=b;if(S.matches!==void 0)return S.matches(m);if(S.msMatchesSelector!==void 0)return S.msMatchesSelector(m);if(S.webkitMatchesSelector!==void 0)return S.webkitMatchesSelector(m);if(S.mozMatchesSelector!==void 0)return S.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Zl=l=>l.nodeType!==Ou&&l.nodeType!==Ha&&l.nodeType!==Qr||l.childElementCount===0,Bp=(l,m)=>{const b=m===void 0?document:m.dom;return Zl(b)?[]:bn(b.querySelectorAll(l),xt.fromDom)},Am=(l,m)=>{const b=m===void 0?document:m.dom;return Zl(b)?le.none():le.from(b.querySelector(l)).map(xt.fromDom)},Qo=(l,m)=>l.dom===m.dom,Of=(l,m)=>{const b=l.dom,S=m.dom;return b===S?!1:b.contains(S)},Om=ct,ql=l=>xt.fromDom(l.dom.ownerDocument),Du=l=>Md(l)?l:ql(l),Fr=l=>xt.fromDom(Du(l).dom.documentElement),$s=l=>xt.fromDom(Du(l).dom.defaultView),_a=l=>le.from(l.dom.parentNode).map(xt.fromDom),Mu=l=>le.from(l.dom.parentElement).map(xt.fromDom),Hs=(l,m)=>{const b=ot(m)?m:ln;let S=l.dom;const A=[];for(;S.parentNode!==null&&S.parentNode!==void 0;){const M=S.parentNode,$=xt.fromDom(M);if(A.push($),b($)===!0)break;S=M}return A},Rf=l=>le.from(l.dom.previousSibling).map(xt.fromDom),xi=l=>le.from(l.dom.nextSibling).map(xt.fromDom),Fo=l=>bn(l.dom.childNodes,xt.fromDom),Os=(l,m)=>{const b=l.dom.childNodes;return le.from(b[m]).map(xt.fromDom)},hr=l=>Os(l,0),jl=(l,m)=>{_a(l).each(S=>{S.dom.insertBefore(m.dom,l.dom)})},Fc=(l,m)=>{xi(l).fold(()=>{_a(l).each(A=>{jo(A,m)})},S=>{jl(S,m)})},Aa=(l,m)=>{hr(l).fold(()=>{jo(l,m)},S=>{l.dom.insertBefore(m.dom,S.dom)})},jo=(l,m)=>{l.dom.appendChild(m.dom)},Kh=(l,m,b)=>{Os(l,b).fold(()=>{jo(l,m)},S=>{jl(S,m)})},al=(l,m)=>{jl(l,m),jo(m,l)},Df=(l,m)=>{je(m,(b,S)=>{const A=S===0?l:m[S-1];Fc(A,b)})},Kn=(l,m)=>{je(m,b=>{jo(l,b)})},il=l=>{l.dom.textContent="",je(Fo(l),m=>{ws(m)})},ws=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Mf=l=>{const m=Fo(l);m.length>0&&Df(l,m),ws(l)},cc=(l,m)=>xt.fromDom(l.dom.cloneNode(m)),Gl=l=>cc(l,!1),Er=l=>cc(l,!0),Bd=(l,m)=>{const b=xt.fromTag(m),S=ji(l);return wi(b,S),b},$c=(l,m)=>{const b=Bd(l,m),S=Fo(Er(l));return Kn(b,S),b},Rm=(l,m)=>{const b=Bd(l,m);Fc(l,b);const S=Fo(l);return Kn(b,S),ws(l),b},Xh=["tfoot","thead","tbody","colgroup"],Pf=l=>Do(Xh,l),$r=(l,m)=>({rows:l,columns:m}),cl=(l,m)=>({row:l,column:m}),Pu=(l,m,b)=>({element:l,rowspan:m,colspan:b}),Ld=(l,m,b,S)=>({element:l,rowspan:m,colspan:b,isNew:S}),Yh=(l,m,b,S,A,M)=>({element:l,rowspan:m,colspan:b,row:S,column:A,isLocked:M}),Hc=(l,m,b)=>({element:l,cells:m,section:b}),Hr=(l,m,b,S)=>({element:l,cells:m,section:b,isNew:S}),gr=(l,m,b)=>({element:l,isNew:m,isLocked:b}),lc=(l,m,b,S)=>({element:l,cells:m,section:b,isNew:S}),Dm=(l,m,b,S)=>({startRow:l,startCol:m,finishRow:b,finishCol:S}),Nf=(l,m,b)=>({element:l,colspan:m,column:b}),la=(l,m)=>({element:l,columns:m}),Z=l=>jh(l)&&Ht(l.dom.host),se=l=>xt.fromDom(l.dom.getRootNode()),ge=l=>Z(l)?l:xt.fromDom(Du(l).dom.body),He=l=>{const m=se(l);return Z(m)?le.some(m):le.none()},mt=l=>xt.fromDom(l.dom.host),Ve=l=>{if(Ht(l.target)){const m=xt.fromDom(l.target);if(ea(m)&&zt(m)&&l.composed&&l.composedPath){const b=l.composedPath();if(b)return ye(b)}}return le.from(l.target)},zt=l=>Ht(l.dom.shadowRoot),Ln=l=>{const m=Lc(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const b=m.ownerDocument;return He(xt.fromDom(m)).fold(()=>b.body.contains(m),Oe(Ln,mt))},_n=()=>Vs(xt.fromDom(document)),Vs=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return xt.fromDom(m)},zn=(l,m,b)=>gs(Hs(l,b),m),Nu=(l,m)=>gs(Fo(l),m),Mm=(l,m)=>{let b=[];return je(Fo(l),S=>{m(S)&&(b=b.concat([S])),b=b.concat(Mm(S,m))}),b},Kl=(l,m,b)=>zn(l,S=>ct(S,m),b),En=(l,m)=>Nu(l,b=>ct(b,m)),ta=(l,m)=>Bp(m,l);var Bf=(l,m,b,S,A)=>l(b,S)?le.some(b):ot(A)&&A(b)?le.none():m(b,S,A);const Xe=(l,m,b)=>{let S=l.dom;const A=ot(b)?b:ln;for(;S.parentNode;){S=S.parentNode;const M=xt.fromDom(S);if(m(M))return le.some(M);if(A(M))break}return le.none()},Xl=(l,m,b)=>Bf((A,M)=>M(A),Xe,l,m,b),Ps=(l,m)=>{const b=A=>m(xt.fromDom(A));return V(l.dom.childNodes,b).map(xt.fromDom)},Lp=(l,m)=>{const b=S=>{for(let A=0;A<S.childNodes.length;A++){const M=xt.fromDom(S.childNodes[A]);if(m(M))return le.some(M);const $=b(S.childNodes[A]);if($.isSome())return $}return le.none()};return b(l.dom)},Ns=(l,m,b)=>Xe(l,S=>ct(S,m),b),Un=(l,m)=>Ps(l,b=>ct(b,m)),Ei=(l,m)=>Am(m,l),Vr=(l,m,b)=>Bf((A,M)=>ct(A,M),Ns,l,m,b),Lf=(l,m,b=gt)=>l.exists(S=>b(S,m)),nr=l=>{const m=[],b=S=>{m.push(S)};for(let S=0;S<l.length;S++)l[S].each(b);return m},Bu=(l,m)=>l!=null?m(l):le.none(),Ip=(l,m)=>l?le.some(m):le.none(),qb=(l,m)=>l.substring(m),$o=(l,m,b)=>m===""||l.length>=m.length&&l.substr(b,b+m.length)===m,qy=(l,m)=>Va(l,m)?qb(l,m.length):l,Tr=(l,m,b=0,S)=>{const A=l.indexOf(m,b);return A!==-1?nt(S)?!0:A+m.length<=S:!1},Va=(l,m)=>$o(l,m,0),Ti=(l,m)=>$o(l,m,l.length-m.length),jb=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),Rn=l=>l.length>0,Id=l=>{const m=parseFloat(l);return isNaN(m)?le.none():le.some(m)},Yl=l=>l.style!==void 0&&ot(l.style.getPropertyValue),Jl=(l,m,b)=>{if(!Q(b))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",b,":: Element ",l),new Error("CSS value must be a string: "+b);Yl(l)&&l.style.setProperty(m,b)},Pm=(l,m)=>{Yl(l)&&l.style.removeProperty(m)},es=(l,m,b)=>{const S=l.dom;Jl(S,m,b)},kr=(l,m)=>{const b=l.dom;as(m,(S,A)=>{Jl(b,A,S)})},Fd=(l,m)=>{const b=l.dom,A=window.getComputedStyle(b).getPropertyValue(m);return A===""&&!Ln(l)?Fp(b,m):A},Fp=(l,m)=>Yl(l)?l.style.getPropertyValue(m):"",Ql=(l,m)=>{const b=l.dom,S=Fp(b,m);return le.from(S).filter(A=>A.length>0)},oi=(l,m)=>{const b=l.dom;Pm(b,m),Lf(xr(l,"style").map(jb),"")&&is(l,"style")},zr=(l,m)=>{const b=l.dom,S=m.dom;Yl(b)&&Yl(S)&&(S.style.cssText=b.style.cssText)},ua=(l,m,b=0)=>xr(l,m).map(S=>parseInt(S,10)).getOr(b),Oa=(l,m)=>ua(l,m,1),Vc=l=>Ta("col")(l)?ua(l,"span",1)>1:Oa(l,"colspan")>1,$d=l=>Oa(l,"rowspan")>1,cs=(l,m)=>parseInt(Fd(l,m),10),If=Y(10),$p=Y(10),Hd=(l,m)=>Jh(l,m,Ee),Jh=(l,m,b)=>Fs(Fo(l),S=>ct(S,m)?b(S)?[S]:[]:Jh(S,m,b)),jy=(l,m,b=ln)=>{if(b(m))return le.none();if(Do(l,qo(m)))return le.some(m);const S=A=>ct(A,"table")||b(A);return Ns(m,l.join(","),S)},Vd=(l,m)=>jy(["td","th"],l,m),zd=l=>Hd(l,"th,td"),Ud=l=>ct(l,"colgroup")?En(l,"col"):Fs(Iu(l),m=>En(m,"col")),si=(l,m)=>Vr(l,"table",m),Gb=l=>Hd(l,"tr"),Iu=l=>si(l).fold(Y([]),m=>En(m,"colgroup")),Qh=(l,m)=>bn(l,b=>{if(qo(b)==="colgroup"){const S=bn(Ud(b),A=>{const M=ua(A,"span",1);return Pu(A,1,M)});return Hc(b,S,"colgroup")}else{const S=bn(zd(b),A=>{const M=ua(A,"rowspan",1),$=ua(A,"colspan",1);return Pu(A,M,$)});return Hc(b,S,m(b))}}),Ff=l=>_a(l).map(m=>{const b=qo(m);return Pf(b)?b:"tbody"}).getOr("tbody"),Kb=l=>{const m=Gb(l),S=[...Iu(l),...m];return Qh(S,Ff)},Hp=(l,m)=>Qh(l,()=>m),$f=l=>{let m=!1,b;return(...S)=>(m||(m=!0,b=l.apply(null,S)),b)},Vp=(l,m,b,S)=>{const A=l.isiOS()&&/ipad/i.test(b)===!0,M=l.isiOS()&&!A,$=l.isiOS()||l.isAndroid(),j=$||S("(pointer:coarse)"),K=A||!M&&$&&S("(min-device-width:768px)"),ue=M||$&&!K,ve=m.isSafari()&&l.isiOS()&&/safari/i.test(b)===!1,Ke=!ue&&!K&&!ve;return{isiPad:Y(A),isiPhone:Y(M),isTablet:Y(K),isPhone:Y(ue),isTouch:Y(j),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:Y(ve),isDesktop:Y(Ke)}},Xb=(l,m)=>{for(let b=0;b<l.length;b++){const S=l[b];if(S.test(m))return S}},Wd=(l,m)=>{const b=Xb(l,m);if(!b)return{major:0,minor:0};const S=A=>Number(m.replace(b,"$"+A));return Zd(S(1),S(2))},zp=(l,m)=>{const b=String(m).toLowerCase();return l.length===0?ie():Wd(l,b)},ie=()=>Zd(0,0),Zd=(l,m)=>({major:l,minor:m}),za={nu:Zd,detect:zp,unknown:ie},Gy=(l,m)=>ir(m.brands,b=>{const S=b.brand.toLowerCase();return V(l,A=>{var M;return S===((M=A.brand)===null||M===void 0?void 0:M.toLowerCase())}).map(A=>({current:A.name,version:za.nu(parseInt(b.version,10),0)}))}),Yb=(l,m)=>{const b=String(m).toLowerCase();return V(l,S=>S.search(b))},Nm=(l,m)=>Yb(l,m).map(b=>{const S=za.detect(b.versionRegexes,m);return{current:b.name,version:S}}),oo=(l,m)=>Yb(l,m).map(b=>{const S=za.detect(b.versionRegexes,m);return{current:b.name,version:S}}),xs=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ri=l=>m=>Tr(m,l),eu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>Tr(l,"edge/")&&Tr(l,"chrome")&&Tr(l,"safari")&&Tr(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,xs],search:l=>Tr(l,"chrome")&&!Tr(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>Tr(l,"msie")||Tr(l,"trident")},{name:"Opera",versionRegexes:[xs,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ri("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ri("firefox")},{name:"Safari",versionRegexes:[xs,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(Tr(l,"safari")||Tr(l,"mobile/"))&&Tr(l,"applewebkit")}],Jb=[{name:"Windows",search:ri("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>Tr(l,"iphone")||Tr(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ri("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ri("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ri("linux"),versionRegexes:[]},{name:"Solaris",search:ri("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ri("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ri("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],qd={browsers:Y(eu),oses:Y(Jb)},ai="Edge",Hf="Chromium",Vf="IE",jd="Opera",Fu="Firefox",zf="Safari",ki=()=>Uf({current:void 0,version:za.unknown()}),Uf=l=>{const m=l.current,b=l.version,S=A=>()=>m===A;return{current:m,version:b,isEdge:S(ai),isChromium:S(Hf),isIE:S(Vf),isOpera:S(jd),isFirefox:S(Fu),isSafari:S(zf)}},Ur={unknown:ki,nu:Uf},$u="Windows",uc="iOS",Ra="Android",Gd="Linux",Ky="macOS",eg="Solaris",ll="FreeBSD",Bm="ChromeOS",Qb=()=>tg({current:void 0,version:za.unknown()}),tg=l=>{const m=l.current,b=l.version,S=A=>()=>m===A;return{current:m,version:b,isWindows:S($u),isiOS:S(uc),isAndroid:S(Ra),isMacOS:S(Ky),isLinux:S(Gd),isSolaris:S(eg),isFreeBSD:S(ll),isChromeOS:S(Bm)}},e0={unknown:Qb,nu:tg},t0={detect:(l,m,b)=>{const S=qd.browsers(),A=qd.oses(),M=m.bind(K=>Gy(S,K)).orThunk(()=>Nm(S,l)).fold(Ur.unknown,Ur.nu),$=oo(A,l).fold(e0.unknown,e0.nu),j=Vp($,M,l,b);return{browser:M,os:$,deviceType:j}}},tu=l=>window.matchMedia(l).matches;let Up=$f(()=>t0.detect(window.navigator.userAgent,le.from(window.navigator.userAgentData),tu));const ul=()=>Up(),bs=(l,m)=>{const b=(j,K)=>{if(!st(K)&&!K.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+K);const ue=j.dom;Yl(ue)&&(ue.style[l]=K+"px")},S=j=>{const K=m(j);if(K<=0||K===null){const ue=Fd(j,l);return parseFloat(ue)||0}return K},A=S,M=(j,K)=>qe(K,(ue,ve)=>{const Ke=Fd(j,ve),wt=Ke===void 0?0:parseInt(Ke,10);return isNaN(wt)?ue:ue+wt},0);return{set:b,get:S,getOuter:A,aggregate:M,max:(j,K,ue)=>{const ve=M(j,ue);return K>ve?K-ve:0}}},pr=(l,m)=>Id(l).getOr(m),_i=(l,m,b)=>pr(Fd(l,m),b),Wf=(l,m,b,S)=>{const A=_i(l,`padding-${b}`,0),M=_i(l,`padding-${S}`,0),$=_i(l,`border-${b}-width`,0),j=_i(l,`border-${S}-width`,0);return m-A-M-$-j},Zf=(l,m)=>{const b=l.dom,S=b.getBoundingClientRect().width||b.offsetWidth;return Wf(l,S,"left","right")},_r=l=>_i(l,"height",l.dom.offsetHeight),Wt=l=>_i(l,"width",l.dom.offsetWidth),Wp=l=>Zf(l),nu=bs("width",l=>l.dom.offsetWidth),Ai=l=>nu.get(l),uo=l=>nu.getOuter(l),Hu=Wp,qf=Wt,ng=(l,m,b)=>{const S=l.cells,A=S.slice(0,m),M=S.slice(m),$=A.concat(b).concat(M);return dc(l,$)},Zp=(l,m,b)=>ng(l,m,[b]),ou=(l,m,b)=>{const S=l.cells;S[m]=b},dc=(l,m)=>lc(l.element,m,l.section,l.isNew),og=(l,m)=>{const b=l.cells,S=bn(b,m);return lc(l.element,S,l.section,l.isNew)},zs=(l,m)=>l.cells[m],Ua=(l,m)=>zs(l,m).element,ii=l=>l.cells.length,Pn=l=>{const m=wr(l,b=>b.section==="colgroup");return{rows:m.fail,cols:m.pass}},Us=(l,m,b)=>{const S=bn(l.cells,b);return lc(m(l.element),S,l.section,!0)},mc="data-snooker-locked-cols",sg=l=>xr(l,mc).bind(m=>le.from(m.match(/\d+/g))).map(m=>yn(m,Ee)),ts=l=>{const m=qe(Pn(l).rows,(S,A)=>(je(A.cells,(M,$)=>{M.isLocked&&(S[$]=!0)}),S),{}),b=ks(m,(S,A)=>parseInt(A,10));return bo(b)},rg=(l,m)=>l+","+m,In=(l,m,b)=>le.from(l.access[rg(m,b)]),na=(l,m,b)=>{const S=dl(l,A=>b(m,A.element));return S.length>0?le.some(S[0]):le.none()},dl=(l,m)=>{const b=Fs(l.all,S=>S.cells);return gs(b,m)},ns=l=>{const m={};let b=0;return je(l.cells,S=>{const A=S.colspan;Uo(A,M=>{const $=b+M;m[$]=Nf(S.element,A,$)}),b+=A}),m},su=l=>{const m={},b=[],A=ye(l).map(it=>it.element).bind(si).bind(sg).getOr({});let M=0,$=0,j=0;const{pass:K,fail:ue}=wr(l,it=>it.section==="colgroup");je(ue,it=>{const ut=[];je(it.cells,It=>{let Je=0;for(;m[rg(j,Je)]!==void 0;)Je++;const sn=Io(A,Je.toString()),ze=Yh(It.element,It.rowspan,It.colspan,j,Je,sn);for(let Dt=0;Dt<It.colspan;Dt++)for(let ho=0;ho<It.rowspan;ho++){const go=j+ho,Ut=Je+Dt,Lo=rg(go,Ut);m[Lo]=ze,$=Math.max($,Ut+1)}ut.push(ze)}),M++,b.push(Hc(it.element,ut,it.section)),j++});const{columns:ve,colgroups:Ke}=ic(K).map(it=>{const ut=ns(it);return{colgroups:[la(it.element,Zo(ut))],columns:ut}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:$r(M,$),access:m,all:b,columns:ve,colgroups:Ke}},Qn={fromTable:l=>{const m=Kb(l);return su(m)},generate:su,getAt:In,findItem:na,filterItems:dl,justCells:l=>Fs(l.all,m=>m.cells),justColumns:l=>Zo(l.columns),hasColumns:l=>an(l.columns).length>0,getColumnAt:(l,m)=>le.from(l.columns[m])},o0=(l,m=Ee)=>{const b=l.grid,S=Uo(b.columns,we),A=Uo(b.rows,we);return bn(S,M=>Bs(()=>Fs(A,ue=>Qn.getAt(l,ue,M).filter(ve=>ve.column===M).toArray()),ue=>ue.colspan===1&&m(ue.element),()=>Qn.getAt(l,0,M)))},Bs=(l,m,b)=>{const S=l();return V(S,m).orThunk(()=>le.from(S[0]).orThunk(b)).map($=>$.element)},_=l=>{const m=l.grid,b=Uo(m.rows,we),S=Uo(m.columns,we);return bn(b,A=>Bs(()=>Fs(S,K=>Qn.getAt(l,A,K).filter(ue=>ue.row===A).fold(Y([]),ue=>[ue])),K=>K.rowspan===1,()=>Qn.getAt(l,A,0)))},B=(l,m)=>{if(m<0||m>=l.length-1)return le.none();const b=l[m].fold(()=>{const A=Np(l.slice(0,m));return ir(A,(M,$)=>M.map(j=>({value:j,delta:$+1})))},A=>le.some({value:A,delta:0})),S=l[m+1].fold(()=>{const A=l.slice(m+1);return ir(A,(M,$)=>M.map(j=>({value:j,delta:$+1})))},A=>le.some({value:A,delta:1}));return b.bind(A=>S.map(M=>{const $=M.delta+A.delta;return Math.abs(M.value-A.value)/$}))},z=(l,m)=>b=>ae(b)==="rtl"?m:l,ae=l=>Fd(l,"direction")==="rtl"?"rtl":"ltr",me=bs("height",l=>{const m=l.dom;return Ln(l)?m.getBoundingClientRect().height:m.offsetHeight}),Ye=l=>me.get(l),Rt=l=>me.getOuter(l),Dn=_r,pn=(l,m)=>({left:l,top:m,translate:(S,A)=>pn(l+S,m+A)}),Zt=pn,Ho=l=>{const m=l.getBoundingClientRect();return Zt(m.left,m.top)},vs=(l,m)=>l!==void 0?l:m!==void 0?m:0,ci=l=>{const m=l.dom.ownerDocument,b=m.body,S=m.defaultView,A=m.documentElement;if(b===l.dom)return Zt(b.offsetLeft,b.offsetTop);const M=vs(S==null?void 0:S.pageYOffset,A.scrollTop),$=vs(S==null?void 0:S.pageXOffset,A.scrollLeft),j=vs(A.clientTop,b.clientTop),K=vs(A.clientLeft,b.clientLeft);return Oi(l).translate($-K,M-j)},Oi=l=>{const m=l.dom,S=m.ownerDocument.body;return S===m?Zt(S.offsetLeft,S.offsetTop):Ln(l)?Ho(m):Zt(0,0)},Jy=(l,m)=>({row:l,y:m}),Qy=(l,m)=>({col:l,x:m}),Tx=l=>ci(l).left+uo(l),Wa=l=>ci(l).left,s0=(l,m)=>Qy(l,Wa(m)),r0=(l,m)=>Qy(l,Tx(m)),qp=l=>ci(l).top,cr=(l,m)=>Jy(l,qp(m)),jp=(l,m)=>Jy(l,qp(m)+Rt(m)),br=(l,m,b)=>{if(b.length===0)return[];const S=bn(b.slice(1),(M,$)=>M.map(j=>l($,j))),A=b[b.length-1].map(M=>m(b.length-1,M));return S.concat([A])},e2=l=>-l,a0={delta:we,positions:l=>br(cr,jp,l),edge:qp},i0=z({delta:we,edge:Wa,positions:l=>br(s0,r0,l)},{delta:e2,edge:Tx,positions:l=>br(r0,s0,l)}),c0={delta:(l,m)=>i0(m).delta(l,m),positions:(l,m)=>i0(m).positions(l,m),edge:l=>i0(l).edge(l)},t2={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Z_=(()=>{const l="[0-9]+",b="[eE]"+("[+-]?"+l),S="\\.",A=j=>`(?:${j})?`,$=`[+-]?(?:${["Infinity",l+S+A(l)+A(b),S+l+A(b),l+A(b)].join("|")})`;return new RegExp(`^(${$})(.*)$`)})(),kx=(l,m)=>St(m,b=>St(t2[b],S=>l===S)),Gf=(l,m)=>le.from(Z_.exec(l)).bind(S=>{const A=Number(S[1]),M=S[2];return kx(M,m)?le.some({value:A,unit:M}):le.none()}),Gp=/(\d+(\.\d+)?)%/,qt=/(\d+(\.\d+)?)px|em/,zu=Ta("col"),fc=Ta("tr"),dn=(l,m,b)=>{const S=Mu(l).getOrThunk(()=>Vs(ql(l)));return m(l)/b(S)*100},Da=(l,m)=>{es(l,"width",m+"px")},Lm=(l,m)=>{es(l,"width",m+"%")},n2=(l,m)=>{es(l,"height",m+"px")},Kf=l=>{oi(l,"height")},l0=l=>Dn(l)+"px",oa=(l,m,b,S)=>{const A=si(l).map(M=>{const $=b(M);return Math.floor(m/100*$)}).getOr(m);return S(l,A),A},Kp=(l,m,b,S)=>{const A=parseFloat(l);return Ti(l,"%")&&qo(m)!=="table"?oa(m,A,b,S):A},ag=l=>{const m=l0(l);return m?Kp(m,l,Ye,n2):Ye(l)},We=(l,m,b)=>{const S=b(l),A=Oa(l,m);return S/A},Xp=(l,m)=>Ql(l,m).orThunk(()=>xr(l,m).map(b=>b+"px")),Im=l=>Xp(l,"width"),Kd=l=>Xp(l,"height"),Yp=l=>dn(l,Ai,Hu),u0=l=>zu(l)?Ai(l):qf(l),Go=l=>fc(l)?Ye(l):We(l,"rowspan",ag),_x=l=>Im(l).bind(b=>Gf(b,["fixed","relative","empty"])),li=(l,m,b)=>{es(l,"width",m+b)},ls=l=>Ai(l)+"px",o2=l=>Ye(l)+"px",os=l=>dn(l,Ai,Hu)+"%",ml=l=>Im(l).exists(m=>Gp.test(m)),lr=l=>Im(l).exists(m=>qt.test(m)),ig=l=>Im(l).isNone(),Za=Y(Gp),Ax=Ta("col"),sa=l=>Im(l).getOrThunk(()=>u0(l)+"px"),ui=l=>Kd(l).getOrThunk(()=>Go(l)+"px"),s2=l=>bn(Qn.justColumns(l),m=>le.from(m.element)),Ze=l=>{const m=ul().browser,b=m.isChromium()||m.isFirefox();return Ax(l)?b:!0},Ri=(l,m,b,S,A,M)=>l.filter(S).fold(()=>M(B(b,m)),$=>A($)),d0=(l,m,b,S)=>{const A=o0(l),M=Qn.hasColumns(l)?s2(l):A,$=[le.some(c0.edge(m))].concat(bn(c0.positions(A,m),K=>K.map(ue=>ue.x))),j=ne(Vc);return bn(M,(K,ue)=>Ri(K,ue,$,j,ve=>{if(Ze(ve))return b(ve);{const Ke=Bu(A[ue],we);return Ri(Ke,ue,$,j,wt=>S(le.some(Ai(wt))),S)}},S))},vr=l=>l.map(m=>m+"px").getOr(""),fl=(l,m)=>d0(l,m,sa,vr),hc=(l,m,b)=>d0(l,m,Yp,S=>S.fold(()=>b.minCellWidth(),A=>A/b.pixelWidth()*100)),ru=(l,m,b)=>d0(l,m,u0,S=>S.getOrThunk(b.minCellWidth)),Ws=(l,m,b,S)=>{const A=_(l),M=bn(l.all,j=>le.some(j.element)),$=[le.some(a0.edge(m))].concat(bn(a0.positions(A,m),j=>j.map(K=>K.y)));return bn(M,(j,K)=>Ri(j,K,$,Ee,b,S))},r2=(l,m)=>Ws(l,m,Go,b=>b.getOrThunk($p)),Ko=(l,m)=>Ws(l,m,ui,vr),no=(l,m)=>()=>Ln(l)?m(l):parseFloat(Ql(l,"width").getOr("0")),au=l=>{const m=no(l,Ai),b=Y(0);return{width:m,pixelWidth:m,getWidths:(A,M)=>ru(A,l,M),getCellDelta:b,singleColumnWidth:Y([0]),minCellWidth:b,setElementWidth:Ne,adjustTableWidth:Ne,isRelative:!0,label:"none"}},gc=l=>{const m=no(l,K=>parseFloat(os(K))),b=no(l,Ai);return{width:m,pixelWidth:b,getWidths:(K,ue)=>hc(K,l,ue),getCellDelta:K=>K/b()*100,singleColumnWidth:(K,ue)=>[100-K],minCellWidth:()=>If()/b()*100,setElementWidth:Lm,adjustTableWidth:K=>{const ue=m(),ve=K/100*ue,Ke=ue+ve;Lm(l,Ke)},isRelative:!0,label:"percent"}},Ls=l=>{const m=no(l,Ai);return{width:m,pixelWidth:m,getWidths:($,j)=>ru($,l,j),getCellDelta:we,singleColumnWidth:($,j)=>[Math.max(If(),$+j)-$],minCellWidth:If,setElementWidth:Da,adjustTableWidth:$=>{const j=m()+$;Da(l,j)},isRelative:!1,label:"pixel"}},Fm=(l,m)=>Za().exec(m)!==null?gc(l):Ls(l),$m={getTableSize:l=>Im(l).fold(()=>au(l),b=>Fm(l,b)),pixelSize:Ls,percentageSize:gc,noneSize:au},Gi=(l,m,b,S,A,M)=>({minRow:l,minCol:m,maxRow:b,maxCol:S,allCells:A,selectedCells:M}),q_=(l,m)=>{const b=l.grid.columns;let A=l.grid.rows,M=b,$=0,j=0;const K=[],ue=[];return as(l.access,ve=>{if(K.push(ve),m(ve)){ue.push(ve);const Ke=ve.row,wt=Ke+ve.rowspan-1,it=ve.column,ut=it+ve.colspan-1;Ke<A?A=Ke:wt>$&&($=wt),it<M?M=it:ut>j&&(j=ut)}}),Gi(A,M,$,j,K,ue)},Se=(l,m,b)=>{const S=l[b].element,A=xt.fromTag("td");jo(A,xt.fromTag("br")),(m?jo:Aa)(S,A)},zc=(l,m,b,S)=>{const A=gs(l,j=>j.section!=="colgroup"),M=m.grid.columns,$=m.grid.rows;for(let j=0;j<$;j++){let K=!1;for(let ue=0;ue<M;ue++)j<b.minRow||j>b.maxRow||ue<b.minCol||ue>b.maxCol||(Qn.getAt(m,j,ue).filter(S).isNone()?Se(A,K,j):K=!0)}},Jp=(l,m,b,S)=>{as(b.columns,$=>{($.column<m.minCol||$.column>m.maxCol)&&ws($.element)});const A=gs(Hd(l,"tr"),$=>$.dom.childElementCount===0);je(A,ws),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&je(Hd(l,"th,td"),$=>{is($,"rowspan"),is($,"colspan")}),is(l,mc),is(l,"data-snooker-col-series"),$m.getTableSize(l).adjustTableWidth(S)},ys=(l,m,b,S)=>{if(S.minCol===0&&m.grid.columns===S.maxCol+1)return 0;const A=ru(m,l,b),M=qe(A,(ue,ve)=>ue+ve,0),K=qe(A.slice(S.minCol,S.maxCol+1),(ue,ve)=>ue+ve,0)/M*b.pixelWidth()-b.pixelWidth();return b.getCellDelta(K)},hl=(l,m)=>{const b=wt=>ct(wt.element,m),S=Er(l),A=Kb(S),M=$m.getTableSize(l),$=Qn.generate(A),j=q_($,b),K="th:not("+m+"),td:not("+m+")",ue=Jh(S,"th,td",wt=>ct(wt,K));je(ue,ws),zc(A,$,j,b);const ve=Qn.fromTable(l),Ke=ys(l,ve,M,j);return Jp(S,j,$,Ke),S},da=" ",a2=((l,m)=>{const b=M=>{if(!l(M))throw new Error("Can only get "+m+" value of a "+m+" node");return S(M).getOr("")},S=M=>l(M)?le.from(M.dom.nodeValue):le.none();return{get:b,getOption:S,set:(M,$)=>{if(!l(M))throw new Error("Can only set raw "+m+" value of a "+m+" node");M.dom.nodeValue=$}}})(Lc,"text"),Wu=l=>a2.get(l),cg=l=>a2.getOption(l),CN=(l,m)=>a2.set(l,m),Ma=l=>qo(l)==="img"?1:cg(l).fold(()=>Fo(l).length,m=>m.length),i2=l=>cg(l).filter(m=>m.trim().length!==0||m.indexOf(da)>-1).isSome(),c2=l=>un(l)&&Ic(l,"contenteditable")==="false",l2=["img","br"],Hm=l=>i2(l)||Do(l2,qo(l))||c2(l),Ox=l=>Lp(l,Hm),Zu=l=>lg(l,Hm),lg=(l,m)=>{const b=S=>{const A=Fo(S);for(let M=A.length-1;M>=0;M--){const $=A[M];if(m($))return le.some($);const j=b($);if(j.isSome())return j}return le.none()};return b(l)},Rx={scope:["row","col"]},u2=l=>()=>{const m=xt.fromTag("td",l.dom);return jo(m,xt.fromTag("br",l.dom)),m},m0=l=>()=>xt.fromTag("col",l.dom),d2=l=>()=>xt.fromTag("colgroup",l.dom),f0=l=>()=>xt.fromTag("tr",l.dom),m2=(l,m,b)=>{const S=$c(l,m);return as(b,(A,M)=>{A===null?is(S,M):As(S,M,A)}),S},f2=l=>l,j_=(l,m,b)=>Ox(l).map(A=>{const M=b.join(","),$=Kl(A,M,j=>Qo(j,l));return Xr($,(j,K)=>{const ue=Gl(K);return jo(j,ue),ue},m)}).getOr(m),Xf=(l,m)=>{as(Rx,(b,S)=>xr(l,S).filter(A=>Do(b,A)).each(A=>As(m,S,A)))},h2=(l,m,b)=>{const S=($,j)=>{zr($.element,j),oi(j,"height"),$.colspan!==1&&oi(j,"width")},A=$=>{const j=xt.fromTag(qo($.element),m.dom),K=b.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),ue=K.length>0?j_($.element,j,K):j;return jo(ue,xt.fromTag("br")),S($,j),Xf($.element,j),l($.element,j),j};return{col:$=>{const j=xt.fromTag(qo($.element),m.dom);return S($,j),l($.element,j),j},colgroup:d2(m),row:f0(m),cell:A,replace:m2,colGap:m0(m),gap:u2(m)}},g2=l=>({col:m0(l),colgroup:d2(l),row:f0(l),cell:u2(l),replace:f2,colGap:m0(l),gap:u2(l)}),G_=(l,m)=>{const S=document.createElement("div");return S.innerHTML=l,Fo(xt.fromDom(S))},K_=l=>bn(l,xt.fromDom),Rs=l=>m=>m.options.get(l),gl="100%",ug=l=>{var m;const b=l.dom,S=(m=b.getParent(l.selection.getStart(),b.isBlock))!==null&&m!==void 0?m:l.getBody();return Hu(xt.fromDom(S))+"px"},qu=(l,m)=>iu(l)||!X_(l)?m:bc(l)?{...m,width:ug(l)}:{...m,width:gl},Qp=(l,m)=>iu(l)||X_(l)?m:bc(l)?{...m,width:ug(l)}:{...m,width:gl},pc=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:b=>{const S=Do(["section","cells","sectionCells","auto"],b);return S?{value:b,valid:S}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:b=>{const S=Do(["preservetable","resizetable"],b);return S?{value:b,valid:S}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},e1=l=>le.from(l.options.get("table_clone_elements")),h0=l=>{const m=l.options.get("object_resizing");return Do(m.split(","),"table")},ju=Rs("table_header_type"),pl=Rs("table_column_resizing"),Uc=l=>pl(l)==="preservetable",g0=l=>pl(l)==="resizetable",Ki=Rs("table_sizing_mode"),t1=l=>Ki(l)==="relative",bc=l=>Ki(l)==="fixed",iu=l=>Ki(l)==="responsive",Xd=Rs("table_resize_bars"),X_=Rs("table_style_by_css"),p0=Rs("table_merge_content_on_paste"),Yf=l=>{const m=l.options,b=m.get("table_default_attributes");return m.isSet("table_default_attributes")?b:Qp(l,b)},Pa=l=>{const m=l.options,b=m.get("table_default_styles");return m.isSet("table_default_styles")?b:qu(l,b)},Zs=Rs("table_use_colgroups"),Y_=Rs("fixed_toolbar_container"),Vm=Rs("fixed_toolbar_container_target"),n1=l=>{var m;if(!l.inline)return le.none();const b=(m=Y_(l))!==null&&m!==void 0?m:"";if(b.length>0)return Ei(_n(),b);const S=Vm(l);return Ht(S)?le.some(xt.fromDom(S)):le.none()},b0=l=>l.inline&&n1(l).isSome(),zm=Rs("ui_mode"),Di=l=>!b0(l)&&zm(l)==="split",dg=l=>Vr(l,"[contenteditable]"),Gu=(l,m=!1)=>Ln(l)?l.dom.isContentEditable:dg(l).fold(Y(m),b=>Dx(b)==="true"),Dx=l=>l.dom.contentEditable,Jf=l=>xt.fromDom(l.getBody()),Ku=l=>m=>Qo(m,Jf(l)),Xu=l=>{is(l,"data-mce-style");const m=b=>is(b,"data-mce-style");je(zd(l),m),je(Ud(l),m),je(Gb(l),m)},v0=l=>xt.fromDom(l.selection.getStart()),Mx=l=>l.getBoundingClientRect().width,y0=l=>l.getBoundingClientRect().height,Yd=l=>(m,b)=>{const S=m.dom.getStyle(b,l)||m.dom.getAttrib(b,l);return le.from(S).filter(Rn)},Xi=Yd("width"),ma=Yd("height"),Um=l=>/^(\d+(\.\d+)?)%$/.test(l),p2=l=>/^(\d+(\.\d+)?)px$/.test(l),Qf=l=>Xl(l,Ta("table")).exists(Gu),C0=(l,m)=>{const b=m.column,S=m.column+m.colspan-1,A=m.row,M=m.row+m.rowspan-1;return b<=l.finishCol&&S>=l.startCol&&A<=l.finishRow&&M>=l.startRow},S0=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,Jd=(l,m)=>{let b=!0;const S=lt(S0,m);for(let A=m.startRow;A<=m.finishRow;A++)for(let M=m.startCol;M<=m.finishCol;M++)b=b&&Qn.getAt(l,A,M).exists(S);return b?le.some(m):le.none()},Px=(l,m)=>Dm(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),w0=(l,m,b)=>{const S=Qn.findItem(l,m,Qo),A=Qn.findItem(l,b,Qo);return S.bind(M=>A.map($=>Px(M,$)))},o1=(l,m,b)=>w0(l,m,b).bind(S=>Jd(l,S)),Wn=(l,m,b,S)=>Qn.findItem(l,m,Qo).bind(A=>{const M=b>0?A.row+A.rowspan-1:A.row,$=S>0?A.column+A.colspan-1:A.column;return Qn.getAt(l,M+b,$+S).map(K=>K.element)}),Gt=(l,m,b)=>w0(l,m,b).map(S=>{const A=Qn.filterItems(l,lt(C0,S));return bn(A,M=>M.element)}),Qd=(l,m)=>{const b=(S,A)=>Of(A,S);return Qn.findItem(l,m,b).map(S=>S.element)},b2=(l,m,b)=>si(l).bind(S=>{const A=No(S);return Wn(A,l,m,b)}),x0=(l,m,b)=>{const S=No(l);return Gt(S,m,b)},v2=(l,m,b,S,A)=>{const M=No(l),$=Qo(l,b)?le.some(m):Qd(M,m),j=Qo(l,A)?le.some(S):Qd(M,S);return $.bind(K=>j.bind(ue=>Gt(M,K,ue)))},y2=(l,m,b)=>{const S=No(l);return o1(S,m,b)},No=Qn.fromTable;var mg=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],fg=()=>{const l=ue=>xt.fromDom(ue.dom.cloneNode(!1)),m=ue=>Du(ue).dom,b=ue=>ea(ue)?qo(ue)==="body"?!0:Do(mg,qo(ue)):!1,S=ue=>ea(ue)?Do(["br","img","hr","input"],qo(ue)):!1,A=ue=>ea(ue)&&Ic(ue,"contenteditable")==="false",M=(ue,ve)=>ue.dom.compareDocumentPosition(ve.dom),$=(ue,ve)=>{const Ke=ji(ue);wi(ve,Ke)},j=ue=>{const ve=qo(ue);return Do(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ve)},K=ue=>ea(ue)?xr(ue,"lang"):le.none();return{up:Y({selector:Ns,closest:Vr,predicate:Xe,all:Hs}),down:Y({selector:ta,predicate:Mm}),styles:Y({get:Fd,getRaw:Ql,set:es,remove:oi}),attrs:Y({get:Ic,set:As,remove:is,copyTo:$}),insert:Y({before:jl,after:Fc,afterAll:Df,append:jo,appendAll:Kn,prepend:Aa,wrap:al}),remove:Y({unwrap:Mf,remove:ws}),create:Y({nu:xt.fromTag,clone:l,text:xt.fromText}),query:Y({comparePosition:M,prevSibling:Rf,nextSibling:xi}),property:Y({children:Fo,name:qo,parent:_a,document:m,isText:Lc,isComment:Po,isElement:ea,isSpecial:j,getLanguage:K,getText:Wu,setText:CN,isBoundary:b,isEmptyTag:S,isNonEditable:A}),eq:Qo,is:Om}};const J_=(l,m,b,S)=>{const A=b[0],M=b.slice(1);return S(l,m,A,M)},$e=(l,m,b)=>b.length>0?J_(l,m,b,C2):le.none(),C2=(l,m,b,S)=>{const A=m(l,b);return Xr(S,(M,$)=>{const j=m(l,$);return Q_(l,M,j)},A)},Q_=(l,m,b)=>m.bind(S=>b.filter(lt(l.eq,S))),s1=(l,m)=>lt(l.eq,m),S2=(l,m,b,S=ln)=>{const A=[m].concat(l.up().all(m)),M=[b].concat(l.up().all(b)),$=ve=>Hl(ve,S).fold(()=>ve,wt=>ve.slice(0,wt+1)),j=$(A),K=$(M),ue=V(j,ve=>St(K,s1(l,ve)));return{firstpath:j,secondpath:K,shared:ue}},hg=$e,w2=S2,Yu=fg(),gg=(l,m)=>hg(Yu,(b,S)=>l(S),m),pg=(l,m,b)=>w2(Yu,l,m,b),vo=l=>Ns(l,"table"),vc=(l,m,b)=>{const S=A=>M=>b!==void 0&&b(M)||Qo(M,A);return Qo(l,m)?le.some({boxes:le.some([l]),start:l,finish:m}):vo(l).bind(A=>vo(m).bind(M=>{if(Qo(A,M))return le.some({boxes:x0(A,l,m),start:l,finish:m});if(Of(A,M)){const $=Kl(m,"td,th",S(A)),j=$.length>0?$[$.length-1]:m;return le.some({boxes:v2(A,l,A,m,M),start:l,finish:j})}else if(Of(M,A)){const $=Kl(l,"td,th",S(M)),j=$.length>0?$[$.length-1]:l;return le.some({boxes:v2(M,l,A,m,M),start:l,finish:j})}else return pg(l,m).shared.bind($=>Vr($,"table",b).bind(j=>{const K=Kl(m,"td,th",S(j)),ue=K.length>0?K[K.length-1]:m,ve=Kl(l,"td,th",S(j)),Ke=ve.length>0?ve[ve.length-1]:l;return le.some({boxes:v2(j,l,A,m,M),start:Ke,finish:ue})}))}))},Ju=(l,m)=>{const b=ta(l,m);return b.length>0?le.some(b):le.none()},cu=(l,m)=>V(l,b=>ct(b,m)),Nx=(l,m,b)=>Ei(l,m).bind(S=>Ei(l,b).bind(A=>gg(vo,[S,A]).map(M=>({first:S,last:A,table:M})))),r1=(l,m)=>Ns(l,"table").bind(b=>Ei(b,m).bind(S=>vc(S,l).bind(A=>A.boxes.map(M=>({boxes:M,start:A.start,finish:A.finish}))))),x2=(l,m,b,S,A)=>cu(l,A).bind(M=>b2(M,m,b).bind($=>r1($,S))),bg=(l,m)=>Ju(l,m),Wc=(l,m,b)=>Nx(l,m,b).bind(S=>{const A=K=>Qo(l,K),M="thead,tfoot,tbody,table",$=Ns(S.first,M,A),j=Ns(S.last,M,A);return $.bind(K=>j.bind(ue=>Qo(K,ue)?y2(S.table,S.first,S.last):le.none()))}),eh=we,Bx=l=>{const m=(S,A)=>xr(S,A).exists(M=>parseInt(M,10)>1),b=S=>m(S,"rowspan")||m(S,"colspan");return l.length>0&&Wo(l,b)?le.some(l):le.none()},E2=(l,m,b)=>m.length<=1?le.none():Wc(l,b.firstSelectedSelector,b.lastSelectedSelector).map(S=>({bounds:S,cells:m})),a1="data-mce-selected",eA="td["+a1+"],th["+a1+"]",rs="["+a1+"]",T2="data-mce-first-selected",Lx="td["+T2+"],th["+T2+"]",Zc="data-mce-last-selected",di="td["+Zc+"],th["+Zc+"]",rt=rs,Yi={selected:a1,selectedSelector:eA,firstSelected:T2,firstSelectedSelector:Lx,lastSelected:Zc,lastSelectedSelector:di},yr=(l,m,b)=>({element:b,mergable:E2(m,l,Yi),unmergable:Bx(l),selection:eh(l)}),tA=(l,m,b)=>({element:l,clipboard:m,generators:b}),Ix=(l,m,b,S)=>({selection:eh(l),clipboard:b,generators:S}),i1=l=>si(l).bind(m=>bg(m,Yi.firstSelectedSelector)).fold(Y(l),m=>m[0]),vg=l=>(m,b)=>{const S=qo(m),A=S==="col"||S==="colgroup"?i1(m):m;return Vr(A,l,b)},Fx=vg("th,td,caption"),$x=vg("th,td"),yc=l=>K_(l.model.table.getSelectedCells()),Hx=l=>gs(yc(l),m=>ct(m,Yi.selectedSelector)),nA=l=>si(l[0]).map(m=>{const b=hl(m,rt);return Xu(b),[b]}),oA=(l,m)=>bn(m,b=>l.selection.serializer.serialize(b.dom,{})).join(""),SN=(l,m)=>{const b=l.getDoc(),S=se(xt.fromDom(l.getBody())),A=xt.fromTag("div",b);As(A,"data-mce-bogus","all"),kr(A,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const M=ge(S);Kn(A,m),jo(M,A);const $=A.dom.innerText;return ws(A),$},qs=(l,m)=>{l.on("BeforeGetContent",b=>{const S=A=>{b.preventDefault(),nA(A).each(M=>{const $=b.format==="text"?SN(l,M):oA(l,M);b.content=$})};if(b.selection===!0){const A=Hx(l);A.length>=1&&S(A)}}),l.on("BeforeSetContent",b=>{if(b.selection===!0&&b.paste===!0){const S=yc(l);ye(S).each(A=>{si(A).each(M=>{const $=gs(G_(b.content),K=>qo(K)!=="meta"),j=Ta("table");if(p0(l)&&$.length===1&&j($[0])){b.preventDefault();const K=xt.fromDom(l.getDoc()),ue=g2(K),ve=tA(A,$[0],ue);m.pasteCells(M,ve).each(()=>{l.focus()})}})})}})},Mi=(l,m)=>({element:l,offset:m}),ao=(l,m,b)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?b(m).bind(S=>ao(l,S,b).orThunk(()=>le.some(S))):le.none(),c1=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,Na=(l,m)=>{const b=ao(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(b))return Mi(b,c1(l,b));const S=l.property().children(b);return S.length>0?Na(l,S[S.length-1]):Mi(b,c1(l,b))},th=Na,Pi=fg(),nh=l=>th(Pi,l),yg=(l,m)=>{Vc(l)||_x(l).each(S=>{const A=S.value/2;li(l,A,S.unit),li(m,A,S.unit)})},Wm=l=>bn(l,Y(0)),oh=(l,m,b,S,A)=>A(l.slice(0,m)).concat(S).concat(A(l.slice(b))),mi=l=>(m,b,S,A)=>{if(l(S)){const M=Math.max(A,m[b]-Math.abs(S)),$=Math.abs(M-m[b]);return S>=0?$:-$}else return S},l1=mi(l=>l<0),k2=mi(Ee),E0=()=>{const l=(j,K,ue,ve,Ke)=>{const wt=l1(j,K,ve,Ke);return oh(j,K,ue+1,[wt,0],Wm)},m=(j,K,ue,ve)=>{const Ke=(100+ue)/100,wt=Math.max(ve,(j[K]+ue)/Ke);return bn(j,(it,ut)=>(ut===K?wt:it/Ke)-it)},b=(j,K,ue,ve,Ke,wt)=>wt?m(j,K,ve,Ke):l(j,K,ue,ve,Ke);return{resizeTable:(j,K)=>j(K),clampTableDelta:l1,calcLeftEdgeDeltas:b,calcMiddleDeltas:(j,K,ue,ve,Ke,wt,it)=>b(j,ue,ve,Ke,wt,it),calcRightEdgeDeltas:(j,K,ue,ve,Ke,wt)=>{if(wt)return m(j,ue,ve,Ke);{const it=l1(j,ue,ve,Ke);return Wm(j.slice(0,ue)).concat([it])}},calcRedestributedWidths:(j,K,ue,ve)=>{if(ve){const wt=(K+ue)/K,it=bn(j,ut=>ut/wt);return{delta:wt*100-100,newSizes:it}}else return{delta:ue,newSizes:j}}}},u1=()=>{const l=($,j,K,ue,ve)=>{const Ke=ue>=0?K:j,wt=k2($,Ke,ue,ve);return oh($,j,K+1,[wt,-wt],Wm)};return{resizeTable:($,j,K)=>{K&&$(j)},clampTableDelta:($,j,K,ue,ve)=>{if(ve){if(K>=0)return K;{const Ke=qe($,(wt,it)=>wt+it-ue,0);return Math.max(-Ke,K)}}else return l1($,j,K,ue)},calcLeftEdgeDeltas:l,calcMiddleDeltas:($,j,K,ue,ve,Ke)=>l($,K,ue,ve,Ke),calcRightEdgeDeltas:($,j,K,ue,ve,Ke)=>{if(Ke)return Wm($);{const wt=ue/$.length;return bn($,Y(wt))}},calcRedestributedWidths:($,j,K,ue)=>({delta:0,newSizes:$})}},d1=l=>Qn.fromTable(l).grid,m1=Ta("th"),T0=l=>Wo(l,m=>m1(m.element)),Vx=(l,m)=>l&&m?"sectionCells":l?"section":"cells",_2=l=>{const m=l.section==="thead",b=Lf(f1(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||b?{type:"header",subType:Vx(m,b)}:{type:"body"}},f1=l=>{const m=gs(l,b=>m1(b.element));return m.length===0?le.some("td"):m.length===l.length?le.some("th"):le.none()},k0=l=>{const m=bn(l,A=>_2(A).type),b=Do(m,"header"),S=Do(m,"footer");if(!b&&!S)return le.some("body");{const A=Do(m,"body");return b&&!A&&!S?le.some("header"):!b&&!A&&S?le.some("footer"):le.none()}},_0=l=>ir(l.all,m=>{const b=_2(m);return b.type==="header"?le.from(b.subType):le.none()}),sh=(l,m,b)=>gr(b(l.element,m),!0,l.isLocked),A2=(l,m)=>l.section!==m?lc(l.element,l.cells,m,l.isNew):l,zx=()=>({transformRow:A2,transformCell:(l,m,b)=>{const S=b(l.element,m),A=qo(S)!=="td"?Rm(S,"td"):S;return gr(A,l.isNew,l.isLocked)}}),O2=()=>({transformRow:A2,transformCell:sh}),Qu=()=>({transformRow:(l,m)=>A2(l,m==="thead"?"tbody":m),transformCell:sh}),Cg={getTableSectionType:(l,m)=>{const b=Qn.fromTable(l);switch(_0(b).getOr(m)){case"section":return zx();case"sectionCells":return O2();case"cells":return Qu()}},section:zx,sectionCells:O2,cells:Qu,fallback:()=>({transformRow:we,transformCell:sh})},Sg=(l,m,b,S)=>{b===S?is(l,m):As(l,m,b)},ed=(l,m,b)=>{ic(En(l,m)).fold(()=>Aa(l,b),S=>Fc(S,b))},xN=(l,m)=>{const b=Un(l,m).getOrThunk(()=>{const S=xt.fromTag(m,ql(l).dom);return m==="thead"?ed(l,"caption,colgroup",S):m==="colgroup"?ed(l,"caption",S):jo(l,S),S});return il(b),b},R2=(l,m)=>{const b=[],S=[],A=it=>bn(it,ut=>{ut.isNew&&b.push(ut.element);const It=ut.element;return il(It),je(ut.cells,Je=>{Je.isNew&&S.push(Je.element),Sg(Je.element,"colspan",Je.colspan,1),Sg(Je.element,"rowspan",Je.rowspan,1),jo(It,Je.element)}),It}),M=it=>Fs(it,ut=>bn(ut.cells,It=>(Sg(It.element,"span",It.colspan,1),It.element))),$=(it,ut)=>{const It=xN(l,ut),sn=(ut==="colgroup"?M:A)(it);Kn(It,sn)},j=it=>{Un(l,it).each(ws)},K=(it,ut)=>{it.length>0?$(it,ut):j(ut)},ue=[],ve=[],Ke=[],wt=[];return je(m,it=>{switch(it.section){case"thead":ue.push(it);break;case"tbody":ve.push(it);break;case"tfoot":Ke.push(it);break;case"colgroup":wt.push(it);break}}),K(wt,"colgroup"),K(ue,"thead"),K(ve,"tbody"),K(Ke,"tfoot"),{newRows:b,newCells:S}},h1=l=>bn(l,m=>{const b=Gl(m.element);return je(m.cells,S=>{const A=Er(S.element);Sg(A,"colspan",S.colspan,1),Sg(A,"rowspan",S.rowspan,1),jo(b,A)}),b}),sA=(l,m)=>bn(l,b=>zs(b,m)),Wx=(l,m)=>l[m],D2=(l,m)=>{if(l.length===0)return 0;const b=l[0];return Hl(l,A=>!m(b.element,A.element)).getOr(l.length)},M2=(l,m,b,S)=>{const A=Wx(l,m),M=A.section==="colgroup",$=D2(A.cells.slice(b),S),j=M?1:D2(sA(l.slice(m),b),S);return{colspan:$,rowspan:j}},Zx=(l,m)=>{const b=bn(l,A=>bn(A.cells,ln)),S=(A,M,$,j)=>{for(let K=A;K<A+$;K++)for(let ue=M;ue<M+j;ue++)b[K][ue]=!0};return bn(l,(A,M)=>{const $=Fs(A.cells,(j,K)=>{if(b[M][K]===!1){const ue=M2(l,M,K,m);return S(M,K,ue.rowspan,ue.colspan),[Ld(j.element,ue.rowspan,ue.colspan,j.isNew)]}else return[]});return Hr(A.element,$,A.section,A.isNew)})},wg=(l,m,b)=>{const S=[];je(l.colgroups,A=>{const M=[];for(let $=0;$<l.grid.columns;$++){const j=Qn.getColumnAt(l,$).map(K=>gr(K.element,b,!1)).getOrThunk(()=>gr(m.colGap(),!0,!1));M.push(j)}S.push(lc(A.element,M,"colgroup",b))});for(let A=0;A<l.grid.rows;A++){const M=[];for(let K=0;K<l.grid.columns;K++){const ue=Qn.getAt(l,A,K).map(ve=>gr(ve.element,b,ve.isLocked)).getOrThunk(()=>gr(m.gap(),!0,!1));M.push(ue)}const $=l.all[A],j=lc($.element,M,$.section,b);S.push(j)}return S},rA=(l,m)=>wg(l,m,!1),A0=l=>Zx(l,Qo),Zm=(l,m)=>ir(l.all,b=>V(b.cells,S=>Qo(m,S.element))),xg=(l,m,b)=>{const S=bn(m.selection,M=>Vd(M).bind($=>Zm(l,$)).filter(b)),A=nr(S);return Ip(A.length>0,A)},js=(l,m,b,S,A)=>(M,$,j,K)=>{const ue=Qn.fromTable(M),ve=le.from(K==null?void 0:K.section).getOrThunk(Cg.fallback);return m(ue,$).map(wt=>{const it=rA(ue,j),ut=l(it,wt,Qo,A(j),ve),It=ts(ut.grid),Je=A0(ut.grid);return{info:wt,grid:Je,cursor:ut.cursor,lockedColumns:It}}).bind(wt=>{const it=R2(M,wt.grid),ut=le.from(K==null?void 0:K.sizing).getOrThunk(()=>$m.getTableSize(M)),It=le.from(K==null?void 0:K.resize).getOrThunk(u1);return b(M,wt.grid,wt.info,{sizing:ut,resize:It,section:ve}),S(M),is(M,mc),wt.lockedColumns.length>0&&As(M,mc,wt.lockedColumns.join(",")),le.some({cursor:wt.cursor,newRows:it.newRows,newCells:it.newCells})})},P2=(l,m)=>Vd(m.element).bind(b=>Zm(l,b).map(S=>({...S,generators:m.generators,clipboard:m.clipboard}))),g1=(l,m)=>xg(l,m,Ee).map(b=>({cells:b,generators:m.generators,clipboard:m.clipboard})),Eg=(l,m)=>m.mergable,EN=(l,m)=>m.unmergable,Ji=(l,m)=>xg(l,m,Ee),qm=(l,m)=>xg(l,m,b=>!b.isLocked),aA=(l,m)=>Zm(l,m).exists(b=>!b.isLocked),iA=(l,m)=>Wo(m,b=>aA(l,b)),Tg=(l,m)=>Eg(l,m).filter(b=>iA(l,b.cells)),jm=(l,m)=>EN(l,m).filter(b=>iA(l,b)),N2=(l,m,b,S)=>{const A=Pn(l).rows;if(A.length===0)return l;for(let M=m.startRow;M<=m.finishRow;M++)for(let $=m.startCol;$<=m.finishCol;$++){const j=A[M],K=zs(j,$).isLocked;ou(j,$,gr(S(),!1,K))}return l},Is=(l,m,b,S)=>{const A=Pn(l).rows;let M=!0;for(let $=0;$<A.length;$++)for(let j=0;j<ii(A[0]);j++){const K=A[$],ue=zs(K,j),ve=ue.element,Ke=b(ve,m);Ke&&!M?ou(K,j,gr(S(),!0,ue.isLocked)):Ke&&(M=!1)}return l},O0=(l,m)=>qe(l,(b,S)=>St(b,A=>m(A.element,S.element))?b:b.concat([S]),[]),Qi=(l,m,b,S)=>(m>0&&m<l[0].cells.length&&je(l,A=>{const M=A.cells[m-1];let $=0;const j=S();for(;A.cells.length>m+$&&b(M.element,A.cells[m+$].element);)ou(A,m+$,gr(j,!0,A.cells[m+$].isLocked)),$++}),l),cA=(l,m,b,S)=>{const A=Pn(l).rows;if(m>0&&m<A.length){const M=A[m-1].cells,$=O0(M,b);je($,j=>{let K=le.none();for(let ue=m;ue<A.length;ue++)for(let ve=0;ve<ii(A[0]);ve++){const Ke=A[ue],wt=zs(Ke,ve);b(wt.element,j.element)&&(K.isNone()&&(K=le.some(S())),K.each(ut=>{ou(Ke,ve,gr(ut,!0,wt.isLocked))}))}})}return l},qx=l=>{const m=M=>M(l),b=Y(l),S=()=>A,A={tag:!0,inner:l,fold:(M,$)=>$(l),isValue:Ee,isError:ln,map:M=>vl.value(M(l)),mapError:S,bind:m,exists:m,forall:m,getOr:b,or:S,getOrThunk:b,orThunk:S,getOrDie:b,each:M=>{M(l)},toOptional:()=>le.some(l)};return A},rh=l=>{const m=()=>b,b={tag:!1,inner:l,fold:(S,A)=>S(l),isValue:ln,isError:Ee,map:m,mapError:S=>vl.error(S(l)),bind:m,exists:ln,forall:Ee,getOr:we,or:we,getOrThunk:rn,orThunk:rn,getOrDie:at(String(l)),each:Ne,toOptional:le.none};return b},vl={value:qx,error:rh,fromOption:(l,m)=>l.fold(()=>rh(m),qx)},qa=(l,m,b)=>{if(l.row>=m.length||l.column>ii(m[0]))return vl.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const S=m.slice(l.row),A=S[0].cells.slice(l.column),M=ii(b[0]),$=b.length;return vl.value({rowDelta:S.length-$,colDelta:A.length-M})},p1=(l,m)=>{const b=ii(l[0]),S=ii(m[0]);return{rowDelta:0,colDelta:b-S}},jx=(l,m)=>{const b=l.length,S=m.length;return{rowDelta:b-S,colDelta:0}},b1=(l,m,b,S)=>{const A=m.section==="colgroup"?b.col:b.cell;return Uo(l,M=>gr(A(),!0,S(M)))},B2=(l,m,b,S)=>{const A=l[l.length-1];return l.concat(Uo(m,()=>{const M=A.section==="colgroup"?b.colgroup:b.row,$=Us(A,M,we),j=b1($.cells.length,$,b,K=>_s(S,K.toString()));return dc($,j)}))},lA=(l,m,b,S)=>bn(l,A=>{const M=b1(m,A,b,ln);return ng(A,S,M)}),R0=(l,m,b)=>bn(l,S=>qe(b,(A,M)=>{const $=b1(1,S,m,Ee)[0];return Zp(A,M,$)},S)),td=(l,m,b)=>{const S=m.colDelta<0?lA:we,A=m.rowDelta<0?B2:we,M=ts(l),$=ii(l[0]),j=St(M,ve=>ve===$-1),K=S(l,Math.abs(m.colDelta),b,j?$-1:$),ue=ts(K);return A(K,Math.abs(m.rowDelta),b,yn(ue,Ee))},uA=(l,m,b,S)=>{const A=zs(l[m],b),M=lt(S,A.element),$=l[m];return l.length>1&&ii($)>1&&(b>0&&M(Ua($,b-1))||b<$.cells.length-1&&M(Ua($,b+1))||m>0&&M(Ua(l[m-1],b))||m<l.length-1&&M(Ua(l[m+1],b)))},D0=(l,m,b,S,A,M)=>{const $=l.row,j=l.column,K=b.length,ue=ii(b[0]),ve=$+K,Ke=j+ue+M.length,wt=yn(M,Ee);for(let it=$;it<ve;it++){let ut=0;for(let It=j;It<Ke;It++){if(wt[It]){ut++;continue}uA(m,it,It,A)&&Is(m,Ua(m[it],It),A,S.cell);const Je=It-j-ut,sn=zs(b[it-$],Je),ze=sn.element,Dt=S.replace(ze);ou(m[it],It,gr(Dt,!0,sn.isLocked))}}return m},M0=(l,m,b)=>{const S=ii(m[0]),A=Pn(m).cols.length+l.row,M=Uo(S-l.column,j=>j+l.column),$=V(M,j=>Wo(b,K=>K!==j)).getOr(S-1);return{row:A,column:$}},ah=(l,m,b)=>gs(b,S=>S>=l.column&&S<=ii(m[0])+l.column),ih=(l,m,b,S,A)=>{const M=ts(m),$=M0(l,m,M),j=Pn(b).rows,K=ah($,j,M);return qa($,m,j).map(ve=>{const Ke={...ve,colDelta:ve.colDelta-K.length},wt=td(m,Ke,S),it=ts(wt),ut=ah($,j,it);return D0($,wt,j,S,A,ut)})},L2=(l,m,b,S,A)=>{Qi(m,l,A,S.cell);const M=jx(b,m),$=td(b,M,S),j=jx(m,$),K=td(m,j,S);return bn(K,(ue,ve)=>ng(ue,l,$[ve].cells))},v1=(l,m,b,S,A)=>{cA(m,l,A,S.cell);const M=ts(m),$=p1(m,b),j={...$,colDelta:$.colDelta-M.length},K=td(m,j,S),{cols:ue,rows:ve}=Pn(K),Ke=ts(K),wt=p1(b,m),it={...wt,colDelta:wt.colDelta+Ke.length},ut=R0(b,S,Ke),It=td(ut,it,S);return[...ue,...ve.slice(0,l),...It,...ve.slice(l,ve.length)]},Gm=(l,m,b,S)=>Us(l,A=>S(A,b),m),em=(l,m,b,S,A)=>{const{rows:M,cols:$}=Pn(l),j=M.slice(0,m),K=M.slice(m),ue=Gm(M[b],(ve,Ke)=>m>0&&m<M.length&&S(Ua(M[m-1],Ke),Ua(M[m],Ke))?zs(M[m],Ke):gr(A(ve.element,S),!0,ve.isLocked),S,A);return[...$,...j,ue,...K]},qn=(l,m,b,S,A,M,$)=>{if(b==="colgroup"||!S){const j=zs(l,A);return gr($(j.element,M),!0,!1)}else return zs(l,m)},Ni=(l,m,b,S,A)=>bn(l,M=>{const $=m>0&&m<ii(M)&&S(Ua(M,m-1),Ua(M,m)),j=qn(M,m,M.section,$,b,S,A);return Zp(M,m,j)}),ch=(l,m)=>Fs(l,b=>{const S=b.cells,A=Xr(m,(M,$)=>$>=0&&$<M.length?M.slice(0,$).concat(M.slice($+1)):M,S);return A.length>0?[lc(b.element,A,b.section,b.isNew)]:[]}),P0=(l,m,b)=>{const{rows:S,cols:A}=Pn(l);return[...A,...S.slice(0,m),...S.slice(b+1)]},us=(l,m,b,S)=>Ua(l[m],b)!==void 0&&m>0&&S(Ua(l[m-1],b),Ua(l[m],b)),y1=(l,m,b)=>m>0&&b(Ua(l,m-1),Ua(l,m)),nd=(l,m,b,S)=>us(l,m,b,S)||y1(l[m],b,S),dA=(l,m)=>Wo(m,we)&&T0(l.cells)?Ee:(S,A,M)=>!(qo(S.element)==="th"&&m[M]),TN=(l,m)=>Wo(m,we)&&T0(l)?Ee:(S,A,M)=>!(qo(S.element)==="th"&&m[A]),I2=(l,m,b,S)=>{const A=$=>$==="row"?$d(m):Vc(m),M=$=>A($)?`${$}group`:$;return l?m1(m)?M(b):null:S&&m1(m)?M(b==="row"?"col":"row"):null},ds=(l,m)=>(b,S,A)=>le.some(I2(l,b.element,"col",m[A])),mA=(l,m)=>(b,S)=>le.some(I2(l,b.element,"row",m[S])),F2=(l,m,b)=>gr(b(l.element,m),!0,l.isLocked),$2=(l,m,b,S,A,M,$)=>{const j=K=>St(m,ue=>b(K.element,ue.element));return bn(l,(K,ue)=>og(K,(ve,Ke)=>{if(j(ve)){const wt=$(ve,ue,Ke)?A(ve,b,S):ve;return M(wt,ue,Ke).each(it=>{Pd(wt.element,{scope:le.from(it)})}),wt}else return ve}))},lh=(l,m,b)=>Fs(l,(S,A)=>nd(l,A,m,b)?[]:[zs(S,m)]),yl=(l,m,b)=>{const S=l[m];return Fs(S.cells,(A,M)=>nd(l,m,M,b)?[]:[A])},Gx=(l,m,b,S,A)=>{const M=Pn(l).rows,$=Fs(m,ve=>lh(M,ve,S)),j=bn(M,ve=>T0(ve.cells)),K=TN($,j),ue=mA(b,j);return $2(l,$,S,A,F2,ue,K)},H2=(l,m,b,S,A,M,$)=>{const{cols:j,rows:K}=Pn(l),ue=K[m[0]],ve=Fs(m,Je=>yl(K,Je,A)),Ke=bn(ue.cells,(Je,sn)=>T0(lh(K,sn,A))),wt=[...K];je(m,Je=>{wt[Je]=$.transformRow(K[Je],b)});const it=[...j,...wt],ut=dA(ue,Ke),It=ds(S,Ke);return $2(it,ve,A,M,$.transformCell,It,ut)},Mt=(l,m,b,S)=>{const A=Pn(l).rows,M=bn(m,$=>zs(A[$.row],$.column));return $2(l,M,b,S,F2,le.none,Ee)},fi={generate:l=>{if(!Ce(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],b={};return je(l,(S,A)=>{const M=an(S);if(M.length!==1)throw new Error("one and only one name per case");const $=M[0],j=S[$];if(b[$]!==void 0)throw new Error("duplicate key detected:"+$);if($==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ce(j))throw new Error("case arguments must be an array");m.push($),b[$]=(...K)=>{const ue=K.length;if(ue!==j.length)throw new Error("Wrong number of arguments to case "+$+". Expected "+j.length+" ("+j+"), got "+ue);return{fold:(...Ke)=>{if(Ke.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+Ke.length);return Ke[A].apply(null,K)},match:Ke=>{const wt=an(Ke);if(m.length!==wt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+wt.join(","));if(!Wo(m,ut=>Do(wt,ut)))throw new Error("Not all branches were specified when using match. Specified: "+wt.join(", ")+`
Required: `+m.join(", "));return Ke[$].apply(null,K)},log:Ke=>{console.log(Ke,{constructors:m,constructor:$,params:K})}}}}),b}},tm={...fi.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},fA=(l,m)=>l.length===0?tm.none():l.length===1?tm.only(0):m===0?tm.left(0,1):m===l.length-1?tm.right(m-1,m):m>0&&m<l.length-1?tm.middle(m-1,m,m+1):tm.none(),V2=(l,m,b,S,A)=>{const M=l.slice(0),$=fA(l,m),j=Y(bn(M,Y(0))),K=wt=>S.singleColumnWidth(M[wt],b),ue=(wt,it)=>A.calcLeftEdgeDeltas(M,wt,it,b,S.minCellWidth(),S.isRelative),ve=(wt,it,ut)=>A.calcMiddleDeltas(M,wt,it,ut,b,S.minCellWidth(),S.isRelative),Ke=(wt,it)=>A.calcRightEdgeDeltas(M,wt,it,b,S.minCellWidth(),S.isRelative);return $.fold(j,K,ue,ve,Ke)},C1=(l,m,b)=>{let S=0;for(let A=l;A<m;A++)S+=b[A]!==void 0?b[A]:0;return S},uh=(l,m)=>{const b=Qn.justCells(l);return bn(b,S=>{const A=C1(S.column,S.column+S.colspan,m);return{element:S.element,width:A,colspan:S.colspan}})},Kx=(l,m)=>{const b=Qn.justColumns(l);return bn(b,(S,A)=>({element:S.element,width:m[A],colspan:S.colspan}))},N0=(l,m)=>bn(l.all,(b,S)=>({element:b.element,height:m[S]})),Xx=l=>Xr(l,(m,b)=>m+b,0),B0=(l,m)=>Qn.hasColumns(l)?Kx(l,m):uh(l,m),Km=(l,m,b)=>{const S=B0(l,m);je(S,A=>{b.setElementWidth(A.element,A.width)})},Yx=(l,m,b,S,A)=>{const M=Qn.fromTable(l),$=A.getCellDelta(m),j=A.getWidths(M,A),K=b===M.grid.columns-1,ue=S.clampTableDelta(j,b,$,A.minCellWidth(),K),ve=V2(j,b,ue,A,S),Ke=bn(ve,(wt,it)=>wt+j[it]);Km(M,Ke,A),S.resizeTable(A.adjustTableWidth,ue,K)},dh=(l,m,b)=>{const S=Qn.fromTable(l),A=r2(S,l),M=bn(A,(K,ue)=>b===ue?Math.max(m+K,$p()):K),$=N0(S,M);je($,K=>{n2(K.element,K.height)}),je(Qn.justCells(S),K=>{Kf(K.element)});const j=Xx(M);n2(l,j)},kg=(l,m,b,S,A)=>{const M=Qn.generate(m),$=S.getWidths(M,S),j=S.pixelWidth(),{newSizes:K,delta:ue}=A.calcRedestributedWidths($,j,b.pixelDelta,S.isRelative);Km(M,K,S),S.adjustTableWidth(ue)},Jx=(l,m,b,S)=>{const A=Qn.generate(m),M=S.getWidths(A,S);Km(A,M,S)},nm=l=>qe(l,(b,S)=>St(b,M=>M.column===S.column)?b:b.concat([S]),[]).sort((b,S)=>b.column-S.column),L0=Ta("col"),S1=Ta("colgroup"),z2=l=>qo(l)==="tr"||S1(l),U2=l=>{const m=ua(l,"colspan",1),b=ua(l,"rowspan",1);return{element:l,colspan:m,rowspan:b}},hA=(l,m=U2)=>{const b=j=>L0(j.element)?l.col(j):l.cell(j),S=j=>S1(j.element)?l.colgroup(j):l.row(j),A=j=>{if(z2(j))return S({element:j});{const K=j,ue=b(m(K));return M=le.some({item:K,replacement:ue}),ue}};let M=le.none();return{getOrInit:(j,K)=>M.fold(()=>A(j),ue=>K(j,ue.item)?ue.replacement:A(j))}},gA=l=>m=>{const b=[],S=($,j)=>V(b,K=>j(K.item,$)),A=$=>{const j=l==="td"?{scope:null}:{},K=m.replace($,l,j);return b.push({item:$,sub:K}),K};return{replaceOrInit:($,j)=>{if(z2($)||L0($))return $;{const K=$;return S(K,j).fold(()=>A(K),ue=>j($,ue.item)?ue.sub:A(K))}}}},W2=l=>xr(l,"scope").map(m=>m.substr(0,3)),ra={modification:hA,transform:gA,merging:l=>({unmerge:S=>{const A=W2(S);return A.each(M=>As(S,"scope",M)),()=>{const M=l.cell({element:S,colspan:1,rowspan:1});return oi(M,"width"),oi(S,"width"),A.each($=>As(M,"scope",$)),M}},merge:S=>{const A=()=>{const M=nr(bn(S,W2));if(M.length===0)return le.none();{const $=M[0],j=["row","col"];return St(M,ue=>ue!==$&&Do(j,ue))?le.none():le.from($)}};return oi(S[0],"width"),A().fold(()=>is(S[0],"scope"),M=>As(S[0],"scope",M+"group")),Y(S[0])}})},pA=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Le=(l,m)=>{const b=l.property().name(m);return Do(["ol","ul"],b)},I0=(l,m)=>{const b=l.property().name(m);return Do(pA,b)},bA=(l,m)=>Do(["br","img","hr","input"],l.property().name(m)),Z2=fg(),w1=l=>I0(Z2,l),lu=l=>Le(Z2,l),Xm=l=>bA(Z2,l),Qx=l=>{const m=Ta("br"),b=K=>Wo(K,ue=>m(ue)||Lc(ue)&&Wu(ue).trim().length===0),S=K=>qo(K)==="li"||Xe(K,lu).isSome(),A=K=>xi(K).map(ue=>w1(ue)?!0:Xm(ue)?qo(ue)!=="img":!1).getOr(!1),M=K=>Zu(K).bind(ue=>{const ve=A(ue);return _a(ue).map(Ke=>ve===!0||S(Ke)||m(ue)||w1(Ke)&&!Qo(K,Ke)?[]:[xt.fromTag("br")])}).getOr([]),j=(()=>{const K=Fs(l,ue=>{const ve=Fo(ue);return b(ve)?[]:ve.concat(M(ue))});return K.length===0?[xt.fromTag("br")]:K})();il(l[0]),Kn(l[0],j)},q2=l=>Gu(l,!0),F0=l=>{zd(l).length===0&&ws(l)},$0=(l,m)=>({grid:l,cursor:m}),eE=l=>ir(l,m=>ir(m.cells,b=>{const S=b.element;return Ip(q2(S),S)})),sm=(l,m,b)=>{var S,A;const M=Pn(l).rows;return le.from((A=(S=M[m])===null||S===void 0?void 0:S.cells[b])===null||A===void 0?void 0:A.element).filter(q2).orThunk(()=>eE(M))},Ar=(l,m,b)=>{const S=sm(l,m,b);return $0(l,S)},H0=l=>qe(l,(b,S)=>St(b,M=>M.row===S.row)?b:b.concat([S]),[]).sort((b,S)=>b.row-S.row),j2=(l,m,b,S)=>{const A=m[0].row,M=H0(m),$=Xr(M,(j,K)=>({grid:em(j.grid,A,K.row+j.delta,b,S.getOrInit),delta:j.delta+1}),{grid:l,delta:0}).grid;return Ar($,A,m[0].column)},tE=(l,m,b,S)=>{const A=H0(m),M=A[A.length-1],$=M.row+M.rowspan,j=Xr(A,(K,ue)=>em(K,$,ue.row,b,S.getOrInit),l);return Ar(j,$,m[0].column)},nE=(l,m,b,S)=>{const A=m.details,M=nm(A),$=M[0].column,j=Xr(M,(K,ue)=>({grid:Ni(K.grid,$,ue.column+K.delta,b,S.getOrInit),delta:K.delta+1}),{grid:l,delta:0}).grid;return Ar(j,A[0].row,$)},oE=(l,m,b,S)=>{const A=m.details,M=A[A.length-1],$=M.column+M.colspan,j=nm(A),K=Xr(j,(ue,ve)=>Ni(ue,$,ve.column,b,S.getOrInit),l);return Ar(K,A[0].row,$)},V0=(l,m,b,S)=>{const A=nm(m),M=bn(A,j=>j.column),$=Gx(l,M,!0,b,S.replaceOrInit);return Ar($,m[0].row,m[0].column)},sE=(l,m,b,S)=>{const A=Mt(l,m,b,S.replaceOrInit);return Ar(A,m[0].row,m[0].column)},rE=(l,m,b,S)=>{const A=nm(m),M=bn(A,j=>j.column),$=Gx(l,M,!1,b,S.replaceOrInit);return Ar($,m[0].row,m[0].column)},vA=(l,m,b,S)=>{const A=Mt(l,m,b,S.replaceOrInit);return Ar(A,m[0].row,m[0].column)},x1=(l,m)=>(b,S,A,M,$)=>{const j=H0(S),K=bn(j,ve=>ve.row),ue=H2(b,K,l,m,A,M.replaceOrInit,$);return Ar(ue,S[0].row,S[0].column)},aE=x1("thead",!0),iE=x1("tbody",!1),cE=x1("tfoot",!1),yA=(l,m,b,S)=>{const A=nm(m.details),M=ch(l,bn(A,j=>j.column)),$=M.length>0?M[0].cells.length-1:0;return Ar(M,A[0].row,Math.min(A[0].column,$))},lE=(l,m,b,S)=>{const A=H0(m),M=P0(l,A[0].row,A[A.length-1].row),$=Math.max(Pn(M).rows.length-1,0);return Ar(M,Math.min(m[0].row,$),m[0].column)},CA=(l,m,b,S)=>{const A=m.cells;Qx(A);const M=N2(l,m.bounds,b,S.merge(A));return $0(M,le.from(A[0]))},SA=(l,m,b,S)=>{const M=Xr(m,($,j)=>Is($,j,b,S.unmerge(j)),l);return $0(M,le.from(m[0]))},uE=(l,m,b,S)=>{const M=((K,ue)=>{const ve=Qn.fromTable(K);return wg(ve,ue,!0)})(m.clipboard,m.generators),$=cl(m.row,m.column);return ih($,l,M,m.generators,b).fold(()=>$0(l,le.some(m.element)),K=>Ar(K,m.row,m.column))},E1=(l,m,b)=>{const S=Hp(l,b.section),A=Qn.generate(S);return wg(A,m,!0)},wA=(l,m,b,S)=>{const A=Pn(l).rows,M=m.cells[0].column,$=A[m.cells[0].row],j=E1(m.clipboard,m.generators,$),K=L2(M,l,j,m.generators,b);return Ar(K,m.cells[0].row,m.cells[0].column)},Vo=(l,m,b,S)=>{const A=Pn(l).rows,M=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,$=A[m.cells[0].row],j=E1(m.clipboard,m.generators,$),K=L2(M,l,j,m.generators,b);return Ar(K,m.cells[0].row,M)},G2=(l,m,b,S)=>{const A=Pn(l).rows,M=m.cells[0].row,$=A[M],j=E1(m.clipboard,m.generators,$),K=v1(M,l,j,m.generators,b);return Ar(K,m.cells[0].row,m.cells[0].column)},dE=(l,m,b,S)=>{const A=Pn(l).rows,M=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,$=A[m.cells[0].row],j=E1(m.clipboard,m.generators,$),K=v1(M,l,j,m.generators,b);return Ar(K,M,m.cells[0].column)},AN=(l,m)=>{const b=Qn.fromTable(l);return Ji(b,m).bind(A=>{const M=A[A.length-1],$=A[0].column,j=M.column+M.colspan,K=Eo(bn(b.all,ue=>gs(ue.cells,ve=>ve.column>=$&&ve.column<j)));return f1(K)}).getOr("")},ja=(l,m)=>{const b=Qn.fromTable(l);return Ji(b,m).bind(f1).getOr("")},Ga=(l,m)=>{const b=Qn.fromTable(l);return Ji(b,m).bind(A=>{const M=A[A.length-1],$=A[0].row,j=M.row+M.rowspan,K=b.all.slice($,j);return k0(K)}).getOr("")},ur=(l,m,b,S)=>Jx(l,m,b,S.sizing),z0=(l,m,b,S)=>kg(l,m,b,S.sizing,S.resize),_g=(l,m)=>St(m,b=>b.column===0&&b.isLocked),mE=(l,m)=>St(m,b=>b.column+b.colspan>=l.grid.columns&&b.isLocked),K2=(l,m)=>{const b=o0(l),S=nm(m);return qe(S,(A,M)=>{const j=b[M.column].map(uo).getOr(0);return A+j},0)},fE=l=>(m,b)=>Ji(m,b).filter(S=>!(l?_g:mE)(m,S)).map(S=>({details:S,pixelDelta:K2(m,S)})),Ym=(l,m)=>qm(l,m).map(b=>({details:b,pixelDelta:-K2(l,b)})),Wr=l=>(m,b)=>g1(m,b).filter(S=>!(l?_g:mE)(m,S.cells)),od=ra.transform("th"),Ag=ra.transform("td"),hE=js(j2,Ji,Ne,Ne,ra.modification),xA=js(tE,Ji,Ne,Ne,ra.modification),U0=js(nE,fE(!0),z0,Ne,ra.modification),X2=js(oE,fE(!1),z0,Ne,ra.modification),Y2=js(yA,Ym,z0,F0,ra.modification),J2=js(lE,Ji,Ne,F0,ra.modification),gE=js(V0,qm,Ne,Ne,od),pE=js(rE,qm,Ne,Ne,Ag),bE=js(aE,Ji,Ne,Ne,od),vE=js(iE,Ji,Ne,Ne,Ag),EA=js(cE,Ji,Ne,Ne,Ag),fa=js(sE,qm,Ne,Ne,od),TA=js(vA,qm,Ne,Ne,Ag),rm=js(CA,Tg,ur,Ne,ra.merging),Q2=js(SA,jm,ur,Ne,ra.merging),eC=js(uE,P2,ur,Ne,ra.modification),yE=js(wA,Wr(!0),Ne,Ne,ra.modification),W0=js(Vo,Wr(!1),Ne,Ne,ra.modification),tC=js(G2,g1,Ne,Ne,ra.modification),nC=js(dE,g1,Ne,Ne,ra.modification),kA=AN,_A=ja,or=Ga,dr=(l,m)=>l.dispatch("NewRow",{node:m}),aa=(l,m)=>l.dispatch("NewCell",{node:m}),sr=(l,m,b)=>{l.dispatch("TableModified",{...b,table:m})},Or=(l,m,b,S,A)=>{l.dispatch("TableSelectionChange",{cells:m,start:b,finish:S,otherCells:A})},Cr=l=>{l.dispatch("TableSelectionClear")},oC=(l,m,b,S,A)=>{l.dispatch("ObjectResizeStart",{target:m,width:b,height:S,origin:A})},T1=(l,m,b,S,A)=>{l.dispatch("ObjectResized",{target:m,width:b,height:S,origin:A})},k1={structure:!1,style:!0},Zr={structure:!0,style:!1},CE={structure:!0,style:!0},Z0=(l,m)=>t1(l)?$m.percentageSize(m):bc(l)?$m.pixelSize(m):$m.getTableSize(m),Lt=(l,m,b)=>{const S=Ya=>qo(Jf(Ya))==="table",A=Ya=>!S(l)||d1(Ya).rows>1,M=Ya=>!S(l)||d1(Ya).columns>1,$=e1(l),j=g0(l)?Ne:yg,K=Ya=>{switch(ju(l)){case"section":return Cg.section();case"sectionCells":return Cg.sectionCells();case"cells":return Cg.cells();default:return Cg.getTableSectionType(Ya,"section")}},ue=(Ya,rS)=>rS.cursor.fold(()=>{const J1=zd(Ya);return ye(J1).filter(Ln).map(dd=>{b.clearSelectedCells(Ya.dom);const Pr=l.dom.createRng();return Pr.selectNode(dd.dom),l.selection.setRng(Pr),As(dd,"data-mce-selected","1"),Pr})},J1=>{const dd=nh(J1),Pr=l.dom.createRng();return Pr.setStart(dd.element.dom,dd.offset),Pr.setEnd(dd.element.dom,dd.offset),l.selection.setRng(Pr),b.clearSelectedCells(Ya.dom),le.some(Pr)}),ve=(Ya,rS,J1,dd)=>(Pr,hm,x3=!1)=>{Xu(Pr);const aS=xt.fromDom(l.getDoc()),E3=h2(J1,aS,$),iS={sizing:Z0(l,Pr),resize:g0(l)?E0():u1(),section:K(Pr)};return rS(Pr)?Ya(Pr,hm,E3,iS).bind(cS=>{m.refresh(Pr.dom),je(cS.newRows,Q1=>{dr(l,Q1.dom)}),je(cS.newCells,Q1=>{aa(l,Q1.dom)});const PT=ue(Pr,cS);return Ln(Pr)&&(Xu(Pr),x3||sr(l,Pr.dom,dd)),PT.map(Q1=>({rng:Q1,effect:dd}))}):le.none()},Ke=ve(J2,A,Ne,Zr),wt=ve(Y2,M,Ne,Zr),it=ve(hE,Ee,Ne,Zr),ut=ve(xA,Ee,Ne,Zr),It=ve(U0,Ee,j,Zr),Je=ve(X2,Ee,j,Zr),sn=ve(rm,Ee,Ne,Zr),ze=ve(Q2,Ee,Ne,Zr),Dt=ve(yE,Ee,Ne,Zr),ho=ve(W0,Ee,Ne,Zr),go=ve(tC,Ee,Ne,Zr),Ut=ve(nC,Ee,Ne,Zr),Lo=ve(eC,Ee,Ne,CE),Xa=ve(fa,Ee,Ne,Zr),cf=ve(TA,Ee,Ne,Zr),El=ve(gE,Ee,Ne,Zr),Zn=ve(pE,Ee,Ne,Zr),Co=ve(bE,Ee,Ne,Zr),va=ve(vE,Ee,Ne,Zr),Mr=ve(EA,Ee,Ne,Zr);return{deleteRow:Ke,deleteColumn:wt,insertRowsBefore:it,insertRowsAfter:ut,insertColumnsBefore:It,insertColumnsAfter:Je,mergeCells:sn,unmergeCells:ze,pasteColsBefore:Dt,pasteColsAfter:ho,pasteRowsBefore:go,pasteRowsAfter:Ut,pasteCells:Lo,makeCellsHeader:Xa,unmakeCellsHeader:cf,makeColumnsHeader:El,unmakeColumnsHeader:Zn,makeRowsHeader:Co,makeRowsBody:va,makeRowsFooter:Mr,getTableRowType:or,getTableCellType:_A,getTableColType:kA}},mh=(l,m,b)=>{const S=ua(l,m,1);b===1||S<=1?is(l,m):As(l,m,Math.min(b,S))},sC=(l,m)=>b=>{const S=b.column+b.colspan-1,A=b.column;return S>=l&&A<m},ON=(l,m,b)=>{if(Qn.hasColumns(l)){const S=gs(Qn.justColumns(l),sC(m,b)),A=bn(S,$=>{const j=Er($.element);return mh(j,"span",b-m),j}),M=xt.fromTag("colgroup");return Kn(M,A),[M]}else return[]},AA=(l,m,b)=>bn(l.all,S=>{const A=gs(S.cells,sC(m,b)),M=bn(A,j=>{const K=Er(j.element);return mh(K,"colspan",b-m),K}),$=xt.fromTag("tr");return Kn($,M),$}),OA=(l,m)=>{const b=Qn.fromTable(l);return qm(b,m).map(A=>{const M=A[A.length-1],$=A[0].column,j=M.column+M.colspan,K=ON(b,$,j),ue=AA(b,$,j);return[...K,...ue]})},Bi=(l,m,b)=>{const S=Qn.fromTable(l);return Ji(S,m).bind(M=>{const $=wg(S,b,!1),K=Pn($).rows.slice(M[0].row,M[M.length-1].row+M[M.length-1].rowspan),ue=Fs(K,Ke=>{const wt=gs(Ke.cells,it=>!it.isLocked);return wt.length>0?[{...Ke,cells:wt}]:[]}),ve=A0(ue);return Ip(ve.length>0,ve)}).map(M=>h1(M))},q0=fi.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),SE=(l,m,b)=>{const S=b.substring(0,b.length-l.length),A=parseFloat(S);return S===A.toString()?m(A):q0.invalid(b)},sd={...q0,from:l=>Ti(l,"%")?SE("%",q0.percent,l):Ti(l,"px")?SE("px",q0.pixels,l):q0.invalid(l)},Rr=(l,m)=>bn(l,b=>sd.from(b).fold(()=>b,A=>A/m*100+"%",A=>A+"%")),Cc=(l,m,b)=>{const S=b/m;return bn(l,A=>sd.from(A).fold(()=>A,$=>$*S+"px",$=>$/100*b+"px"))},Ka=(l,m)=>{const b=l.fold(()=>Y(""),S=>{const A=S/m;return Y(A+"px")},()=>{const S=100/m;return Y(S+"%")});return Uo(m,b)},rC=(l,m,b)=>l.fold(()=>m,S=>Cc(m,b,S),S=>Rr(m,b)),j0=(l,m,b)=>{const S=sd.from(b),A=Wo(l,M=>M==="0px")?Ka(S,l.length):rC(S,l,m);return xE(A)},aC=(l,m)=>l.length===0?m:Xr(l,(b,S)=>sd.from(S).fold(Y(0),we,we)+b,0),wE=(l,m)=>{const b=Math.floor(l);return{value:b+m,remainder:l-b}},G0=(l,m)=>sd.from(l).fold(Y(l),b=>b+m+"px",b=>b+m+"%"),xE=l=>{if(l.length===0)return l;const m=Xr(l,(S,A)=>{const M=sd.from(A).fold(()=>({value:A,remainder:0}),$=>wE($,"px"),$=>({value:$+"%",remainder:0}));return{output:[M.value].concat(S.output),remainder:S.remainder+M.remainder}},{output:[],remainder:0}),b=m.output;return b.slice(0,b.length-1).concat([G0(b[b.length-1],Math.round(m.remainder))])},EE=sd.from,TE=(l,m,b)=>{je(m,S=>{const A=l.slice(S.column,S.colspan+S.column),M=aC(A,If());es(S.element,"width",M+b)})},RA=(l,m,b)=>{je(m,(S,A)=>{const M=aC([l[A]],If());es(S.element,"width",M+b)})},DA=(l,m,b)=>{je(b,S=>{oi(S.element,"height")}),je(m,(S,A)=>{es(S.element,"height",l[A])})},MA=l=>EE(l).fold(Y("px"),Y("px"),Y("%")),iC=(l,m,b)=>{const S=Qn.fromTable(l),A=S.all,M=Qn.justCells(S),$=Qn.justColumns(S);m.each(j=>{const K=MA(j),ue=Ai(l),ve=fl(S,l),Ke=j0(ve,ue,j);Qn.hasColumns(S)?RA(Ke,$,K):TE(Ke,M,K),es(l,"width",j)}),b.each(j=>{const K=Ye(l),ue=Ko(S,l),ve=j0(ue,K,j);DA(ve,A,M),es(l,"height",j)})},K0=ml,kE=lr,_1=ig,Og=l=>{is(l,"width"),is(l,"height")},Jm=l=>{const m=os(l);iC(l,le.some(m),le.none()),Og(l)},X0=l=>{const m=ls(l);iC(l,le.some(m),le.none()),Og(l)},PA=l=>{const m=o2(l);iC(l,le.none(),le.some(m)),Og(l)},_E=l=>{oi(l,"width");const m=Ud(l),b=m.length>0?m:zd(l);je(b,S=>{oi(S,"width"),Og(S)}),Og(l)},NA={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},AE=()=>xt.fromTag("th"),OE=()=>xt.fromTag("td"),hi=()=>xt.fromTag("col"),Y0=(l,m,b,S)=>{const A=xt.fromTag("tr");for(let M=0;M<l;M++){const $=S<m||M<b?AE():OE();M<b&&As($,"scope","row"),S<m&&As($,"scope","col"),jo($,xt.fromTag("br")),jo(A,$)}return A},RE=l=>{const m=xt.fromTag("colgroup");return Uo(l,()=>jo(m,hi())),m},cC=(l,m,b,S)=>Uo(l,A=>Y0(m,b,S,A)),A1=(l,m,b,S,A,M=NA)=>{const $=xt.fromTag("table"),j=A!=="cells";kr($,M.styles),wi($,M.attributes),M.colGroups&&jo($,RE(m));const K=Math.min(l,b);if(j&&b>0){const it=xt.fromTag("thead");jo($,it);const It=cC(b,m,A==="sectionCells"?K:0,S);Kn(it,It)}const ue=xt.fromTag("tbody");jo($,ue);const ve=j?l-K:l,wt=cC(ve,m,j?0:b,S);return Kn(ue,wt),$},BA=l=>l.dom.innerHTML,Rg=l=>{const m=xt.fromTag("div"),b=xt.fromDom(l.dom.cloneNode(!0));return jo(m,b),BA(m)},LA=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},lC=(l,m)=>{Ei(m,"td,th").each(lt(LA,l))},IA=(l,m)=>{je(ta(m,"tr"),b=>{dr(l,b.dom),je(ta(b,"th,td"),S=>{aa(l,S.dom)})})},O1=l=>Q(l)&&l.indexOf("%")!==-1,FA=(l,m,b,S,A)=>{const M=Pa(l),$={styles:M,attributes:Yf(l),colGroups:Zs(l)};return l.undoManager.ignore(()=>{const j=A1(b,m,A,S,ju(l),$);As(j,"data-mce-id","__mce");const K=Rg(j);l.insertContent(K),l.addVisual()}),Ei(Jf(l),'table[data-mce-id="__mce"]').map(j=>(bc(l)?X0(j):iu(l)?_E(j):(t1(l)||O1(M.width))&&Jm(j),Xu(j),is(j,"data-mce-id"),IA(l,j),lC(l,j),j.dom)).getOrNull()},$A=(l,m,b,S={})=>{const A=M=>st(M)&&M>0;if(A(m)&&A(b)){const M=S.headerRows||0,$=S.headerColumns||0;return FA(l,b,m,$,M)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var J0=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const DE="x-tinymce/dom-table-",uC=DE+"rows",R1=DE+"columns",ME=l=>{const m=J0.FakeClipboardItem(l);J0.write([m])},dC=l=>{var m;const b=(m=J0.read())!==null&&m!==void 0?m:[];return ir(b,S=>le.from(S.getType(l)))},mC=l=>{dC(l).isSome()&&J0.clear()},fC=l=>{l.fold(PE,m=>ME({[uC]:m}))},fh=()=>dC(uC),PE=()=>mC(uC),hC=l=>{l.fold(BE,m=>ME({[R1]:m}))},NE=()=>dC(R1),BE=()=>mC(R1),gi=l=>Fx(v0(l),Ku(l)).filter(Qf),Q0=l=>$x(v0(l),Ku(l)).filter(Qf),ev=(l,m)=>{const b=Ku(l),S=()=>gi(l).each(Je=>{si(Je,b).filter(ne(b)).each(sn=>{const ze=xt.fromText("");if(Fc(sn,ze),ws(sn),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const Dt=l.dom.createRng();Dt.setStart(ze.dom,0),Dt.setEnd(ze.dom,0),l.selection.setRng(Dt),l.nodeChanged()}})}),A=Je=>gi(l).each(sn=>{iu(l)||bc(l)||t1(l)||si(sn,b).each(Dt=>{Je==="relative"&&!K0(Dt)?Jm(Dt):Je==="fixed"&&!kE(Dt)?X0(Dt):Je==="responsive"&&!_1(Dt)&&_E(Dt),Xu(Dt),sr(l,Dt.dom,Zr)})}),M=Je=>si(Je,b),$=Je=>Q0(l).bind(sn=>M(sn).map(ze=>Je(ze,sn))),j=(Je,sn)=>{$(ze=>{l.formatter.toggle("tableclass",{value:sn},ze.dom),sr(l,ze.dom,k1)})},K=(Je,sn)=>{$(ze=>{const Dt=yc(l),go=Wo(Dt,Ut=>l.formatter.match("tablecellclass",{value:sn},Ut.dom))?l.formatter.remove:l.formatter.apply;je(Dt,Ut=>go("tablecellclass",{value:sn},Ut.dom)),sr(l,ze.dom,k1)})},ue=()=>{gi(l).each(Je=>{si(Je,b).each(sn=>{Un(sn,"caption").fold(()=>{const ze=xt.fromTag("caption");jo(ze,xt.fromText("Caption")),Kh(sn,ze,0),l.selection.setCursorLocation(ze.dom,0)},ze=>{Ta("caption")(Je)&&Am("td",sn).each(Dt=>l.selection.setCursorLocation(Dt.dom,0)),ws(ze)}),sr(l,sn.dom,Zr)})})},ve=Je=>{l.focus()},Ke=(Je,sn=!1)=>$((ze,Dt)=>{const ho=yr(yc(l),ze,Dt);Je(ze,ho,sn).each(ve)}),wt=()=>$((Je,sn)=>{const ze=yr(yc(l),Je,sn),Dt=h2(Ne,xt.fromDom(l.getDoc()),le.none());return Bi(Je,ze,Dt)}),it=()=>$((Je,sn)=>{const ze=yr(yc(l),Je,sn);return OA(Je,ze)}),ut=(Je,sn)=>sn().each(ze=>{const Dt=bn(ze,ho=>Er(ho));$((ho,go)=>{const Ut=g2(xt.fromDom(l.getDoc())),Lo=Ix(yc(l),go,Dt,Ut);Je(ho,Lo).each(ve)})}),It=Je=>(sn,ze)=>qi(ze,"type").each(Dt=>{Ke(Je(Dt),ze.no_events)});as({mceTableSplitCells:()=>Ke(m.unmergeCells),mceTableMergeCells:()=>Ke(m.mergeCells),mceTableInsertRowBefore:()=>Ke(m.insertRowsBefore),mceTableInsertRowAfter:()=>Ke(m.insertRowsAfter),mceTableInsertColBefore:()=>Ke(m.insertColumnsBefore),mceTableInsertColAfter:()=>Ke(m.insertColumnsAfter),mceTableDeleteCol:()=>Ke(m.deleteColumn),mceTableDeleteRow:()=>Ke(m.deleteRow),mceTableCutCol:()=>it().each(Je=>{hC(Je),Ke(m.deleteColumn)}),mceTableCutRow:()=>wt().each(Je=>{fC(Je),Ke(m.deleteRow)}),mceTableCopyCol:()=>it().each(Je=>hC(Je)),mceTableCopyRow:()=>wt().each(Je=>fC(Je)),mceTablePasteColBefore:()=>ut(m.pasteColsBefore,NE),mceTablePasteColAfter:()=>ut(m.pasteColsAfter,NE),mceTablePasteRowBefore:()=>ut(m.pasteRowsBefore,fh),mceTablePasteRowAfter:()=>ut(m.pasteRowsAfter,fh),mceTableDelete:S,mceTableCellToggleClass:K,mceTableToggleClass:j,mceTableToggleCaption:ue,mceTableSizingMode:(Je,sn)=>A(sn),mceTableCellType:It(Je=>Je==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:It(Je=>Je==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:It(Je=>{switch(Je){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(Je,sn)=>l.addCommand(sn,Je)),l.addCommand("mceInsertTable",(Je,sn)=>{$A(l,sn.rows,sn.columns,sn.options)}),l.addCommand("mceTableApplyCellStyle",(Je,sn)=>{const ze=go=>"tablecell"+go.toLowerCase().replace("-","");if(!te(sn))return;const Dt=gs(yc(l),Qf);if(Dt.length===0)return;const ho=ti(sn,(go,Ut)=>l.formatter.has(ze(Ut))&&Q(go));Vl(ho)||(as(ho,(go,Ut)=>{const Lo=ze(Ut);je(Dt,Xa=>{go===""?l.formatter.remove(Lo,{value:null},Xa.dom,!0):l.formatter.apply(Lo,{value:go},Xa.dom)})}),M(Dt[0]).each(go=>sr(l,go.dom,k1)))})},gC=(l,m)=>{const b=Ku(l),S=A=>$x(v0(l)).bind(M=>si(M,b).map($=>{const j=yr(yc(l),$,M);return A($,j)})).getOr("");as({mceTableRowType:()=>S(m.getTableRowType),mceTableCellType:()=>S(m.getTableCellType),mceTableColType:()=>S(m.getTableColType)},(A,M)=>l.addQueryValueHandler(M,A))},pC=fi.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),rd=(l,m,b,S)=>l.fold(m,b,S),tv=l=>l.fold(we,we,we),HA=pC.before,Qm=pC.on,nv=pC.after,pi={before:HA,on:Qm,after:nv,cata:rd,getStart:tv},Dg={create:(l,m)=>({selection:l,kill:m})},VA=(l,m)=>{const b=l.document.createRange();return b.selectNode(m.dom),b},D1=(l,m)=>{const b=l.document.createRange();return zA(b,m),b},zA=(l,m)=>l.selectNodeContents(m.dom),UA=(l,m)=>{m.fold(b=>{l.setStartBefore(b.dom)},(b,S)=>{l.setStart(b.dom,S)},b=>{l.setStartAfter(b.dom)})},LE=(l,m)=>{m.fold(b=>{l.setEndBefore(b.dom)},(b,S)=>{l.setEnd(b.dom,S)},b=>{l.setEndAfter(b.dom)})},IE=(l,m,b)=>{const S=l.document.createRange();return UA(S,m),LE(S,b),S},ov=(l,m,b,S,A)=>{const M=l.document.createRange();return M.setStart(m.dom,b),M.setEnd(S.dom,A),M},WA=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),ZA=l=>{const m=l.getClientRects(),b=m.length>0?m[0]:l.getBoundingClientRect();return b.width>0||b.height>0?le.some(b).map(WA):le.none()},M1=fi.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),bC=(l,m,b)=>m(xt.fromDom(b.startContainer),b.startOffset,xt.fromDom(b.endContainer),b.endOffset),vC=(l,m)=>m.match({domRange:b=>({ltr:Y(b),rtl:le.none}),relative:(b,S)=>({ltr:$f(()=>IE(l,b,S)),rtl:$f(()=>le.some(IE(l,S,b)))}),exact:(b,S,A,M)=>({ltr:$f(()=>ov(l,b,S,A,M)),rtl:$f(()=>le.some(ov(l,A,M,b,S)))})}),FE=(l,m)=>{const b=m.ltr();return b.collapsed?m.rtl().filter(A=>A.collapsed===!1).map(A=>M1.rtl(xt.fromDom(A.endContainer),A.endOffset,xt.fromDom(A.startContainer),A.startOffset)).getOrThunk(()=>bC(l,M1.ltr,b)):bC(l,M1.ltr,b)},$E=(l,m)=>{const b=vC(l,m);return FE(l,b)},sv=(l,m)=>$E(l,m).match({ltr:(S,A,M,$)=>{const j=l.document.createRange();return j.setStart(S.dom,A),j.setEnd(M.dom,$),j},rtl:(S,A,M,$)=>{const j=l.document.createRange();return j.setStart(M.dom,$),j.setEnd(S.dom,A),j}});M1.ltr,M1.rtl;const Mg={create:(l,m,b,S)=>({start:l,soffset:m,finish:b,foffset:S})},P1={create:(l,m,b,S)=>({start:pi.on(l,m),finish:pi.on(b,S)})},N1=(l,m)=>{const b=sv(l,m);return Mg.create(xt.fromDom(b.startContainer),b.startOffset,xt.fromDom(b.endContainer),b.endOffset)},rv=P1.create,qA=(l,m,b,S,A,M,$)=>Qo(b,A)&&S===M?le.none():Vr(b,"td,th",m).bind(j=>Vr(A,"td,th",m).bind(K=>HE(l,m,j,K,$))),HE=(l,m,b,S,A)=>Qo(b,S)?le.none():vc(b,S,m).bind(M=>{const $=M.boxes.getOr([]);return $.length>1?(A(l,$,M.start,M.finish),le.some(Dg.create(le.some(rv(b,0,b,Ma(b))),!0))):le.none()}),jA=(l,m,b,S,A)=>{const M=$=>(A.clearBeforeUpdate(b),A.selectRange(b,$.boxes,$.start,$.finish),$.boxes);return x2(S,l,m,A.firstSelectedSelector,A.lastSelectedSelector).map(M)},yC=(l,m)=>({item:l,mode:m}),CC=(l,m,b,S=am)=>l.property().parent(m).map(A=>yC(A,S)),am=(l,m,b,S=B1)=>b.sibling(l,m).map(A=>yC(A,S)),B1=(l,m,b,S=B1)=>{const A=l.property().children(m);return b.first(A).map($=>yC($,S))},GA=[{current:CC,next:am,fallback:le.none()},{current:am,next:B1,fallback:le.some(CC)},{current:B1,next:B1,fallback:le.some(am)}],SC=(l,m,b,S,A=GA)=>V(A,$=>$.current===b).bind($=>$.current(l,m,S,$.next).orThunk(()=>$.fallback.bind(j=>SC(l,m,j,S)))),zE={left:()=>({sibling:(b,S)=>b.query().prevSibling(S),first:b=>b.length>0?le.some(b[b.length-1]):le.none()}),right:()=>({sibling:(b,S)=>b.query().nextSibling(S),first:b=>b.length>0?le.some(b[0]):le.none()})},wC=(l,m,b,S,A,M)=>SC(l,m,S,A).bind(j=>M(j.item)?le.none():b(j.item)?le.some(j.item):wC(l,j.item,b,j.mode,A,M)),ef=(l,m,b,S)=>wC(l,m,b,am,zE.left(),S),KA=(l,m,b,S)=>wC(l,m,b,am,zE.right(),S),xC=l=>m=>l.property().children(m).length===0,EC=(l,m,b)=>av(l,m,xC(l),b),TC=(l,m,b)=>kC(l,m,xC(l),b),av=ef,kC=KA,iv=fg(),Pg=(l,m)=>EC(iv,l,m),_C=(l,m)=>TC(iv,l,m),XA=(l,m,b)=>av(iv,l,m,b),YA=(l,m,b)=>kC(iv,l,m,b),hh=(l,m,b)=>Xe(l,m,b).isSome(),L1=fi.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),UE=(l,m,b)=>{const S=l.getRect(m),A=l.getRect(b);return A.right>S.left&&A.left<S.right},bi=l=>Vr(l,"tr"),Ng={...L1,verify:(l,m,b,S,A,M,$)=>Vr(S,"td,th",$).bind(j=>Vr(m,"td,th",$).map(K=>Qo(j,K)?Qo(S,j)&&Ma(j)===A?M(K):L1.none("in same cell"):gg(bi,[j,K]).fold(()=>UE(l,K,j)?L1.success():M(K),ue=>M(K)))).getOr(L1.none("default")),cata:(l,m,b,S,A)=>l.fold(m,b,S,A)},WE=(l,m,b,S)=>({parent:l,children:m,element:b,index:S}),ZE=l=>_a(l).bind(m=>{const b=Fo(m);return I1(b,l).map(S=>WE(m,b,l,S))}),I1=(l,m)=>Hl(l,lt(Qo,m)),tf=Ta("br"),AC=(l,m,b)=>m(l,b).bind(S=>Lc(S)&&Wu(S).trim().length===0?AC(S,m,b):le.some(S)),qE=(l,m,b)=>b.traverse(m).orThunk(()=>AC(m,b.gather,l)).map(b.relative),QA=(l,m)=>Os(l,m).filter(tf).orThunk(()=>Os(l,m-1).filter(tf)),jE=(l,m,b,S)=>QA(m,b).bind(A=>S.traverse(A).fold(()=>AC(A,S.gather,l).map(S.relative),M=>ZE(M).map($=>pi.on($.parent,$.index)))),F1=(l,m,b,S)=>(tf(m)?qE(l,m,S):jE(l,m,b,S)).map(M=>({start:M,finish:M})),GE=l=>Ng.cata(l,m=>le.none(),()=>le.none(),m=>le.some(Mi(m,0)),m=>le.some(Mi(m,Ma(m)))),$1=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),Bg=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),OC=(l,m,b)=>({left:l.left+m,top:l.top+b,right:l.right+m,bottom:l.bottom+b}),Lg=l=>l.top,gh=l=>l.bottom,ph=(l,m,b)=>b>=0&&b<Ma(m)?l.getRangedRect(m,b,m,b+1):b>0?l.getRangedRect(m,b-1,m,b):le.none(),im=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),RC=(l,m)=>le.some(l.getRect(m)),ad=(l,m,b)=>ea(m)?RC(l,m).map(im):Lc(m)?ph(l,m,b).map(im):le.none(),Cl=(l,m)=>ea(m)?RC(l,m).map(im):Lc(m)?l.getRangedRect(m,0,m,Ma(m)).map(im):le.none(),id=5,DC=100,uu=fi.generate([{none:[]},{retry:["caret"]}]),MC=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,bh=(l,m,b)=>Xl(m,w1).fold(ln,S=>Cl(l,S).exists(A=>MC(b,A))),Ig=(l,m,b,S,A)=>{const M=$1(A,id);return Math.abs(b.bottom-S.bottom)<1||b.top>A.bottom?uu.retry(M):b.top===A.bottom?uu.retry($1(A,1)):bh(l,m,A)?uu.retry(OC(M,id,0)):uu.none()},XE={point:Lg,adjuster:(l,m,b,S,A)=>{const M=Bg(A,id);return Math.abs(b.top-S.top)<1||b.bottom<A.top?uu.retry(M):b.bottom===A.top?uu.retry(Bg(A,1)):bh(l,m,A)?uu.retry(OC(M,id,0)):uu.none()},move:Bg,gather:Pg},H1={point:gh,adjuster:Ig,move:$1,gather:_C},cv=(l,m,b)=>l.elementFromPoint(m,b).filter(S=>qo(S)==="table").isSome(),e3=(l,m,b,S,A)=>V1(l,m,b,m.move(S,id),A),V1=(l,m,b,S,A)=>A===0?le.some(S):cv(l,S.left,m.point(S))?e3(l,m,b,S,A-1):l.situsFromPoint(S.left,m.point(S)).bind(M=>M.start.fold(le.none,$=>Cl(l,$).bind(j=>m.adjuster(l,$,j,b,S).fold(le.none,K=>V1(l,m,b,K,A-1))).orThunk(()=>le.some(S)),le.none)),lv=(l,m,b)=>l.point(m)>b.getInnerHeight()?le.some(l.point(m)-b.getInnerHeight()):l.point(m)<0?le.some(-l.point(m)):le.none(),YE=(l,m,b)=>{const S=l.move(b,id),A=V1(m,l,b,S,DC).getOr(S);return lv(l,A,m).fold(()=>m.situsFromPoint(A.left,l.point(A)),M=>(m.scrollBy(0,M),m.situsFromPoint(A.left,l.point(A)-M)))},Sl={tryUp:lt(YE,XE),tryDown:lt(YE,H1),getJumpSize:Y(id)},JE=20,uv=(l,m,b)=>l.getSelection().bind(S=>F1(m,S.finish,S.foffset,b).fold(()=>le.some(Mi(S.finish,S.foffset)),A=>{const M=l.fromSitus(A),$=Ng.verify(l,S.finish,S.foffset,M.finish,M.foffset,b.failure,m);return GE($)})),vh=(l,m,b,S,A,M)=>M===0?le.none():NN(l,m,b,S,A).bind($=>{const j=l.fromSitus($),K=Ng.verify(l,b,S,j.finish,j.foffset,A.failure,m);return Ng.cata(K,()=>le.none(),()=>le.some($),ue=>Qo(b,ue)&&S===0?QE(l,b,S,Bg,A):vh(l,m,ue,0,A,M-1),ue=>Qo(b,ue)&&S===Ma(ue)?QE(l,b,S,$1,A):vh(l,m,ue,Ma(ue),A,M-1))}),QE=(l,m,b,S,A)=>ad(l,m,b).bind(M=>z1(l,A,S(M,Sl.getJumpSize()))),z1=(l,m,b)=>{const S=ul().browser;return S.isChromium()||S.isSafari()||S.isFirefox()?m.retry(l,b):le.none()},NN=(l,m,b,S,A)=>ad(l,b,S).bind(M=>z1(l,A,M)),eT=(l,m,b)=>uv(l,m,b).bind(S=>vh(l,m,S.element,S.offset,b,JE).map(l.fromSitus)),ga=(l,m)=>hh(l,b=>_a(b).exists(S=>Qo(S,m))),dv=(l,m,b,S,A)=>Vr(S,"td,th",m).bind(M=>Vr(M,"table",m).bind($=>ga(A,$)?eT(l,m,b).bind(j=>Vr(j.finish,"td,th",m).map(K=>({start:M,finish:K,range:j}))):le.none())),nf=(l,m,b,S,A,M)=>M(S,m).orThunk(()=>dv(l,m,b,S,A).map($=>{const j=$.range;return Dg.create(le.some(rv(j.start,j.soffset,j.finish,j.foffset)),!0)})),Sc=(l,m)=>Vr(l,"tr",m).bind(b=>Vr(b,"table",m).bind(S=>{const A=ta(S,"tr");return Qo(b,A[0])?XA(S,M=>Zu(M).isSome(),m).map(M=>{const $=Ma(M);return Dg.create(le.some(rv(M,$,M,$)),!0)}):le.none()})),tT=(l,m)=>Vr(l,"tr",m).bind(b=>Vr(b,"table",m).bind(S=>{const A=ta(S,"tr");return Qo(b,A[A.length-1])?YA(S,M=>Ox(M).isSome(),m).map(M=>Dg.create(le.some(rv(M,0,M,0)),!0)):le.none()})),mv=(l,m,b,S,A,M,$)=>dv(l,b,S,A,M).bind(j=>HE(m,b,j.start,j.finish,$)),U1=l=>{let m=l;return{get:()=>m,set:A=>{m=A}}},nT=l=>{const m=U1(le.none()),b=()=>m.get().each(l);return{clear:()=>{b(),m.set(le.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:j=>{b(),m.set(le.some(j))}}},W1=()=>{const l=nT(Ne);return{...l,on:b=>l.get().each(b)}},oT=(l,m)=>Vr(l,"td,th",m),yh=l=>Mu(l).exists(Gu),wc=(l,m,b,S)=>{const A=W1(),M=A.clear,$=ve=>{A.on(Ke=>{S.clearBeforeUpdate(m),oT(ve.target,b).each(wt=>{vc(Ke,wt,b).each(it=>{const ut=it.boxes.getOr([]);if(ut.length===1){const It=ut[0],Je=Dx(It)==="false",sn=Lf(dg(ve.target),It,Qo);Je&&sn&&S.selectRange(m,ut,It,It)}else ut.length>1&&(S.selectRange(m,ut,it.start,it.finish),l.selectContents(wt))})})})};return{clearstate:M,mousedown:ve=>{S.clear(m),oT(ve.target,b).filter(yh).each(A.set)},mouseover:ve=>{$(ve)},mouseup:ve=>{$(ve),M()}}},of={traverse:xi,gather:_C,relative:pi.before,retry:Sl.tryDown,failure:Ng.failedDown},du={traverse:Rf,gather:Pg,relative:pi.before,retry:Sl.tryUp,failure:Ng.failedUp},wl=l=>m=>m===l,pa=wl(38),ia=wl(40),Sr=l=>l>=37&&l<=40,xl={isBackward:wl(37),isForward:wl(39)},fv={isBackward:wl(39),isForward:wl(37)},xc=l=>{const m=l!==void 0?l.dom:document,b=m.body.scrollLeft||m.documentElement.scrollLeft,S=m.body.scrollTop||m.documentElement.scrollTop;return Zt(b,S)},Ch=(l,m,b)=>{const A=(b!==void 0?b.dom:document).defaultView;A&&A.scrollBy(l,m)},hv=fi.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),sT=l=>hv.exact(l.start,l.soffset,l.finish,l.foffset),rT=l=>l.match({domRange:m=>xt.fromDom(m.startContainer),relative:(m,b)=>pi.getStart(m),exact:(m,b,S,A)=>m}),aT=hv.domRange,iT=hv.relative,gv=hv.exact,cT=l=>{const m=rT(l);return $s(m)},lT=Mg.create,Fg={domRange:aT,relative:iT,exact:gv,exactFromRange:sT,getWin:cT,range:lT},uT=(l,m,b)=>{var S;return le.from((S=l.caretPositionFromPoint)===null||S===void 0?void 0:S.call(l,m,b)).bind(A=>{if(A.offsetNode===null)return le.none();const M=l.createRange();return M.setStart(A.offsetNode,A.offset),M.collapse(),le.some(M)})},t3=(l,m,b)=>{var S;return le.from((S=l.caretRangeFromPoint)===null||S===void 0?void 0:S.call(l,m,b))},n3=(l,m,b)=>l.caretPositionFromPoint?uT(l,m,b):l.caretRangeFromPoint?t3(l,m,b):le.none(),dT=(l,m,b)=>{const S=l.document;return n3(S,m,b).map(A=>Mg.create(xt.fromDom(A.startContainer),A.startOffset,xt.fromDom(A.endContainer),A.endOffset))},$g=(l,m)=>{const b=qo(l);return b==="input"?pi.after(l):Do(["br","img"],b)?m===0?pi.before(l):pi.after(l):pi.on(l,m)},o3=(l,m)=>{const b=l.fold(pi.before,$g,pi.after),S=m.fold(pi.before,$g,pi.after);return Fg.relative(b,S)},s3=(l,m,b,S)=>{const A=$g(l,m),M=$g(b,S);return Fg.relative(A,M)},eo=(l,m,b,S)=>{const M=ql(l).dom.createRange();return M.setStart(l.dom,m),M.setEnd(b.dom,S),M},cm=(l,m,b,S)=>{const A=eo(l,m,b,S),M=Qo(l,b)&&m===S;return A.collapsed&&!M},lm=l=>le.from(l.getSelection()),pv=(l,m)=>{lm(l).each(b=>{b.removeAllRanges(),b.addRange(m)})},PC=(l,m,b,S,A)=>{const M=ov(l,m,b,S,A);pv(l,M)},ec=(l,m,b,S,A,M)=>{m.collapse(b.dom,S),m.extend(A.dom,M)},r3=(l,m)=>$E(l,m).match({ltr:(b,S,A,M)=>{PC(l,b,S,A,M)},rtl:(b,S,A,M)=>{lm(l).each($=>{if($.setBaseAndExtent)$.setBaseAndExtent(b.dom,S,A.dom,M);else if($.extend)try{ec(l,$,b,S,A,M)}catch{PC(l,A,M,b,S)}else PC(l,A,M,b,S)})}}),Sh=(l,m,b,S,A)=>{const M=s3(m,b,S,A);r3(l,M)},cd=(l,m,b)=>{const S=o3(m,b);r3(l,S)},Z1=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),b=l.getRangeAt(l.rangeCount-1);return le.some(Mg.create(xt.fromDom(m.startContainer),m.startOffset,xt.fromDom(b.endContainer),b.endOffset))}else return le.none()},mT=l=>{if(l.anchorNode===null||l.focusNode===null)return Z1(l);{const m=xt.fromDom(l.anchorNode),b=xt.fromDom(l.focusNode);return cm(m,l.anchorOffset,b,l.focusOffset)?le.some(Mg.create(m,l.anchorOffset,b,l.focusOffset)):Z1(l)}},a3=(l,m,b=!0)=>{const A=(b?D1:VA)(l,m);pv(l,A)},BN=l=>lm(l).filter(m=>m.rangeCount>0).bind(mT),fT=l=>BN(l).map(m=>Fg.exact(m.start,m.soffset,m.finish,m.foffset)),LN=(l,m)=>{const b=sv(l,m);return ZA(b)},hT=(l,m,b)=>dT(l,m,b),wh=l=>{lm(l).each(m=>m.removeAllRanges())},xh=l=>({elementFromPoint:(Je,sn)=>xt.fromPoint(xt.fromDom(l.document),Je,sn),getRect:Je=>Je.dom.getBoundingClientRect(),getRangedRect:(Je,sn,ze,Dt)=>{const ho=Fg.exact(Je,sn,ze,Dt);return LN(l,ho)},getSelection:()=>fT(l).map(Je=>N1(l,Je)),fromSitus:Je=>{const sn=Fg.relative(Je.start,Je.finish);return N1(l,sn)},situsFromPoint:(Je,sn)=>hT(l,Je,sn).map(ze=>P1.create(ze.start,ze.soffset,ze.finish,ze.foffset)),clearSelection:()=>{wh(l)},collapseSelection:(Je=!1)=>{fT(l).each(sn=>sn.fold(ze=>ze.collapse(Je),(ze,Dt)=>{const ho=Je?ze:Dt;cd(l,ho,ho)},(ze,Dt,ho,go)=>{const Ut=Je?ze:ho,Lo=Je?Dt:go;Sh(l,Ut,Lo,Ut,Lo)}))},setSelection:Je=>{Sh(l,Je.start,Je.soffset,Je.finish,Je.foffset)},setRelativeSelection:(Je,sn)=>{cd(l,Je,sn)},selectNode:Je=>{a3(l,Je,!1)},selectContents:Je=>{a3(l,Je)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>xc(xt.fromDom(l.document)).top,scrollBy:(Je,sn)=>{Ch(Je,sn,xt.fromDom(l.document))}}),Eh=(l,m)=>({rows:l,cols:m}),IN=(l,m,b,S)=>{const A=xh(l),M=wc(A,m,b,S);return{clearstate:M.clearstate,mousedown:M.mousedown,mouseover:M.mouseover,mouseup:M.mouseup}},NC=l=>Xl(l,un).exists(Gu),Hg=(l,m)=>NC(l)||NC(m),BC=(l,m,b,S)=>{const A=xh(l),M=()=>(S.clear(m),le.none());return{keydown:(K,ue,ve,Ke,wt,it)=>{const ut=K.raw,It=ut.which,Je=ut.shiftKey===!0;return Ju(m,S.selectedSelector).fold(()=>(Sr(It)&&!Je&&S.clearBeforeUpdate(m),Sr(It)&&Je&&!Hg(ue,Ke)?le.none:ia(It)&&Je?lt(mv,A,m,b,of,Ke,ue,S.selectRange):pa(It)&&Je?lt(mv,A,m,b,du,Ke,ue,S.selectRange):ia(It)?lt(nf,A,b,of,Ke,ue,tT):pa(It)?lt(nf,A,b,du,Ke,ue,Sc):le.none),ze=>{const Dt=ho=>()=>ir(ho,Ut=>jA(Ut.rows,Ut.cols,m,ze,S)).fold(()=>Nx(m,S.firstSelectedSelector,S.lastSelectedSelector).map(Ut=>{const Lo=ia(It)||it.isForward(It)?pi.after:pi.before;return A.setRelativeSelection(pi.on(Ut.first,0),Lo(Ut.table)),S.clear(m),Dg.create(le.none(),!0)}),Ut=>le.some(Dg.create(le.none(),!0)));return Sr(It)&&Je&&!Hg(ue,Ke)?le.none:ia(It)&&Je?Dt([Eh(1,0)]):pa(It)&&Je?Dt([Eh(-1,0)]):it.isBackward(It)&&Je?Dt([Eh(0,-1),Eh(-1,0)]):it.isForward(It)&&Je?Dt([Eh(0,1),Eh(1,0)]):Sr(It)&&!Je?M:le.none})()},keyup:(K,ue,ve,Ke,wt)=>Ju(m,S.selectedSelector).fold(()=>{const it=K.raw,ut=it.which;return it.shiftKey===!0&&Sr(ut)&&Hg(ue,Ke)?qA(m,b,ue,ve,Ke,wt,S.selectRange):le.none()},le.none)}},LC=(l,m,b,S)=>{const A=xh(l);return(M,$)=>{S.clearBeforeUpdate(m),vc(M,$,b).each(j=>{const K=j.boxes.getOr([]);S.selectRange(m,K,j.start,j.finish),A.selectContents($),A.collapseSelection()})}},Vg=(l,m)=>{const b=Ic(l,m);return b===void 0||b===""?[]:b.split(" ")},IC=(l,m,b)=>{const A=Vg(l,m).concat([b]);return As(l,m,A.join(" ")),!0},gT=(l,m,b)=>{const S=gs(Vg(l,m),A=>A!==b);return S.length>0?As(l,m,S.join(" ")):is(l,m),!1},sf=l=>l.dom.classList!==void 0,FC=l=>Vg(l,"class"),i3=(l,m)=>IC(l,"class",m),pT=(l,m)=>gT(l,"class",m),um=(l,m)=>{sf(l)?l.dom.classList.add(m):i3(l,m)},bT=l=>{(sf(l)?l.dom.classList:FC(l)).length===0&&is(l,"class")},$C=(l,m)=>{sf(l)?l.dom.classList.remove(m):pT(l,m),bT(l)},rf=(l,m)=>sf(l)&&l.dom.classList.contains(m),HC=(l,m)=>{je(m,b=>{$C(l,b)})},Et=l=>m=>{um(m,l)},qr=l=>m=>{HC(m,l)},Ec={byClass:l=>{const m=Et(l.selected),b=qr([l.selected,l.lastSelected,l.firstSelected]),S=M=>{const $=ta(M,l.selectedSelector);je($,b)};return{clearBeforeUpdate:S,clear:S,selectRange:(M,$,j,K)=>{S(M),je($,m),um(j,l.firstSelected),um(K,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,b)=>{const S=K=>{is(K,l.selected),is(K,l.firstSelected),is(K,l.lastSelected)},A=K=>{As(K,l.selected,"1")},M=K=>{$(K),b()},$=K=>{const ue=ta(K,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);je(ue,S)};return{clearBeforeUpdate:$,clear:M,selectRange:(K,ue,ve,Ke)=>{M(K),je(ue,A),As(ve,l.firstSelected,"1"),As(Ke,l.lastSelected,"1"),m(ue,ve,Ke)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},vv=(l,m,b,S)=>{switch(l.tag){case"none":return m();case"single":return S(l.element);case"multiple":return b(l.elements)}},Th=()=>({tag:"none"}),yv=l=>({tag:"multiple",elements:l}),Cv=l=>({tag:"single",element:l}),VC=(l,m,b)=>({get:()=>bg(l(),b).fold(()=>m().fold(Th,Cv),yv)}),vT=(l,m)=>{const b=l.slice(0,m[m.length-1].row+1),S=A0(b);return Fs(S,A=>{const M=A.cells.slice(0,m[m.length-1].column+1);return bn(M,$=>$.element)})},c3=(l,m)=>{const b=l.slice(m[0].row+m[0].rowspan-1,l.length),S=A0(b);return Fs(S,A=>{const M=A.cells.slice(m[0].column+m[0].colspan-1,A.cells.length);return bn(M,$=>$.element)})},ld=(l,m,b)=>{const S=Qn.fromTable(l);return Ji(S,m).map(M=>{const $=wg(S,b,!1),{rows:j}=Pn($),K=vT(j,M),ue=c3(j,M);return{upOrLeftCells:K,downOrRightCells:ue}})},l3=(l,m,b,S,A,M,$)=>({target:l,x:m,y:b,stop:S,prevent:A,kill:M,raw:$}),zC=l=>{const m=xt.fromDom(Ve(l).getOr(l.target)),b=()=>l.stopPropagation(),S=()=>l.preventDefault(),A=Vt(S,b);return l3(m,l.clientX,l.clientY,b,S,A,l)},qc=(l,m)=>b=>{l(b)&&m(zC(b))},Dr=(l,m,b,S,A)=>{const M=qc(b,S);return l.dom.addEventListener(m,M,A),{unbind:lt(zg,l,m,M,A)}},Sv=(l,m,b,S)=>Dr(l,m,b,S,!1),zg=(l,m,b,S)=>{l.dom.removeEventListener(m,b,S)},UC=Ee,ud=(l,m,b)=>Sv(l,m,UC,b),dm=zC,af=l=>!rf(xt.fromDom(l.target),"ephox-snooker-resizer-bar"),q1=(l,m)=>{const b=VC(()=>xt.fromDom(l.getBody()),()=>$x(v0(l),Ku(l)),Yi.selectedSelector),S=(K,ue,ve)=>{si(ue).each(wt=>{const it=bn(K,ze=>ze.dom),ut=e1(l),It=h2(Ne,xt.fromDom(l.getDoc()),ut),Je=yc(l),sn=ld(wt,{selection:Je},It).map(ze=>_u(ze,Dt=>bn(Dt,ho=>ho.dom))).getOrUndefined();Or(l,it,ue.dom,ve.dom,sn)})},A=()=>Cr(l),M=Ec.byAttr(Yi,S,A);return l.on("init",K=>{const ue=l.getWin(),ve=Jf(l),Ke=Ku(l),wt=()=>{const Co=l.selection,va=xt.fromDom(Co.getStart()),Mr=xt.fromDom(Co.getEnd());gg(si,[va,Mr]).fold(()=>M.clear(ve),Ne)},it=IN(ue,ve,Ke,M),ut=BC(ue,ve,Ke,M),It=LC(ue,ve,Ke,M),Je=Co=>Co.raw.shiftKey===!0;l.on("TableSelectorChange",Co=>It(Co.start,Co.finish));const sn=(Co,va)=>{Je(Co)&&(va.kill&&Co.kill(),va.selection.each(Mr=>{const Gc=Fg.relative(Mr.start,Mr.finish),ya=sv(ue,Gc);l.selection.setRng(ya)}))},ze=Co=>{const va=dm(Co);if(va.raw.shiftKey&&Sr(va.raw.which)){const Mr=l.selection.getRng(),Gc=xt.fromDom(Mr.startContainer),ya=xt.fromDom(Mr.endContainer);ut.keyup(va,Gc,Mr.startOffset,ya,Mr.endOffset).each(Tl=>{sn(va,Tl)})}},Dt=Co=>{const va=dm(Co);m.hide();const Mr=l.selection.getRng(),Gc=xt.fromDom(Mr.startContainer),ya=xt.fromDom(Mr.endContainer),Tl=z(xl,fv)(xt.fromDom(l.selection.getStart()));ut.keydown(va,Gc,Mr.startOffset,ya,Mr.endOffset,Tl).each(Ya=>{sn(va,Ya)}),m.show()},ho=Co=>Co.button===0,go=Co=>Co.buttons===void 0?!0:(Co.buttons&1)!==0,Ut=Co=>{it.clearstate()},Lo=Co=>{ho(Co)&&af(Co)&&it.mousedown(dm(Co))},Xa=Co=>{go(Co)&&af(Co)&&it.mouseover(dm(Co))},cf=Co=>{ho(Co)&&af(Co)&&it.mouseup(dm(Co))},Zn=(()=>{const Co=U1(xt.fromDom(ve)),va=U1(0);return{touchEnd:Gc=>{const ya=xt.fromDom(Gc.target);if(Ta("td")(ya)||Ta("th")(ya)){const Tl=Co.get(),Ya=va.get();Qo(Tl,ya)&&Gc.timeStamp-Ya<300&&(Gc.preventDefault(),It(ya,ya))}Co.set(ya),va.set(Gc.timeStamp)}}})();l.on("dragstart",Ut),l.on("mousedown",Lo),l.on("mouseover",Xa),l.on("mouseup",cf),l.on("touchend",Zn.touchEnd),l.on("keyup",ze),l.on("keydown",Dt),l.on("NodeChange",wt)}),l.on("PreInit",()=>{l.serializer.addTempAttr(Yi.firstSelected),l.serializer.addTempAttr(Yi.lastSelected)}),{getSelectedCells:()=>vv(b.get(),Y([]),K=>bn(K,ue=>ue.dom),K=>[K.dom]),clearSelectedCells:K=>M.clear(xt.fromDom(K))}},Li=l=>{let m=[];return{bind:M=>{if(M===void 0)throw new Error("Event bind error: undefined handler");m.push(M)},unbind:M=>{m=gs(m,$=>$!==M)},trigger:(...M)=>{const $={};je(l,(j,K)=>{$[j]=M[K]}),je(m,j=>{j($)})}}},kh=l=>{const m=_u(l,S=>({bind:S.bind,unbind:S.unbind})),b=_u(l,S=>S.trigger);return{registry:m,trigger:b}},u3=(l,m)=>{let b=null;const S=()=>{_e(b)||(clearTimeout(b),b=null)};return{cancel:S,throttle:(...M)=>{S(),b=setTimeout(()=>{b=null,l.apply(null,M)},m)}}},Ug=l=>l.slice(0).sort(),yT=(l,m)=>{throw new Error("All required keys ("+Ug(l).join(", ")+") were not specified. Specified keys were: "+Ug(m).join(", ")+".")},CT=l=>{throw new Error("Unsupported keys for object: "+Ug(l).join(", "))},ST=(l,m)=>{if(!Ce(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");je(m,b=>{if(!Q(b))throw new Error("The value "+b+" in the "+l+" fields was not a string.")})},wT=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+Ug(l).join(", ")+") were not.")},j1=l=>{const m=Ug(l);V(m,(S,A)=>A<m.length-1&&S===m[A+1]).each(S=>{throw new Error("The field: "+S+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},ba=(l,m)=>jc(l,m,{validate:ot,label:"function"}),jc=(l,m,b)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return ST("required",m),j1(m),S=>{const A=an(S);Wo(m,j=>Do(A,j))||yT(m,A),l(m,A);const $=gs(m,j=>!b.validate(S[j],j));return $.length>0&&wT($,b.label),S}},Ii=(l,m)=>{const b=gs(m,S=>!Do(l,S));b.length>0&&CT(b)},_h=l=>ba(Ii,l),mm=_h(["compare","extract","mutate","sink"]),G1=_h(["element","start","stop","destroy"]),WC=_h(["forceDrop","drop","move","delayDrop"]),d3=()=>{let l=le.none();const m=()=>{l=le.none()},b=(M,$)=>{const j=l.map(K=>M.compare(K,$));return l=le.some($),j},S=(M,$)=>{$.extract(M).each(K=>{b($,K).each(ve=>{A.trigger.move(ve)})})},A=kh({move:Li(["info"])});return{onEvent:S,reset:m,events:A.registry}},ZC=()=>{const l=kh({move:Li(["info"])});return{onEvent:Ne,reset:Ne,events:l.registry}},m3=()=>{const l=ZC(),m=d3();let b=l;return{on:()=>{b.reset(),b=m},off:()=>{b.reset(),b=l},isOn:()=>b===m,onEvent:(j,K)=>{b.onEvent(j,K)},events:m.events}},wv=(l,m,b)=>{let S=!1;const A=kh({start:Li([]),stop:Li([])}),M=m3(),$=()=>{ut.stop(),M.isOn()&&(M.off(),A.trigger.stop())},j=u3($,200),K=Je=>{ut.start(Je),M.on(),A.trigger.start()},ue=Je=>{j.cancel(),M.onEvent(Je,m)};M.events.move.bind(Je=>{m.mutate(l,Je.info)});const ve=()=>{S=!0},Ke=()=>{S=!1},wt=()=>S,it=Je=>(...sn)=>{S&&Je.apply(null,sn)},ut=m.sink(WC({forceDrop:$,drop:it($),move:it(ue),delayDrop:it(j.throttle)}),b),It=()=>{ut.destroy()};return{element:ut.element,go:K,on:ve,off:Ke,isActive:wt,destroy:It,events:A.registry}},qC=l=>{const m=l.replace(/\./g,"-");return{resolve:S=>m+"-"+S}},xv=qC("ephox-dragster").resolve,jC=l=>{const m={layerClass:xv("blocker"),...l},b=xt.fromTag("div");return As(b,"role","presentation"),kr(b,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),um(b,xv("blocker")),um(b,m.layerClass),{element:Y(b),destroy:()=>{ws(b)}}};var GC=mm({compare:(l,m)=>Zt(m.left-l.left,m.top-l.top),extract:l=>le.some(Zt(l.x,l.y)),sink:(l,m)=>{const b=jC(m),S=ud(b.element(),"mousedown",l.forceDrop),A=ud(b.element(),"mouseup",l.drop),M=ud(b.element(),"mousemove",l.move),$=ud(b.element(),"mouseout",l.delayDrop),j=()=>{b.destroy(),A.unbind(),M.unbind(),$.unbind(),S.unbind()},K=ve=>{jo(ve,b.element())},ue=()=>{ws(b.element())};return G1({element:b.element,start:K,stop:ue,destroy:j})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const Ev=(l,m={})=>{var b;const S=(b=m.mode)!==null&&b!==void 0?b:GC;return wv(l,S,m)},Wg=qC("ephox-snooker").resolve,FN=()=>{const l=kh({drag:Li(["xDelta","yDelta"])});return{mutate:(b,S)=>{l.trigger.drag(b,S)},events:l.registry}},kT=()=>{const l=kh({drag:Li(["xDelta","yDelta","target"])});let m=le.none();const b=FN();return b.events.drag.bind(M=>{m.each($=>{l.trigger.drag(M.xDelta,M.yDelta,$)})}),{assign:M=>{m=le.some(M)},get:()=>m,mutate:b.mutate,events:l.registry}},Tv=(l,m,b,S,A)=>{const M=xt.fromTag("div");return kr(M,{position:"absolute",left:m-S/2+"px",top:b+"px",height:A+"px",width:S+"px"}),wi(M,{"data-column":l,role:"presentation"}),M},f3=(l,m,b,S,A)=>{const M=xt.fromTag("div");return kr(M,{position:"absolute",left:m+"px",top:b-A/2+"px",height:A+"px",width:S+"px"}),wi(M,{"data-row":l,role:"presentation"}),M},K1=Wg("resizer-bar"),_T=Wg("resizer-rows"),XC=Wg("resizer-cols"),AT=7,fm=(l,m)=>Fs(l.all,(b,S)=>m(b.element)?[S]:[]),kv=(l,m)=>{const b=[];return Uo(l.grid.columns,S=>{Qn.getColumnAt(l,S).map(M=>M.element).forall(m)&&b.push(S)}),gs(b,S=>{const A=Qn.filterItems(l,M=>M.column===S);return Wo(A,M=>m(M.element))})},Fi=l=>{const m=ta(l.parent(),"."+K1);je(m,ws)},Ba=(l,m,b)=>{const S=l.origin();je(m,A=>{A.each(M=>{const $=b(S,M);um($,K1),jo(l.parent(),$)})})},Zg=(l,m,b,S)=>{Ba(l,m,(A,M)=>{const $=Tv(M.col,M.x-A.left,b.top-A.top,AT,S);return um($,XC),$})},$N=(l,m,b,S)=>{Ba(l,m,(A,M)=>{const $=f3(M.row,b.left-A.left,M.y-A.top,S,AT);return um($,_T),$})},h3=(l,m,b,S,A)=>{const M=ci(b),$=m.isResizable,j=S.length>0?a0.positions(S,b):[],K=j.length>0?fm(l,$):[],ue=gs(j,(it,ut)=>St(K,It=>ut===It));$N(m,ue,M,uo(b));const ve=A.length>0?c0.positions(A,b):[],Ke=ve.length>0?kv(l,$):[],wt=gs(ve,(it,ut)=>St(Ke,It=>ut===It));Zg(m,wt,M,Rt(b))},YC=(l,m)=>{if(Fi(l),l.isResizable(m)){const b=Qn.fromTable(m),S=_(b),A=o0(b);h3(b,l,m,S,A)}},Xn=(l,m)=>{const b=ta(l.parent(),"."+K1);je(b,m)},qg=l=>{Xn(l,m=>{es(m,"display","none")})},JC=l=>{Xn(l,m=>{es(m,"display","block")})},QC=l=>rf(l,_T),OT=l=>rf(l,XC),RT=Wg("resizer-bar-dragging"),g3=l=>{const m=kT(),b=Ev(m,{});let S=le.none();const A=(ut,It)=>le.from(Ic(ut,It));m.events.drag.bind(ut=>{A(ut.target,"data-row").each(It=>{const Je=cs(ut.target,"top");es(ut.target,"top",Je+ut.yDelta+"px")}),A(ut.target,"data-column").each(It=>{const Je=cs(ut.target,"left");es(ut.target,"left",Je+ut.xDelta+"px")})});const M=(ut,It)=>{const Je=cs(ut,It),sn=ua(ut,"data-initial-"+It,0);return Je-sn};b.events.stop.bind(()=>{m.get().each(ut=>{S.each(It=>{A(ut,"data-row").each(Je=>{const sn=M(ut,"top");is(ut,"data-initial-top"),it.trigger.adjustHeight(It,sn,parseInt(Je,10))}),A(ut,"data-column").each(Je=>{const sn=M(ut,"left");is(ut,"data-initial-left"),it.trigger.adjustWidth(It,sn,parseInt(Je,10))}),YC(l,It)})})});const $=(ut,It)=>{it.trigger.startAdjust(),m.assign(ut),As(ut,"data-initial-"+It,cs(ut,It)),um(ut,RT),es(ut,"opacity","0.2"),b.go(l.dragContainer())},j=ud(l.parent(),"mousedown",ut=>{QC(ut.target)&&$(ut.target,"top"),OT(ut.target)&&$(ut.target,"left")}),K=ut=>Qo(ut,l.view()),ue=ut=>Vr(ut,"table",K).filter(Gu),ve=ud(l.view(),"mouseover",ut=>{ue(ut.target).fold(()=>{Ln(ut.target)&&Fi(l)},It=>{b.isActive()&&(S=le.some(It),YC(l,It))})}),Ke=()=>{j.unbind(),ve.unbind(),b.destroy(),Fi(l)},wt=ut=>{YC(l,ut)},it=kh({adjustHeight:Li(["table","delta","row"]),adjustWidth:Li(["table","delta","column"]),startAdjust:Li([])});return{destroy:Ke,refresh:wt,on:b.on,off:b.off,hideBars:lt(qg,l),showBars:lt(JC,l),events:it.registry}},p3={create:(l,m,b)=>{const S=a0,A=c0,M=g3(l),$=kh({beforeResize:Li(["table","type"]),afterResize:Li(["table","type"]),startDrag:Li([])});return M.events.adjustHeight.bind(j=>{const K=j.table;$.trigger.beforeResize(K,"row");const ue=S.delta(j.delta,K);dh(K,ue,j.row),$.trigger.afterResize(K,"row")}),M.events.startAdjust.bind(j=>{$.trigger.startDrag()}),M.events.adjustWidth.bind(j=>{const K=j.table;$.trigger.beforeResize(K,"col");const ue=A.delta(j.delta,K),ve=b(K);Yx(K,ue,j.column,m,ve),$.trigger.afterResize(K,"col")}),{on:M.on,off:M.off,refreshBars:M.refresh,hideBars:M.hideBars,showBars:M.showBars,destroy:M.destroy,events:$.registry}}},b3=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let _v=0;const eS=l=>{const b=new Date().getTime(),S=Math.floor(b3()*1e9);return _v++,l+"_"+S+_v+String(b)},tS={only:(l,m)=>{const b=Md(l)?Fr(l):l;return{parent:Y(b),view:Y(l),dragContainer:Y(b),origin:Y(Zt(0,0)),isResizable:m}},detached:(l,m,b)=>{const S=()=>ci(m);return{parent:Y(m),view:Y(l),dragContainer:Y(m),origin:S,isResizable:b}},body:(l,m,b)=>({parent:Y(m),view:Y(l),dragContainer:Y(m),origin:Y(Zt(0,0)),isResizable:b}),scrollable:(l,m,b,S)=>({parent:Y(m),view:Y(l),dragContainer:Y(b),origin:()=>ci(m),isResizable:S})},y3=l=>{const m=eS("resizer-container"),b=xt.fromTag("div");return As(b,"id",m),kr(b,{position:l,height:"0",width:"0",padding:"0",margin:"0",border:"0"}),b},C3=(l,m)=>{const b=Di(l),S=xt.fromDom(l.getBody()),A=y3(b?"relative":"static"),M=_n();return b?(Fc(S,A),tS.scrollable(S,A,M,m)):(jo(M,A),tS.body(S,A,m))},Nt=(l,m)=>l.inline?C3(l,m):tS.only(xt.fromDom(l.getDoc()),m),DT=(l,m)=>{l.inline&&ws(m.parent())},MT=l=>Ht(l)&&l.nodeName==="TABLE",nS="bar-",X1=l=>Ic(l,"data-mce-resize")!=="false",S3=l=>{const m=Qn.fromTable(l);Qn.hasColumns(m)||je(zd(l),b=>{const S=Fd(b,"width");es(b,"width",S),is(b,"width")})},jg=l=>Va(l,"corner-"),oS=l=>qy(l,"corner-"),w3=l=>{const m=W1(),b=W1(),S=W1();let A,M,$,j;const K=Dt=>Z0(l,Dt),ue=()=>Uc(l)?u1():E0(),ve=Dt=>d1(Dt).columns,Ke=Dt=>d1(Dt).rows,wt=(Dt,ho,go,Ut)=>{const Lo=oS(ho),Xa=Ti(Lo,"e"),cf=Va(Lo,"n");if(M===""&&Jm(Dt),j===""&&PA(Dt),go!==A&&M!==""){es(Dt,"width",M);const El=ue(),Zn=K(Dt),Co=Uc(l)||Xa?ve(Dt)-1:0;Yx(Dt,go-A,Co,El,Zn)}else if(Um(M)){const El=parseFloat(M.replace("%","")),Zn=go*El/A;es(Dt,"width",Zn+"%")}if(p2(M)&&S3(Dt),Ut!==$&&j!==""){es(Dt,"height",j);const El=cf?0:Ke(Dt)-1;dh(Dt,Ut-$,El)}},it=()=>{b.on(Dt=>{Dt.destroy()}),S.on(Dt=>{DT(l,Dt)})};l.on("init",()=>{const Dt=Nt(l,X1);if(S.set(Dt),h0(l)&&Xd(l)){const ho=ue(),go=p3.create(Dt,ho,K);l.mode.isReadOnly()||go.on(),go.events.startDrag.bind(Ut=>{m.set(l.selection.getRng())}),go.events.beforeResize.bind(Ut=>{const Lo=Ut.table.dom;oC(l,Lo,Mx(Lo),y0(Lo),nS+Ut.type)}),go.events.afterResize.bind(Ut=>{const Lo=Ut.table,Xa=Lo.dom;Xu(Lo),m.on(cf=>{l.selection.setRng(cf),l.focus()}),T1(l,Xa,Mx(Xa),y0(Xa),nS+Ut.type),l.undoManager.add()}),b.set(go)}}),l.on("ObjectResizeStart",Dt=>{const ho=Dt.target;if(MT(ho)&&!l.mode.isReadOnly()){const go=xt.fromDom(ho);je(l.dom.select(".mce-clonedresizable"),Ut=>{l.dom.addClass(Ut,"mce-"+pl(l)+"-columns")}),!kE(go)&&bc(l)?X0(go):!K0(go)&&t1(l)&&Jm(go),_1(go)&&Va(Dt.origin,nS)&&Jm(go),A=Dt.width,M=iu(l)?"":Xi(l,ho).getOr(""),$=Dt.height,j=ma(l,ho).getOr("")}}),l.on("ObjectResized",Dt=>{const ho=Dt.target;if(MT(ho)){const go=xt.fromDom(ho),Ut=Dt.origin;jg(Ut)&&wt(go,Ut,Dt.width,Dt.height),Xu(go),sr(l,go.dom,k1)}});const ut=()=>{b.on(Dt=>{Dt.on(),Dt.showBars()})},It=()=>{b.on(Dt=>{Dt.off(),Dt.hideBars()})};return l.on("DisabledStateChange",Dt=>{Dt.state?It():ut()}),l.on("SwitchMode",()=>{l.mode.isReadOnly()?It():ut()}),l.on("dragstart dragend",Dt=>{Dt.type==="dragstart"?It():ut()}),l.on("remove",()=>{it()}),{refresh:Dt=>{b.on(ho=>ho.refreshBars(xt.fromDom(Dt)))},hide:()=>{b.on(Dt=>Dt.hideBars())},show:()=>{b.on(Dt=>Dt.showBars())}}},Y1=l=>{pc(l);const m=w3(l),b=q1(l,m),S=Lt(l,m,b);return ev(l,S),gC(l,S),qs(l,S),{getSelectedCells:b.getSelectedCells,clearSelectedCells:b.clearSelectedCells}},Ov=l=>({table:Y1(l)});var sS=()=>{C.add("dom",Ov)};sS()}()),KQ}sae();xte();document.addEventListener("turbo:load",function(){Kre.init({selector:"#description",plugins:"lists link code",toolbar:"undo redo | bold italic | bullist mumlist | list | code",height:300,model:"dom",skin:!1,content_css:!1})});const rae=document.getElementById("theme-toggle"),qX=document.documentElement,aae=window.matchMedia("(prefers-color-scheme:dark)").matches,iae=localStorage.getItem("theme")||(aae?"dark":"light");qX.setAttribute("data-theme",iae);rae.addEventListener("click",()=>{const C=qX.getAttribute("data-theme")==="dark"?"light":"dark";qX.setAttribute("data-theme",C),localStorage.setItem("theme",C)});class cae{constructor(f,y){this.element=f,this.options=Object.assign({},{slidesVisible:1,slidesToScroll:1,pagination:!0},y),this.childrens=[].slice.call(this.element.children),this.currentItem=0,this.moveCallbacks=[],this.root=this.createWithClass("caroussel"),this.container=this.createWithClass("caroussel__container"),this.root.appendChild(this.container),this.element.appendChild(this.root),this.items=this.childrens.map(E=>{let N=this.createWithClass("caroussel__item");return N.appendChild(E),this.container.appendChild(N),N}),this.setStyle(),this.createNavigation(),this.options.pagination&&this.createPagination(),this.moveCallbacks.forEach(E=>E(0))}createPagination(){let f=this.createWithClass("caroussel_pagination"),y=[];this.root.appendChild(f);for(let E=0;E<this.items.length;E=E+this.options.slidesToScroll){let N=this.createWithClass("caroussel__pagination__button");f.appendChild(N),N.addEventListener("click",()=>this.gotoItem(E)),y.push(N)}this.onMove(E=>{let N=y[Math.floor(E/this.options.slidesToScroll)];N&&(y.forEach(U=>U.classList.remove("caroussel__pagination__button--active")),N.classList.add("caroussel__pagination__button--active"))})}createNavigation(){let f=this.createWithClass("caroussel__next"),y=this.createWithClass("caroussel__prev");this.root.appendChild(f),this.root.appendChild(y),f.addEventListener("click",this.next.bind(this)),y.addEventListener("click",this.prev.bind(this)),this.onMove(E=>{E===0?y.classList.add("caroussel__prev--hidden"):y.classList.remove("caroussel__prev--hidden"),this.items[this.currentItem+this.options.slidesVisible]===void 0?f.classList.add("caroussel__next--hidden"):f.classList.remove("caroussel__next--hidden")})}gotoItem(f){f<0?f=this.items.length-this.options.slidesVisible:(f>=this.items.length||this.items[this.currentItem+this.options.slidesVisible]===void 0&&f>this.currentItem)&&(f=0);let y=f*-100/this.items.length;this.container.style.transform="translate3d("+y+"%, 0, 0)",this.currentItem=f,this.moveCallbacks.forEach(E=>E(f))}onMove(f){this.moveCallbacks.push(f)}next(){this.gotoItem(this.currentItem+this.options.slidesToScroll)}prev(){this.gotoItem(this.currentItem-this.options.slidesToScroll)}setStyle(){let f=this.childrens.length/this.options.slidesVisible;this.items.forEach(y=>{y.style.width=1/this.options.slidesVisible/f*100+"%"}),this.container.style.width=f*100+"%"}createWithClass(f){let y=document.createElement("div");return y.setAttribute("class",f),y}}document.addEventListener("turbo:load",function(){new cae(document.querySelector(".image"),{slidesVisible:1,slidesToScroll:1})});document.addEventListener("turbo:load",function(){const C=document.querySelector(".lightbox"),f=document.querySelector(".close-lightbox");function y(U){C.querySelector(".lightbox-img").src=U,C.style.display="flex"}function E(){C.style.display="none"}function N(){window.innerWidth>=1025&&document.querySelectorAll(".caroussel img").forEach(U=>U.addEventListener("click",()=>y(U.src)))}document.addEventListener("keydown",U=>{(U.key==="Escape"||U.key==="esc")&&E()}),f.addEventListener("click",()=>{E()}),N(),window.addEventListener("resize",N)});document.addEventListener("turbo:load",()=>{const C=new IntersectionObserver(f=>{f.forEach(y=>{y.isIntersecting&&y.target.classList.add("visible")})});document.querySelectorAll(".scroll-animate").forEach(f=>C.observe(f))});iY();
